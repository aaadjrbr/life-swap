const _0x3b0fb3=_0x4a3e;(function(_0x31ceb1,_0x334b27){const _0x4baaac=_0x4a3e,_0x5f3b37=_0x31ceb1();while(!![]){try{const _0x37ccae=parseInt(_0x4baaac(0x268))/0x1+parseInt(_0x4baaac(0x4c7))/0x2+-parseInt(_0x4baaac(0x2d5))/0x3*(parseInt(_0x4baaac(0x2e0))/0x4)+-parseInt(_0x4baaac(0x1cd))/0x5+-parseInt(_0x4baaac(0x26d))/0x6*(-parseInt(_0x4baaac(0x480))/0x7)+parseInt(_0x4baaac(0x4b7))/0x8+parseInt(_0x4baaac(0x457))/0x9*(-parseInt(_0x4baaac(0x4bf))/0xa);if(_0x37ccae===_0x334b27)break;else _0x5f3b37['push'](_0x5f3b37['shift']());}catch(_0x50ccdb){_0x5f3b37['push'](_0x5f3b37['shift']());}}}(_0x24e9,0xc934c));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';import{getFirestore,setDoc,doc,getDoc,updateDoc,addDoc,collection,query,where,getDocs,limit,deleteDoc,limitToLast,startAfter,endBefore,orderBy,enableIndexedDbPersistence,runTransaction,writeBatch,deleteField}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL,deleteObject}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';import{toggleComments}from'./commentsReplies.js';const firebaseConfig={'apiKey':_0x3b0fb3(0x2a7),'authDomain':_0x3b0fb3(0x2cf),'projectId':_0x3b0fb3(0x1f5),'storageBucket':_0x3b0fb3(0x160),'messagingSenderId':_0x3b0fb3(0x185),'appId':'1:475311181000:web:32d03d80f70081bfb629fd','measurementId':_0x3b0fb3(0x366)},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),storage=getStorage(app);enableIndexedDbPersistence(db)[_0x3b0fb3(0x2b6)](()=>{const _0x2b039c=_0x3b0fb3;console['log'](_0x2b039c(0x455));})['catch'](_0x8a08e3=>{const _0x2a3136=_0x3b0fb3;if(_0x8a08e3['code']===_0x2a3136(0x325))console[_0x2a3136(0x2b0)](_0x2a3136(0x2e5));else _0x8a08e3[_0x2a3136(0x2ab)]==='unimplemented'?console[_0x2a3136(0x2b0)](_0x2a3136(0x188)):console[_0x2a3136(0x290)](_0x2a3136(0x37b),_0x8a08e3);});export let communityId;export let userDataCache={};const USER_CACHE_TTL=0x3c*0x3c*0x3e8,USER_CACHE_MAX_SIZE=0x64;function getCachedUser(_0x2ec758){const _0x6efaa3=_0x3b0fb3,_0x1fbc5c=userDataCache[_0x2ec758];if(!_0x1fbc5c)return null;if(Date['now']()>_0x1fbc5c[_0x6efaa3(0x39d)])return delete userDataCache[_0x2ec758],console['log'](_0x6efaa3(0x4c0)+_0x2ec758),null;return _0x1fbc5c[_0x6efaa3(0x2db)];}function setCachedUser(_0x58ebdb,_0x2bfeb8){const _0x254806=_0x3b0fb3;if(Object[_0x254806(0x3f6)](userDataCache)[_0x254806(0x2fe)]>=USER_CACHE_MAX_SIZE){const _0x150445=Object[_0x254806(0x3f6)](userDataCache)[0x0];delete userDataCache[_0x150445],console[_0x254806(0x375)]('Cache\x20size\x20limit\x20hit,\x20removed\x20'+_0x150445);}userDataCache[_0x58ebdb]={'value':_0x2bfeb8,'expiry':Date[_0x254806(0x42a)]()+USER_CACHE_TTL},console[_0x254806(0x375)](_0x254806(0x221)+_0x58ebdb+_0x254806(0x178)+new Date(Date['now']()+USER_CACHE_TTL));}let currentPage=0x1;export const postsPerPage=0xa;let lastMemberDoc=null;export let carouselPostIds=[];let carouselIndex=0x0;export const postsPerCarousel=window[_0x3b0fb3(0x1a9)]<0x300?0x2:0x4;export let isLoading=![];let lastPostDoc=null,totalPosts=0x0;export const postsPerLoad=0xa;let loadedPostIds=new Set(),initialPostsLoaded=![],isSearching=![],postCache=new Map();export const POSTS_PER_LOAD=0x14;let isFetching=![],allNotifications=[],lastDoc=null,displayedCount=0x0;const categoryDisplayMap={'clothing_accessories':'Clothing\x20&\x20Accessories','electronics':_0x3b0fb3(0x39b),'furniture_decor':_0x3b0fb3(0x4bc),'kitchen_dining':_0x3b0fb3(0x2ea),'tools_diy':_0x3b0fb3(0x30e),'books_media':'Books,\x20Movies\x20&\x20Music','arts_crafts':_0x3b0fb3(0x40b),'toys_games':_0x3b0fb3(0x286),'sports_outdoors':_0x3b0fb3(0x3a0),'health_beauty':'Health\x20&\x20Beauty','baby_kids':_0x3b0fb3(0x3f3),'pet_supplies':_0x3b0fb3(0x399),'misc':_0x3b0fb3(0x218)};document['addEventListener'](_0x3b0fb3(0x414),()=>{onAuthStateChanged(auth,async _0x291c0f=>{const _0x3cc080=_0x4a3e;if(!_0x291c0f){console[_0x3cc080(0x375)](_0x3cc080(0x274)),window['location'][_0x3cc080(0x18d)]=_0x3cc080(0x2b4);return;}console[_0x3cc080(0x375)]('User\x20authenticated:',_0x291c0f[_0x3cc080(0x3c5)]);const _0x117cf1=new URLSearchParams(window[_0x3cc080(0x1ec)]['search']);communityId=_0x117cf1[_0x3cc080(0x338)]('id'),window[_0x3cc080(0x24b)]=communityId;if(!communityId){console['log'](_0x3cc080(0x1e0)),window[_0x3cc080(0x1ec)]['href']='/index.html';return;}postCache[_0x3cc080(0x3d1)](),loadedPostIds[_0x3cc080(0x3d1)](),console[_0x3cc080(0x375)]('Cleared\x20post\x20caches\x20for\x20community\x20'+communityId),await initializeUserSwapInfo();const _0x264853=await getCommData();if(!_0x264853){alert(_0x3cc080(0x216)),window['location'][_0x3cc080(0x18d)]=_0x3cc080(0x4b2);return;}const _0x4f9fdc=_0x264853[_0x3cc080(0x18a)][_0x3cc080(0x352)](_0x291c0f[_0x3cc080(0x3c5)]),_0x1d5571=_0x264853[_0x3cc080(0x412)]||[],_0x312463=_0x264853['banStatus']||{},_0x1c5228=_0x1d5571[_0x3cc080(0x352)](_0x291c0f[_0x3cc080(0x3c5)])&&(_0x312463[_0x291c0f['uid']]===_0x3cc080(0x400)||!_0x312463[_0x291c0f[_0x3cc080(0x3c5)]]);if(_0x1c5228){let _0x45c83d=_0x3cc080(0x373),_0x52c708=_0x264853[_0x3cc080(0x198)]?.[_0x291c0f[_0x3cc080(0x3c5)]]||'No\x20reason\x20provided';if(_0x264853[_0x3cc080(0x32a)]){const _0x5ad9a9=await getDoc(doc(db,_0x3cc080(0x1b4),_0x264853[_0x3cc080(0x32a)]));_0x5ad9a9[_0x3cc080(0x150)]()&&_0x5ad9a9[_0x3cc080(0x1fe)]()[_0x3cc080(0x37e)]&&(_0x45c83d=_0x5ad9a9[_0x3cc080(0x1fe)]()['email']);}if(_0x45c83d===_0x3cc080(0x373)&&_0x264853['admins']?.[_0x3cc080(0x2fe)]>0x0){const _0x5f3780=await getDoc(doc(db,_0x3cc080(0x1b4),_0x264853[_0x3cc080(0x479)][0x0]));_0x5f3780[_0x3cc080(0x150)]()&&_0x5f3780['data']()[_0x3cc080(0x37e)]&&(_0x45c83d=_0x5f3780[_0x3cc080(0x1fe)]()[_0x3cc080(0x37e)]);}_0x312463[_0x291c0f[_0x3cc080(0x3c5)]]===_0x3cc080(0x400)&&!_0x264853[_0x3cc080(0x198)]?.[_0x291c0f['uid']]&&(_0x52c708=_0x3cc080(0x47a)+_0x45c83d+'\x20or\x20submit\x20an\x20appeal\x20below.');document['querySelector'](_0x3cc080(0x367))[_0x3cc080(0x396)]=_0x3cc080(0x4a0)+_0x52c708+_0x3cc080(0x1f2)+_0x45c83d+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22banAppealForm\x22\x20class=\x22ban-appeal-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20';const _0x2d368c=document[_0x3cc080(0x34f)](_0x3cc080(0x2ad));_0x2d368c[_0x3cc080(0x4a9)](_0x3cc080(0x155),async _0x16f078=>{const _0x8621d1=_0x3cc080;_0x16f078[_0x8621d1(0x1af)]();const _0x1ab5ec=_0x2d368c[_0x8621d1(0x2f2)](_0x8621d1(0x3cb))[_0x8621d1(0x2db)][_0x8621d1(0x369)]();if(_0x1ab5ec){const _0x273806=await getDoc(doc(db,'users',_0x291c0f[_0x8621d1(0x3c5)])),_0x29e334=_0x273806[_0x8621d1(0x150)]()?_0x273806[_0x8621d1(0x1fe)]():{'username':_0x8621d1(0x23d)+_0x291c0f[_0x8621d1(0x3c5)][_0x8621d1(0x2f5)](0x0,0x8)};await addDoc(collection(db,'communities',communityId,_0x8621d1(0x493)),{'userId':_0x291c0f[_0x8621d1(0x3c5)],'username':_0x29e334['username'],'message':_0x1ab5ec,'timestamp':new Date()}),alert(_0x8621d1(0x2af)),_0x2d368c[_0x8621d1(0x2f2)]('textarea')['disabled']=!![],_0x2d368c[_0x8621d1(0x2f2)](_0x8621d1(0x30a))['disabled']=!![],_0x2d368c[_0x8621d1(0x2f2)](_0x8621d1(0x30a))['textContent']=_0x8621d1(0x1c8);}});return;}else{if(!_0x4f9fdc){document[_0x3cc080(0x2f2)](_0x3cc080(0x367))[_0x3cc080(0x396)]=_0x3cc080(0x489)+communityId+_0x3cc080(0x440),document['getElementById'](_0x3cc080(0x17b))['addEventListener'](_0x3cc080(0x372),_0x2ab500=>{const _0x410d36=_0x3cc080;_0x2ab500[_0x410d36(0x1af)](),navigator[_0x410d36(0x283)][_0x410d36(0x251)](communityId)[_0x410d36(0x2b6)](()=>{const _0x1b5c2a=_0x410d36;alert(_0x1b5c2a(0x18b)),setTimeout(()=>{const _0x22929f=_0x1b5c2a;window['location'][_0x22929f(0x18d)]=_0x22929f(0x2e2);},0x1f4);})[_0x410d36(0x349)](_0xc23b68=>{const _0x3d28f3=_0x410d36;console[_0x3d28f3(0x290)](_0x3d28f3(0x2b7),_0xc23b68),alert('Failed\x20to\x20copy\x20ID.\x20Please\x20copy\x20it\x20manually:\x20'+communityId);});});return;}}document[_0x3cc080(0x4a9)](_0x3cc080(0x425),()=>{const _0x1d05ff=_0x3cc080;document[_0x1d05ff(0x469)]===_0x1d05ff(0x1df)?(console['log'](_0x1d05ff(0x20e)),updateNotificationBadge(_0x291c0f[_0x1d05ff(0x3c5)]),updateChatBadge(_0x291c0f[_0x1d05ff(0x3c5)])):console['log'](_0x1d05ff(0x41f));}),document[_0x3cc080(0x34f)](_0x3cc080(0x189))[_0x3cc080(0x19e)]=_0x264853[_0x3cc080(0x2fb)];const _0x18b26c=_0x264853[_0x3cc080(0x161)]?new Date(_0x264853[_0x3cc080(0x161)][_0x3cc080(0x1a8)]())['toLocaleString']('en-US',{'month':'long','day':'numeric','year':_0x3cc080(0x287)}):_0x3cc080(0x437);document[_0x3cc080(0x34f)](_0x3cc080(0x161))[_0x3cc080(0x19e)]=_0x18b26c;const _0x27962f=await fetchUserData(_0x264853[_0x3cc080(0x32a)]);document[_0x3cc080(0x34f)](_0x3cc080(0x2f8))[_0x3cc080(0x19e)]=_0x27962f[_0x3cc080(0x2fb)]||_0x3cc080(0x1b2),document[_0x3cc080(0x34f)](_0x3cc080(0x2f8))[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>viewProfile(_0x264853[_0x3cc080(0x32a)])),document[_0x3cc080(0x34f)](_0x3cc080(0x24b))[_0x3cc080(0x19e)]=_0x3cc080(0x473)+communityId,document[_0x3cc080(0x34f)]('totalUsers')[_0x3cc080(0x19e)]=_0x264853[_0x3cc080(0x2f4)]||_0x264853[_0x3cc080(0x18a)][_0x3cc080(0x2fe)],document['getElementById'](_0x3cc080(0x412))[_0x3cc080(0x19e)]=(_0x264853[_0x3cc080(0x412)]||[])[_0x3cc080(0x2fe)];const _0xa2ea6b=document[_0x3cc080(0x34f)]('communityActions');let _0x345db1=0x0;if(_0x291c0f[_0x3cc080(0x3c5)]){const _0x30bd8d=query(collection(db,'profileRequests'),where(_0x3cc080(0x38d),'==',_0x291c0f['uid']),where(_0x3cc080(0x315),'==','pending'));try{const _0x206bc9=await getDocs(_0x30bd8d);_0x345db1=_0x206bc9['size'];}catch(_0x5bf49b){console[_0x3cc080(0x290)](_0x3cc080(0x319),_0x5bf49b);}}else console['error'](_0x3cc080(0x152));_0xa2ea6b['innerHTML']=_0x3cc080(0x1e2)+(_0x264853[_0x3cc080(0x479)]&&_0x264853[_0x3cc080(0x479)][_0x3cc080(0x352)](_0x291c0f[_0x3cc080(0x3c5)])||_0x264853['creatorId']===_0x291c0f[_0x3cc080(0x3c5)]?_0x3cc080(0x3f9):'')+_0x3cc080(0x291)+(_0x264853[_0x3cc080(0x32a)]===_0x291c0f[_0x3cc080(0x3c5)]?_0x3cc080(0x4c5):'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x264853[_0x3cc080(0x18a)][_0x3cc080(0x352)](_0x291c0f[_0x3cc080(0x3c5)])&&_0x264853[_0x3cc080(0x32a)]!==_0x291c0f[_0x3cc080(0x3c5)]?'<button\x20class=\x22leave-btn\x22\x20id=\x22leaveCommunityBtn\x22>Leave\x20Community</button>':'')+_0x3cc080(0x291)+(_0x264853['admins']&&_0x264853[_0x3cc080(0x479)][_0x3cc080(0x352)](_0x291c0f['uid'])||_0x264853[_0x3cc080(0x32a)]===_0x291c0f[_0x3cc080(0x3c5)]?_0x3cc080(0x356):'')+_0x3cc080(0x291)+(_0x264853[_0x3cc080(0x479)]&&_0x264853[_0x3cc080(0x479)][_0x3cc080(0x352)](_0x291c0f[_0x3cc080(0x3c5)])||_0x264853[_0x3cc080(0x32a)]===_0x291c0f[_0x3cc080(0x3c5)]?_0x3cc080(0x421):'')+_0x3cc080(0x4cd)+(_0x345db1>0x0?_0x3cc080(0x171)+_0x345db1+_0x3cc080(0x2ac):'')+_0x3cc080(0x433),await new Promise(_0x5dc024=>setTimeout(_0x5dc024,0x0));_0x291c0f[_0x3cc080(0x3c5)]?await updateProfileRequestsUI(_0x291c0f[_0x3cc080(0x3c5)]):console[_0x3cc080(0x290)](_0x3cc080(0x361));const _0x4d727f=document[_0x3cc080(0x34f)]('postSearch'),_0x5a2a8e=document['getElementById'](_0x3cc080(0x2a9)),_0x173409=document[_0x3cc080(0x34f)](_0x3cc080(0x3f4)),_0x14308f=document[_0x3cc080(0x34f)]('offeringFilter'),_0x3ed0e8=document[_0x3cc080(0x34f)](_0x3cc080(0x328)),_0x2e8e4f=document[_0x3cc080(0x34f)](_0x3cc080(0x227)),_0x29ec93=document['getElementById'](_0x3cc080(0x491)),_0x20c6a5=document[_0x3cc080(0x34f)](_0x3cc080(0x3d7)),_0x4322ae=document[_0x3cc080(0x34f)](_0x3cc080(0x447)),_0x5c1701=document[_0x3cc080(0x34f)](_0x3cc080(0x2cb)),_0x1a5379=document[_0x3cc080(0x34f)](_0x3cc080(0x2bb)),_0x3f4781=document[_0x3cc080(0x34f)](_0x3cc080(0x1de)),_0x3a8a6d=document[_0x3cc080(0x34f)](_0x3cc080(0x3c8)),_0x48d674=document[_0x3cc080(0x34f)]('closeProfileBtn'),_0x5b5c95=document[_0x3cc080(0x34f)]('closeMembersBtn'),_0x55835d=document[_0x3cc080(0x34f)]('closeBannedBtn'),_0x414a8b=document[_0x3cc080(0x34f)](_0x3cc080(0x27b)),_0x409fa2=document[_0x3cc080(0x34f)](_0x3cc080(0x2ba)),_0x2b2549=document[_0x3cc080(0x34f)](_0x3cc080(0x322)),_0x28e725=document[_0x3cc080(0x34f)](_0x3cc080(0x21b)),_0x359654=document[_0x3cc080(0x34f)](_0x3cc080(0x3ba)),_0x47e5c8=document[_0x3cc080(0x34f)](_0x3cc080(0x4cf)),_0x37cd2f=document[_0x3cc080(0x34f)](_0x3cc080(0x2bd)),_0x186c68=document[_0x3cc080(0x34f)](_0x3cc080(0x4ba)),_0x24568c=document[_0x3cc080(0x34f)](_0x3cc080(0x157)),_0x50cd06=document['getElementById']('postSearch'),_0x418322=document['getElementById'](_0x3cc080(0x1c9)),_0x9c51f=document[_0x3cc080(0x34f)](_0x3cc080(0x141)),_0x4af50c=document['getElementById'](_0x3cc080(0x1f9));_0x4d727f&&_0x4d727f['addEventListener'](_0x3cc080(0x219),debounce(_0x2fd9e3=>{const _0x3b0ddf=_0x3cc080;searchPostsById(_0x2fd9e3[_0x3b0ddf(0x146)][_0x3b0ddf(0x2db)]);},0x12c));_0x418322[_0x3cc080(0x4a9)](_0x3cc080(0x372),async()=>{const _0x4d5368=_0x3cc080;try{const _0xb8a5a6=await navigator[_0x4d5368(0x283)][_0x4d5368(0x46a)]();_0x50cd06[_0x4d5368(0x2db)]=_0xb8a5a6,searchPostsById(_0xb8a5a6);}catch(_0x1b85df){console[_0x4d5368(0x290)](_0x4d5368(0x3ae),_0x1b85df),alert('Couldn’t\x20paste—check\x20clipboard\x20permissions!');}}),_0x9c51f[_0x3cc080(0x4a9)]('click',()=>{const _0x5401d0=_0x3cc080;_0x50cd06[_0x5401d0(0x2db)]='',searchPostsById('');});_0x5a2a8e&&_0x5a2a8e[_0x3cc080(0x4a9)]('change',()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x173409&&_0x173409[_0x3cc080(0x4a9)](_0x3cc080(0x4b8),()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x14308f&&_0x14308f[_0x3cc080(0x4a9)](_0x3cc080(0x4b8),()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});if(_0x3ed0e8)_0x3ed0e8['addEventListener'](_0x3cc080(0x372),()=>slideCarousel(-0x1));if(_0x2e8e4f)_0x2e8e4f[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>slideCarousel(0x1));if(_0x29ec93)_0x29ec93[_0x3cc080(0x4a9)](_0x3cc080(0x372),copyCommunityId);if(_0x20c6a5)_0x20c6a5[_0x3cc080(0x4a9)](_0x3cc080(0x372),createPost);if(_0x4322ae)_0x4322ae[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>viewMembers(communityId));if(_0x5c1701)_0x5c1701['addEventListener'](_0x3cc080(0x372),()=>viewBannedUsers(communityId));if(_0x1a5379)_0x1a5379[_0x3cc080(0x4a9)]('click',()=>deleteCommunity(communityId));if(_0x3f4781)_0x3f4781[_0x3cc080(0x4a9)]('click',()=>leaveCommunity(communityId));if(_0x3a8a6d)_0x3a8a6d[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>viewProfileViewRequests(_0x291c0f[_0x3cc080(0x3c5)]));if(_0x48d674)_0x48d674[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>closeModal(_0x3cc080(0x3ff)));if(_0x5b5c95)_0x5b5c95[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>closeModal(_0x3cc080(0x44e)));if(_0x55835d)_0x55835d[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>closeModal(_0x3cc080(0x165)));if(_0x414a8b)_0x414a8b[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>closeModal(_0x3cc080(0x494)));if(_0x409fa2)_0x409fa2[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>openNotificationsModal(_0x291c0f['uid']));if(_0x2b2549)_0x2b2549[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>closeModal(_0x3cc080(0x2a2)));if(_0x28e725)_0x28e725[_0x3cc080(0x4a9)](_0x3cc080(0x372),clearNotifications);if(_0x359654)_0x359654[_0x3cc080(0x4a9)]('click',()=>loadPosts(communityId,!![]));if(_0x47e5c8)_0x47e5c8[_0x3cc080(0x4a9)]('click',()=>editCommunityName(communityId));if(_0x37cd2f)_0x37cd2f[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>viewCommunities(_0x291c0f[_0x3cc080(0x3c5)]));if(_0x186c68)_0x186c68[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>viewSavedPosts(_0x291c0f[_0x3cc080(0x3c5)]));_0x24568c&&(_0x24568c[_0x3cc080(0x4b6)](_0x3cc080(0x372),_0x290ca0),_0x24568c[_0x3cc080(0x4a9)](_0x3cc080(0x372),_0x290ca0));_0x4af50c&&_0x4af50c[_0x3cc080(0x4a9)](_0x3cc080(0x372),()=>viewFollowers(_0x291c0f[_0x3cc080(0x3c5)]));async function _0x290ca0(){const _0x36c872=_0x3cc080;await updateChatBadge(_0x291c0f[_0x36c872(0x3c5)],!![]),await window[_0x36c872(0x4d7)](communityId),await updateChatBadge(_0x291c0f['uid']);}setupLocationAutocomplete(),setupCommunitySelection(),loadYourPosts(_0x291c0f[_0x3cc080(0x3c5)]),loadPosts(communityId,![]),loadCarouselPosts(communityId),updateNotificationBadge(_0x291c0f['uid']),await updateChatBadge(_0x291c0f[_0x3cc080(0x3c5)]),await loadAdminReportSummary(_0x291c0f[_0x3cc080(0x3c5)]);});});async function initializeUserSwapInfo(){const _0x139fc3=_0x3b0fb3,_0xee2dae=auth[_0x139fc3(0x243)];if(!_0xee2dae)return;if(!communityId){console[_0x139fc3(0x290)]('communityId\x20is\x20undefined,\x20cannot\x20initialize\x20user\x20swap\x20info');return;}const _0x165821=doc(db,_0x139fc3(0x1b4),_0xee2dae[_0x139fc3(0x3c5)]);let _0x4a6fe7=await getDoc(_0x165821),_0x19f33a;console['log'](_0x139fc3(0x40c)+_0xee2dae['uid']);if(!_0x4a6fe7[_0x139fc3(0x150)]())_0x19f33a={'name':_0xee2dae[_0x139fc3(0x17d)]||'Unnamed\x20User','username':_0x139fc3(0x23d)+_0xee2dae[_0x139fc3(0x3c5)][_0x139fc3(0x2f5)](0x0,0x8),'profilePhoto':_0xee2dae[_0x139fc3(0x2a0)]||null,'email':_0xee2dae[_0x139fc3(0x37e)]||null,'city':null,'phone':null,'communityIds':[communityId],'swaps':0x0,'createdAt':new Date()},console[_0x139fc3(0x375)](_0x139fc3(0x393),_0x19f33a),await setDoc(_0x165821,_0x19f33a),console[_0x139fc3(0x375)](_0x139fc3(0x3d4)+_0x19f33a['username']);else{_0x19f33a=_0x4a6fe7[_0x139fc3(0x1fe)](),console[_0x139fc3(0x375)](_0x139fc3(0x415),_0x19f33a);typeof _0x19f33a[_0x139fc3(0x2d0)]===_0x139fc3(0x38e)&&(console[_0x139fc3(0x375)](_0x139fc3(0x15a)),await updateDoc(_0x165821,{'swaps':0x0}),_0x19f33a[_0x139fc3(0x2d0)]=0x0);!Array[_0x139fc3(0x3fd)](_0x19f33a['communityIds'])&&(console[_0x139fc3(0x375)](_0x139fc3(0x42b)),_0x19f33a[_0x139fc3(0x186)]=[],await updateDoc(_0x165821,{'communityIds':_0x19f33a[_0x139fc3(0x186)]}));if(!_0x19f33a[_0x139fc3(0x186)][_0x139fc3(0x352)](communityId)){console['log'](_0x139fc3(0x17e)+communityId+_0x139fc3(0x2f9)),_0x19f33a[_0x139fc3(0x186)][_0x139fc3(0x2d1)](communityId);try{console['log']('Updating\x20communityIds\x20with:',_0x19f33a[_0x139fc3(0x186)]),await updateDoc(_0x165821,{'communityIds':_0x19f33a[_0x139fc3(0x186)]});}catch(_0x2ddb23){console[_0x139fc3(0x290)]('Error\x20updating\x20communityIds:',_0x2ddb23),console[_0x139fc3(0x375)](_0x139fc3(0x458),_0x19f33a);throw _0x2ddb23;}}}const _0x4a1b63=document[_0x139fc3(0x34f)](_0x139fc3(0x381)),_0x32efe2=document['getElementById'](_0x139fc3(0x409));!_0x19f33a['username']&&(console['error'](_0x139fc3(0x340)),_0x19f33a['username']=_0x139fc3(0x23d)+_0xee2dae[_0x139fc3(0x3c5)][_0x139fc3(0x2f5)](0x0,0x8),await updateDoc(_0x165821,{'username':_0x19f33a[_0x139fc3(0x48c)]})),_0x4a1b63[_0x139fc3(0x19e)]=_0x19f33a[_0x139fc3(0x48c)],_0x32efe2[_0x139fc3(0x19e)]=_0x19f33a[_0x139fc3(0x2d0)],_0x4a1b63[_0x139fc3(0x4a9)](_0x139fc3(0x372),()=>{const _0x18ab9a=_0x139fc3;navigator[_0x18ab9a(0x283)][_0x18ab9a(0x251)](_0x19f33a[_0x18ab9a(0x48c)])[_0x18ab9a(0x2b6)](()=>alert('Username\x20copied\x20to\x20clipboard!'))[_0x18ab9a(0x349)](_0x3f67eb=>console[_0x18ab9a(0x290)](_0x18ab9a(0x3fb),_0x3f67eb));});}async function updateChatBadge(_0x476706,_0x434698=![]){const _0x4067a3=_0x3b0fb3,_0x1c127f=query(collection(db,_0x4067a3(0x1b4),_0x476706,_0x4067a3(0x2b1)),where(_0x4067a3(0x3a3),'==',!![])),_0xadbf10=await getDocs(_0x1c127f),_0x566bd3=document[_0x4067a3(0x34f)](_0x4067a3(0x157));if(_0x434698&&_0xadbf10[_0x4067a3(0x481)]>0x0){const _0x480028=writeBatch(db);_0xadbf10[_0x4067a3(0x3ab)][_0x4067a3(0x2b3)](_0x21f4d5=>{const _0x2b93dd=_0x4067a3;_0x480028[_0x2b93dd(0x26b)](_0x21f4d5[_0x2b93dd(0x1a7)],{'hasUnread':![]});}),await _0x480028['commit'](),console[_0x4067a3(0x375)](_0x4067a3(0x193),_0xadbf10[_0x4067a3(0x481)]);}const _0x40cdac=_0x434698?![]:_0xadbf10[_0x4067a3(0x481)]>0x0;_0x566bd3&&(_0x566bd3[_0x4067a3(0x396)]=_0x4067a3(0x427)+(_0x40cdac?_0x4067a3(0x1c2):''));}async function updateProfileRequestsUI(_0x114b8c){const _0x33eb84=_0x3b0fb3,_0x78740d=collection(db,_0x33eb84(0x1b4),_0x114b8c,_0x33eb84(0x4ac)),_0x4fc6bb=query(_0x78740d,where('status','==',_0x33eb84(0x3b3))),_0x13c393=await getDocs(_0x4fc6bb),_0x199bb0=_0x13c393['size'],_0x3b3267=document[_0x33eb84(0x34f)](_0x33eb84(0x35e));_0x3b3267?_0x3b3267[_0x33eb84(0x396)]=_0x199bb0>0x0?_0x33eb84(0x15b)+_0x199bb0+')</button>':'':console['error'](_0x33eb84(0x3e9));document[_0x33eb84(0x34f)](_0x33eb84(0x3aa))&&document[_0x33eb84(0x34f)](_0x33eb84(0x3aa))[_0x33eb84(0x4a9)](_0x33eb84(0x372),()=>viewProfileViewRequests(_0x114b8c));const _0x21fc5c=document['getElementById'](_0x33eb84(0x33a));if(_0x21fc5c){const _0x300ed3=query(_0x78740d,where('status','==',_0x33eb84(0x3b3))),_0x1799c2=await getDocs(_0x300ed3),_0x28ae55=_0x1799c2[_0x33eb84(0x481)],_0x3247b7=_0x21fc5c[_0x33eb84(0x2f2)](_0x33eb84(0x4c2));_0x3247b7&&(_0x3247b7[_0x33eb84(0x396)]=_0x33eb84(0x44d)+(_0x28ae55>0x0?_0x33eb84(0x171)+_0x28ae55+_0x33eb84(0x2ac):''));}}function closeModal(_0x1b2ee2){const _0x2d8af8=_0x3b0fb3,_0x42d978=document[_0x2d8af8(0x34f)](_0x1b2ee2);_0x42d978[_0x2d8af8(0x38f)][_0x2d8af8(0x4d4)](_0x2d8af8(0x26a)),_0x42d978[_0x2d8af8(0x145)]['display']=_0x2d8af8(0x31f);const _0x5743ac=Array[_0x2d8af8(0x309)](document[_0x2d8af8(0x40d)](_0x2d8af8(0x30d)));if(_0x5743ac[_0x2d8af8(0x2fe)]>0x0)_0x5743ac[_0x5743ac['length']-0x1][_0x2d8af8(0x145)][_0x2d8af8(0x430)]='flex';document['querySelectorAll']('.suggestions')[_0x2d8af8(0x2b3)](_0x5b5700=>_0x5b5700[_0x2d8af8(0x38f)][_0x2d8af8(0x4d4)](_0x2d8af8(0x26a)));}function copyCommunityId(){const _0x883517=_0x3b0fb3;navigator[_0x883517(0x283)][_0x883517(0x251)](communityId)[_0x883517(0x2b6)](()=>alert('Community\x20ID\x20copied!'))['catch'](_0x281ab4=>console[_0x883517(0x290)]('Failed\x20to\x20copy:',_0x281ab4));}function copyPostId(_0x483e3b){const _0x14f575=_0x3b0fb3;navigator[_0x14f575(0x283)][_0x14f575(0x251)](_0x483e3b)[_0x14f575(0x2b6)](()=>alert('Post\x20ID\x20copied!'))[_0x14f575(0x349)](_0xdfb726=>console[_0x14f575(0x290)](_0x14f575(0x2d6),_0xdfb726));}async function deleteCommunity(_0x3b3096){const _0x19f774=_0x3b0fb3;if(!confirm(_0x19f774(0x3bf)))return;const _0x141176=doc(db,'communities',_0x3b3096),_0x358e64=[_0x19f774(0x18a),'posts','banAppeals',_0x19f774(0x24c)],_0x5a18c6=document['getElementById'](_0x19f774(0x162)),_0x8fd778=document[_0x19f774(0x32c)],_0x4478f3=0x5;let _0x3e0861=0x0;function _0x1caee3(_0x5e3e9a,_0x5aecfa=_0x19f774(0x4a2)){const _0x2a644f=_0x19f774;_0x5a18c6&&(_0x5a18c6[_0x2a644f(0x19e)]=_0x5e3e9a,_0x5a18c6[_0x2a644f(0x289)]=_0x2a644f(0x19d)+(_0x5aecfa===_0x2a644f(0x4a2)?_0x2a644f(0x2cc):_0x5aecfa),_0x5a18c6[_0x2a644f(0x145)]['display']=_0x2a644f(0x3b6)),_0x5aecfa===_0x2a644f(0x4a2)?_0x8fd778[_0x2a644f(0x38f)][_0x2a644f(0x4d4)](_0x2a644f(0x2cc)):_0x8fd778['classList'][_0x2a644f(0x1f3)](_0x2a644f(0x2cc)),console[_0x2a644f(0x375)](_0x2a644f(0x4b1)+_0x5e3e9a);}_0x1caee3('Initiating\x20community\x20deletion\x20process...\x20Please\x20wait.',_0x19f774(0x4a2));try{console[_0x19f774(0x375)](_0x19f774(0x3b7),db[_0x19f774(0x1b3)]()),console[_0x19f774(0x375)](_0x19f774(0x23c),_0x141176[_0x19f774(0x416)]);const _0x183d05=await getDoc(_0x141176);console[_0x19f774(0x375)](_0x19f774(0x4a3),_0x183d05[_0x19f774(0x150)]());if(_0x183d05[_0x19f774(0x150)]())console[_0x19f774(0x375)](_0x19f774(0x17f),_0x183d05['data']());else{_0x1caee3(_0x19f774(0x269),_0x19f774(0x252));return;}async function _0x1b5b1c(){const _0x330a56=_0x19f774,_0xdda0de=Date[_0x330a56(0x42a)]();console[_0x330a56(0x375)](_0x330a56(0x42c),new Date()['toISOString']()),await runTransaction(db,async _0x774364=>{const _0x3ea005=_0x330a56,_0x5ab152=await _0x774364[_0x3ea005(0x338)](_0x141176);if(!_0x5ab152[_0x3ea005(0x150)]()){console[_0x3ea005(0x375)](_0x3ea005(0x1ef));return;}for(const _0x594c14 of _0x358e64){console[_0x3ea005(0x375)](_0x3ea005(0x389)+_0x594c14);const _0xebe47e=collection(_0x141176,_0x594c14),_0x1914d6=await getDocs(_0xebe47e);console[_0x3ea005(0x375)](_0x3ea005(0x4b1)+_0x594c14+'\x20contains\x20'+_0x1914d6[_0x3ea005(0x481)]+'\x20documents'),_0x1914d6[_0x3ea005(0x2b3)](_0xe89297=>{const _0x30a9e0=_0x3ea005;_0x774364[_0x30a9e0(0x156)](_0xe89297[_0x30a9e0(0x1a7)]);}),console[_0x3ea005(0x375)]('[DeleteCommunity]\x20Queued\x20'+_0x1914d6[_0x3ea005(0x481)]+'\x20documents\x20in\x20'+_0x594c14+_0x3ea005(0x1cf));}_0x774364[_0x3ea005(0x156)](_0x141176),console[_0x3ea005(0x375)]('[DeleteCommunity]\x20Main\x20community\x20document\x20queued\x20for\x20deletion');}),console[_0x330a56(0x375)](_0x330a56(0x49c),(Date[_0x330a56(0x42a)]()-_0xdda0de)/0x3e8,_0x330a56(0x266));}_0x1caee3('Deleting\x20community\x20data...'),await _0x1b5b1c();while(_0x3e0861<_0x4478f3){const _0x1ff636=await getDoc(_0x141176);console['log'](_0x19f774(0x21e)+(_0x3e0861+0x1)+'\x20-\x20Post-deletion\x20check\x20-\x20Exists:',_0x1ff636['exists']());!_0x1ff636[_0x19f774(0x150)]()?console[_0x19f774(0x375)](_0x19f774(0x41d)):console['log'](_0x19f774(0x342),_0x1ff636[_0x19f774(0x1fe)]());await new Promise(_0x40fdc3=>setTimeout(_0x40fdc3,0x7d0));const _0x1b78a1=await getDoc(_0x141176);console['log']('[DeleteCommunity]\x20Verification\x20'+(_0x3e0861+0x1)+_0x19f774(0x4ce),_0x1b78a1['exists']());if(!_0x1b78a1[_0x19f774(0x150)]()){console[_0x19f774(0x375)](_0x19f774(0x1f0));break;}else console[_0x19f774(0x290)](_0x19f774(0x3a2),_0x1b78a1[_0x19f774(0x1fe)]()),_0x3e0861++,_0x1caee3('Deletion\x20incomplete\x20-\x20Retrying\x20('+_0x3e0861+'/'+_0x4478f3+_0x19f774(0x1e1)),console[_0x19f774(0x375)](_0x19f774(0x1c7)+_0x3e0861+_0x19f774(0x2fa),new Date()[_0x19f774(0x33c)]()),await _0x1b5b1c();}if(_0x3e0861>=_0x4478f3)throw new Error(_0x19f774(0x1ed));resetCommDataCache(),console['log'](_0x19f774(0x456)),_0x1caee3(_0x19f774(0x3cd)+_0x3b3096+_0x19f774(0x1e7),'success'),setTimeout(()=>{const _0x5c4721=_0x19f774;window[_0x5c4721(0x1ec)][_0x5c4721(0x18d)]='./start.html';},0x7d0);}catch(_0x2de2f5){console[_0x19f774(0x290)]('[DeleteCommunity]\x20Deletion\x20process\x20failed:',_0x2de2f5),_0x1caee3(_0x19f774(0x48a)+_0x2de2f5[_0x19f774(0x2d9)],_0x19f774(0x290)),alert(_0x19f774(0x207));}}async function leaveCommunity(_0x29b8b4){const _0xdf431e=_0x3b0fb3;if(!confirm(_0xdf431e(0x1bb)))return;const _0x4fd7aa=auth[_0xdf431e(0x243)];if(!_0x4fd7aa){console['error'](_0xdf431e(0x154)),alert(_0xdf431e(0x25f));return;}const _0x467c29=doc(db,_0xdf431e(0x1b4),_0x4fd7aa[_0xdf431e(0x3c5)]),_0x234a35=doc(db,_0xdf431e(0x405),_0x29b8b4,'members',_0x4fd7aa[_0xdf431e(0x3c5)]);try{const _0x2742cf=writeBatch(db);_0x2742cf['delete'](_0x234a35),console[_0xdf431e(0x375)](_0xdf431e(0x230)+_0x4fd7aa[_0xdf431e(0x3c5)]+_0xdf431e(0x2d2)+_0x29b8b4);const _0x108175=await getDoc(_0x467c29);if(!_0x108175[_0xdf431e(0x150)]())throw new Error(_0xdf431e(0x3ac));const _0x2da989=_0x108175[_0xdf431e(0x1fe)]();let _0x2d8bac=_0x2da989[_0xdf431e(0x186)]||[];console['log'](_0xdf431e(0x363),_0x2d8bac);const _0x458472=_0x2d8bac[_0xdf431e(0x217)](_0x174eb1=>_0x174eb1!==_0x29b8b4);_0x2d8bac[_0xdf431e(0x2fe)]===_0x458472['length']?console[_0xdf431e(0x2b0)](_0xdf431e(0x397)+_0x29b8b4+_0xdf431e(0x31e)):(console[_0xdf431e(0x375)](_0xdf431e(0x388),_0x458472),_0x2742cf[_0xdf431e(0x26b)](_0x467c29,{'communityIds':_0x458472}));await _0x2742cf[_0xdf431e(0x4cc)](),console['log'](_0xdf431e(0x28d)+_0x29b8b4+_0xdf431e(0x2d3),_0x458472);const _0x3e5409=await getDoc(_0x467c29),_0x36215c=_0x3e5409[_0xdf431e(0x1fe)]()[_0xdf431e(0x186)]||[];console[_0xdf431e(0x375)](_0xdf431e(0x496),_0x36215c);if(!_0x36215c[_0xdf431e(0x352)](_0x29b8b4))console[_0xdf431e(0x375)](_0xdf431e(0x183)+_0x29b8b4+_0xdf431e(0x16b));else{console[_0xdf431e(0x290)](_0xdf431e(0x214)+_0x29b8b4+'\x20from\x20user\x27s\x20communityIds');throw new Error(_0xdf431e(0x23a));}resetCommDataCache(),alert(_0xdf431e(0x245)),window['location'][_0xdf431e(0x18d)]=_0xdf431e(0x2e2);}catch(_0xb3bb62){console[_0xdf431e(0x290)](_0xdf431e(0x226),_0xb3bb62),alert(_0xdf431e(0x401)+_0xb3bb62[_0xdf431e(0x2d9)]+_0xdf431e(0x487));}}async function fetchCurrentUserData(){const _0x52db5f=_0x3b0fb3,_0x16e885=auth[_0x52db5f(0x243)],_0x41c97f='currentUserData';let _0x48b580=JSON['parse'](sessionStorage['getItem'](_0x41c97f));if(_0x48b580&&_0x48b580[_0x52db5f(0x3c5)]===_0x16e885[_0x52db5f(0x3c5)])return _0x48b580;const _0x56f7bb=doc(db,_0x52db5f(0x1b4),_0x16e885[_0x52db5f(0x3c5)]),_0x303ed7=await getDoc(_0x56f7bb);if(!_0x303ed7[_0x52db5f(0x150)]()){console['log']('No\x20user\x20doc\x20found\x20for\x20current\x20uid\x20'+_0x16e885[_0x52db5f(0x3c5)]);const _0x3760d8={'name':_0x52db5f(0x1b2),'username':'unknown','profilePhoto':null,'email':null,'city':null,'phone':null,'uid':_0x16e885[_0x52db5f(0x3c5)]};return sessionStorage['setItem'](_0x41c97f,JSON[_0x52db5f(0x463)](_0x3760d8)),_0x3760d8;}const _0x405311=_0x303ed7['data'](),_0x345971={'name':_0x405311[_0x52db5f(0x2fb)]||_0x52db5f(0x1b2),'username':_0x405311['username']||_0x52db5f(0x2ec),'profilePhoto':_0x405311[_0x52db5f(0x317)]||null,'email':_0x405311['email']||null,'city':_0x405311['city']||null,'phone':_0x405311[_0x52db5f(0x44b)]||null,'uid':_0x16e885['uid']};return sessionStorage['setItem'](_0x41c97f,JSON[_0x52db5f(0x463)](_0x345971)),_0x345971;}async function fetchUserData(_0x1a68c0){const _0x158d65=_0x3b0fb3;if(!_0x1a68c0)return{'name':'Unknown','username':_0x158d65(0x2ec),'profilePhoto':_0x158d65(0x3f7),'uid':_0x158d65(0x2ec)};const _0x155ff7=Array[_0x158d65(0x3fd)](_0x1a68c0)?_0x1a68c0:[_0x1a68c0],_0x1ead97=_0x155ff7[_0x158d65(0x217)](_0x3c3a48=>!userDataCache[_0x3c3a48]||userDataCache[_0x3c3a48][_0x158d65(0x2fb)]===_0x158d65(0x1b2));if(_0x1ead97[_0x158d65(0x2fe)]>0x0){const _0x16058c=[];for(let _0x53aecb=0x0;_0x53aecb<_0x1ead97[_0x158d65(0x2fe)];_0x53aecb+=0xa){_0x16058c[_0x158d65(0x2d1)](_0x1ead97[_0x158d65(0x2f5)](_0x53aecb,_0x53aecb+0xa));}for(const _0x40050e of _0x16058c){const _0x1923ba=query(collection(db,_0x158d65(0x1b4)),where(_0x158d65(0x256),'in',_0x40050e)),_0x52005a=await getDocs(_0x1923ba);_0x52005a[_0x158d65(0x2b3)](_0x195a6a=>{const _0x5963f0=_0x158d65,_0x528d55=_0x195a6a[_0x5963f0(0x1fe)]();userDataCache[_0x195a6a['id']]={'name':_0x528d55[_0x5963f0(0x2fb)]||'Unknown','username':_0x528d55[_0x5963f0(0x48c)]||_0x5963f0(0x2ec),'profilePhoto':_0x528d55[_0x5963f0(0x317)]||_0x5963f0(0x3f7),'email':_0x528d55['email']||null,'city':_0x528d55[_0x5963f0(0x233)]||null,'phone':_0x528d55[_0x5963f0(0x44b)]||null,'uid':_0x195a6a['id'],'swaps':_0x528d55[_0x5963f0(0x2d0)]||0x0},userDataCache[_0x5963f0(0x260)+_0x528d55[_0x5963f0(0x48c)]]=userDataCache[_0x195a6a['id']];}),_0x40050e[_0x158d65(0x2b3)](_0x466728=>{const _0x3a03e9=_0x158d65;!userDataCache[_0x466728]&&(userDataCache[_0x466728]={'name':_0x3a03e9(0x1b2),'username':'unknown','profilePhoto':_0x3a03e9(0x3f7),'uid':_0x466728});});}}return _0x155ff7[_0x158d65(0x2fe)]===0x1?userDataCache[_0x155ff7[0x0]]:_0x155ff7[_0x158d65(0x180)](_0x416751=>userDataCache[_0x416751]);}async function getPostReportStatus(_0x4a992e){const _0xb0bd61=_0x3b0fb3,_0x38a823=collection(db,'communities',communityId,_0xb0bd61(0x24c)),_0x43f521=query(_0x38a823,where(_0xb0bd61(0x4c1),'==',_0x4a992e)),_0x4f19e4=await getDocs(_0x43f521),_0x4f4a18=_0x4f19e4['size'],_0x4229d9=await getCommData(),_0x1d91de=auth[_0xb0bd61(0x243)],_0x273b16=_0x4229d9[_0xb0bd61(0x479)]?.[_0xb0bd61(0x352)](_0x1d91de['uid'])||_0x4229d9[_0xb0bd61(0x32a)]===_0x1d91de[_0xb0bd61(0x3c5)],_0x5ecd5b=doc(db,_0xb0bd61(0x405),communityId,_0xb0bd61(0x1aa),_0x4a992e),_0x290399=await getDoc(_0x5ecd5b);if(!_0x290399[_0xb0bd61(0x150)]())return console[_0xb0bd61(0x375)](_0xb0bd61(0x34b)+_0x4a992e+_0xb0bd61(0x49f)),{'reportCount':_0x4f4a18,'isHidden':_0x4f4a18>=0x2&&!_0x273b16,'isAdmin':_0x273b16,'isOwner':![]};const _0x28fb02=_0x290399[_0xb0bd61(0x1fe)](),_0x37f5ff=_0x28fb02[_0xb0bd61(0x2df)]===_0x1d91de[_0xb0bd61(0x3c5)];return{'reportCount':_0x4f4a18,'isHidden':_0x4f4a18>=0x2&&!_0x273b16&&!_0x37f5ff,'isAdmin':_0x273b16,'isOwner':_0x37f5ff};}async function reportPost(_0x519b88){const _0x16f603=_0x3b0fb3,_0x5a0200=auth[_0x16f603(0x243)],_0x5f848=collection(db,'communities',communityId,_0x16f603(0x24c)),_0x30d532=query(_0x5f848,where('postId','==',_0x519b88),where(_0x16f603(0x320),'==',_0x5a0200['uid'])),_0x10c85a=await getDocs(_0x30d532);if(!_0x10c85a[_0x16f603(0x3b2)]){alert(_0x16f603(0x22e));return;}if(!confirm(_0x16f603(0x23e)))return;await addDoc(_0x5f848,{'postId':_0x519b88,'reporterId':_0x5a0200[_0x16f603(0x3c5)],'communityId':communityId,'timestamp':new Date()}),alert(_0x16f603(0x175)),refreshReportSummary(_0x5a0200[_0x16f603(0x3c5)]);const _0x5a4061=document['getElementById'](_0x16f603(0x182)+_0x519b88),_0x170be4=await getPostReportStatus(_0x519b88),_0x3e31e2=await getCommData(),_0x5eaefc=_0x3e31e2[_0x16f603(0x479)]?.['includes'](_0x5a0200[_0x16f603(0x3c5)])||_0x3e31e2[_0x16f603(0x32a)]===_0x5a0200[_0x16f603(0x3c5)];if(_0x5a4061){const _0x504191=_0x5a4061[_0x16f603(0x2f2)](_0x16f603(0x485)),_0x167734=_0x5a4061[_0x16f603(0x2f2)](_0x16f603(0x2bc));if(_0x504191)_0x504191[_0x16f603(0x1f3)]();if(_0x167734)_0x167734[_0x16f603(0x1f3)]();if(_0x170be4[_0x16f603(0x1b5)]){_0x5a4061[_0x16f603(0x1f3)]();return;}if(_0x170be4[_0x16f603(0x1f6)]){if(_0x170be4[_0x16f603(0x166)]===0x1)_0x5a4061[_0x16f603(0x2e9)](_0x16f603(0x173),_0x16f603(0x3b4)+_0x519b88+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it\x20from\x20others—check\x20it\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>');else _0x170be4[_0x16f603(0x166)]>=0x2&&_0x5a4061['insertAdjacentHTML'](_0x16f603(0x173),_0x16f603(0x3b4)+_0x519b88+_0x16f603(0x36b)+_0x170be4[_0x16f603(0x166)]+_0x16f603(0x3c7));}_0x5eaefc&&_0x170be4[_0x16f603(0x166)]>0x0&&(_0x5a4061[_0x16f603(0x2e9)]('beforeend',_0x16f603(0x495)+_0x519b88+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20'+_0x170be4['reportCount']+'\x20report'+(_0x170be4[_0x16f603(0x166)]>0x1?'s':'')+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22'+_0x519b88+_0x16f603(0x20b)+_0x519b88+'\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>'),_0x5a4061[_0x16f603(0x2f2)](_0x16f603(0x28b)+_0x519b88+'\x22]')['addEventListener'](_0x16f603(0x372),()=>deletePost(_0x519b88)),_0x5a4061[_0x16f603(0x2f2)](_0x16f603(0x21c)+_0x519b88+'\x22]')[_0x16f603(0x4a9)](_0x16f603(0x372),()=>clearReports(_0x519b88)));}const _0x3b142a=document[_0x16f603(0x2f2)](_0x16f603(0x16f)+_0x519b88);if(_0x3b142a){const _0x15acb7=_0x3b142a['querySelector'](_0x16f603(0x485));if(_0x15acb7)_0x15acb7['remove']();if(_0x170be4[_0x16f603(0x1f6)]){if(_0x170be4[_0x16f603(0x166)]===0x1)_0x3b142a[_0x16f603(0x2e9)](_0x16f603(0x173),_0x16f603(0x3b4)+_0x519b88+_0x16f603(0x2eb));else _0x170be4[_0x16f603(0x166)]>=0x2&&_0x3b142a[_0x16f603(0x2e9)](_0x16f603(0x173),_0x16f603(0x3b4)+_0x519b88+_0x16f603(0x36b)+_0x170be4[_0x16f603(0x166)]+_0x16f603(0x3c7));}}await loadAdminReportSummary(_0x5a0200[_0x16f603(0x3c5)]);}async function clearReports(_0x701401){const _0x2009c7=_0x3b0fb3;if(confirm(_0x2009c7(0x1c5))){const _0x52bd99=auth[_0x2009c7(0x243)],_0xc8ee85=collection(db,_0x2009c7(0x405),communityId,_0x2009c7(0x24c)),_0x552d05=query(_0xc8ee85,where('postId','==',_0x701401)),_0x5d9eb8=await getDocs(_0x552d05),_0x30b9ce=_0x5d9eb8[_0x2009c7(0x3ab)][_0x2009c7(0x180)](_0x2a29f2=>deleteDoc(_0x2a29f2[_0x2009c7(0x1a7)]));await Promise['all'](_0x30b9ce),loadPosts(communityId,currentPage),loadCarouselPosts(communityId),refreshReportSummary(_0x52bd99[_0x2009c7(0x3c5)]);}}async function compressImage(_0x42bd71){return new Promise(_0x31d3fa=>{const _0x29681f=_0x4a3e,_0x283154=new Image(),_0x3c5bbc=document['createElement'](_0x29681f(0x1dd)),_0x2cfec4=_0x3c5bbc[_0x29681f(0x3eb)]('2d');_0x283154[_0x29681f(0x2d4)]=()=>{const _0x493c00=_0x29681f,_0x15175c=0x320,_0x2e9790=0x320;let _0x5c7314=_0x283154[_0x493c00(0x1fd)],_0x3d20a7=_0x283154[_0x493c00(0x3fc)];_0x5c7314>_0x3d20a7?_0x5c7314>_0x15175c&&(_0x3d20a7*=_0x15175c/_0x5c7314,_0x5c7314=_0x15175c):_0x3d20a7>_0x2e9790&&(_0x5c7314*=_0x2e9790/_0x3d20a7,_0x3d20a7=_0x2e9790),_0x3c5bbc[_0x493c00(0x1fd)]=_0x5c7314,_0x3c5bbc[_0x493c00(0x3fc)]=_0x3d20a7,_0x2cfec4[_0x493c00(0x236)](_0x283154,0x0,0x0,_0x5c7314,_0x3d20a7),_0x3c5bbc[_0x493c00(0x3bb)](_0x2b1697=>_0x31d3fa(_0x2b1697),_0x493c00(0x295),0.7);},_0x283154['src']=URL['createObjectURL'](_0x42bd71);});}function setupLocationAutocomplete(){const _0x386b72=_0x3b0fb3,_0x2e160d=document[_0x386b72(0x34f)]('postLocation'),_0xc27956=document[_0x386b72(0x34f)]('postLocationSuggestions');if(!_0x2e160d||!_0xc27956){console[_0x386b72(0x290)](_0x386b72(0x29f));return;}const _0x578c9a=0xa*0x3c*0x3e8,_0x461834=0x32,_0x399be4=new Map();function _0x29a2bf(_0x2f6304,_0x15c4b6){const _0x9a5933=_0x386b72;if(_0x399be4[_0x9a5933(0x481)]>=_0x461834){const _0x1f6b58=_0x399be4[_0x9a5933(0x3f6)]()[_0x9a5933(0x1db)]()[_0x9a5933(0x2db)];_0x399be4[_0x9a5933(0x156)](_0x1f6b58);}_0x399be4[_0x9a5933(0x276)](_0x2f6304,{'value':_0x15c4b6,'expiry':Date[_0x9a5933(0x42a)]()+_0x578c9a});}function _0xc12f7c(_0x1389c4){const _0x3690dd=_0x386b72,_0x4fbe04=_0x399be4[_0x3690dd(0x338)](_0x1389c4);if(!_0x4fbe04)return null;if(Date['now']()>_0x4fbe04[_0x3690dd(0x39d)])return _0x399be4[_0x3690dd(0x156)](_0x1389c4),null;return _0x4fbe04['value'];}async function _0xe310b8(_0x6d967a){const _0x41852f=_0x386b72,_0x4f41e6=_0xc12f7c(_0x6d967a);if(_0x4f41e6)return _0x4f41e6;const _0x530503=_0x41852f(0x402)+encodeURIComponent(_0x6d967a)+_0x41852f(0x1be);try{const _0x42a40b=await fetch(_0x530503,{'headers':{'User-Agent':_0x41852f(0x438)}});if(!_0x42a40b['ok'])throw new Error(_0x41852f(0x15c)+_0x42a40b[_0x41852f(0x315)]);const _0x53b23d=await _0x42a40b[_0x41852f(0x34a)]();return _0x29a2bf(_0x6d967a,_0x53b23d),_0x53b23d;}catch(_0x45fbdc){return console[_0x41852f(0x290)]('Error\x20fetching\x20location\x20suggestions:',_0x45fbdc),[];}}async function _0x5da951(){const _0x4cea86=_0x386b72,_0x4aec2a=_0x2e160d[_0x4cea86(0x2db)][_0x4cea86(0x369)]();if(_0x4aec2a[_0x4cea86(0x2fe)]<0x2){_0xc27956['innerHTML']='',_0xc27956[_0x4cea86(0x38f)][_0x4cea86(0x4d4)](_0x4cea86(0x26a));return;}_0xc27956[_0x4cea86(0x396)]=_0x4cea86(0x439);const _0x11229e=await _0xe310b8(_0x4aec2a);_0x1fa7bd(_0x11229e);}function _0x1fa7bd(_0x212600){const _0x1a6d5c=_0x386b72;_0xc27956[_0x1a6d5c(0x396)]='';if(_0x212600[_0x1a6d5c(0x2fe)]===0x0){_0xc27956[_0x1a6d5c(0x38f)][_0x1a6d5c(0x4d4)](_0x1a6d5c(0x26a));return;}_0xc27956['classList'][_0x1a6d5c(0x1f3)](_0x1a6d5c(0x26a));const _0x2d94f6=document[_0x1a6d5c(0x1c0)]();_0x212600['forEach'](_0x33158e=>{const _0x328347=_0x1a6d5c,_0x34f58a=_0x33158e['address'][_0x328347(0x233)]||_0x33158e[_0x328347(0x40e)][_0x328347(0x19c)]||_0x33158e[_0x328347(0x40e)][_0x328347(0x242)]||'',_0x12ff5a=_0x33158e['address']['state']||'',_0x20d7ba=_0x33158e[_0x328347(0x40e)][_0x328347(0x307)]||'',_0x59e195=_0x34f58a&&_0x12ff5a?_0x34f58a+',\x20'+_0x12ff5a:_0x33158e[_0x328347(0x1ee)],_0x1654c8=document[_0x328347(0x22d)](_0x328347(0x3b0));_0x1654c8[_0x328347(0x38f)][_0x328347(0x4d4)](_0x328347(0x442)),_0x1654c8[_0x328347(0x19e)]=_0x59e195,_0x1654c8['onclick']=()=>{const _0x43c162=_0x328347;_0x2e160d[_0x43c162(0x2db)]=_0x59e195,_0x2e160d['dataset'][_0x43c162(0x22c)]=_0x33158e[_0x43c162(0x22c)],_0x2e160d[_0x43c162(0x468)][_0x43c162(0x436)]=_0x33158e[_0x43c162(0x436)],_0xc27956[_0x43c162(0x396)]='',_0xc27956[_0x43c162(0x38f)][_0x43c162(0x4d4)](_0x43c162(0x26a));},_0x2d94f6[_0x328347(0x467)](_0x1654c8);}),_0xc27956[_0x1a6d5c(0x467)](_0x2d94f6);}_0x2e160d[_0x386b72(0x3ca)]=debounce(_0x5da951,0x1f4);}async function editCommunityName(_0x270ce5){const _0x5adf3d=_0x3b0fb3,_0x4bd2a5=doc(db,_0x5adf3d(0x405),_0x270ce5),_0x3ea02b=await getDoc(_0x4bd2a5),_0x24e425=_0x3ea02b['data'](),_0x4985f9=_0x24e425[_0x5adf3d(0x2fb)],_0x3daacf=document[_0x5adf3d(0x22d)](_0x5adf3d(0x3b0));_0x3daacf['id']=_0x5adf3d(0x1dc),_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x462)]='fixed',_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x331)]=_0x5adf3d(0x306),_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x237)]='50%',_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x3dd)]=_0x5adf3d(0x1e5),_0x3daacf['style'][_0x5adf3d(0x2ca)]=_0x5adf3d(0x28a),_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x3c2)]=_0x5adf3d(0x4c8),_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x3af)]=_0x5adf3d(0x31b),_0x3daacf[_0x5adf3d(0x145)][_0x5adf3d(0x4d2)]='0\x200\x2010px\x20rgba(0,0,0,0.2)',_0x3daacf['style']['zIndex']=_0x5adf3d(0x45f),_0x3daacf[_0x5adf3d(0x396)]='\x0a<h3>Edit\x20Community\x20Name</h3>\x0a<input\x20type=\x22text\x22\x20id=\x22newCommunityName\x22\x20value=\x22'+_0x4985f9+_0x5adf3d(0x277),document[_0x5adf3d(0x32c)]['appendChild'](_0x3daacf),document[_0x5adf3d(0x34f)](_0x5adf3d(0x38b))[_0x5adf3d(0x4a9)]('click',async()=>{const _0x37362c=_0x5adf3d,_0x4e102b=document['getElementById'](_0x37362c(0x18f))[_0x37362c(0x2db)]['trim']();if(!_0x4e102b){alert(_0x37362c(0x2ce));return;}if(_0x4e102b===_0x4985f9){alert(_0x37362c(0x299)),document['body']['removeChild'](_0x3daacf);return;}await updateDoc(_0x4bd2a5,{'name':_0x4e102b}),document[_0x37362c(0x34f)](_0x37362c(0x189))[_0x37362c(0x19e)]=_0x4e102b,document[_0x37362c(0x32c)][_0x37362c(0x40a)](_0x3daacf),alert(_0x37362c(0x410));}),document[_0x5adf3d(0x34f)](_0x5adf3d(0x411))['addEventListener'](_0x5adf3d(0x372),()=>{const _0x336de4=_0x5adf3d;document[_0x336de4(0x32c)][_0x336de4(0x40a)](_0x3daacf);});}let reportSummaryCache=null;async function loadAdminReportSummary(_0x29b629){const _0x3bcbba=_0x3b0fb3;if(!_0x29b629){console[_0x3bcbba(0x290)](_0x3bcbba(0x33d));return;}const _0x799069=await getCommData(),_0x417c2b=_0x799069[_0x3bcbba(0x479)]?.['includes'](_0x29b629)||_0x799069[_0x3bcbba(0x32a)]===_0x29b629;let _0x46bd20=document[_0x3bcbba(0x34f)]('admin-report-summary');!_0x46bd20&&(_0x46bd20=document[_0x3bcbba(0x22d)](_0x3bcbba(0x3b0)),_0x46bd20['id']=_0x3bcbba(0x43f),_0x46bd20[_0x3bcbba(0x289)]='admin-report-summary',document[_0x3bcbba(0x2f2)](_0x3bcbba(0x367))[_0x3bcbba(0x41a)](_0x46bd20,document[_0x3bcbba(0x2f2)](_0x3bcbba(0x31a))[_0x3bcbba(0x1e9)]));if(reportSummaryCache){_0x46bd20[_0x3bcbba(0x396)]=reportSummaryCache['html'],attachSummaryListeners(_0x46bd20,_0x417c2b,_0x29b629),console[_0x3bcbba(0x375)](_0x3bcbba(0x2be));return;}await updateReportSummaryUI(_0x46bd20,_0x29b629,_0x417c2b);}async function updateReportSummaryUI(_0x53298d,_0x24fe74,_0x38c68a){const _0x1ca4f6=_0x3b0fb3,_0x53a2f5=collection(db,_0x1ca4f6(0x405),communityId,'postReports'),_0x141766=query(_0x53a2f5),_0x17ded7=await getDocs(_0x141766),_0x4cbf0f=Object[_0x1ca4f6(0x3f6)](_0x17ded7[_0x1ca4f6(0x3ab)][_0x1ca4f6(0x3c0)]((_0x5ca4e8,_0x2e3291)=>{const _0xd8af41=_0x1ca4f6;return _0x5ca4e8[_0x2e3291[_0xd8af41(0x1fe)]()[_0xd8af41(0x4c1)]]=!![],_0x5ca4e8;},{}))[_0x1ca4f6(0x2fe)];let _0x5f2566=0x0,_0x724c8d=0x0;if(_0x38c68a){const _0x3c3529=query(collection(db,_0x1ca4f6(0x405),communityId,_0x1ca4f6(0x493))),_0xdf6395=await getDocs(_0x3c3529);_0x724c8d=_0xdf6395[_0x1ca4f6(0x481)];}else{const _0x487ea7=query(collection(db,_0x1ca4f6(0x405),communityId,_0x1ca4f6(0x1aa)),where(_0x1ca4f6(0x2df),'==',_0x24fe74)),_0x26d31c=await getDocs(_0x487ea7),_0x1108a5=[];for(const _0x58f61d of _0x26d31c[_0x1ca4f6(0x3ab)]){const _0x46c0d8=_0x58f61d['id'],_0x269fe6=query(_0x53a2f5,where('postId','==',_0x46c0d8)),_0x898a78=await getDocs(_0x269fe6);if(!_0x898a78[_0x1ca4f6(0x3b2)])_0x1108a5[_0x1ca4f6(0x2d1)](_0x46c0d8);}_0x5f2566=_0x1108a5[_0x1ca4f6(0x2fe)];}const _0x41fe7e=_0x38c68a?_0x4cbf0f+_0x724c8d:_0x5f2566;_0x53298d[_0x1ca4f6(0x396)]='\x0a<details>\x0a\x20\x20<summary>'+(_0x41fe7e>0x0?'('+_0x41fe7e+')\x20':'')+_0x1ca4f6(0x3e2),reportSummaryCache={'html':_0x53298d[_0x1ca4f6(0x396)]},attachSummaryListeners(_0x53298d,_0x38c68a,_0x24fe74);}function attachSummaryListeners(_0x3fa677,_0x310633,_0x462c5e){const _0x3d468a=_0x3fa677['querySelector']('details');_0x3d468a['addEventListener']('toggle',async()=>{const _0x1f2a24=_0x4a3e,_0x4fce7d=_0x3fa677[_0x1f2a24(0x2f2)](_0x1f2a24(0x3d5));if(_0x3d468a[_0x1f2a24(0x3da)]){_0x4fce7d['innerHTML']=_0x1f2a24(0x35d),_0x3d468a['querySelector'](_0x1f2a24(0x422))['textContent']=(reportSummaryCache['html'][_0x1f2a24(0x15f)](/\(\d+\)/)||'')+'Hide\x20Reports';if(_0x310633){let _0x1f8740='';const _0xf0d151=collection(db,'communities',communityId,_0x1f2a24(0x24c)),_0x68db5=await getDocs(query(_0xf0d151));if(_0x68db5['empty'])_0x1f8740+=_0x1f2a24(0x4b5);else{_0x1f8740+=_0x1f2a24(0x490);const _0x5c8ec6={};_0x68db5['forEach'](_0x41cbd2=>{const _0x423adf=_0x1f2a24,_0x4caba8=_0x41cbd2['data']()[_0x423adf(0x4c1)];_0x5c8ec6[_0x4caba8]=(_0x5c8ec6[_0x4caba8]||0x0)+0x1;});for(const [_0xe39e6a,_0x141d63]of Object[_0x1f2a24(0x2e4)](_0x5c8ec6)){try{const _0x3e06e7=await getDoc(doc(db,'communities',communityId,_0x1f2a24(0x1aa),_0xe39e6a)),_0x44ea22=_0x3e06e7['exists']()?_0x3e06e7[_0x1f2a24(0x1fe)]():null,_0x1b234a=_0x44ea22?_0x44ea22[_0x1f2a24(0x255)]:_0x1f2a24(0x294),_0x18fdfc=_0x44ea22?await fetchUserData(_0x44ea22[_0x1f2a24(0x2df)]):{'name':'Unknown'};_0x1f8740+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22'+_0xe39e6a+_0x1f2a24(0x2e6)+_0x1b234a+'\x22\x20by\x20'+_0x18fdfc['name']+_0x1f2a24(0x464)+_0xe39e6a+_0x1f2a24(0x1bf)+_0x141d63+'\x20report'+(_0x141d63>0x1?'s':'')+_0x1f2a24(0x29c)+_0xe39e6a+_0x1f2a24(0x2d7)+_0xe39e6a+_0x1f2a24(0x420);}catch(_0x1df9dc){console[_0x1f2a24(0x290)](_0x1f2a24(0x465)+_0xe39e6a+':',_0x1df9dc),_0x1f8740+='<p>Error\x20loading\x20post\x20'+_0xe39e6a+'</p>';}}}try{const _0x31b6f1=await getDocs(collection(db,_0x1f2a24(0x405),communityId,_0x1f2a24(0x493))),_0x458812=(await getDoc(doc(db,_0x1f2a24(0x405),communityId)))[_0x1f2a24(0x1fe)]()||{'banReasons':{}};if(!_0x31b6f1[_0x1f2a24(0x3b2)]){_0x1f8740+='<br><h3>User\x20Appeals\x20(Bans/Posts)</h3>';for(const _0x2c0311 of _0x31b6f1['docs']){const _0x4ab9b8=_0x2c0311[_0x1f2a24(0x1fe)](),_0x585b60=await fetchUserData(_0x4ab9b8[_0x1f2a24(0x2df)]),_0x482a8b=(_0x585b60[_0x1f2a24(0x2fb)]||'Unknown')+'\x20('+(_0x4ab9b8[_0x1f2a24(0x48c)]||_0x1f2a24(0x2ec))+')',_0xbd4777=_0x458812[_0x1f2a24(0x198)]?.[_0x4ab9b8[_0x1f2a24(0x2df)]]||_0x1f2a24(0x311);_0x1f8740+=_0x1f2a24(0x4bb)+_0x2c0311['id']+_0x1f2a24(0x26c)+_0x482a8b+_0x1f2a24(0x2c5)+_0x4ab9b8['message']+'\x22\x20(Ban\x20Reason:\x20'+_0xbd4777+_0x1f2a24(0x20d)+new Date(_0x4ab9b8[_0x1f2a24(0x33f)][_0x1f2a24(0x1a8)]())[_0x1f2a24(0x1a0)]()+_0x1f2a24(0x3d9)+_0x2c0311['id']+_0x1f2a24(0x3c4);}}else _0x1f8740+=_0x1f2a24(0x34d);}catch(_0x2ba999){console['error'](_0x1f2a24(0x38c),_0x2ba999),_0x1f8740+='<br><p>Error\x20loading\x20appeals!</p>';}_0x4fce7d['innerHTML']=_0x1f8740,_0x4fce7d[_0x1f2a24(0x40d)](_0x1f2a24(0x21f))[_0x1f2a24(0x2b3)](_0x5dbfe4=>{const _0x582e9d=_0x1f2a24;_0x5dbfe4[_0x582e9d(0x4a9)](_0x582e9d(0x372),()=>deletePost(_0x5dbfe4[_0x582e9d(0x468)][_0x582e9d(0x4c1)]));}),_0x4fce7d['querySelectorAll'](_0x1f2a24(0x417))[_0x1f2a24(0x2b3)](_0x3d9667=>{const _0x487cdd=_0x1f2a24;_0x3d9667[_0x487cdd(0x4a9)]('click',()=>clearReports(_0x3d9667[_0x487cdd(0x468)][_0x487cdd(0x4c1)]));}),_0x4fce7d['querySelectorAll'](_0x1f2a24(0x3cf))['forEach'](_0x14eeef=>{const _0x19c012=_0x1f2a24;_0x14eeef[_0x19c012(0x4a9)](_0x19c012(0x372),async()=>{const _0x51d05c=_0x19c012;confirm(_0x51d05c(0x35f))&&(await deleteDoc(doc(db,'communities',communityId,_0x51d05c(0x493),_0x14eeef['dataset']['appealId'])),refreshReportSummary(_0x462c5e));});});}else{let _0xc10c4c='';const _0x29a223=collection(db,_0x1f2a24(0x405),communityId,_0x1f2a24(0x24c)),_0x365a3d=query(collection(db,_0x1f2a24(0x405),communityId,_0x1f2a24(0x1aa)),where(_0x1f2a24(0x2df),'==',_0x462c5e));try{const _0x19729f=await getDocs(_0x365a3d),_0xaded8d=[];for(const _0x197109 of _0x19729f[_0x1f2a24(0x3ab)]){const _0x3d3685=_0x197109['id'],_0x20a0a5=query(_0x29a223,where(_0x1f2a24(0x4c1),'==',_0x3d3685)),_0x3e563a=await getDocs(_0x20a0a5);!_0x3e563a['empty']&&_0xaded8d['push']({'postId':_0x3d3685,'title':_0x197109[_0x1f2a24(0x1fe)]()['title'],'count':_0x3e563a[_0x1f2a24(0x481)]});}if(_0xaded8d['length']===0x0)_0xc10c4c='<p>No\x20reports\x20on\x20your\x20posts!</p>';else{_0xc10c4c=_0x1f2a24(0x1d0);for(const _0x4d619f of _0xaded8d){const _0x1da9aa=query(collection(db,'communities',communityId,_0x1f2a24(0x493)),where(_0x1f2a24(0x2df),'==',_0x462c5e),where('postId','==',_0x4d619f['postId'])),_0x2a921e=await getDocs(_0x1da9aa),_0x2d52b1=!_0x2a921e[_0x1f2a24(0x3b2)];_0xc10c4c+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22'+_0x4d619f['postId']+_0x1f2a24(0x4a6)+_0x4d619f[_0x1f2a24(0x255)]+_0x1f2a24(0x197)+_0x4d619f[_0x1f2a24(0x4c1)]+_0x1f2a24(0x249)+_0x4d619f[_0x1f2a24(0x3d2)]+_0x1f2a24(0x4d3)+(_0x4d619f[_0x1f2a24(0x3d2)]>0x1?'s':'')+_0x1f2a24(0x374)+(_0x4d619f[_0x1f2a24(0x3d2)]>=0x2?_0x1f2a24(0x341):'')+_0x1f2a24(0x3ef)+_0x4d619f[_0x1f2a24(0x4c1)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x2d52b1?_0x1f2a24(0x3f1)+_0x4d619f[_0x1f2a24(0x4c1)]+_0x1f2a24(0x177):'<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>')+_0x1f2a24(0x281);}}}catch(_0x252cad){console['error'](_0x1f2a24(0x296),_0x252cad),_0xc10c4c=_0x1f2a24(0x29d);}_0x4fce7d[_0x1f2a24(0x396)]=_0xc10c4c,_0x4fce7d[_0x1f2a24(0x40d)](_0x1f2a24(0x1b7))['forEach'](_0x1662e0=>{const _0xe62775=_0x1f2a24;_0x1662e0[_0xe62775(0x4a9)](_0xe62775(0x155),async _0x207e7b=>{const _0x5caad0=_0xe62775;_0x207e7b['preventDefault']();const _0x4d75ba=_0x1662e0['dataset'][_0x5caad0(0x4c1)],_0x5392bc=_0x1662e0[_0x5caad0(0x2f2)](_0x5caad0(0x3cb))[_0x5caad0(0x2db)][_0x5caad0(0x369)]();if(_0x5392bc){const _0x485d3a=await getDoc(doc(db,_0x5caad0(0x1b4),_0x462c5e)),_0x20b79c=_0x485d3a[_0x5caad0(0x150)]()?_0x485d3a[_0x5caad0(0x1fe)]():{'username':_0x5caad0(0x23d)+_0x462c5e[_0x5caad0(0x2f5)](0x0,0x8)};await addDoc(collection(db,_0x5caad0(0x405),communityId,_0x5caad0(0x493)),{'userId':_0x462c5e,'username':_0x20b79c[_0x5caad0(0x48c)],'postId':_0x4d75ba,'message':_0x5392bc,'timestamp':new Date()}),alert(_0x5caad0(0x2af)),_0x1662e0[_0x5caad0(0x1bc)](_0x5caad0(0x148))['innerHTML']=_0x5caad0(0x303),refreshReportSummary(_0x462c5e);}});});}}else _0x3d468a[_0x1f2a24(0x2f2)](_0x1f2a24(0x422))['textContent']=(reportSummaryCache[_0x1f2a24(0x4ca)][_0x1f2a24(0x15f)](/\(\d+\)/)||'')+'See\x20Reports',_0x4fce7d['innerHTML']='';});}function refreshReportSummary(_0x3349cc){reportSummaryCache=null,loadAdminReportSummary(_0x3349cc);}const debouncedLoadAdminReportSummary=debounce(_0x241d4c=>loadAdminReportSummary(_0x241d4c),0x1f4);async function createPost(){const _0x5f4e02=_0x3b0fb3,_0x204d0e=document[_0x5f4e02(0x34f)](_0x5f4e02(0x3d7));if(!_0x204d0e){console[_0x5f4e02(0x290)](_0x5f4e02(0x1d3));return;}if(_0x204d0e[_0x5f4e02(0x3de)]){console['log'](_0x5f4e02(0x3e5));return;}_0x204d0e[_0x5f4e02(0x3de)]=!![];const _0x38b25e=_0x204d0e[_0x5f4e02(0x19e)];_0x204d0e['textContent']=_0x5f4e02(0x2da),_0x204d0e[_0x5f4e02(0x38f)][_0x5f4e02(0x4d4)](_0x5f4e02(0x1c6));try{const _0x7dd9a8=auth[_0x5f4e02(0x243)],_0x3be8b2=document[_0x5f4e02(0x34f)]('postTitle')[_0x5f4e02(0x2db)][_0x5f4e02(0x369)](),_0x2b7e6f=document[_0x5f4e02(0x34f)](_0x5f4e02(0x28c))[_0x5f4e02(0x2db)][_0x5f4e02(0x369)](),_0x3038fc=document[_0x5f4e02(0x34f)](_0x5f4e02(0x345))['files'],_0x5dffd5=document[_0x5f4e02(0x34f)](_0x5f4e02(0x29a))[_0x5f4e02(0x2db)][_0x5f4e02(0x369)](),_0x548445=document['getElementById']('postLocation')[_0x5f4e02(0x468)][_0x5f4e02(0x22c)],_0x406887=document[_0x5f4e02(0x34f)](_0x5f4e02(0x29a))['dataset'][_0x5f4e02(0x436)],_0x339ac5=document[_0x5f4e02(0x40d)](_0x5f4e02(0x4a8)),_0x27009a=document[_0x5f4e02(0x34f)](_0x5f4e02(0x3c3))[_0x5f4e02(0x2db)],_0x33902e=document[_0x5f4e02(0x34f)](_0x5f4e02(0x47b))[_0x5f4e02(0x2db)],_0x8b521b=document[_0x5f4e02(0x34f)](_0x5f4e02(0x360))[_0x5f4e02(0x2db)];if(!_0x3be8b2||!_0x2b7e6f||!_0x5dffd5||!_0x548445||!_0x406887||!_0x27009a||!_0x33902e||!_0x8b521b){alert(_0x5f4e02(0x14c));throw new Error(_0x5f4e02(0x3c6));}if(_0x339ac5[_0x5f4e02(0x2fe)]===0x0){alert(_0x5f4e02(0x343));throw new Error(_0x5f4e02(0x4a5));}let _0x2c6501=Array['from'](_0x339ac5)['map'](_0x5a43e2=>_0x5a43e2['value']);if(_0x2c6501[_0x5f4e02(0x2fe)]===0x1&&_0x2c6501[0x0]===_0x5f4e02(0x25e)){const _0x10d626=doc(db,_0x5f4e02(0x1b4),_0x7dd9a8[_0x5f4e02(0x3c5)]),_0x282211=await getDoc(_0x10d626);_0x2c6501=_0x282211[_0x5f4e02(0x1fe)]()[_0x5f4e02(0x186)]||[];const _0x2b8ce7=[];for(const _0x2794eb of _0x2c6501){const _0x1df72a=doc(db,'communities',_0x2794eb),_0x524c1a=await getDoc(_0x1df72a),_0x1af24a=_0x524c1a[_0x5f4e02(0x1fe)]();_0x1af24a[_0x5f4e02(0x18a)]['includes'](_0x7dd9a8[_0x5f4e02(0x3c5)])&&!(_0x1af24a[_0x5f4e02(0x412)]||[])[_0x5f4e02(0x352)](_0x7dd9a8[_0x5f4e02(0x3c5)])&&_0x2b8ce7[_0x5f4e02(0x2d1)](_0x2794eb);}_0x2c6501=_0x2b8ce7;}else _0x2c6501=_0x2c6501['map'](_0x3db1d4=>_0x3db1d4===_0x5f4e02(0x1fb)?communityId:_0x3db1d4);if(_0x2c6501['length']===0x0){alert(_0x5f4e02(0x1b0));throw new Error(_0x5f4e02(0x254));}const _0x364c2a={};for(const _0x573efe of _0x2c6501){_0x364c2a[_0x573efe]=[];for(let _0x5ef8f4=0x0;_0x5ef8f4<Math['min'](_0x3038fc['length'],0x5);_0x5ef8f4++){const _0x57434f=await compressImage(_0x3038fc[_0x5ef8f4]),_0x168986=ref(storage,_0x5f4e02(0x190)+_0x573efe+'/'+_0x7dd9a8[_0x5f4e02(0x3c5)]+'/'+Date[_0x5f4e02(0x42a)]()+'_'+_0x5ef8f4);await uploadBytes(_0x168986,_0x57434f);const _0x44c431=await getDownloadURL(_0x168986);_0x364c2a[_0x573efe][_0x5f4e02(0x2d1)](_0x44c431);}}const _0x51c233=_0x2c6501['map'](_0x197424=>{const _0x11ad75=_0x5f4e02,_0x2f4bab={'title':_0x3be8b2,'description':_0x2b7e6f,'photoUrls':_0x364c2a[_0x197424],'location':{'latitude':parseFloat(_0x548445),'longitude':parseFloat(_0x406887),'name':_0x5dffd5},'userId':_0x7dd9a8[_0x11ad75(0x3c5)],'createdAt':new Date(),'category':_0x27009a,'lookingFor':_0x33902e,'offering':_0x8b521b,'communityId':_0x197424,'likes':0x0,'likedBy':[],'commentCount':0x0};return addDoc(collection(db,'communities',_0x197424,_0x11ad75(0x1aa)),_0x2f4bab);}),_0x113644=await Promise[_0x5f4e02(0x25e)](_0x51c233);alert('Post\x20created\x20in\x20'+_0x2c6501[_0x5f4e02(0x2fe)]+_0x5f4e02(0x337)+(_0x2c6501[_0x5f4e02(0x2fe)]>0x1?_0x5f4e02(0x149):'y')+'!\x20IDs:\x20'+_0x113644[_0x5f4e02(0x180)](_0xad3ef0=>_0xad3ef0['id'])[_0x5f4e02(0x25a)](',\x20')),document[_0x5f4e02(0x34f)](_0x5f4e02(0x3bc))[_0x5f4e02(0x20a)](),totalYourPosts=0x0,loadYourPosts(_0x7dd9a8[_0x5f4e02(0x3c5)]),loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,loadCarouselPosts(communityId);}catch(_0x28aaa4){console[_0x5f4e02(0x290)]('Error\x20creating\x20post:',_0x28aaa4),!_0x28aaa4['message'][_0x5f4e02(0x352)](_0x5f4e02(0x39f))&&!_0x28aaa4[_0x5f4e02(0x2d9)][_0x5f4e02(0x352)](_0x5f4e02(0x405))&&alert('Failed\x20to\x20create\x20post:\x20'+_0x28aaa4['message']);}finally{_0x204d0e[_0x5f4e02(0x3de)]=![],_0x204d0e[_0x5f4e02(0x19e)]=_0x38b25e,_0x204d0e[_0x5f4e02(0x38f)][_0x5f4e02(0x1f3)](_0x5f4e02(0x1c6));}}async function setupCommunitySelection(){const _0x4809bf=_0x3b0fb3,_0x14f8d7=auth[_0x4809bf(0x243)];if(!_0x14f8d7){console[_0x4809bf(0x290)]('No\x20authenticated\x20user\x20found\x20for\x20setupCommunitySelection!');return;}const _0x34b65b=doc(db,_0x4809bf(0x1b4),_0x14f8d7[_0x4809bf(0x3c5)]),_0x4aa068=await getDoc(_0x34b65b),_0x12e1f2=_0x4aa068['data']()[_0x4809bf(0x186)]||[],_0x47cc46=document['getElementById']('communityCheckboxes');if(!_0x47cc46){console[_0x4809bf(0x290)](_0x4809bf(0x49e));return;}_0x47cc46[_0x4809bf(0x396)]='';const _0x525301=doc(db,'communities',communityId),_0x4cd51f=await getDoc(_0x525301),_0x3f92ae=_0x4cd51f['data']()['name'];_0x47cc46[_0x4809bf(0x396)]+=_0x4809bf(0x2f3)+_0x3f92ae+_0x4809bf(0x15e),_0x47cc46[_0x4809bf(0x396)]+=_0x4809bf(0x4d6);const _0x18fd59=_0x12e1f2[_0x4809bf(0x217)](_0x346b20=>_0x346b20!==communityId)[_0x4809bf(0x180)](_0x3c3a84=>getDoc(doc(db,_0x4809bf(0x405),_0x3c3a84))),_0xd85192=await Promise[_0x4809bf(0x25e)](_0x18fd59);for(const _0x5489ff of _0xd85192){if(_0x5489ff[_0x4809bf(0x150)]()){const _0x58e996=_0x5489ff[_0x4809bf(0x1fe)](),_0x5e6105=doc(db,_0x4809bf(0x405),_0x5489ff['id'],_0x4809bf(0x18a),_0x14f8d7[_0x4809bf(0x3c5)]),_0x29866d=await getDoc(_0x5e6105),_0x57dfab=_0x29866d[_0x4809bf(0x150)](),_0x49a550=(_0x58e996['bannedUsers']||[])[_0x4809bf(0x352)](_0x14f8d7[_0x4809bf(0x3c5)]);if(_0x57dfab&&!_0x49a550){const _0x31a712=document[_0x4809bf(0x22d)](_0x4809bf(0x32f));_0x31a712['setAttribute'](_0x4809bf(0x253),'comm-'+_0x5489ff['id']),_0x31a712['innerHTML']=_0x4809bf(0x44c)+_0x5489ff['id']+'\x22\x20name=\x22communities\x22\x20value=\x22'+_0x5489ff['id']+'\x22>\x20'+_0x58e996[_0x4809bf(0x2fb)]+_0x4809bf(0x2a5),_0x47cc46[_0x4809bf(0x467)](_0x31a712);}}}const _0x30ec07=_0x47cc46[_0x4809bf(0x2f2)](_0x4809bf(0x42e));_0x30ec07[_0x4809bf(0x4a9)](_0x4809bf(0x4b8),_0x5671bb=>{const _0x19556c=_0x4809bf,_0x45598d=_0x47cc46[_0x19556c(0x40d)]('input[name=\x22communities\x22]:not([value=\x22all\x22])');_0x5671bb[_0x19556c(0x146)][_0x19556c(0x426)]&&_0x45598d[_0x19556c(0x2b3)](_0x4fce61=>_0x4fce61[_0x19556c(0x426)]=![]);});const _0x1c681d=_0x47cc46[_0x4809bf(0x40d)](_0x4809bf(0x37c));_0x1c681d[_0x4809bf(0x2b3)](_0x2e9cf0=>{const _0x3edd22=_0x4809bf;_0x2e9cf0['addEventListener'](_0x3edd22(0x4b8),()=>{const _0x2db525=_0x3edd22;_0x2e9cf0[_0x2db525(0x426)]&&(_0x30ec07['checked']=![]);});});}async function deletePost(_0x40eae1){const _0x47d6d2=_0x3b0fb3,_0x5b75c5=auth[_0x47d6d2(0x243)],_0x4621d6=await getCommData(),_0x1c6e63=_0x4621d6['admins']?.[_0x47d6d2(0x352)](_0x5b75c5[_0x47d6d2(0x3c5)])||_0x4621d6[_0x47d6d2(0x32a)]===_0x5b75c5[_0x47d6d2(0x3c5)],_0x503239=doc(db,_0x47d6d2(0x405),communityId,'posts',_0x40eae1),_0xc370d=await getDoc(_0x503239);if(!_0xc370d[_0x47d6d2(0x150)]()){alert(_0x47d6d2(0x27a));return;}const _0xd08221=_0xc370d[_0x47d6d2(0x1fe)]();if(!_0x1c6e63&&_0xd08221[_0x47d6d2(0x2df)]!==_0x5b75c5[_0x47d6d2(0x3c5)]){alert(_0x47d6d2(0x174));return;}const _0x1a6148=document[_0x47d6d2(0x34f)](_0x47d6d2(0x2ae)),_0x56524d=document['getElementById'](_0x47d6d2(0x3f8)),_0x178249=document[_0x47d6d2(0x34f)]('justDeleteBtn'),_0x3cf69a=document['getElementById']('swapDetails'),_0x122675=document['getElementById']('swapUsername'),_0x319ef1=document[_0x47d6d2(0x34f)]('validateSwapBtn'),_0xe49370=document[_0x47d6d2(0x34f)](_0x47d6d2(0x1f1)),_0xf5d025=document[_0x47d6d2(0x34f)](_0x47d6d2(0x234)),_0x11af72=document['getElementById'](_0x47d6d2(0x39a)),_0x525e78=document[_0x47d6d2(0x34f)](_0x47d6d2(0x2a4)),_0x395aa2=document[_0x47d6d2(0x34f)](_0x47d6d2(0x258)),_0x4108c1=document['getElementById']('swapSuccess'),_0x22cf76=document[_0x47d6d2(0x34f)]('swapSuccessMessage'),_0x5d6bf7=document[_0x47d6d2(0x34f)](_0x47d6d2(0x1ae)),_0x2d61d7=document[_0x47d6d2(0x34f)]('loadingOverlay');if(!_0x1a6148||!_0x2d61d7||!_0x56524d||!_0x178249||!_0x3cf69a||!_0x122675||!_0x319ef1||!_0xe49370||!_0xf5d025||!_0x11af72||!_0x525e78||!_0x395aa2||!_0x4108c1||!_0x22cf76||!_0x5d6bf7){console[_0x47d6d2(0x290)](_0x47d6d2(0x1f7),{'modal':_0x1a6148,'loadingOverlay':_0x2d61d7,'swappedBtn':_0x56524d,'justDeleteBtn':_0x178249,'swapDetails':_0x3cf69a,'swapUsername':_0x122675,'validateSwapBtn':_0x319ef1,'swapValidationResult':_0xe49370,'swapConfirmed':_0xf5d025,'swapPartner':_0x11af72,'editSwapBtn':_0x525e78,'proceedSwapBtn':_0x395aa2,'swapSuccess':_0x4108c1,'swapSuccessMessage':_0x22cf76,'closeDeleteModalBtn':_0x5d6bf7}),alert(_0x47d6d2(0x1b8));return;}let _0x52990d=null;_0x1a6148[_0x47d6d2(0x145)][_0x47d6d2(0x430)]=_0x47d6d2(0x39e),_0x1a6148[_0x47d6d2(0x38f)][_0x47d6d2(0x1f3)](_0x47d6d2(0x26a)),_0x3cf69a[_0x47d6d2(0x38f)][_0x47d6d2(0x4d4)]('hidden'),_0x4108c1[_0x47d6d2(0x38f)]['add'](_0x47d6d2(0x26a)),_0xe49370[_0x47d6d2(0x19e)]='',_0xf5d025[_0x47d6d2(0x38f)][_0x47d6d2(0x4d4)](_0x47d6d2(0x26a)),_0x395aa2[_0x47d6d2(0x38f)][_0x47d6d2(0x4d4)]('hidden'),_0x178249['onclick']=async()=>{const _0x215b24=_0x47d6d2;if(_0x178249[_0x215b24(0x3de)]){console[_0x215b24(0x375)]('Deletion\x20already\x20in\x20progress,\x20ignoring\x20click.');return;}if(confirm(_0x215b24(0x3a1))){_0x178249[_0x215b24(0x3de)]=!![];const _0x419f48=_0x178249[_0x215b24(0x19e)];_0x178249[_0x215b24(0x19e)]=_0x215b24(0x187),_0x178249[_0x215b24(0x38f)][_0x215b24(0x4d4)](_0x215b24(0x1c6)),_0x2d61d7[_0x215b24(0x38f)]['remove'](_0x215b24(0x26a));try{await deletePostAndCleanup(_0x40eae1,_0xd08221['photoUrls'],![],null),closeModal(_0x215b24(0x2ae)),refreshReportSummary(_0x5b75c5[_0x215b24(0x3c5)]);}catch(_0x5b6769){console['error'](_0x215b24(0x316),_0x5b6769),alert(_0x215b24(0x144));}finally{_0x2d61d7[_0x215b24(0x38f)][_0x215b24(0x4d4)]('hidden'),_0x178249['disabled']=![],_0x178249[_0x215b24(0x19e)]=_0x419f48,_0x178249['classList'][_0x215b24(0x1f3)]('loading');}}},_0x56524d[_0x47d6d2(0x1c1)]=()=>{const _0x5eb114=_0x47d6d2;_0x3cf69a[_0x5eb114(0x38f)][_0x5eb114(0x1f3)](_0x5eb114(0x26a)),_0x178249[_0x5eb114(0x145)][_0x5eb114(0x430)]='none',_0x56524d[_0x5eb114(0x145)][_0x5eb114(0x430)]='none',_0x122675[_0x5eb114(0x235)]();};async function _0x532228(_0x491a16){const _0x391da6=_0x47d6d2,_0x3eeb4a=_0x491a16[_0x391da6(0x326)](/^@/,''),_0x24829e=collection(db,_0x391da6(0x1b4)),_0x27fea2=query(_0x24829e,where('username','==',_0x3eeb4a)),_0x2dfc15=await getDocs(_0x27fea2);if(!_0x2dfc15[_0x391da6(0x3b2)]){const _0x5d318c=_0x2dfc15['docs'][0x0];return{'uid':_0x5d318c['id'],..._0x5d318c[_0x391da6(0x1fe)]()};}return null;}_0x319ef1[_0x47d6d2(0x1c1)]=async()=>{const _0x3c3b08=_0x47d6d2,_0x78da78=_0x122675[_0x3c3b08(0x2db)][_0x3c3b08(0x369)]();if(!_0x78da78){_0xe49370[_0x3c3b08(0x19e)]='Please\x20enter\x20a\x20username.';return;}_0xe49370[_0x3c3b08(0x19e)]=_0x3c3b08(0x357);const _0x10e59c=await _0x532228(_0x78da78);_0x10e59c?(_0x52990d=_0x10e59c[_0x3c3b08(0x3c5)],_0x11af72[_0x3c3b08(0x19e)]=_0x78da78,_0xe49370[_0x3c3b08(0x19e)]='',_0xf5d025[_0x3c3b08(0x38f)]['remove'](_0x3c3b08(0x26a)),_0x395aa2['classList'][_0x3c3b08(0x1f3)](_0x3c3b08(0x26a)),_0x122675['disabled']=!![],_0x319ef1['disabled']=!![]):(_0xe49370[_0x3c3b08(0x19e)]=_0x3c3b08(0x1d7),_0x52990d=null);},_0x525e78[_0x47d6d2(0x1c1)]=()=>{const _0x2623e9=_0x47d6d2;_0xf5d025['classList'][_0x2623e9(0x4d4)](_0x2623e9(0x26a)),_0x395aa2[_0x2623e9(0x38f)][_0x2623e9(0x4d4)](_0x2623e9(0x26a)),_0x122675[_0x2623e9(0x3de)]=![],_0x319ef1[_0x2623e9(0x3de)]=![],_0x122675[_0x2623e9(0x2db)]='',_0xe49370[_0x2623e9(0x19e)]='',_0x122675[_0x2623e9(0x235)]();},_0x395aa2[_0x47d6d2(0x1c1)]=async()=>{const _0x3eb16f=_0x47d6d2;if(_0x395aa2[_0x3eb16f(0x3de)]){console[_0x3eb16f(0x375)](_0x3eb16f(0x18c));return;}if(!_0x52990d){_0xe49370[_0x3eb16f(0x19e)]=_0x3eb16f(0x239);return;}const _0x33d4b9=_0x11af72[_0x3eb16f(0x19e)];if(confirm(_0x3eb16f(0x40f)+_0x33d4b9+_0x3eb16f(0x264))){_0x395aa2['disabled']=!![];const _0x225bcf=_0x395aa2[_0x3eb16f(0x19e)];_0x395aa2[_0x3eb16f(0x19e)]=_0x3eb16f(0x187),_0x395aa2[_0x3eb16f(0x38f)]['add'](_0x3eb16f(0x1c6)),_0x2d61d7[_0x3eb16f(0x38f)][_0x3eb16f(0x1f3)]('hidden');try{await deletePostAndCleanup(_0x40eae1,_0xd08221['photoUrls'],!![],_0x52990d),_0x3cf69a[_0x3eb16f(0x38f)][_0x3eb16f(0x4d4)]('hidden'),_0x4108c1['classList'][_0x3eb16f(0x1f3)]('hidden'),_0x22cf76['textContent']=_0x3eb16f(0x2de)+_0x33d4b9+'\x20swapped\x20this\x20item.\x20Help\x20us\x20continue\x20our\x20service\x20free.\x20Tip\x20us!',_0x5d6bf7['textContent']=_0x3eb16f(0x3e8),refreshReportSummary(_0x5b75c5['uid']);}catch(_0xfd7f36){console[_0x3eb16f(0x290)](_0x3eb16f(0x246),_0xfd7f36),alert(_0x3eb16f(0x211));}finally{_0x2d61d7['classList']['add'](_0x3eb16f(0x26a)),_0x395aa2[_0x3eb16f(0x3de)]=![],_0x395aa2['textContent']=_0x225bcf,_0x395aa2[_0x3eb16f(0x38f)][_0x3eb16f(0x1f3)](_0x3eb16f(0x1c6));}}};function _0x107e79(){const _0x5f09ca=_0x47d6d2;_0x3cf69a[_0x5f09ca(0x38f)][_0x5f09ca(0x4d4)]('hidden'),_0x4108c1[_0x5f09ca(0x38f)][_0x5f09ca(0x4d4)](_0x5f09ca(0x26a)),_0xe49370[_0x5f09ca(0x19e)]='',_0xf5d025[_0x5f09ca(0x38f)][_0x5f09ca(0x4d4)](_0x5f09ca(0x26a)),_0x395aa2[_0x5f09ca(0x38f)][_0x5f09ca(0x4d4)]('hidden'),_0x178249['style'][_0x5f09ca(0x430)]='block',_0x56524d[_0x5f09ca(0x145)][_0x5f09ca(0x430)]='block',_0x122675[_0x5f09ca(0x3de)]=![],_0x319ef1[_0x5f09ca(0x3de)]=![],_0x122675[_0x5f09ca(0x2db)]='',_0x5d6bf7[_0x5f09ca(0x19e)]=_0x5f09ca(0x4bd),_0x52990d=null;}_0x1a6148[_0x47d6d2(0x145)][_0x47d6d2(0x430)]=_0x47d6d2(0x39e),_0x1a6148['classList'][_0x47d6d2(0x1f3)]('hidden'),_0x107e79(),_0x5d6bf7[_0x47d6d2(0x1c1)]=()=>{const _0x15d363=_0x47d6d2;closeModal(_0x15d363(0x2ae)),_0x107e79();};}async function deletePostAndCleanup(_0x546b32,_0x452093,_0x502f67,_0x38e062){const _0x17a9cc=_0x3b0fb3,_0x45bcd1=doc(db,_0x17a9cc(0x405),communityId,_0x17a9cc(0x1aa),_0x546b32),_0x3cb972=collection(db,_0x17a9cc(0x405),communityId,_0x17a9cc(0x1aa),_0x546b32,'comments');await runTransaction(db,async _0x11e767=>{const _0x156242=_0x17a9cc;if(_0x502f67&&_0x38e062){const _0x2f5721=doc(db,_0x156242(0x1b4),auth['currentUser']['uid']),_0x547f73=doc(db,_0x156242(0x1b4),_0x38e062),_0x5d3272=await _0x11e767[_0x156242(0x338)](_0x2f5721),_0x3ef291=await _0x11e767['get'](_0x547f73);if(!_0x5d3272[_0x156242(0x150)]()||!_0x3ef291['exists']())throw new Error(_0x156242(0x435));const _0x3285ca=(_0x5d3272[_0x156242(0x1fe)]()[_0x156242(0x2d0)]||0x0)+0x1,_0x2c99a9=(_0x3ef291[_0x156242(0x1fe)]()[_0x156242(0x2d0)]||0x0)+0x1;_0x11e767[_0x156242(0x26b)](_0x2f5721,{'swaps':_0x3285ca}),_0x11e767[_0x156242(0x26b)](_0x547f73,{'swaps':_0x2c99a9});}_0x11e767[_0x156242(0x156)](_0x45bcd1);}),await deleteCollection(_0x3cb972);const _0x8ff354=_0x452093['map'](_0x58fd5f=>{const _0x3c54e7=_0x17a9cc,_0x4fe4c7=ref(storage,_0x58fd5f);return deleteObject(_0x4fe4c7)[_0x3c54e7(0x349)](_0x5d8e17=>console['error'](_0x3c54e7(0x4ae),_0x5d8e17));});await Promise[_0x17a9cc(0x25e)](_0x8ff354);const _0x2b7122=document[_0x17a9cc(0x34f)](_0x17a9cc(0x182)+_0x546b32);_0x2b7122?(_0x2b7122['remove'](),console['log'](_0x17a9cc(0x3be)+_0x546b32+_0x17a9cc(0x2b8))):console[_0x17a9cc(0x375)]('Post-'+_0x546b32+_0x17a9cc(0x24a)),postCache[_0x17a9cc(0x156)](_0x546b32),loadedPostIds[_0x17a9cc(0x156)](_0x546b32),PaginationState[_0x17a9cc(0x25c)][_0x17a9cc(0x156)](_0x546b32),totalYourPosts=0x0,await loadYourPosts(auth[_0x17a9cc(0x243)][_0x17a9cc(0x3c5)]),await loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,await loadCarouselPosts(communityId);}async function deleteCollection(_0x3452e7,_0x20f1d4=0x1f4){const _0x4d0443=_0x3b0fb3,_0x510b9b=query(_0x3452e7,limit(_0x20f1d4)),_0x43b5bc=await getDocs(_0x510b9b);if(_0x43b5bc[_0x4d0443(0x3b2)])return;const _0x3d249c=writeBatch(db);for(const _0x22ca3b of _0x43b5bc[_0x4d0443(0x3ab)]){const _0x492b59=collection(db,_0x22ca3b['ref'][_0x4d0443(0x416)],'replies');await deleteCollection(_0x492b59,_0x20f1d4),_0x3d249c[_0x4d0443(0x156)](_0x22ca3b[_0x4d0443(0x1a7)]);}await _0x3d249c[_0x4d0443(0x4cc)](),_0x43b5bc[_0x4d0443(0x481)]===_0x20f1d4&&await deleteCollection(_0x3452e7,_0x20f1d4);}function setupYourPostsCarousel(_0x587968){const _0x5dc05f=_0x3b0fb3,_0x3e7746=document[_0x5dc05f(0x34f)](_0x5dc05f(0x48e)+_0x587968+'-your'),_0x3d2d9b=_0x3e7746[_0x5dc05f(0x2f2)](_0x5dc05f(0x44f)+_0x587968+_0x5dc05f(0x23b)),_0x10d82e=_0x3e7746[_0x5dc05f(0x2f2)]('.carousel-next[data-post-id=\x22'+_0x587968+_0x5dc05f(0x23b)),_0x2c3d05=_0x3e7746[_0x5dc05f(0x2f2)](_0x5dc05f(0x3f2));let _0x5455ec=JSON[_0x5dc05f(0x392)](_0x3e7746[_0x5dc05f(0x468)][_0x5dc05f(0x191)]||'[]');if(!_0x3d2d9b||!_0x10d82e||!_0x2c3d05){console[_0x5dc05f(0x290)](_0x5dc05f(0x271)+_0x587968+':\x20missing\x20elements');return;}_0x5455ec[_0x5dc05f(0x2fe)]===0x0&&(_0x5455ec=['https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430',_0x5dc05f(0x203)]);_0x2c3d05[_0x5dc05f(0x261)]=_0x5455ec[0x0],_0x2c3d05['dataset'][_0x5dc05f(0x476)]='0';let _0x331c56=0x0;_0x3d2d9b[_0x5dc05f(0x4b6)]('click',_0x3d2d9b[_0x5dc05f(0x318)]),_0x10d82e[_0x5dc05f(0x4b6)](_0x5dc05f(0x372),_0x10d82e[_0x5dc05f(0x318)]),_0x3d2d9b[_0x5dc05f(0x318)]=_0x52f959=>{const _0x24b38c=_0x5dc05f;_0x52f959[_0x24b38c(0x1af)](),_0x52f959[_0x24b38c(0x45b)](),_0x331c56=(_0x331c56-0x1+_0x5455ec[_0x24b38c(0x2fe)])%_0x5455ec['length'],_0x2c3d05[_0x24b38c(0x261)]=_0x5455ec[_0x331c56],_0x2c3d05['dataset']['index']=_0x331c56;},_0x10d82e['_carouselHandler']=_0x284152=>{const _0x14f952=_0x5dc05f;_0x284152[_0x14f952(0x1af)](),_0x284152[_0x14f952(0x45b)](),_0x331c56=(_0x331c56+0x1)%_0x5455ec['length'],_0x2c3d05[_0x14f952(0x261)]=_0x5455ec[_0x331c56],_0x2c3d05[_0x14f952(0x468)]['index']=_0x331c56;},_0x3d2d9b[_0x5dc05f(0x4a9)](_0x5dc05f(0x372),_0x3d2d9b[_0x5dc05f(0x318)]),_0x10d82e['addEventListener']('click',_0x10d82e[_0x5dc05f(0x318)]);}function setupCommunityCarousel(_0x2edeb4){const _0x2a064c=_0x3b0fb3,_0x533f62=document[_0x2a064c(0x34f)]('carousel-'+_0x2edeb4+_0x2a064c(0x384)),_0x2e1eef=_0x533f62[_0x2a064c(0x2f2)](_0x2a064c(0x44f)+_0x2edeb4+_0x2a064c(0x4c4)),_0xc66269=_0x533f62[_0x2a064c(0x2f2)](_0x2a064c(0x475)+_0x2edeb4+_0x2a064c(0x4c4)),_0xc9792e=_0x533f62['querySelector'](_0x2a064c(0x3f2));let _0x402079=JSON[_0x2a064c(0x392)](_0x533f62[_0x2a064c(0x468)][_0x2a064c(0x191)]||'[]');if(!_0x2e1eef||!_0xc66269||!_0xc9792e){console[_0x2a064c(0x290)](_0x2a064c(0x3e6)+_0x2edeb4+_0x2a064c(0x36d));return;}_0x402079[_0x2a064c(0x2fe)]===0x0&&(_0x402079=[_0x2a064c(0x203),_0x2a064c(0x203)]);_0xc9792e[_0x2a064c(0x261)]=_0x402079[0x0],_0xc9792e['dataset']['index']='0';let _0x235fdb=0x0;_0x2e1eef['removeEventListener']('click',_0x2e1eef['_carouselHandler']),_0xc66269['removeEventListener'](_0x2a064c(0x372),_0xc66269[_0x2a064c(0x318)]),_0x2e1eef['_carouselHandler']=_0x1659a9=>{const _0x5bd79a=_0x2a064c;_0x1659a9[_0x5bd79a(0x1af)](),_0x1659a9[_0x5bd79a(0x45b)](),_0x235fdb=(_0x235fdb-0x1+_0x402079[_0x5bd79a(0x2fe)])%_0x402079[_0x5bd79a(0x2fe)],_0xc9792e[_0x5bd79a(0x261)]=_0x402079[_0x235fdb],_0xc9792e[_0x5bd79a(0x468)][_0x5bd79a(0x476)]=_0x235fdb;},_0xc66269['_carouselHandler']=_0x3e080d=>{const _0x36cb39=_0x2a064c;_0x3e080d[_0x36cb39(0x1af)](),_0x3e080d['stopPropagation'](),_0x235fdb=(_0x235fdb+0x1)%_0x402079['length'],_0xc9792e[_0x36cb39(0x261)]=_0x402079[_0x235fdb],_0xc9792e[_0x36cb39(0x468)][_0x36cb39(0x476)]=_0x235fdb;},_0x2e1eef['addEventListener']('click',_0x2e1eef[_0x2a064c(0x318)]),_0xc66269[_0x2a064c(0x4a9)](_0x2a064c(0x372),_0xc66269[_0x2a064c(0x318)]);}let lastCarouselDoc=null,firstCarouselDoc=null,totalCarouselPosts=0x0,lastFilterState={'lookingFor':'','offering':''},cachedMemberCount=null;async function getMemberCount(_0x3b2e9b){const _0x50c124=_0x3b0fb3;if(cachedMemberCount!==null)return cachedMemberCount;const _0x5e5957=doc(db,'communities',_0x3b2e9b),_0xaa8cb3=await getDoc(_0x5e5957);if(!_0xaa8cb3[_0x50c124(0x150)]())return console['error']('Community\x20not\x20found!'),0x0;return cachedMemberCount=_0xaa8cb3[_0x50c124(0x1fe)]()[_0x50c124(0x2f4)]||0x0,cachedMemberCount;}async function loadCarouselPosts(_0x45a68c,_0x464d98=0x1){const _0x36338d=_0x3b0fb3,_0x20de14=document[_0x36338d(0x34f)](_0x36338d(0x1e3)),_0x2acc01=document[_0x36338d(0x34f)](_0x36338d(0x328)),_0xe85002=document[_0x36338d(0x34f)](_0x36338d(0x227)),_0x4bb7cf=document[_0x36338d(0x34f)](_0x36338d(0x3f4))?.[_0x36338d(0x2db)]||'',_0x1b13b5=document[_0x36338d(0x34f)]('offeringFilter')?.[_0x36338d(0x2db)]||'',_0x53c549=window[_0x36338d(0x1a9)]<0x300?0x2:0x4;_0x20de14[_0x36338d(0x396)]=_0x36338d(0x35d);const _0x8db172=await getMemberCount(_0x45a68c),_0x232d0f=Math[_0x36338d(0x259)](0x5,Math[_0x36338d(0x4ad)](_0x8db172*0.01)),_0x49890d={'lookingFor':_0x4bb7cf,'offering':_0x1b13b5};if(totalCarouselPosts===0x0||lastFilterState[_0x36338d(0x47b)]!==_0x49890d[_0x36338d(0x47b)]||lastFilterState[_0x36338d(0x360)]!==_0x49890d['offering']){const _0x3669bd=query(collection(db,_0x36338d(0x405),_0x45a68c,'posts'),where(_0x36338d(0x46b),'>=',_0x232d0f),..._0x4bb7cf?[where(_0x36338d(0x47b),'==',_0x4bb7cf)]:[],..._0x1b13b5?[where(_0x36338d(0x360),'==',_0x1b13b5)]:[]);totalCarouselPosts=(await getDocs(_0x3669bd))['size'],lastFilterState=_0x49890d,console['log'](_0x36338d(0x176)+_0x45a68c+':\x20'+totalCarouselPosts);}const _0x5121e2=Math[_0x36338d(0x259)](0x0,Math[_0x36338d(0x4ad)](totalCarouselPosts/_0x53c549)-0x1);if(carouselIndex<0x0)carouselIndex=_0x5121e2;else carouselIndex>_0x5121e2&&(carouselIndex=0x0);let _0x2b747a=query(collection(db,'communities',_0x45a68c,_0x36338d(0x1aa)),where(_0x36338d(0x46b),'>=',_0x232d0f),..._0x4bb7cf?[where(_0x36338d(0x47b),'==',_0x4bb7cf)]:[],..._0x1b13b5?[where(_0x36338d(0x360),'==',_0x1b13b5)]:[],orderBy(_0x36338d(0x46b),_0x36338d(0x240)));if(_0x464d98>0x0&&carouselIndex>0x0&&lastCarouselDoc&&carouselIndex<=_0x5121e2)_0x2b747a=query(_0x2b747a,startAfter(lastCarouselDoc),limit(_0x53c549));else{if(_0x464d98<0x0&&carouselIndex>=0x0&&firstCarouselDoc&&carouselIndex<_0x5121e2)_0x2b747a=query(_0x2b747a,endBefore(firstCarouselDoc),limitToLast(_0x53c549));else{if(carouselIndex===0x0||totalCarouselPosts<=_0x53c549)_0x2b747a=query(_0x2b747a,limit(_0x53c549));else carouselIndex===_0x5121e2&&(_0x2b747a=query(collection(db,_0x36338d(0x405),_0x45a68c,_0x36338d(0x1aa)),where(_0x36338d(0x46b),'>=',_0x232d0f),..._0x4bb7cf?[where(_0x36338d(0x47b),'==',_0x4bb7cf)]:[],..._0x1b13b5?[where(_0x36338d(0x360),'==',_0x1b13b5)]:[],orderBy('likes',_0x36338d(0x240)),limitToLast(_0x53c549)));}}const _0x2b9b79=await getDocs(_0x2b747a),_0x5aa340=_0x2b9b79[_0x36338d(0x3ab)][_0x36338d(0x180)](_0x4ab07f=>({'id':_0x4ab07f['id'],..._0x4ab07f[_0x36338d(0x1fe)](),'communityId':_0x45a68c}));if(_0x2b9b79[_0x36338d(0x3ab)][_0x36338d(0x2fe)]>0x0)lastCarouselDoc=_0x2b9b79[_0x36338d(0x3ab)][_0x2b9b79[_0x36338d(0x3ab)][_0x36338d(0x2fe)]-0x1],firstCarouselDoc=_0x2b9b79['docs'][0x0];else{if(_0x464d98>0x0)carouselIndex=0x0,_0x2b747a=query(collection(db,_0x36338d(0x405),_0x45a68c,_0x36338d(0x1aa)),where(_0x36338d(0x46b),'>=',_0x232d0f),..._0x4bb7cf?[where(_0x36338d(0x47b),'==',_0x4bb7cf)]:[],..._0x1b13b5?[where(_0x36338d(0x360),'==',_0x1b13b5)]:[],orderBy(_0x36338d(0x46b),_0x36338d(0x240)),limit(_0x53c549));else _0x464d98<0x0&&(carouselIndex=_0x5121e2,_0x2b747a=query(collection(db,_0x36338d(0x405),_0x45a68c,_0x36338d(0x1aa)),where(_0x36338d(0x46b),'>=',_0x232d0f),..._0x4bb7cf?[where(_0x36338d(0x47b),'==',_0x4bb7cf)]:[],..._0x1b13b5?[where(_0x36338d(0x360),'==',_0x1b13b5)]:[],orderBy(_0x36338d(0x46b),'desc'),limitToLast(_0x53c549)));const _0x2f9a8b=await getDocs(_0x2b747a);_0x5aa340['push'](..._0x2f9a8b[_0x36338d(0x3ab)][_0x36338d(0x180)](_0x1b5b4c=>({'id':_0x1b5b4c['id'],..._0x1b5b4c[_0x36338d(0x1fe)](),'communityId':_0x45a68c}))),_0x2f9a8b['docs'][_0x36338d(0x2fe)]>0x0&&(lastCarouselDoc=_0x2f9a8b[_0x36338d(0x3ab)][_0x2f9a8b[_0x36338d(0x3ab)]['length']-0x1],firstCarouselDoc=_0x2f9a8b[_0x36338d(0x3ab)][0x0]);}_0x5aa340[_0x36338d(0x2b3)](_0x1122c7=>{const _0x3319e0=_0x36338d;!postCache[_0x3319e0(0x27d)](_0x1122c7['id'])&&(postCache[_0x3319e0(0x276)](_0x1122c7['id'],_0x1122c7),console[_0x3319e0(0x375)](_0x3319e0(0x452)+_0x1122c7['id']+_0x3319e0(0x3c9)+_0x45a68c));}),_0x20de14['innerHTML']=_0x5aa340[_0x36338d(0x2fe)]===0x0?_0x36338d(0x48d):'';for(const _0x2e220a of _0x5aa340){if(_0x2e220a[_0x36338d(0x24b)]!==_0x45a68c){console[_0x36338d(0x375)](_0x36338d(0x28e)+_0x2e220a['id']+'—belongs\x20to\x20'+_0x2e220a['communityId']+',\x20not\x20'+_0x45a68c);continue;}const _0x4e1af2=await fetchUserData(_0x2e220a[_0x36338d(0x2df)]),_0x53efe9=document[_0x36338d(0x22d)](_0x36338d(0x3b0));_0x53efe9[_0x36338d(0x289)]='carousel-post',_0x53efe9[_0x36338d(0x396)]='\x0a\x20\x20<h4>'+(_0x2e220a[_0x36338d(0x255)]||_0x36338d(0x262))+_0x36338d(0x2c8)+(_0x2e220a[_0x36338d(0x47b)]||_0x36338d(0x437))+_0x36338d(0x39c)+(_0x2e220a[_0x36338d(0x360)]||_0x36338d(0x437))+_0x36338d(0x17a)+(_0x2e220a['likes']||0x0)+_0x36338d(0x346)+_0x2e220a[_0x36338d(0x2df)]+'\x22>'+(_0x4e1af2[_0x36338d(0x2fb)]||_0x36338d(0x1b2))+_0x36338d(0x1a6)+_0x2e220a['id']+'\x22>Copy\x20Post\x20ID</button>\x0a',_0x20de14[_0x36338d(0x467)](_0x53efe9),_0x53efe9[_0x36338d(0x2f2)](_0x36338d(0x380))[_0x36338d(0x4a9)](_0x36338d(0x372),()=>viewProfile(_0x2e220a[_0x36338d(0x2df)])),_0x53efe9[_0x36338d(0x2f2)](_0x36338d(0x1a3))[_0x36338d(0x4a9)](_0x36338d(0x372),_0x4747ce=>{_0x4747ce['stopPropagation'](),copyPostId(_0x2e220a['id']);});}_0x2acc01[_0x36338d(0x3de)]=totalCarouselPosts===0x0,_0xe85002[_0x36338d(0x3de)]=totalCarouselPosts===0x0,console[_0x36338d(0x375)](_0x36338d(0x348)+_0x45a68c+_0x36338d(0x483)+carouselIndex);}function slideCarousel(_0x165f82){carouselIndex+=_0x165f82,loadCarouselPosts(communityId,_0x165f82);}const delay=_0x206870=>new Promise(_0x2ad769=>setTimeout(_0x2ad769,_0x206870)),POST_CACHE_KEY=_0x3b0fb3(0x195)+communityId,LIKED_PREFS_KEY=_0x3b0fb3(0x3d6)+communityId,CACHE_TIMESTAMP_KEY='cacheTimestamp_'+communityId,CACHE_EXPIRY_HOURS=0x8,PaginationState={'POSTS_PER_PAGE':0xa,'currentPage':0x1,'displayedPostIds':new Set()};function isCacheExpired(){const _0x3d7cbb=_0x3b0fb3,_0x41f562=sessionStorage[_0x3d7cbb(0x37d)](CACHE_TIMESTAMP_KEY);if(!_0x41f562)return!![];const _0x1e9fa2=Date[_0x3d7cbb(0x42a)]()-parseInt(_0x41f562);return _0x1e9fa2>CACHE_EXPIRY_HOURS*0x3c*0x3c*0x3e8;}function resetCache(){const _0x2b1662=_0x3b0fb3;sessionStorage[_0x2b1662(0x1b6)](POST_CACHE_KEY),sessionStorage['removeItem'](LIKED_PREFS_KEY),sessionStorage['setItem'](CACHE_TIMESTAMP_KEY,Date['now']()['toString']());}function getLikedPrefs(){const _0x595848=_0x3b0fb3;if(isCacheExpired())resetCache();const _0x5e3022=sessionStorage['getItem'](LIKED_PREFS_KEY);if(!_0x5e3022)return{'categories':new Set(),'offerings':new Set()};const _0x5eca1a=JSON[_0x595848(0x392)](_0x5e3022);return{'categories':new Set(_0x5eca1a['categories']),'offerings':new Set(_0x5eca1a[_0x595848(0x2e8)])};}function addLikedPref(_0xf94ab0,_0x4da58b){const _0x51aea9=_0x3b0fb3,_0x4477e8=getLikedPrefs();_0x4477e8[_0x51aea9(0x1ad)]['add'](_0xf94ab0),_0x4477e8[_0x51aea9(0x2e8)][_0x51aea9(0x4d4)](_0x4da58b),sessionStorage[_0x51aea9(0x46f)](LIKED_PREFS_KEY,JSON['stringify']({'categories':Array[_0x51aea9(0x309)](_0x4477e8[_0x51aea9(0x1ad)]),'offerings':Array[_0x51aea9(0x309)](_0x4477e8[_0x51aea9(0x2e8)])}));}function normalizePostData(_0x4dbcb9){const _0x33153b=_0x3b0fb3;return{..._0x4dbcb9,'createdAt':_0x4dbcb9[_0x33153b(0x161)]instanceof Object&&'toDate'in _0x4dbcb9[_0x33153b(0x161)]?_0x4dbcb9['createdAt']['toDate']():new Date(_0x4dbcb9[_0x33153b(0x161)])};}function getCachedPosts(){const _0x37e49e=_0x3b0fb3;if(isCacheExpired())resetCache();const _0xc290ae=sessionStorage[_0x37e49e(0x37d)](POST_CACHE_KEY);if(!_0xc290ae)return new Map();const _0x4059b5=JSON['parse'](_0xc290ae);return new Map(_0x4059b5[_0x37e49e(0x180)](([_0x330e84,_0x1349ec])=>{const _0x4f93e6=_0x37e49e;return _0x1349ec[_0x4f93e6(0x1fe)][_0x4f93e6(0x161)]=new Date(_0x1349ec[_0x4f93e6(0x1fe)][_0x4f93e6(0x161)]),[_0x330e84,_0x1349ec];}));}function setCachedPosts(_0x4e3005){const _0x1eab09=_0x3b0fb3,_0x3d8c7a=0x3e8,_0x53ac4d=new Map(Array[_0x1eab09(0x309)](_0x4e3005[_0x1eab09(0x2e4)]())['map'](([_0x41ed03,_0x56b64a])=>{const _0x9b9674=_0x1eab09;return[_0x41ed03,{..._0x56b64a,'data':{..._0x56b64a['data'],'createdAt':_0x56b64a[_0x9b9674(0x1fe)][_0x9b9674(0x161)]['toISOString']()}}];}));if(_0x53ac4d[_0x1eab09(0x481)]>_0x3d8c7a){const _0x4fb353=_0x53ac4d[_0x1eab09(0x481)]-_0x3d8c7a,_0xea0cf1=Array['from'](_0x53ac4d['keys']())[_0x1eab09(0x2f5)](0x0,_0x4fb353);_0xea0cf1[_0x1eab09(0x2b3)](_0x285679=>_0x53ac4d[_0x1eab09(0x156)](_0x285679)),console['log'](_0x1eab09(0x344)+_0x4fb353+'\x20oldest\x20posts\x20from\x20cache');}sessionStorage[_0x1eab09(0x46f)](POST_CACHE_KEY,JSON[_0x1eab09(0x463)](Array['from'](_0x53ac4d['entries']()))),!sessionStorage[_0x1eab09(0x37d)](CACHE_TIMESTAMP_KEY)&&sessionStorage['setItem'](CACHE_TIMESTAMP_KEY,Date[_0x1eab09(0x42a)]()[_0x1eab09(0x1b3)]());}function _0x24e9(){const _0x33c171=['Creating\x20new\x20user\x20with\x20data:','<p>Failed\x20to\x20load\x20some\x20members.</p>','.like-btn[data-post-id=\x22','innerHTML','Community\x20ID\x20','\x22\x20data-id=\x22','Pet\x20Supplies','swapPartner','Electronics\x20&\x20Gadgets','</p>\x0a\x20\x20<p\x20class=\x22highlight\x22>Offering:\x20','expiry','flex','Missing','Sports\x20&\x20Outdoors','Delete\x20this\x20post\x20from\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities\x20you\x20posted\x20to.','[DeleteCommunity]\x20Document\x20reappeared\x20with\x20data:','hasUnread','comments','Loading\x20search\x20batch:\x20startIndex=','#seeLessMembersBtn','</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-','display:\x20none\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20hidden\x20!important;\x20opacity:\x200\x20!important;','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','viewRequestsBtn','docs','User\x20document\x20not\x20found\x20in\x20Firestore','fetchCurrentUserData','Paste\x20failed:','border','div','getCachedUser','empty','pending','<div\x20class=\x22report-warning\x22\x20id=\x22warning-','Reset\x20post\x20list\x20and\x20caches\x20for\x20community\x20','block','[DeleteCommunity]\x20Firestore\x20instance:','Seen','unseenCount','refreshPostsBtn','toBlob','newPostForm','savePostNote','Removed\x20post-','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20community?\x20This\x20action\x20is\x20permanent\x20and\x20cannot\x20be\x20undone.','reduce','<p>No\x20granted\x20profile\x20access.</p>','padding','category','\x22>Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','uid','Missing\x20required\x20fields','\x20reports\x20and\x20is\x20hidden\x20from\x20others.\x20Appeal\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','viewProfileViewRequestsBtn','\x20for\x20','oninput','textarea','selectedIndex','Community\x20','commentCount','.delete-appeal-btn','.decline-btn','clear','count','#reportPost-','Created\x20new\x20user\x20in\x20DB:\x20','#report-content','likedPrefs_','createPostBtn','\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-appeal-btn\x22\x20data-appeal-id=\x22','open','Error\x20fetching\x20unseen\x20count:','Error\x20submitting\x20appeal:','transform','disabled','Unnamed','10px','Error\x20updating\x20note:','See\x20Reports</summary>\x0a\x20\x20<div\x20id=\x22report-content\x22\x20class=\x22report-content\x22></div>\x0a</details>\x0a','\x20new\x20posts\x20for\x20','Unknown\x20Community','Post\x20creation\x20in\x20progress,\x20ignoring\x20extra\x20click.','Community\x20carousel\x20setup\x20failed\x20for\x20post\x20','chat','Close','profileRequestsBtn\x20not\x20found\x20in\x20DOM','User\x20not\x20found','getContext','\x20(age:\x20','scrollTo','savedPostsList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-container\x22\x20data-post-id=\x22','totalPosts_','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20class=\x22appeal-form\x22\x20data-post-id=\x22','.carousel-image','Baby\x20&\x20Kids','lookingForFilter','scrollTop','keys','https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y','swappedBtn','<h3>Admin:</h3>','\x22>Copy</button></p>\x0a\x20\x20\x20\x20\x20\x20','Failed\x20to\x20copy\x20username:','height','isArray','Failed\x20to\x20update\x20note.\x20Try\x20again.','viewProfileModal','active','Failed\x20to\x20leave\x20the\x20community:\x20','https://nominatim.openstreetmap.org/search?q=','#deletePost-','<p\x20class=\x27error-message\x27>Error:\x20Couldn’t\x20load\x20saved\x20posts.\x20Try\x20refreshing.</p>','communities','\x20|\x20Looking\x20For:\x20','User\x20canceled\x20clearing\x20notifications.','.user-item','swapCount','removeChild','Arts\x20&\x20Crafts','Fetching\x20user\x20data\x20for\x20UID:\x20','querySelectorAll','address','Mark\x20this\x20post\x20as\x20swapped\x20with\x20','Community\x20name\x20updated!','cancelNameBtn','bannedUsers','<span>','DOMContentLoaded','Existing\x20user\x20data:','path','.clear-reports-btn','concat','\x20only?','insertBefore','<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Unsave','floor','[DeleteCommunity]\x20Document\x20successfully\x20removed\x20-\x20verifying\x20persistence...','string','User\x20is\x20away\x20from\x20screen,\x20stopping\x20updates.','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<button\x20id=\x22editNameBtn\x22>Edit\x20Name\x20(Community)</button>','summary','communityFilter','-search\x22\x20data-photos=\x27','visibilitychange','checked','<i\x20class=\x22fas\x20fa-comments\x22></i>\x20Chats\x20','Initial\x20members\x20loaded:','Something’s\x20broken—refresh\x20the\x20page!','now','communityIds\x20is\x20not\x20an\x20array\x20or\x20undefined,\x20initializing\x20as\x20[]','[DeleteCommunity]\x20Executing\x20deletion\x20transaction\x20at:','Error\x20fetching\x20notifications:','input[value=\x22all\x22]',')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22revoke-btn\x22\x20data-request-id=\x22','display','\x22>Copy</button></p>\x0a\x20\x20\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','confirmSavePostBtn','</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewSavedPostsBtn\x22>Saved\x20Posts</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewChatsBtn\x22><i\x20class=\x22fas\x20fa-comments\x22></i>\x20Chats</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMyFollowersBtn\x22>Followers</button>\x0a\x20\x20\x20\x20','closeSavedPostsBtn','User\x20or\x20partner\x20not\x20found.','lon','N/A','LifeSwap/1.0\x20(your-email@example.com)','<div\x20class=\x27loading\x27>⏳\x20Searching...</div>','\x20found\x20in\x20cache—no\x20Firestore\x20read\x20needed.','Members\x20(Total:\x20','#refreshNotificationsBtn','\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a','Post\x20unsaved!','admin-report-summary','</span>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./start.html\x22\x20id=\x22copyAndJoinLink\x22>Copy\x20ID\x20and\x20Join</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','suggestion-item','notifications','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','score','viewMembersBtn','Copy\x20failed:','offeringFilter','appealSubmitted','phone','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-','Profile\x20Requests\x20','viewMembersModal','.carousel-prev[data-post-id=\x22','#post-','\x20|\x20Offering:\x20','Cached\x20carousel\x20post\x20','updateNotificationBadge','grantedProfileAccessList','Offline\x20persistence\x20enabled\x20successfully!','[DeleteCommunity]\x20Local\x20cache\x20cleared.','861750VNbdTk','Current\x20userData\x20state:','<div\x20class=\x22loading\x22>⏳\x20Searching...</div>','Fetched\x20unseen\x20count:\x20','stopPropagation','</p>\x0a\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','renderPosts','<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22','1000','.mark-seen-btn2','<option\x20value=\x22all\x22>All\x20Communities</option>','position','stringify','\x20(ID:\x20','Error\x20loading\x20post\x20','seeLessYourPostsBtn','appendChild','dataset','visibilityState','readText','likes','delay','Post\x20ID\x20copied!','\x22\x20data-community-id=\x22','setItem','<p>Failed\x20to\x20load\x20notifications.\x20Try\x20refreshing.</p>','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22','refreshNotificationsBtn','ID:\x20','POSTS_PER_PAGE','.carousel-next[data-post-id=\x22','index','caughtUpMessage','.revoke-btn','admins','An\x20administrator\x20has\x20reinstated\x20your\x20ban.\x20For\x20the\x20original\x20or\x20a\x20diffrent\x20reason.\x20Please\x20contact\x20us\x20at\x20','lookingFor','</button>\x0a','-search\x22]','\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22commentForm-','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','6979JMrgPd','size','Skipping\x20post\x20',',\x20index:\x20','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','.report-warning','Unnamed\x20Community','.\x20Check\x20the\x20console\x20for\x20details.','Someone','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22not-member-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20aren\x27t\x20a\x20member\x20of\x20this\x20community.</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Copy\x20the\x20community\x20ID\x20and\x20go\x20back\x20to\x20join!\x20We\x20are\x20waiting\x20for\x20you!\x20💚</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Community\x20ID:</strong>\x20<span\x20id=\x22communityIdText\x22>','Error:\x20','</span>\x0a\x20\x20','username','<p\x20class=\x22no-posts\x22>No\x20trending\x20posts\x20yet!</p>','carousel-','Are\x20you\x20sure\x20you\x20want\x20to\x20unsave\x20this\x20post?','<h3>Reported\x20Posts</h3>','copyCommunityIdBtn','</span>\x0a\x20\x20\x20\x20','banAppeals','viewProfileViewRequestsModal','<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','Verified\x20communityIds\x20in\x20Firestore\x20after\x20update:','You’ve\x20already\x20saved\x20this\x20post!','\x22>Report\x20Post</button>\x0a\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20','\x20is\x20hidden\x20due\x20to\x20reports\x20(visible\x20to\x20admins/owner\x20only).</p>','sort','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[DeleteCommunity]\x20Transaction\x20completed\x20in:','No\x20Title','communityCheckboxes\x20div\x20not\x20found\x20in\x20DOM\x20yet!','\x20not\x20found—assuming\x20deleted.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ban-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20are\x20banned\x20from\x20this\x20community!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Reason:</strong>\x20','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','in-progress','[DeleteCommunity]\x20Pre-deletion\x20check\x20-\x20Document\x20exists:','post','No\x20communities\x20selected','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20\x22','yourPostsList','#communityCheckboxes\x20input[name=\x27communities\x27]:checked','addEventListener','cssText','savedAt','profileRequests','ceil','Failed\x20to\x20delete\x20photo:','<p>Post\x20ID\x20','Loaded\x20count:','[DeleteCommunity]\x20','/index.html','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./community.html?id=','postSearch','<p>No\x20reported\x20posts!</p>','removeEventListener','11343440BaHWbl','change','\x0a\x20\x20<span\x20class=\x22timestamp\x22>','viewSavedPostsBtn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-item\x22\x20data-appeal-id=\x22','Furniture\x20&\x20Home\x20Decor','Cancel','Edit\x20Note','230gNNJhl','Cache\x20expired\x20for\x20','postId','#viewProfileViewRequestsBtn','See\x20More\x20display:','-community\x22]','<button\x20class=\x22delete-btn\x22\x20id=\x22deleteCommunityBtn\x22>Delete\x20(Community)</button>','Showing\x20','2259070ebFemn','20px','-your\x22><</button>','html','load-more-btn','commit','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMembersBtn\x22>Members</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewProfileViewRequestsBtn\x22>Profile\x20Requests\x20','\x20-\x20After\x202s\x20delay\x20-\x20Exists:','editNameBtn','\x20accepted\x20your\x20profile\x20view\x20request!','<p>Failed\x20to\x20load\x20members.\x20Try\x20again.</p>','boxShadow','\x20report','add','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','\x0a<label\x20for=\x22comm-all\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-all\x22\x20name=\x22communities\x22\x20value=\x22all\x22>\x20All\x20Communities\x0a</label>\x0a','viewChats','-community\x22><</button>','.modal-content','\x22>\x0a','clearSearchBtn','opacity','db:','Something\x20went\x20wrong.\x20Please\x20try\x20again.','style','target','<p>No\x20active\x20communities\x20found.</p>','.appeal-container','ies','</p>\x0a\x20\x20\x20\x20\x20\x20<p>Category:\x20','</span>\x0a','Fill\x20out\x20all\x20fields,\x20pick\x20a\x20category,\x20and\x20select\x20what\x20you\x27re\x20looking\x20for\x20and\x20offering!',')</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22save-toggle-btn\x22\x20data-post-id=\x22','communitiesList','currentPage','exists','profileViewRequestsList','User\x20UID\x20is\x20undefined,\x20skipping\x20profile\x20requests\x20query!','#seeMoreSearchMembersBtn','No\x20authenticated\x20user!','submit','delete','viewChatsBtn','docId','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','Swaps\x20field\x20undefined,\x20setting\x20to\x200','<button\x20id=\x22viewRequestsBtn\x22>Profile\x20Requests\x20(','HTTP\x20error!\x20Status:\x20','—belongs\x20to\x20',')\x0a</label>\x0a','match','life-swap-6065e.firebasestorage.app','createdAt','delete-status','requestId','Updating\x20buttons:','viewBannedModal','reportCount','some','\x20is\x20missing\x20user\x20data.</div>','.save-toggle-btn[data-post-id=\x22','Client:\x20Incremented\x20unseenCount\x20for\x20','\x20removed\x20from\x20user\x27s\x20communityIds','documentElement','load-less-btn','<p>Oops,\x20something\x20broke!\x20Try\x20refreshing.</p>','#yourPostsList\x20#post-','Error\x20loading\x20saved\x20posts:','<span\x20class=\x22request-badge\x22>','photoUrls','beforeend','You\x20can’t\x20delete\x20this\x20post!','Post\x20reported!','Total\x20trending\x20posts\x20for\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Appeal\x20to\x20admins\x20(e.g.,\x20\x27Not\x20breaking\x20rules\x20because...\x27)\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',',\x20expires\x20at\x20','</a>\x0a\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20<p><i\x20class=\x22fas\x20fa-heart\x22></i>\x20Likes:\x20','copyAndJoinLink','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22granted-','displayName','Adding\x20communityId\x20','[DeleteCommunity]\x20Pre-deletion\x20document\x20data:','map','</div>','post-','Confirmed:\x20Community\x20ID\x20','tagName','475311181000','communityIds','Deleting...','Persistence\x20not\x20available:\x20Browser\x20doesn’t\x20support\x20it.','communityName','members','Community\x20ID\x20copied\x20to\x20clipboard!\x20Head\x20back\x20to\x20join.','Swap\x20deletion\x20already\x20in\x20progress,\x20ignoring\x20click.','href','profile_request_accepted','newCommunityName','posts/','photos','option','Cleared\x20unread\x20flags\x20for\x20chats:','\x22><i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x20Edit\x20Note</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-saved-btn\x22\x20data-doc-id=\x22','postCache_','find','\x22\x20(ID:\x20','banReasons','profile_request_declined','<i\x20class=\x22fas\x20fa-heart\x22></i>\x20Like','Load\x20Less','town','delete-status\x20','textContent','saved-posts-grid','toLocaleString','seen','<p>No\x20new\x20posts\x20to\x20show!</p>','.copy-btn','seeLessSearchMembersBtn','Post\x20saved!','</span></p>\x0a\x20\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22','ref','toDate','innerWidth','posts','savePost\x20called\x20for\x20postId:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20','categories','closeDeleteModalBtn','preventDefault','No\x20valid\x20communities\x20selected!','\x22\x20class=\x22profile-photo\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3><span\x20class=\x22username\x22\x20data-uid=\x22','Unknown','toString','users','isHidden','removeItem','.appeal-form','Error:\x20Modal\x20setup\x20incomplete.\x20Please\x20refresh\x20the\x20page.','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20','-search\x22><</button>','Are\x20you\x20sure\x20you\x20want\x20to\x20leave\x20this\x20community?','closest','<div\x20class=\x22post-error\x22>Error:\x20Post\x20','&format=json&limit=5&addressdetails=1',')\x20-\x20','createDocumentFragment','onclick','<span\x20class=\x22chat-badge\x22>(new)</span>','\x0a\x20\x20<span\x20class=\x22clickable-profile\x22\x20data-uid=\x22','<p>Something\x20went\x20wrong,\x20try\x20again!</p>','Clear\x20all\x20reports\x20for\x20this\x20post?\x20It’ll\x20be\x20visible\x20again.','loading','[DeleteCommunity]\x20Retry\x20','Appeal\x20Sent','pasteSearchBtn','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20</div>','values','\x20members\x20from\x20subcollection','5243685ftoAeW','<p>No\x20pending\x20profile\x20view\x20requests.</p>','\x20for\x20deletion','<h3>Your\x20Reported\x20Posts</h3>','pagination','\x0a\x20\x20\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','Create\x20Post\x20button\x20not\x20found!','\x20comments</a>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','.ban-appeal-form','User\x20not\x20found.','prepend','viewSavedPostsModal','Fetched\x20users:','next','edit-name-form','canvas','leaveCommunityBtn','visible','No\x20community\x20ID,\x20redirecting\x20to\x20index...',')...','\x0a\x20\x20\x20\x20<div\x20class=\x22admin-menu\x22>\x0a\x20\x20\x20\x20\x20\x20','carouselTrack','savedPosts','translate(-50%,\x20-50%)','Members\x20modal\x20elements\x20missing!','\x20successfully\x20deleted.\x20Redirecting...','Scroll\x20target\x20#search-scrolldown\x20not\x20found!','nextSibling','setCachedUser','profile_request','location','Unable\x20to\x20delete\x20community\x20-\x20Document\x20persists\x20after\x20maximum\x20retries.','display_name','[DeleteCommunity]\x20Document\x20not\x20found\x20during\x20transaction\x20-\x20skipping.','[DeleteCommunity]\x20Deletion\x20confirmed\x20-\x20Document\x20permanently\x20removed.','swapValidationResult','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Think\x20this\x20is\x20a\x20mistake?\x20Send\x20an\x20appeal\x20below\x20or\x20contact\x20an\x20admin\x20at:\x20','remove','\x22>Copy</button></p>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','life-swap-6065e','isOwner','Missing\x20modal\x20or\x20loading\x20elements:','notificationList','viewMyFollowersBtn','.notification-item','current','apply','width','data','Initial\x20load\x20failed:','text','seeLessMembersBtn','<i\x20class=\x22fas\x20fa-save\x22></i>\x20Save','https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430','-your\x22>></button>','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','Error\x20fetching\x20communities:','Community\x20deletion\x20failed.\x20Please\x20review\x20the\x20console\x20for\x20details.','See\x20Less','<p>Failed\x20to\x20load\x20some\x20member\x20data.</p>','reset','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','seeMoreSearchMembersBtn',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','User\x20is\x20back\x20on\x20screen,\x20resuming\x20checks.','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22request-','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>','Something\x20went\x20wrong\x20during\x20the\x20swap.\x20Please\x20try\x20again.','getTime','.copy-btn[data-post-id=\x22','Failed\x20to\x20remove\x20community\x20ID\x20','min','Community\x20not\x20found!','filter','Miscellaneous','input','\x20with\x20','clearNotificationsBtn','.clear-reports-btn[data-post-id=\x22','savePostModal','[DeleteCommunity]\x20Verification\x20','.remove-post-btn','onchange','Cached\x20','debounce','</p>','.delete-saved-btn[data-doc-id=\x22','.modal:not(#viewProfileViewRequestsModal)','Error\x20leaving\x20community:','carouselNextBtn','\x0a\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','\x22>Report\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-note-btn\x22\x20data-doc-id=\x22','</span>\x20','lat','createElement','You’ve\x20already\x20reported\x20this\x20post!','ban_appeal','Queued\x20deletion\x20of\x20member\x20','Load\x20More','-search\x22>></button>','city','swapConfirmed','focus','drawImage','left','#loadMoreBtn','No\x20valid\x20user\x20selected.','Verification\x20failed:\x20Community\x20ID\x20still\x20present\x20in\x20user\x27s\x20communityIds','-your\x22]','[DeleteCommunity]\x20Community\x20reference\x20path:','user_','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20post?','\x22>Delete\x20Post</button>','desc','</p>\x0a\x20\x20\x20\x20<p>Post\x20ID:\x20','village','currentUser','No\x20authenticated\x20user\x20found.','You\x20have\x20successfully\x20left\x20the\x20community!','Swap\x20and\x20deletion\x20failed:','follow','Community\x20filter\x20not\x20found.',')\x20has\x20','\x20not\x20found\x20in\x20DOM—already\x20gone\x20or\x20never\x20rendered','communityId','postReports','Error\x20fetching\x20user\x20data\x20for\x20members:','Like\x20(','Failed\x20to\x20fetch\x20post\x20','\x20cached\x20posts\x20for\x20','writeText','success','for','No\x20valid\x20communities','title','__name__','#commentForm-','proceedSwapBtn','max','join','\x20not\x20in\x20cache—fetching\x20from\x20Firestore.','displayedPostIds','Community\x20not\x20found','all','You\x20must\x20be\x20logged\x20in\x20to\x20leave\x20a\x20community.','username:','src','Untitled','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22timestamp\x22>','\x20in\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities.','/community.html?id=','seconds','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20ID:\x20<span\x20class=\x22copyable-post-id\x20clickable\x22\x20data-post-id=\x22','1316106VdfDnp','Community\x20does\x20not\x20exist.\x20Deletion\x20unnecessary.','hidden','update','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>','7230JmoYPl','</h3>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<h3>','description','.mark-seen-btn2[data-id=\x22','Your\x20Posts\x20carousel\x20setup\x20failed\x20for\x20post\x20','inline','Post\x20already\x20unsaved!','No\x20user\x20detected,\x20redirecting\x20to\x20login...','scrollIntoView','set','\x22\x20style=\x22width:\x20100%;\x20margin-bottom:\x2010px;\x22>\x0a<button\x20id=\x22saveNameBtn\x22>Save</button>\x0a<button\x20id=\x22cancelNameBtn\x22>Cancel</button>\x0a','search-scrolldown','toLowerCase','Post\x20not\x20found!','closeProfileViewRequestsBtn','smooth','has','<p>Failed\x20to\x20load\x20notifications\x20after\x20retries.\x20Check\x20your\x20connection!</p>','viewCommunitiesModal','-search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>Revoke</button>\x0a\x20\x20</div>\x0a','clipboard','#seeMoreYourPostsBtn','No\x20Description','Toys\x20&\x20Games','numeric','getCommData','className','#fff','.remove-post-btn[data-post-id=\x22','postDescription','Successfully\x20left\x20community\x20','Skipping\x20carousel\x20post\x20','Refresh\x20failed:','error','\x0a\x20\x20\x20\x20\x20\x20','#showAllPostsBtn','fetchUserData','Deleted\x20Post','image/jpeg','Error\x20loading\x20user\x20reports:','requesterId','Save','That’s\x20already\x20the\x20name!','postLocation','.copyable-post-id[data-post-id=\x22','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','<p>Error\x20loading\x20your\x20reports!</p>','type','Location\x20input\x20or\x20suggestions\x20div\x20not\x20found!','photoURL','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22>\x0a\x20\x20\x20\x20\x20\x20','notificationsModal','accepted','editSwapBtn','\x0a\x20\x20\x20\x20','Search\x20error:','AIzaSyB5Q0kHoViWJl-t-pWCKj_AT-ClAMadfrU','function','categoryFilter','bind','code','</span>','banAppealForm','deletePostModal','Appeal\x20sent!','warn','chatIds','\x22\x20class=\x22suggestions\x20hidden\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','forEach','/login.html','communityId:','then','Failed\x20to\x20copy\x20community\x20ID:','\x20from\x20DOM','see-less-btn','viewNotificationsBtn','deleteCommunityBtn','.admin-report-controls','viewCommunitiesBtn','Loaded\x20report\x20summary\x20from\x20cache!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20</div>','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Community:\x20<a\x20href=\x22./community.html?id=','debouncedLoadAdminReportSummary','.saved-note[data-doc-id=\x22','#loadLessBtn','<p>Refresh\x20failed.\x20Try\x20again.</p>',':</strong>\x20\x22','<p\x20class=\x27no-posts-message\x27>No\x20saved\x20posts\x20yet!</p>','iterator','</h4>\x0a\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','<p\x20class=\x27error-message\x27>Oops,\x20something\x20went\x20wrong.\x20Try\x20again\x20later.</p>','background','viewBannedBtn','deleting','<p>No\x20posts\x20yet!</p>','Name\x20can’t\x20be\x20empty!','life-swap-6065e.firebaseapp.com','swaps','push','\x20from\x20community\x20','.\x20Updated\x20communityIds:','onload','327mFtOso','Failed\x20to\x20copy:','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','<span\x20class=\x22admin-tag\x22>Admin</span>','message','Creating...','value','Fetching\x20fresh\x20unseen\x20notification\x20count...','_debouncedInput','Thanks!\x20You\x20and\x20','userId','36324iRmbTG','memberSearch','./start.html','\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<form\x20id=\x22commentForm-','entries','Persistence\x20failed:\x20Multiple\x20tabs\x20open.\x20Only\x20one\x20tab\x20can\x20enable\x20persistence.','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Post\x20\x22','Post\x20not\x20found—might’ve\x20been\x20deleted!','offerings','insertAdjacentHTML','Kitchen\x20&\x20Dining','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it\x20from\x20others—check\x20it\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','unknown','<p>Failed\x20to\x20load\x20communities.\x20Try\x20refreshing.</p>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','\x20notifications.','</h3>\x0a\x20\x20\x20\x20<p\x20class=\x22post-description\x22>','options','querySelector','\x0a<label\x20for=\x22comm-current\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-current\x22\x20name=\x22communities\x22\x20value=\x22current\x22\x20checked>\x20Current\x20(','memberCount','slice','Error\x20fetching\x20all\x20members\x20for\x20search:','Refresh','creatorName','\x20to\x20communityIds','\x20initiated\x20at:','name','.saved-post-card[data-doc-id=\x22','.username[data-uid=\x22','length','scroll-to-ur-posts','\x0a<div\x20class=\x22notification-item\x20','Cleared\x20','round','<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>','...','scrollY','50%','country','contains','from','button','postList','new_message','.modal:not(.hidden)','Tools\x20&\x20DIY','postCount','member-','No\x20reason\x20provided','Failed\x20to\x20load\x20posts\x20for\x20','display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;','closeCommunitiesBtn','status','Deletion\x20failed:','profilePhoto','_carouselHandler','Failed\x20to\x20fetch\x20profile\x20view\x20requests:','.top-bar','1px\x20solid\x20#ccc','Failed\x20to\x20send\x20appeal.','</p>\x0a\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','\x20not\x20found\x20in\x20user\x27s\x20communityIds\x20array','none','reporterId','.copy-id-btn2','closeNotificationsBtn','\x20not\x20found.','<p>Failed\x20to\x20load\x20more\x20members.</p>','failed-precondition','replace','see-more-btn','carouselPrevBtn','yourPostsButtons','creatorId','\x22\x20data-type=\x22','body','<button\x20class=\x22carousel-prev\x22\x20data-post-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','label','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Category:\x20','top','\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','cancelSavePostBtn','\x20reads)','<i\x20class=\x22fas\x20fa-heart-broken\x22></i>\x20Unlike','-your\x22\x20data-photos=\x27','\x20communit','get','transition','communityActions','seeMoreMembersBtn','toISOString','No\x20userId\x20provided\x20to\x20loadAdminReportSummary','\x0a\x20\x20<form\x20class=\x22ban-appeal-form\x22\x20data-id=\x22','timestamp','Username\x20is\x20undefined,\x20falling\x20back\x20to\x20UID-based\x20default','<p\x20style=\x22color:\x20red;\x22>Hidden\x20from\x20others!</p>','[DeleteCommunity]\x20Document\x20still\x20present:','Pick\x20at\x20least\x20one\x20community\x20to\x20post!','Trimmed\x20','postPhotos','</p>\x0a\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22','likedBy','Loaded\x20carousel\x20posts\x20for\x20community\x20','catch','json','Post\x20','</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','<br><h3>User\x20Appeals</h3><p>No\x20appeals\x20yet.</p>',',\x20batchSize=','getElementById','Notification\x20','\x22>\x0a\x20\x20\x20\x20<span>','includes','notificationCount','.saved-post-card','—fetching\x20fresh\x20batch.','<button\x20id=\x22viewBannedBtn\x22>Banned\x20(Users/Appeals)</button>','Checking...','</p>\x0a\x20\x20\x20\x20<p>Posted:\x20','toggleSavePost\x20called\x20for\x20postId:\x20','Failed\x20to\x20fetch\x20community\x20',')</span></p>\x0a\x20\x20\x20\x20<p>Location:\x20','Profile\x20access\x20revoked!','<div\x20class=\x22loading\x22>⏳\x20Loading...</div>','profileRequestsBtn','Delete\x20this\x20appeal?','offering','Skipping\x20updateProfileRequestsUI\x20due\x20to\x20undefined\x20UID','Clear\x20notifications\x20for\x20','Current\x20communityIds\x20before\x20leaving:','Search\x20filtered\x20members:\x20','</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22saved-note\x22>Note:\x20<span\x20data-doc-id=\x22','G-CHJY2ZEYYF','.community-page','modalNotificationCount','trim','.edit-note-btn[data-doc-id=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','Error\x20fetching\x20search\x20batch:',':\x20missing\x20elements',',\x20not\x20','Save\x20Post','\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-','click','No\x20admin\x20email\x20available','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','log','#seeLessSearchMembersBtn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','#toggleComments-','opacity\x200.3s\x20ease','.accept-btn','Persistence\x20error:','input[name=\x22communities\x22]:not([value=\x22all\x22])','getItem','email','<p>Failed\x20to\x20search\x20members.</p>','.username','userNameCopy','</p>\x0a\x20\x20\x20\x20<p>Category:\x20','loadLessBtn','-community','note','community-item','Error\x20clearing\x20notifications:','Updated\x20communityIds\x20after\x20leaving:','[DeleteCommunity]\x20Processing\x20subcollection:\x20','membersList','saveNameBtn','Error\x20loading\x20appeals:','targetId','undefined','classList','TEXTAREA','followerId','parse'];_0x24e9=function(){return _0x33c171;};return _0x24e9();}function getPostScore(_0x34c62d,_0x43f879){const _0x115343=_0x3b0fb3,_0x46fac2=Date[_0x115343(0x42a)](),_0xc8aa69=(_0x46fac2-_0x34c62d['createdAt'][_0x115343(0x212)]())/(0x3e8*0x3c*0x3c),_0x56b18b=Math[_0x115343(0x259)](0x0,0x1e-_0xc8aa69/0x18)/0x1e,_0x50a64c=Math['min'](_0x34c62d['likes']||0x0,0x32)/0x32,_0x18251b=Math[_0x115343(0x215)](_0x34c62d[_0x115343(0x3ce)]||0x0,0x14)/0x14;let _0x388f01=0.4*_0x50a64c+0.4*_0x18251b+0.2*_0x56b18b;const _0x202e03=new Set(_0x43f879[_0x115343(0x1ad)]),_0x4fd262=new Set(_0x43f879[_0x115343(0x2e8)]);return(_0x202e03[_0x115343(0x27d)](_0x34c62d['category'])||_0x4fd262[_0x115343(0x27d)](_0x34c62d[_0x115343(0x360)]))&&(_0x388f01+=0.3),_0xc8aa69<0x18&&(_0x388f01+=0.5),Math[_0x115343(0x215)](1.5,_0x388f01);}async function loadPosts(_0x194f81,_0xa07ed1=![],_0x544bcb=PaginationState[_0x3b0fb3(0x14f)]){const _0xa89cee=_0x3b0fb3;if(isFetching||isSearching)return;isFetching=!![];const _0x4ddfb7=document[_0xa89cee(0x34f)](_0xa89cee(0x30b)),_0x3cba0e=document[_0xa89cee(0x34f)](_0xa89cee(0x477)),_0x2cdb94={'category':document[_0xa89cee(0x34f)](_0xa89cee(0x2a9))?.[_0xa89cee(0x2db)]||'','lookingFor':document['getElementById'](_0xa89cee(0x3f4))?.[_0xa89cee(0x2db)]||'','offering':document['getElementById'](_0xa89cee(0x449))?.[_0xa89cee(0x2db)]||''};_0xa07ed1&&(_0x4ddfb7[_0xa89cee(0x396)]='',_0x3cba0e[_0xa89cee(0x145)][_0xa89cee(0x430)]='none',loadedPostIds[_0xa89cee(0x3d1)](),PaginationState[_0xa89cee(0x25c)][_0xa89cee(0x3d1)](),lastPostDoc=null,postCache[_0xa89cee(0x3d1)](),PaginationState['currentPage']=0x1,resetCache(),console[_0xa89cee(0x375)](_0xa89cee(0x3b5)+_0x194f81));PaginationState[_0xa89cee(0x14f)]=_0x544bcb;const _0x3fa865=getCachedPosts(),_0x29a148=getLikedPrefs(),_0x2eb8b2=0x19;let _0x347fce=null;if(_0x3fa865['size']>0x0){const _0x549c47=Array[_0xa89cee(0x309)](_0x3fa865[_0xa89cee(0x1cb)]())[_0xa89cee(0x217)](_0x42fe38=>_0x42fe38[_0xa89cee(0x1fe)]['communityId']===_0x194f81)[_0xa89cee(0x180)](_0x2e01a1=>_0x2e01a1[_0xa89cee(0x1fe)][_0xa89cee(0x161)][_0xa89cee(0x212)]());_0x347fce=_0x549c47['length']>0x0?Math[_0xa89cee(0x259)](..._0x549c47):null,console[_0xa89cee(0x375)]('Using\x20'+_0x549c47['length']+_0xa89cee(0x250)+_0x194f81+',\x20last\x20cached\x20at:\x20'+(_0x347fce?new Date(_0x347fce)['toLocaleString']():_0xa89cee(0x437)));}else console['log']('No\x20cached\x20posts\x20found\x20for\x20'+_0x194f81+_0xa89cee(0x355));const _0x3a07d0=(PaginationState['currentPage']-0x1)*PaginationState[_0xa89cee(0x474)],_0x93e96f=_0x3a07d0+PaginationState['POSTS_PER_PAGE'];let _0x5ab86a=Array[_0xa89cee(0x309)](_0x3fa865['values']())[_0xa89cee(0x217)](_0x3e2980=>_0x3e2980['data'][_0xa89cee(0x24b)]===_0x194f81)['map'](_0x1e7687=>({..._0x1e7687,'score':getPostScore(_0x1e7687['data'],_0x29a148)}))[_0xa89cee(0x217)](_0x14e071=>(!_0x2cdb94[_0xa89cee(0x3c3)]||_0x14e071[_0xa89cee(0x1fe)]['category']===_0x2cdb94[_0xa89cee(0x3c3)])&&(!_0x2cdb94['lookingFor']||_0x14e071['data'][_0xa89cee(0x47b)]===_0x2cdb94[_0xa89cee(0x47b)])&&(!_0x2cdb94[_0xa89cee(0x360)]||_0x14e071[_0xa89cee(0x1fe)][_0xa89cee(0x360)]===_0x2cdb94[_0xa89cee(0x360)]))[_0xa89cee(0x49a)]((_0x193d06,_0x470c35)=>_0x470c35[_0xa89cee(0x446)]-_0x193d06[_0xa89cee(0x446)]);const _0x218bea=_0x5ab86a[_0xa89cee(0x2f5)](_0x3a07d0,_0x93e96f)[_0xa89cee(0x217)](_0x28b914=>!PaginationState[_0xa89cee(0x25c)][_0xa89cee(0x27d)](_0x28b914['id'])),_0x35397d=_0x218bea[_0xa89cee(0x2fe)]===PaginationState[_0xa89cee(0x474)]||_0x3a07d0+_0x218bea['length']>=_0x5ab86a[_0xa89cee(0x2fe)];if(!_0x35397d||_0xa07ed1||_0x3fa865[_0xa89cee(0x481)]===0x0){let _0x181cbd=query(collection(db,_0xa89cee(0x405),_0x194f81,_0xa89cee(0x1aa)),..._0x2cdb94[_0xa89cee(0x3c3)]?[where(_0xa89cee(0x3c3),'==',_0x2cdb94[_0xa89cee(0x3c3)])]:[],..._0x2cdb94['lookingFor']?[where(_0xa89cee(0x47b),'==',_0x2cdb94['lookingFor'])]:[],..._0x2cdb94[_0xa89cee(0x360)]?[where(_0xa89cee(0x360),'==',_0x2cdb94[_0xa89cee(0x360)])]:[],orderBy(_0xa89cee(0x161),_0xa89cee(0x240)),limit(_0x2eb8b2),...lastPostDoc&&!_0xa07ed1?[startAfter(lastPostDoc)]:[],..._0x347fce&&!_0xa07ed1?[where(_0xa89cee(0x161),'>',new Date(_0x347fce))]:[]);try{const _0x372b35=await getDocs(_0x181cbd),_0x44c137=_0x372b35['docs']['map'](_0x45dc38=>({'id':_0x45dc38['id'],'data':{...normalizePostData(_0x45dc38[_0xa89cee(0x1fe)]()),'communityId':_0x194f81},'score':getPostScore(normalizePostData(_0x45dc38[_0xa89cee(0x1fe)]()),_0x29a148)}));console[_0xa89cee(0x375)]('Fetched\x20'+_0x44c137[_0xa89cee(0x2fe)]+_0xa89cee(0x3e3)+_0x194f81+'\x20('+_0x2eb8b2+_0xa89cee(0x334)),_0x44c137[_0xa89cee(0x2b3)](_0x899cf6=>_0x3fa865['set'](_0x899cf6['id'],_0x899cf6)),setCachedPosts(_0x3fa865),_0x5ab86a=Array[_0xa89cee(0x309)](_0x3fa865['values']())[_0xa89cee(0x217)](_0x164171=>_0x164171[_0xa89cee(0x1fe)][_0xa89cee(0x24b)]===_0x194f81)['map'](_0x1cf81b=>({..._0x1cf81b,'score':getPostScore(_0x1cf81b[_0xa89cee(0x1fe)],_0x29a148)}))[_0xa89cee(0x217)](_0x37d383=>(!_0x2cdb94[_0xa89cee(0x3c3)]||_0x37d383[_0xa89cee(0x1fe)][_0xa89cee(0x3c3)]===_0x2cdb94[_0xa89cee(0x3c3)])&&(!_0x2cdb94[_0xa89cee(0x47b)]||_0x37d383[_0xa89cee(0x1fe)][_0xa89cee(0x47b)]===_0x2cdb94[_0xa89cee(0x47b)])&&(!_0x2cdb94[_0xa89cee(0x360)]||_0x37d383['data'][_0xa89cee(0x360)]===_0x2cdb94['offering']))[_0xa89cee(0x49a)]((_0x33850e,_0x537bbf)=>_0x537bbf[_0xa89cee(0x446)]-_0x33850e['score']);}catch(_0x1f2a1f){console[_0xa89cee(0x290)](_0xa89cee(0x312)+_0x194f81+':',_0x1f2a1f),_0x4ddfb7[_0xa89cee(0x396)]='<p>Oops,\x20something\x20broke!\x20Refresh.</p>',isFetching=![];return;}}const _0x1f7e24=_0x5ab86a[_0xa89cee(0x2f5)](_0x3a07d0,_0x93e96f)['filter'](_0x388aa2=>!PaginationState[_0xa89cee(0x25c)][_0xa89cee(0x27d)](_0x388aa2['id']));console[_0xa89cee(0x375)](_0xa89cee(0x4c6)+_0x1f7e24[_0xa89cee(0x2fe)]+'\x20posts\x20for\x20'+_0x194f81+'\x20on\x20page\x20'+PaginationState[_0xa89cee(0x14f)]);if(_0x1f7e24['length']===0x0&&!initialPostsLoaded)_0x4ddfb7['innerHTML']=_0xa89cee(0x1a2),_0x3cba0e['style'][_0xa89cee(0x430)]='none';else{totalPosts=totalPosts||parseInt(sessionStorage[_0xa89cee(0x37d)]('totalPosts_'+_0x194f81))||await getTotalPosts(_0x194f81),sessionStorage[_0xa89cee(0x46f)](_0xa89cee(0x3f0)+_0x194f81,totalPosts),initialPostsLoaded=!![],_0x1f7e24['forEach'](_0x1928d3=>postCache[_0xa89cee(0x276)](_0x1928d3['id'],{'id':_0x1928d3['id'],'data':_0x1928d3[_0xa89cee(0x1fe)]}));const _0x2ccb84=query(collection(doc(db,_0xa89cee(0x1b4),auth['currentUser'][_0xa89cee(0x3c5)]),_0xa89cee(0x1e4)),where('communityId','==',_0x194f81)),_0x21e26b=await getDocs(_0x2ccb84),_0x4b4327=new Set(_0x21e26b[_0xa89cee(0x3ab)][_0xa89cee(0x180)](_0x1f1816=>_0x1f1816[_0xa89cee(0x1fe)]()[_0xa89cee(0x4c1)]));_0x4ddfb7[_0xa89cee(0x396)]='',PaginationState['displayedPostIds'][_0xa89cee(0x3d1)](),await renderPosts({'docs':_0x1f7e24[_0xa89cee(0x180)](_0x2fb0de=>({'id':_0x2fb0de['id'],'data':()=>_0x2fb0de[_0xa89cee(0x1fe)]}))},_0x4ddfb7,_0x4b4327),addPaginationControls(_0x4ddfb7,_0x5ab86a[_0xa89cee(0x2fe)],_0x194f81),_0x3cba0e[_0xa89cee(0x145)][_0xa89cee(0x430)]=PaginationState['currentPage']*PaginationState[_0xa89cee(0x474)]>=totalPosts?_0xa89cee(0x3b6):_0xa89cee(0x31f);}isFetching=![];}document[_0x3b0fb3(0x34f)](_0x3b0fb3(0x2a9))?.[_0x3b0fb3(0x4a9)](_0x3b0fb3(0x4b8),()=>loadPosts(communityId,!![])),document['getElementById'](_0x3b0fb3(0x3f4))?.[_0x3b0fb3(0x4a9)](_0x3b0fb3(0x4b8),()=>loadPosts(communityId,!![])),document[_0x3b0fb3(0x34f)](_0x3b0fb3(0x449))?.[_0x3b0fb3(0x4a9)](_0x3b0fb3(0x4b8),()=>loadPosts(communityId,!![]));async function renderPosts(_0x523b76,_0x240736,_0x388600){const _0x4bb3a3=_0x3b0fb3,_0x5c7268=await getCommData(),_0x247118=_0x5c7268?.[_0x4bb3a3(0x479)]?.[_0x4bb3a3(0x352)](auth[_0x4bb3a3(0x243)][_0x4bb3a3(0x3c5)])||_0x5c7268?.[_0x4bb3a3(0x32a)]===auth[_0x4bb3a3(0x243)][_0x4bb3a3(0x3c5)],_0x34979c=[...new Set(_0x523b76[_0x4bb3a3(0x3ab)][_0x4bb3a3(0x180)](_0x57148e=>_0x57148e[_0x4bb3a3(0x1fe)]()[_0x4bb3a3(0x2df)])['filter'](Boolean))];await fetchUserData(_0x34979c);for(const _0x5659e8 of _0x523b76['docs']){const _0x553e55=_0x5659e8['id'];if(PaginationState[_0x4bb3a3(0x25c)][_0x4bb3a3(0x27d)](_0x553e55))continue;if(PaginationState[_0x4bb3a3(0x25c)][_0x4bb3a3(0x481)]>=PaginationState[_0x4bb3a3(0x474)])break;const _0x13ef3f=postCache[_0x4bb3a3(0x338)](_0x553e55)?.[_0x4bb3a3(0x1fe)]||_0x5659e8[_0x4bb3a3(0x1fe)]();if(_0x13ef3f[_0x4bb3a3(0x24b)]&&_0x13ef3f['communityId']!==communityId){console[_0x4bb3a3(0x375)](_0x4bb3a3(0x482)+_0x553e55+_0x4bb3a3(0x15d)+_0x13ef3f[_0x4bb3a3(0x24b)]+_0x4bb3a3(0x36e)+communityId);continue;}PaginationState[_0x4bb3a3(0x25c)]['add'](_0x553e55),loadedPostIds[_0x4bb3a3(0x4d4)](_0x553e55);const _0x2a0676=userDataCache[_0x13ef3f[_0x4bb3a3(0x2df)]]||{'profilePhoto':_0x4bb3a3(0x3f7),'name':'Unknown','username':_0x4bb3a3(0x2ec)},_0x4d9a5f=_0x5c7268?.[_0x4bb3a3(0x479)]?.[_0x4bb3a3(0x352)](_0x13ef3f[_0x4bb3a3(0x2df)])||_0x5c7268?.['creatorId']===_0x13ef3f[_0x4bb3a3(0x2df)],_0x1751d6=query(collection(db,'communities',communityId,_0x4bb3a3(0x1aa),_0x553e55,'comments'),orderBy(_0x4bb3a3(0x161),_0x4bb3a3(0x240))),_0x4980f7=await getDocs(_0x1751d6),_0x12d0d7=_0x4980f7[_0x4bb3a3(0x481)],_0x2f16bc=_0x13ef3f[_0x4bb3a3(0x161)]?new Date(_0x13ef3f[_0x4bb3a3(0x161)])[_0x4bb3a3(0x1a0)]():_0x4bb3a3(0x437),_0x498e8c=_0x13ef3f['photoUrls']||[],_0x127655=_0x498e8c['length'],_0x366f63=await getPostReportStatus(_0x553e55),_0x27d798=_0x388600[_0x4bb3a3(0x27d)](_0x553e55),_0x4596d6=categoryDisplayMap[_0x13ef3f[_0x4bb3a3(0x3c3)]]||_0x13ef3f[_0x4bb3a3(0x3c3)];if(_0x366f63?.[_0x4bb3a3(0x1b5)]){PaginationState[_0x4bb3a3(0x25c)][_0x4bb3a3(0x156)](_0x553e55),loadedPostIds['delete'](_0x553e55);continue;}const _0x40b3cc=document['createElement'](_0x4bb3a3(0x3b0));_0x40b3cc[_0x4bb3a3(0x289)]=_0x4bb3a3(0x4a4),_0x40b3cc['id']='post-'+_0x553e55,_0x40b3cc[_0x4bb3a3(0x396)]=_0x4bb3a3(0x4a1)+_0x2a0676['profilePhoto']+_0x4bb3a3(0x1b1)+_0x13ef3f[_0x4bb3a3(0x2df)]+'\x22>'+_0x2a0676[_0x4bb3a3(0x2fb)]+'</span>\x20<span\x20class=\x22at-user\x22>@'+_0x2a0676['username']+'</span>\x20'+(_0x4d9a5f?_0x4bb3a3(0x2d8):'')+_0x4bb3a3(0x26e)+(_0x13ef3f[_0x4bb3a3(0x255)]||_0x4bb3a3(0x262))+'</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-description\x22>'+(_0x13ef3f['description']||'')+_0x4bb3a3(0x34c)+_0x553e55+'-community\x22\x20data-photos=\x27'+JSON[_0x4bb3a3(0x463)](_0x498e8c)+_0x4bb3a3(0x49b)+(_0x127655>0x1?_0x4bb3a3(0x32d)+_0x553e55+_0x4bb3a3(0x13e):'')+_0x4bb3a3(0x32e)+(_0x498e8c[0x0]||_0x4bb3a3(0x203))+_0x4bb3a3(0x3a9)+(_0x127655>0x1?_0x4bb3a3(0x45e)+_0x553e55+'-community\x22>></button>':'')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<p>Location:\x20'+(_0x13ef3f[_0x4bb3a3(0x1ec)]?.[_0x4bb3a3(0x2fb)]||'N/A')+_0x4bb3a3(0x14a)+_0x4596d6+_0x4bb3a3(0x441)+(_0x13ef3f[_0x4bb3a3(0x47b)]||_0x4bb3a3(0x437))+_0x4bb3a3(0x451)+(_0x13ef3f[_0x4bb3a3(0x360)]||'N/A')+_0x4bb3a3(0x263)+_0x2f16bc+_0x4bb3a3(0x1b9)+_0x553e55+_0x4bb3a3(0x3d8)+_0x553e55+_0x4bb3a3(0x1f4)+_0x553e55+'\x22>'+((_0x13ef3f[_0x4bb3a3(0x347)]||[])[_0x4bb3a3(0x352)](auth[_0x4bb3a3(0x243)][_0x4bb3a3(0x3c5)])?_0x4bb3a3(0x335):_0x4bb3a3(0x19a))+'\x20('+(_0x13ef3f[_0x4bb3a3(0x46b)]||0x0)+_0x4bb3a3(0x14d)+_0x553e55+_0x4bb3a3(0x46e)+communityId+'\x22>'+(_0x27d798?_0x4bb3a3(0x41b):_0x4bb3a3(0x202))+_0x4bb3a3(0x3a7)+_0x553e55+_0x4bb3a3(0x229)+(_0x13ef3f[_0x4bb3a3(0x2df)]===auth[_0x4bb3a3(0x243)][_0x4bb3a3(0x3c5)]||_0x247118?_0x4bb3a3(0x371)+_0x553e55+_0x4bb3a3(0x23f):'')+_0x4bb3a3(0x291)+(_0x366f63?.[_0x4bb3a3(0x1f6)]&&_0x366f63[_0x4bb3a3(0x166)]===0x1?_0x4bb3a3(0x445)+_0x553e55+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>':'')+_0x4bb3a3(0x291)+(_0x366f63?.[_0x4bb3a3(0x1f6)]&&_0x366f63[_0x4bb3a3(0x166)]>=0x2?_0x4bb3a3(0x445)+_0x553e55+_0x4bb3a3(0x2ee)+_0x366f63[_0x4bb3a3(0x166)]+'\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>':'')+_0x4bb3a3(0x291)+(_0x247118&&_0x366f63?.[_0x4bb3a3(0x166)]>0x0?_0x4bb3a3(0x444)+_0x553e55+_0x4bb3a3(0x2ee)+_0x366f63[_0x4bb3a3(0x166)]+'\x20report'+(_0x366f63[_0x4bb3a3(0x166)]>0x1?'s':'')+_0x4bb3a3(0x159)+_0x553e55+_0x4bb3a3(0x20b)+_0x553e55+_0x4bb3a3(0x4d5):'')+'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-'+_0x553e55+'\x22>'+_0x12d0d7+'\x20comments</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-'+_0x553e55+_0x4bb3a3(0x47e)+_0x553e55+'\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22tagSuggestions-'+_0x553e55+_0x4bb3a3(0x2b2),_0x240736[_0x4bb3a3(0x467)](_0x40b3cc);const _0x26a965=_0x40b3cc[_0x4bb3a3(0x2f2)]('.like-btn[data-post-id=\x22'+_0x553e55+'\x22]');_0x26a965['addEventListener']('click',async()=>{const _0x351350=_0x4bb3a3,_0x4e3c07=doc(db,_0x351350(0x405),communityId,_0x351350(0x1aa),_0x553e55),_0x319a4b=await getDoc(_0x4e3c07);if(!_0x319a4b[_0x351350(0x150)]()){alert(_0x351350(0x2e7));return;}const _0x93b352=normalizePostData(_0x319a4b[_0x351350(0x1fe)]()),_0x268285=auth[_0x351350(0x243)]['uid'],_0x32b1d3=_0x93b352[_0x351350(0x347)]||[];let _0x2a668e=_0x93b352[_0x351350(0x46b)]||0x0,_0x3e5069=[..._0x32b1d3];_0x32b1d3[_0x351350(0x352)](_0x268285)?(_0x3e5069=_0x3e5069[_0x351350(0x217)](_0x5a0b00=>_0x5a0b00!==_0x268285),_0x2a668e=Math[_0x351350(0x259)](0x0,_0x2a668e-0x1)):(_0x3e5069[_0x351350(0x2d1)](_0x268285),_0x2a668e+=0x1,addLikedPref(_0x93b352[_0x351350(0x3c3)],_0x93b352[_0x351350(0x360)]));await updateDoc(_0x4e3c07,{'likes':_0x2a668e,'likedBy':_0x3e5069}),_0x26a965['innerHTML']=(_0x32b1d3[_0x351350(0x352)](_0x268285)?_0x351350(0x19a):_0x351350(0x335))+'\x20('+_0x2a668e+')';const _0x10d645=getCachedPosts();_0x10d645['set'](_0x553e55,{'id':_0x553e55,'data':{..._0x93b352,'likes':_0x2a668e,'likedBy':_0x3e5069,'communityId':communityId}}),setCachedPosts(_0x10d645);});const _0x74d844=_0x40b3cc[_0x4bb3a3(0x2f2)](_0x4bb3a3(0x169)+_0x553e55+'\x22]');let _0xd889d3=![];_0x74d844[_0x4bb3a3(0x4a9)]('click',async _0x21fd40=>{_0x21fd40['preventDefault']();if(_0xd889d3)return;_0xd889d3=!![],await toggleSavePost(_0x553e55,communityId,_0x74d844),_0xd889d3=![];}),_0x40b3cc[_0x4bb3a3(0x2f2)](_0x4bb3a3(0x2fd)+_0x13ef3f[_0x4bb3a3(0x2df)]+'\x22]')?.[_0x4bb3a3(0x4a9)](_0x4bb3a3(0x372),()=>viewProfile(_0x13ef3f['userId'])),_0x40b3cc[_0x4bb3a3(0x2f2)](_0x4bb3a3(0x378)+_0x553e55)?.['addEventListener'](_0x4bb3a3(0x372),_0x19e414=>{_0x19e414['preventDefault'](),toggleComments(_0x553e55);}),_0x40b3cc[_0x4bb3a3(0x2f2)]('#commentForm-'+_0x553e55)?.[_0x4bb3a3(0x4a9)](_0x4bb3a3(0x155),_0x2e39d1=>{const _0x309213=_0x4bb3a3;_0x2e39d1[_0x309213(0x1af)](),addComment(_0x553e55,_0x13ef3f[_0x309213(0x2df)]);}),_0x40b3cc['querySelector'](_0x4bb3a3(0x403)+_0x553e55)?.[_0x4bb3a3(0x4a9)](_0x4bb3a3(0x372),()=>deletePost(_0x553e55)),_0x40b3cc[_0x4bb3a3(0x2f2)](_0x4bb3a3(0x3d3)+_0x553e55)?.[_0x4bb3a3(0x4a9)](_0x4bb3a3(0x372),()=>reportPost(_0x553e55)),_0x40b3cc['querySelector']('.copy-btn[data-post-id=\x22'+_0x553e55+'\x22]')?.[_0x4bb3a3(0x4a9)]('click',_0x31333f=>{const _0x523f3f=_0x4bb3a3;_0x31333f[_0x523f3f(0x45b)](),copyPostId(_0x553e55);});_0x247118&&(_0x40b3cc[_0x4bb3a3(0x2f2)](_0x4bb3a3(0x28b)+_0x553e55+'\x22]')?.[_0x4bb3a3(0x4a9)]('click',()=>deletePost(_0x553e55)),_0x40b3cc['querySelector'](_0x4bb3a3(0x21c)+_0x553e55+'\x22]')?.[_0x4bb3a3(0x4a9)](_0x4bb3a3(0x372),()=>clearReports(_0x553e55)));const _0x282f03=_0x40b3cc[_0x4bb3a3(0x2f2)]('#commentForm-'+_0x553e55+'\x20textarea');if(_0x282f03){if(_0x282f03[_0x4bb3a3(0x2dd)])_0x282f03[_0x4bb3a3(0x4b6)](_0x4bb3a3(0x219),_0x282f03[_0x4bb3a3(0x2dd)]);_0x282f03[_0x4bb3a3(0x2dd)]=debounce(_0x5a8777=>showTagSuggestions(_0x5a8777[_0x4bb3a3(0x146)],_0x553e55),0x1f4),_0x282f03[_0x4bb3a3(0x4a9)]('input',_0x282f03['_debouncedInput']);}if(_0x127655>0x1)setupCommunityCarousel(_0x553e55);}}async function toggleSavePost(_0x2c2bb0,_0x2d5d95,_0x492b47){const _0x49c6fe=_0x3b0fb3;console[_0x49c6fe(0x375)](_0x49c6fe(0x359)+_0x2c2bb0);const _0x563098=auth[_0x49c6fe(0x243)],_0x2e9740=doc(db,'users',_0x563098[_0x49c6fe(0x3c5)]),_0x1f6ea3=collection(_0x2e9740,_0x49c6fe(0x1e4)),_0x59def4=query(_0x1f6ea3,where(_0x49c6fe(0x4c1),'==',_0x2c2bb0),where(_0x49c6fe(0x24b),'==',_0x2d5d95)),_0x481f15=await getDocs(_0x59def4);if(_0x481f15[_0x49c6fe(0x3b2)]){const _0x4179cc=document[_0x49c6fe(0x34f)](_0x49c6fe(0x21d)),_0x22b52d=document['getElementById']('savePostNote'),_0x2e6cfd=document['getElementById']('confirmSavePostBtn'),_0x190ef7=document['getElementById'](_0x49c6fe(0x333));_0x22b52d['value']='',_0x4179cc[_0x49c6fe(0x145)][_0x49c6fe(0x430)]=_0x49c6fe(0x39e),_0x4179cc[_0x49c6fe(0x38f)]['remove'](_0x49c6fe(0x26a)),_0x2e6cfd['dataset'][_0x49c6fe(0x4c1)]=_0x2c2bb0,_0x2e6cfd['dataset'][_0x49c6fe(0x24b)]=_0x2d5d95,_0x2e6cfd['onclick']=async()=>{const _0x7f3225=_0x49c6fe,_0x47690f=_0x22b52d[_0x7f3225(0x2db)][_0x7f3225(0x369)]();await addDoc(_0x1f6ea3,{'postId':_0x2c2bb0,'communityId':_0x2d5d95,'note':_0x47690f||'','savedAt':new Date()}),_0x492b47[_0x7f3225(0x396)]=_0x7f3225(0x41b),alert('Post\x20saved!'),closeModal('savePostModal');},_0x190ef7[_0x49c6fe(0x1c1)]=()=>closeModal('savePostModal');}else{if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20unsave\x20this\x20post?')){const _0x1bcca1=_0x481f15['docs'][0x0];await deleteDoc(doc(db,_0x49c6fe(0x1b4),_0x563098[_0x49c6fe(0x3c5)],_0x49c6fe(0x1e4),_0x1bcca1['id'])),_0x492b47[_0x49c6fe(0x396)]=_0x49c6fe(0x202),alert(_0x49c6fe(0x43e));}}}function addPaginationControls(_0x2521dd,_0x2306f0,_0x54e401){const _0x61f833=_0x3b0fb3,_0x25ef6c=Math[_0x61f833(0x4ad)](_0x2306f0/PaginationState[_0x61f833(0x474)]),_0x3bbab7=document[_0x61f833(0x22d)](_0x61f833(0x3b0));_0x3bbab7[_0x61f833(0x289)]=_0x61f833(0x1d1);if(PaginationState['currentPage']>0x1){const _0x55c678=document[_0x61f833(0x22d)](_0x61f833(0x30a));_0x55c678['textContent']='<',_0x55c678['addEventListener'](_0x61f833(0x372),async()=>{const _0x54695c=_0x61f833;PaginationState[_0x54695c(0x14f)]>0x1&&(_0x2521dd[_0x54695c(0x396)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',await loadPosts(_0x54e401,![],PaginationState[_0x54695c(0x14f)]-0x1));}),_0x3bbab7['appendChild'](_0x55c678);}const _0x413322=[0x1];if(_0x25ef6c<=0x5){for(let _0x3d30d7=0x2;_0x3d30d7<=_0x25ef6c;_0x3d30d7++)_0x413322[_0x61f833(0x2d1)](_0x3d30d7);}else{const _0x34552a=[PaginationState[_0x61f833(0x14f)]-0x1,PaginationState[_0x61f833(0x14f)],PaginationState[_0x61f833(0x14f)]+0x1][_0x61f833(0x217)](_0x1d8891=>_0x1d8891>0x1&&_0x1d8891<_0x25ef6c);_0x413322[_0x61f833(0x2d1)](..._0x34552a);if(!_0x413322['includes'](_0x25ef6c))_0x413322[_0x61f833(0x2d1)](_0x25ef6c);if(PaginationState[_0x61f833(0x14f)]>0x3&&!_0x413322[_0x61f833(0x352)](0x2))_0x413322['push'](0x2);if(PaginationState[_0x61f833(0x14f)]<_0x25ef6c-0x2&&!_0x413322[_0x61f833(0x352)](_0x25ef6c-0x1))_0x413322['push'](_0x25ef6c-0x1);_0x413322[_0x61f833(0x49a)]((_0xed6b28,_0x2227a2)=>_0xed6b28-_0x2227a2);}_0x413322[_0x61f833(0x2b3)]((_0x180482,_0x5cc84f)=>{const _0x5cdb38=_0x61f833;if(_0x5cc84f>0x0&&_0x180482-_0x413322[_0x5cc84f-0x1]>0x1){const _0x70a637=document['createElement']('span');_0x70a637[_0x5cdb38(0x19e)]=_0x5cdb38(0x304),_0x3bbab7[_0x5cdb38(0x467)](_0x70a637);}const _0x61d27a=document[_0x5cdb38(0x22d)]('button');_0x61d27a[_0x5cdb38(0x19e)]=_0x180482,_0x61d27a[_0x5cdb38(0x289)]=_0x180482===PaginationState[_0x5cdb38(0x14f)]?_0x5cdb38(0x400):'',_0x180482===PaginationState[_0x5cdb38(0x14f)]?_0x61d27a[_0x5cdb38(0x3de)]=!![]:_0x61d27a[_0x5cdb38(0x4a9)](_0x5cdb38(0x372),async()=>{const _0x20ef92=_0x5cdb38;_0x2521dd[_0x20ef92(0x396)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',await loadPosts(_0x54e401,![],_0x180482);}),_0x3bbab7[_0x5cdb38(0x467)](_0x61d27a);});if(PaginationState['currentPage']<_0x25ef6c){const _0x275cd3=document['createElement'](_0x61f833(0x30a));_0x275cd3['textContent']='>',_0x275cd3['addEventListener'](_0x61f833(0x372),async()=>{const _0x475856=_0x61f833;PaginationState['currentPage']<_0x25ef6c&&(_0x2521dd[_0x475856(0x396)]=_0x475856(0x35d),await loadPosts(_0x54e401,![],PaginationState['currentPage']+0x1));}),_0x3bbab7['appendChild'](_0x275cd3);}_0x2521dd[_0x61f833(0x467)](_0x3bbab7);}document['getElementById'](_0x3b0fb3(0x3ba))[_0x3b0fb3(0x4a9)](_0x3b0fb3(0x372),async()=>{await loadPosts(communityId,!![]);});let totalYourPosts=0x0;async function loadYourPosts(_0x23c72c){const _0x3ce56c=_0x3b0fb3,_0x248d66=document[_0x3ce56c(0x34f)](_0x3ce56c(0x4a7));_0x248d66[_0x3ce56c(0x396)]='';let _0x2d204b=null,_0xac4dd1=null,_0x19687d=new Set();async function _0x3c35cb(_0x1f7c88=![]){const _0x5ba49c=_0x3ce56c,_0x2bb35e=await getCommData(),_0x1a6cf4=_0x2bb35e[_0x5ba49c(0x479)]?.[_0x5ba49c(0x352)](auth[_0x5ba49c(0x243)][_0x5ba49c(0x3c5)])||_0x2bb35e[_0x5ba49c(0x32a)]===auth[_0x5ba49c(0x243)][_0x5ba49c(0x3c5)];await fetchUserData(_0x23c72c);const _0x47f8a9=_0x1f7c88?0x0:window[_0x5ba49c(0x305)]||document[_0x5ba49c(0x16c)][_0x5ba49c(0x3f5)];if(!totalYourPosts||_0x1f7c88){const _0x515f77=query(collection(db,_0x5ba49c(0x405),communityId,_0x5ba49c(0x1aa)),where(_0x5ba49c(0x2df),'==',_0x23c72c));totalYourPosts=(await getDocs(_0x515f77))[_0x5ba49c(0x481)];}let _0x245476=query(collection(db,_0x5ba49c(0x405),communityId,_0x5ba49c(0x1aa)),where(_0x5ba49c(0x2df),'==',_0x23c72c),orderBy(_0x5ba49c(0x161),_0x5ba49c(0x240)),limit(0x2));if(_0x2d204b&&!_0x1f7c88)_0x245476=query(_0x245476,startAfter(_0x2d204b));else{if(_0x1f7c88)_0xac4dd1=null;}try{const _0x260cc1=await getDocs(_0x245476);if(_0x260cc1['empty']&&_0x19687d[_0x5ba49c(0x481)]===0x0){_0x248d66[_0x5ba49c(0x396)]=_0x5ba49c(0x2cd),await _0x26d0b9();if(!_0x1f7c88)window[_0x5ba49c(0x3ed)](0x0,_0x47f8a9);else document[_0x5ba49c(0x34f)](_0x5ba49c(0x2ff))?.[_0x5ba49c(0x275)]({'behavior':_0x5ba49c(0x27c)});return;}if(!_0xac4dd1)_0xac4dd1=_0x260cc1['docs'][0x0];_0x2d204b=_0x260cc1[_0x5ba49c(0x3ab)][_0x260cc1[_0x5ba49c(0x3ab)][_0x5ba49c(0x2fe)]-0x1];_0x1f7c88&&(_0x248d66[_0x5ba49c(0x396)]='',_0x19687d[_0x5ba49c(0x3d1)]());const _0x125b6b=_0x260cc1[_0x5ba49c(0x3ab)]['map'](_0x2b2d7f=>_0x2b2d7f['id']),_0x509ab8=await Promise['all'](_0x125b6b['map'](getPostReportStatus));for(let _0x2d3bfb=0x0;_0x2d3bfb<_0x260cc1[_0x5ba49c(0x3ab)][_0x5ba49c(0x2fe)];_0x2d3bfb++){const _0x222902=_0x260cc1[_0x5ba49c(0x3ab)][_0x2d3bfb],_0x1b701c=_0x509ab8[_0x2d3bfb];if(_0x19687d['has'](_0x222902['id']))continue;_0x19687d[_0x5ba49c(0x4d4)](_0x222902['id']);const _0x3d65ab=_0x222902['data']();if(!_0x3d65ab['userId']){console[_0x5ba49c(0x290)]('Post\x20'+_0x222902['id']+'\x20has\x20no\x20userId!\x20Post\x20data:',_0x3d65ab),_0x248d66['innerHTML']+=_0x5ba49c(0x1bd)+_0x222902['id']+_0x5ba49c(0x168);continue;}const _0x2e93bb=userDataCache[_0x3d65ab['userId']],_0x5e153a=_0x2bb35e[_0x5ba49c(0x479)]?.[_0x5ba49c(0x352)](_0x3d65ab['userId'])||_0x2bb35e[_0x5ba49c(0x32a)]===_0x3d65ab[_0x5ba49c(0x2df)],_0x3ce5b0=new Date(_0x3d65ab['createdAt'][_0x5ba49c(0x1a8)]())['toLocaleString'](),_0x4346cb=_0x3d65ab[_0x5ba49c(0x172)]||[],_0x41471c=_0x4346cb[_0x5ba49c(0x2fe)],_0x26b896=document[_0x5ba49c(0x22d)](_0x5ba49c(0x3b0));_0x26b896[_0x5ba49c(0x289)]=_0x5ba49c(0x4a4),_0x26b896['id']=_0x5ba49c(0x182)+_0x222902['id'],_0x26b896[_0x5ba49c(0x396)]=_0x5ba49c(0x4a1)+(_0x2e93bb[_0x5ba49c(0x317)]||'https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y')+_0x5ba49c(0x1b1)+_0x3d65ab[_0x5ba49c(0x2df)]+'\x22>'+_0x2e93bb[_0x5ba49c(0x2fb)]+'</span>\x20<span\x20class=\x22at-user\x22>@'+_0x2e93bb[_0x5ba49c(0x48c)]+_0x5ba49c(0x22b)+(_0x5e153a?_0x5ba49c(0x2d8):'')+_0x5ba49c(0x26e)+_0x3d65ab[_0x5ba49c(0x255)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-description\x22>'+_0x3d65ab[_0x5ba49c(0x26f)]+'</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-'+_0x222902['id']+_0x5ba49c(0x336)+JSON[_0x5ba49c(0x463)](_0x4346cb)+_0x5ba49c(0x49b)+(_0x41471c>0x1?_0x5ba49c(0x32d)+_0x222902['id']+_0x5ba49c(0x4c9):'')+_0x5ba49c(0x32e)+(_0x4346cb[0x0]||_0x5ba49c(0x203))+'\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x41471c>0x1?_0x5ba49c(0x45e)+_0x222902['id']+_0x5ba49c(0x204):'')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<p>Location:\x20'+_0x3d65ab[_0x5ba49c(0x1ec)]['name']+_0x5ba49c(0x330)+(_0x3d65ab[_0x5ba49c(0x3c3)]||_0x5ba49c(0x437))+_0x5ba49c(0x406)+(_0x3d65ab['lookingFor']||'N/A')+_0x5ba49c(0x451)+(_0x3d65ab[_0x5ba49c(0x360)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22timestamp\x22>'+_0x3ce5b0+_0x5ba49c(0x1b9)+_0x222902['id']+_0x5ba49c(0x3d8)+_0x222902['id']+_0x5ba49c(0x3fa)+(_0x3d65ab[_0x5ba49c(0x2df)]===auth[_0x5ba49c(0x243)][_0x5ba49c(0x3c5)]||_0x1a6cf4?_0x5ba49c(0x371)+_0x222902['id']+_0x5ba49c(0x23f):'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x1b701c[_0x5ba49c(0x1f6)]&&_0x1b701c[_0x5ba49c(0x166)]===0x1?_0x5ba49c(0x445)+_0x222902['id']+_0x5ba49c(0x47f):'')+_0x5ba49c(0x291)+(_0x1b701c[_0x5ba49c(0x1f6)]&&_0x1b701c[_0x5ba49c(0x166)]>=0x2?_0x5ba49c(0x445)+_0x222902['id']+_0x5ba49c(0x2ee)+_0x1b701c[_0x5ba49c(0x166)]+_0x5ba49c(0x332):'')+_0x5ba49c(0x2a5),_0x248d66[_0x5ba49c(0x467)](_0x26b896),_0x26b896[_0x5ba49c(0x2f2)](_0x5ba49c(0x2fd)+_0x3d65ab['userId']+'\x22]')[_0x5ba49c(0x4a9)](_0x5ba49c(0x372),()=>viewProfile(_0x3d65ab[_0x5ba49c(0x2df)]));const _0x5e1f30=_0x26b896[_0x5ba49c(0x2f2)](_0x5ba49c(0x403)+_0x222902['id']);if(_0x5e1f30)_0x5e1f30[_0x5ba49c(0x4a9)](_0x5ba49c(0x372),()=>deletePost(_0x222902['id']));_0x26b896['querySelector'](_0x5ba49c(0x213)+_0x222902['id']+'\x22]')[_0x5ba49c(0x4a9)](_0x5ba49c(0x372),_0x459f2f=>{const _0x379e16=_0x5ba49c;_0x459f2f[_0x379e16(0x45b)](),copyPostId(_0x222902['id']);});if(_0x41471c>0x1)setupYourPostsCarousel(_0x222902['id']);}await _0x26d0b9();if(!_0x1f7c88)window[_0x5ba49c(0x3ed)](0x0,_0x47f8a9);else document[_0x5ba49c(0x34f)](_0x5ba49c(0x2ff))?.[_0x5ba49c(0x275)]({'behavior':_0x5ba49c(0x27c)});}catch(_0x35553f){console[_0x5ba49c(0x290)]('Failed\x20to\x20load\x20your\x20posts:',_0x35553f),_0x248d66['innerHTML']=_0x5ba49c(0x16e);if(!_0x1f7c88)window[_0x5ba49c(0x3ed)](0x0,_0x47f8a9);else document[_0x5ba49c(0x34f)](_0x5ba49c(0x2ff))?.[_0x5ba49c(0x275)]({'behavior':_0x5ba49c(0x27c)});}}async function _0x26d0b9(){const _0x543990=_0x3ce56c,_0x42b8f1=_0x248d66[_0x543990(0x2f2)](_0x543990(0x284)),_0x57a20b=_0x248d66[_0x543990(0x2f2)]('#seeLessYourPostsBtn');if(_0x42b8f1)_0x42b8f1[_0x543990(0x1f3)]();if(_0x57a20b)_0x57a20b[_0x543990(0x1f3)]();const _0x208c24=document[_0x543990(0x22d)](_0x543990(0x3b0));_0x208c24['id']=_0x543990(0x329),_0x208c24[_0x543990(0x145)][_0x543990(0x4aa)]='margin-top:\x2010px;\x20text-align:\x20center;\x20display:\x20block\x20!important;\x20visibility:\x20visible\x20!important;';const _0x1ad916=document['createElement'](_0x543990(0x30a));_0x1ad916['id']='seeMoreYourPostsBtn',_0x1ad916[_0x543990(0x19e)]='See\x20More',_0x1ad916[_0x543990(0x289)]='see-more-btn',_0x1ad916['style'][_0x543990(0x4aa)]=_0x543990(0x3a8),_0x1ad916[_0x543990(0x4a9)](_0x543990(0x372),()=>_0x3c35cb());const _0x2742a1=document[_0x543990(0x22d)](_0x543990(0x30a));_0x2742a1['id']=_0x543990(0x466),_0x2742a1[_0x543990(0x19e)]=_0x543990(0x208),_0x2742a1[_0x543990(0x289)]=_0x543990(0x2b9),_0x2742a1[_0x543990(0x145)][_0x543990(0x4aa)]=_0x543990(0x3a8),_0x2742a1[_0x543990(0x4a9)]('click',async()=>{await _0x3c35cb(!![]);}),_0x208c24[_0x543990(0x467)](_0x1ad916),_0x208c24['appendChild'](_0x2742a1),_0x248d66[_0x543990(0x467)](_0x208c24),totalYourPosts>_0x19687d[_0x543990(0x481)]&&totalYourPosts>0x2&&(_0x1ad916[_0x543990(0x145)]['cssText']='display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;'),_0x19687d[_0x543990(0x481)]>0x2&&(_0x2742a1[_0x543990(0x145)][_0x543990(0x4aa)]=_0x543990(0x313));}await _0x3c35cb();}async function savePost(_0x5966c0,_0x33826c,_0x930091){const _0x575320=_0x3b0fb3;console[_0x575320(0x375)](_0x575320(0x1ab)+_0x5966c0);const _0x27518d=document[_0x575320(0x34f)](_0x575320(0x21d)),_0x43e6ae=document[_0x575320(0x34f)](_0x575320(0x3bd)),_0x18daf0=document[_0x575320(0x34f)](_0x575320(0x432)),_0x50d8c1=document[_0x575320(0x34f)](_0x575320(0x333)),_0x3b2e66=auth['currentUser'];_0x43e6ae[_0x575320(0x2db)]='',_0x27518d['style'][_0x575320(0x430)]=_0x575320(0x39e),_0x27518d[_0x575320(0x38f)][_0x575320(0x1f3)](_0x575320(0x26a)),_0x18daf0[_0x575320(0x468)][_0x575320(0x4c1)]=_0x5966c0,_0x18daf0['dataset']['communityId']=_0x33826c,_0x18daf0[_0x575320(0x1c1)]=async()=>{const _0x58bb68=_0x575320,_0x364fe2=_0x43e6ae[_0x58bb68(0x2db)][_0x58bb68(0x369)](),_0x431f7f=doc(db,_0x58bb68(0x1b4),_0x3b2e66[_0x58bb68(0x3c5)]),_0x40fb58=collection(_0x431f7f,_0x58bb68(0x1e4)),_0x27d70a=query(_0x40fb58,where(_0x58bb68(0x4c1),'==',_0x5966c0),where(_0x58bb68(0x24b),'==',_0x33826c)),_0x472e36=await getDocs(_0x27d70a);if(!_0x472e36[_0x58bb68(0x3b2)]){alert(_0x58bb68(0x497)),closeModal(_0x58bb68(0x21d));return;}await addDoc(_0x40fb58,{'postId':_0x5966c0,'communityId':_0x33826c,'note':_0x364fe2||'','savedAt':new Date()});if(_0x930091)_0x930091['textContent']='Unsave';alert(_0x58bb68(0x1a5)),closeModal(_0x58bb68(0x21d));},_0x50d8c1[_0x575320(0x1c1)]=()=>closeModal(_0x575320(0x21d));}async function deleteSavedPostFromPost(_0x2974ab,_0x144c30,_0x2a46b6){const _0x4df0a3=_0x3b0fb3;console['log']('deleteSavedPostFromPost\x20called\x20for\x20postId:\x20'+_0x2974ab);const _0x3d34f8=auth[_0x4df0a3(0x243)],_0x101410=doc(db,'users',_0x3d34f8[_0x4df0a3(0x3c5)]),_0x3ed376=query(collection(_0x101410,_0x4df0a3(0x1e4)),where(_0x4df0a3(0x4c1),'==',_0x2974ab),where(_0x4df0a3(0x24b),'==',_0x144c30)),_0x2975f0=await getDocs(_0x3ed376);if(_0x2975f0[_0x4df0a3(0x3b2)]){console[_0x4df0a3(0x375)](_0x4df0a3(0x34b)+_0x2974ab+'\x20not\x20found\x20in\x20savedPosts'),alert(_0x4df0a3(0x273));if(_0x2a46b6)_0x2a46b6[_0x4df0a3(0x19e)]='Save';return;}if(confirm(_0x4df0a3(0x48f))){const _0x2f98a3=_0x2975f0[_0x4df0a3(0x3ab)][0x0];await deleteDoc(doc(db,'users',_0x3d34f8[_0x4df0a3(0x3c5)],_0x4df0a3(0x1e4),_0x2f98a3['id']));if(_0x2a46b6)_0x2a46b6['textContent']=_0x4df0a3(0x298);alert('Post\x20unsaved!');}}async function viewSavedPosts(_0x36e19e){const _0x52c21d=_0x3b0fb3,_0x587e44=document[_0x52c21d(0x34f)]('viewSavedPostsModal'),_0x2d1770=document['getElementById'](_0x52c21d(0x3ee)),_0xf88b4e=document[_0x52c21d(0x34f)](_0x52c21d(0x434));if(typeof doc!==_0x52c21d(0x2a8)||!db){console[_0x52c21d(0x290)]('Firebase\x20setup\x20issue\x20-\x20doc:',doc,_0x52c21d(0x143),db),_0x2d1770[_0x52c21d(0x396)]=_0x52c21d(0x404),_0x587e44[_0x52c21d(0x145)][_0x52c21d(0x430)]=_0x52c21d(0x39e),_0x587e44['classList'][_0x52c21d(0x1f3)](_0x52c21d(0x26a)),_0xf88b4e[_0x52c21d(0x1c1)]=()=>closeModal('viewSavedPostsModal');return;}_0x2d1770[_0x52c21d(0x396)]=_0x52c21d(0x35d),_0x587e44[_0x52c21d(0x145)][_0x52c21d(0x430)]='flex',_0x587e44['classList']['remove'](_0x52c21d(0x26a));try{const _0xd22080=doc(db,'users',_0x36e19e),_0x3eee71=query(collection(_0xd22080,_0x52c21d(0x1e4)),orderBy(_0x52c21d(0x4ab),_0x52c21d(0x240))),_0x3121c7=await getDocs(_0x3eee71);_0x2d1770[_0x52c21d(0x396)]='',_0x2d1770[_0x52c21d(0x38f)][_0x52c21d(0x4d4)](_0x52c21d(0x19f));if(_0x3121c7[_0x52c21d(0x3b2)])_0x2d1770['innerHTML']=_0x52c21d(0x2c6);else for(const _0x52fbe3 of _0x3121c7[_0x52c21d(0x3ab)]){const _0x30061c=_0x52fbe3['data']();let _0x14197c=null,_0x2d9ce7={'name':_0x52c21d(0x1b2)},_0x59a875=_0x52c21d(0x3e4);try{const _0x2dcf75=doc(db,_0x52c21d(0x405),_0x30061c[_0x52c21d(0x24b)],_0x52c21d(0x1aa),_0x30061c[_0x52c21d(0x4c1)]),_0x56dd16=await getDoc(_0x2dcf75);_0x14197c=_0x56dd16[_0x52c21d(0x150)]()?_0x56dd16[_0x52c21d(0x1fe)]():null,_0x14197c&&(_0x2d9ce7=await fetchUserData(_0x14197c[_0x52c21d(0x2df)]||'unknown'));}catch(_0x29e951){console['warn'](_0x52c21d(0x24f)+_0x30061c['postId']+':',_0x29e951);}try{const _0x479c65=doc(db,_0x52c21d(0x405),_0x30061c[_0x52c21d(0x24b)]),_0x1c3642=await getDoc(_0x479c65);_0x59a875=_0x1c3642[_0x52c21d(0x150)]()?_0x1c3642[_0x52c21d(0x1fe)]()['name']||_0x52c21d(0x486):_0x52c21d(0x3e4);}catch(_0x1520c4){console[_0x52c21d(0x2b0)](_0x52c21d(0x35a)+_0x30061c[_0x52c21d(0x24b)]+':',_0x1520c4);}const _0x48b317=document[_0x52c21d(0x22d)](_0x52c21d(0x3b0));_0x48b317['className']='saved-post-card',_0x48b317[_0x52c21d(0x468)][_0x52c21d(0x158)]=_0x52fbe3['id'],_0x48b317[_0x52c21d(0x396)]=_0x52c21d(0x210)+(_0x14197c?_0x14197c[_0x52c21d(0x255)]:'Post\x20Deleted')+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>By:\x20'+_0x2d9ce7[_0x52c21d(0x2fb)]+_0x52c21d(0x267)+_0x30061c[_0x52c21d(0x4c1)]+'\x22>'+_0x30061c['postId']+_0x52c21d(0x2c0)+_0x30061c[_0x52c21d(0x24b)]+'\x22>'+_0x59a875+_0x52c21d(0x365)+_0x52fbe3['id']+'\x22>'+(_0x30061c[_0x52c21d(0x385)]||'No\x20note')+_0x52c21d(0x22a)+_0x52fbe3['id']+_0x52c21d(0x194)+_0x52fbe3['id']+'\x22><i\x20class=\x22fas\x20fa-trash\x22></i>\x20Unsave</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2d1770[_0x52c21d(0x467)](_0x48b317),_0x48b317[_0x52c21d(0x145)][_0x52c21d(0x142)]='0',setTimeout(()=>{const _0x1b6bc2=_0x52c21d;_0x48b317[_0x1b6bc2(0x145)][_0x1b6bc2(0x339)]=_0x1b6bc2(0x379),_0x48b317[_0x1b6bc2(0x145)]['opacity']='1';},0x32),_0x48b317['querySelector'](_0x52c21d(0x29b)+_0x30061c[_0x52c21d(0x4c1)]+'\x22]')[_0x52c21d(0x4a9)](_0x52c21d(0x372),()=>{const _0x201a2f=_0x52c21d;navigator['clipboard']['writeText'](_0x30061c['postId'])['then'](()=>alert(_0x201a2f(0x46d)))['catch'](_0x5e4621=>console[_0x201a2f(0x290)](_0x201a2f(0x448),_0x5e4621));}),_0x48b317[_0x52c21d(0x2f2)](_0x52c21d(0x36a)+_0x52fbe3['id']+'\x22]')[_0x52c21d(0x4a9)](_0x52c21d(0x372),()=>editSavedNote(_0x52fbe3['id'],_0x30061c[_0x52c21d(0x385)])),_0x48b317[_0x52c21d(0x2f2)](_0x52c21d(0x224)+_0x52fbe3['id']+'\x22]')['addEventListener'](_0x52c21d(0x372),()=>deleteSavedPost(_0x52fbe3['id'],_0x36e19e));}}catch(_0x1fa52a){console['error'](_0x52c21d(0x170),_0x1fa52a),_0x2d1770[_0x52c21d(0x396)]=_0x52c21d(0x2c9);}_0xf88b4e[_0x52c21d(0x1c1)]=()=>closeModal(_0x52c21d(0x1d9));}async function editSavedNote(_0x4bd3e0,_0x342508){const _0x4c6ec7=_0x3b0fb3,_0x39b425=document[_0x4c6ec7(0x34f)]('savePostModal'),_0x170959=document[_0x4c6ec7(0x34f)](_0x4c6ec7(0x3bd)),_0x4c1041=document[_0x4c6ec7(0x34f)](_0x4c6ec7(0x432)),_0x42053e=document[_0x4c6ec7(0x34f)]('cancelSavePostBtn');_0x39b425[_0x4c6ec7(0x2f2)]('h2')[_0x4c6ec7(0x19e)]=_0x4c6ec7(0x4be),_0x170959[_0x4c6ec7(0x2db)]=_0x342508,_0x39b425['style'][_0x4c6ec7(0x430)]=_0x4c6ec7(0x39e),_0x39b425['classList'][_0x4c6ec7(0x1f3)](_0x4c6ec7(0x26a)),_0x4c1041['onclick']=async()=>{const _0x52c254=_0x4c6ec7,_0x447c3f=_0x170959['value'][_0x52c254(0x369)](),_0x4bee87=auth['currentUser'],_0x4e360e=doc(db,_0x52c254(0x1b4),_0x4bee87[_0x52c254(0x3c5)],_0x52c254(0x1e4),_0x4bd3e0);try{await updateDoc(_0x4e360e,{'note':_0x447c3f||''}),document[_0x52c254(0x2f2)](_0x52c254(0x2c2)+_0x4bd3e0+'\x22]')[_0x52c254(0x19e)]=_0x447c3f||'No\x20note',closeModal(_0x52c254(0x21d)),_0x39b425['querySelector']('h2')[_0x52c254(0x19e)]=_0x52c254(0x36f);}catch(_0x285c12){console[_0x52c254(0x290)](_0x52c254(0x3e1),_0x285c12),alert(_0x52c254(0x3fe));}},_0x42053e[_0x4c6ec7(0x1c1)]=()=>{const _0x2e9eb0=_0x4c6ec7;closeModal(_0x2e9eb0(0x21d)),_0x39b425['querySelector']('h2')['textContent']=_0x2e9eb0(0x36f);};}async function deleteSavedPost(_0x49f3d2,_0x4b40e7){const _0x97ab1b=_0x3b0fb3;if(confirm(_0x97ab1b(0x48f))){const _0x3b942d=auth[_0x97ab1b(0x243)],_0x3bafcd=doc(db,_0x97ab1b(0x1b4),_0x3b942d[_0x97ab1b(0x3c5)],_0x97ab1b(0x1e4),_0x49f3d2),_0x459d6f=document[_0x97ab1b(0x34f)](_0x97ab1b(0x3ee)),_0x12173c=_0x459d6f[_0x97ab1b(0x2f2)](_0x97ab1b(0x2fc)+_0x49f3d2+'\x22]');try{_0x12173c&&(_0x12173c['style'][_0x97ab1b(0x339)]='opacity\x200.3s\x20ease',_0x12173c[_0x97ab1b(0x145)][_0x97ab1b(0x142)]='0',await new Promise(_0x4600b7=>setTimeout(_0x4600b7,0x12c)));await deleteDoc(_0x3bafcd);if(_0x12173c)_0x12173c['remove']();!_0x459d6f['querySelector'](_0x97ab1b(0x354))&&(_0x459d6f[_0x97ab1b(0x396)]=_0x97ab1b(0x2c6)),alert('Post\x20unsaved!');}catch(_0x5ddae8){console[_0x97ab1b(0x290)]('Error\x20deleting\x20saved\x20post:',_0x5ddae8);if(_0x12173c)_0x12173c[_0x97ab1b(0x145)][_0x97ab1b(0x142)]='1';alert('Failed\x20to\x20unsave\x20post.\x20Try\x20again.');}}}async function getTotalPosts(_0x5e8a4d){const _0x4858d9=_0x3b0fb3,_0x2a42b0=doc(db,'communities',_0x5e8a4d),_0x14fe56=await getDoc(_0x2a42b0),_0x53d403=_0x14fe56[_0x4858d9(0x1fe)]();return _0x53d403[_0x4858d9(0x30f)]||0x0;}async function searchPostsById(_0x3ca56f){const _0x15e39d=_0x3b0fb3,_0x5f429b=document[_0x15e39d(0x34f)](_0x15e39d(0x30b)),_0xf372e2=document[_0x15e39d(0x34f)](_0x15e39d(0x477));_0x5f429b[_0x15e39d(0x396)]=_0x15e39d(0x459),_0xf372e2['style'][_0x15e39d(0x430)]=_0x15e39d(0x31f);if(!_0x3ca56f||_0x3ca56f[_0x15e39d(0x369)]()===''){isSearching=![],_0x5f429b['innerHTML']='',await loadPosts(communityId,!![]);return;}isSearching=!![];try{const _0x542cfe=getCachedPosts(),_0x314f81=_0x542cfe[_0x15e39d(0x338)](_0x3ca56f[_0x15e39d(0x369)]());let _0x4f3737,_0x264b57,_0x3bd788,_0x2a1eba,_0xcc77bd;if(_0x314f81){console[_0x15e39d(0x375)](_0x15e39d(0x34b)+_0x3ca56f+_0x15e39d(0x43a)),_0x4f3737=_0x314f81['data'],_0x264b57=_0x3ca56f[_0x15e39d(0x369)](),_0x3bd788=await fetchUserData(_0x4f3737[_0x15e39d(0x2df)]||_0x15e39d(0x2ec)),_0x2a1eba=await getPostReportStatus(_0x264b57);const _0x4233b3=query(collection(db,_0x15e39d(0x405),communityId,_0x15e39d(0x1aa),_0x264b57,_0x15e39d(0x3a4))),_0x30dd12=await getDocs(_0x4233b3);_0xcc77bd=_0x30dd12[_0x15e39d(0x481)];}else{console[_0x15e39d(0x375)]('Post\x20'+_0x3ca56f+_0x15e39d(0x25b));const _0x5be00e=query(collection(db,_0x15e39d(0x405),communityId,_0x15e39d(0x1aa)),where('__name__','==',_0x3ca56f[_0x15e39d(0x369)]())),_0x4023f6=await getDocs(_0x5be00e);_0x5f429b[_0x15e39d(0x396)]='';if(_0x4023f6['empty']){_0x5f429b[_0x15e39d(0x396)]='<p>No\x20post\x20found\x20with\x20ID:\x20'+_0x3ca56f+_0x15e39d(0x223);return;}const _0x47af14=_0x4023f6[_0x15e39d(0x3ab)][0x0];_0x4f3737=normalizePostData(_0x47af14['data']()),_0x264b57=_0x47af14['id'],_0x3bd788=await fetchUserData(_0x4f3737[_0x15e39d(0x2df)]||_0x15e39d(0x2ec)),_0x542cfe[_0x15e39d(0x276)](_0x264b57,{'id':_0x264b57,'data':_0x4f3737,'score':getPostScore(_0x4f3737,getLikedPrefs())}),setCachedPosts(_0x542cfe),_0x2a1eba=await getPostReportStatus(_0x264b57);const _0x5507bc=query(collection(db,_0x15e39d(0x405),communityId,_0x15e39d(0x1aa),_0x264b57,_0x15e39d(0x3a4))),_0x2af965=await getDocs(_0x5507bc);_0xcc77bd=_0x2af965[_0x15e39d(0x481)];}const _0x15c828=auth[_0x15e39d(0x243)],_0x5a53cf=await getCommData(),_0x4b7b10=_0x5a53cf?.['admins']?.['includes'](_0x15c828[_0x15e39d(0x3c5)])||_0x5a53cf?.[_0x15e39d(0x32a)]===_0x15c828[_0x15e39d(0x3c5)],_0x165b89=_0x4f3737[_0x15e39d(0x2df)]===_0x15c828[_0x15e39d(0x3c5)];if(_0x2a1eba['isHidden']&&!_0x4b7b10&&!_0x165b89){_0x5f429b['innerHTML']=_0x15e39d(0x4af)+_0x3ca56f+_0x15e39d(0x499);return;}const _0x488087=_0x4f3737[_0x15e39d(0x161)]?new Date(_0x4f3737[_0x15e39d(0x161)])['toLocaleString']():_0x15e39d(0x437),_0xb7ab8b=_0x4f3737['photoUrls']||[],_0x28bf97=_0xb7ab8b[_0x15e39d(0x2fe)];_0x5f429b['innerHTML']='\x0a\x20\x20<div\x20id=\x22searchMessage\x22\x20class=\x22search-message\x22>\x0a\x20\x20\x20\x20<p>Showing\x20post\x20with\x20ID:\x20'+_0x264b57+'.\x20<button\x20id=\x22showAllPostsBtn\x22>Click\x20here\x20to\x20see\x20all\x20posts\x20again</button></p>\x0a\x20\x20</div>\x0a\x20\x20<div\x20class=\x22post\x22\x20id=\x22post-'+_0x264b57+'\x22>\x0a\x20\x20\x20\x20<h3>'+(_0x4f3737[_0x15e39d(0x255)]||_0x15e39d(0x49d))+_0x15e39d(0x2f0)+(_0x4f3737['description']||_0x15e39d(0x285))+_0x15e39d(0x45c)+_0x264b57+_0x15e39d(0x424)+JSON[_0x15e39d(0x463)](_0xb7ab8b)+'\x27>\x0a\x20\x20\x20\x20\x20\x20'+(_0x28bf97>0x1?_0x15e39d(0x32d)+_0x264b57+_0x15e39d(0x1ba):'')+_0x15e39d(0x228)+(_0xb7ab8b[0x0]||'https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430')+_0x15e39d(0x2a1)+(_0x28bf97>0x1?'<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22'+_0x264b57+_0x15e39d(0x232):'')+_0x15e39d(0x471)+(_0x4f3737[_0x15e39d(0x2df)]||'unknown')+'\x22>'+(_0x3bd788['name']||_0x15e39d(0x1b2))+'\x20('+(_0x3bd788[_0x15e39d(0x48c)]||_0x15e39d(0x2ec))+_0x15e39d(0x35b)+(_0x4f3737[_0x15e39d(0x1ec)]?.['name']||_0x15e39d(0x437))+_0x15e39d(0x382)+(_0x4f3737['category']||_0x15e39d(0x437))+_0x15e39d(0x31d)+(_0x4f3737[_0x15e39d(0x47b)]||_0x15e39d(0x437))+_0x15e39d(0x451)+(_0x4f3737[_0x15e39d(0x360)]||_0x15e39d(0x437))+_0x15e39d(0x358)+_0x488087+_0x15e39d(0x241)+_0x264b57+'\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22'+_0x264b57+_0x15e39d(0x431)+_0x264b57+'\x22>'+((_0x4f3737[_0x15e39d(0x347)]||[])['includes'](_0x15c828[_0x15e39d(0x3c5)])?_0x15e39d(0x335):'<i\x20class=\x22fas\x20fa-heart\x22></i>\x20Like')+'\x20('+(_0x4f3737[_0x15e39d(0x46b)]||0x0)+')</button>\x0a\x20\x20\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-'+_0x264b57+_0x15e39d(0x498)+(_0x165b89||_0x4b7b10?_0x15e39d(0x371)+_0x264b57+_0x15e39d(0x23f):'')+_0x15e39d(0x2a5)+(_0x2a1eba[_0x15e39d(0x1f6)]&&_0x2a1eba[_0x15e39d(0x166)]===0x1?'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x264b57+_0x15e39d(0x2bf):'')+_0x15e39d(0x2a5)+(_0x2a1eba[_0x15e39d(0x1f6)]&&_0x2a1eba[_0x15e39d(0x166)]>=0x2?_0x15e39d(0x205)+_0x264b57+_0x15e39d(0x377)+_0x2a1eba[_0x15e39d(0x166)]+'\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20</div>':'')+_0x15e39d(0x2a5)+(_0x4b7b10&&_0x2a1eba[_0x15e39d(0x166)]>0x0?'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-'+_0x264b57+_0x15e39d(0x1ac)+_0x2a1eba[_0x15e39d(0x166)]+_0x15e39d(0x4d3)+(_0x2a1eba[_0x15e39d(0x166)]>0x1?'s':'')+_0x15e39d(0x484)+_0x264b57+_0x15e39d(0x1d5)+_0x264b57+_0x15e39d(0x1ca):'')+_0x15e39d(0x1d2)+_0x264b57+'\x22>'+_0xcc77bd+_0x15e39d(0x1d4)+_0x264b57+_0x15e39d(0x2e3)+_0x264b57+_0x15e39d(0x43d);const _0x248381=_0x5f429b[_0x15e39d(0x2f2)](_0x15e39d(0x292));_0x248381&&_0x248381[_0x15e39d(0x4a9)](_0x15e39d(0x372),async()=>{const _0x53cba9=_0x15e39d,_0x5da521=document[_0x53cba9(0x34f)](_0x53cba9(0x4b4));if(_0x5da521)_0x5da521[_0x53cba9(0x2db)]='';isSearching=![],_0x5f429b['innerHTML']='',await loadPosts(communityId,!![]);});const _0x3bd163=_0x5f429b['querySelector'](_0x15e39d(0x450)+_0x264b57);_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x2fd)+(_0x4f3737[_0x15e39d(0x2df)]||_0x15e39d(0x2ec))+'\x22]')[_0x15e39d(0x4a9)]('click',()=>viewProfile(_0x4f3737[_0x15e39d(0x2df)]||_0x15e39d(0x2ec))),_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x213)+_0x264b57+'\x22]')[_0x15e39d(0x4a9)]('click',_0x5b1b4d=>{const _0x16e31c=_0x15e39d;_0x5b1b4d[_0x16e31c(0x45b)](),copyPostId(_0x264b57);}),_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x3d3)+_0x264b57)[_0x15e39d(0x4a9)](_0x15e39d(0x372),()=>reportPost(_0x264b57));const _0x1f0928=_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x403)+_0x264b57);if(_0x1f0928)_0x1f0928[_0x15e39d(0x4a9)](_0x15e39d(0x372),()=>deletePost(_0x264b57));_0x4b7b10&&(_0x3bd163[_0x15e39d(0x2f2)]('.remove-post-btn[data-post-id=\x22'+_0x264b57+'\x22]')?.[_0x15e39d(0x4a9)](_0x15e39d(0x372),()=>deletePost(_0x264b57)),_0x3bd163['querySelector'](_0x15e39d(0x21c)+_0x264b57+'\x22]')?.[_0x15e39d(0x4a9)]('click',()=>clearReports(_0x264b57)));_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x378)+_0x264b57)[_0x15e39d(0x4a9)](_0x15e39d(0x372),_0x2a44e5=>{const _0x2f42d8=_0x15e39d;_0x2a44e5[_0x2f42d8(0x1af)](),toggleComments(_0x264b57);}),_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x257)+_0x264b57)['addEventListener']('submit',_0x1c627f=>{const _0x19ca15=_0x15e39d;_0x1c627f[_0x19ca15(0x1af)](),addComment(_0x264b57,_0x4f3737[_0x19ca15(0x2df)]);});const _0x4ef0a3=_0x3bd163[_0x15e39d(0x2f2)](_0x15e39d(0x395)+_0x264b57+'\x22]');_0x4ef0a3[_0x15e39d(0x4a9)]('click',async()=>{const _0x14f65d=_0x15e39d,_0x512ea8=doc(db,_0x14f65d(0x405),communityId,_0x14f65d(0x1aa),_0x264b57),_0x15d029=await getDoc(_0x512ea8);if(!_0x15d029['exists']()){alert(_0x14f65d(0x2e7));return;}const _0x179be7=normalizePostData(_0x15d029[_0x14f65d(0x1fe)]()),_0x2b4fa4=auth['currentUser'][_0x14f65d(0x3c5)],_0x16f55f=_0x179be7[_0x14f65d(0x347)]||[];let _0x537f30=_0x179be7[_0x14f65d(0x46b)]||0x0,_0x407f5f=[..._0x16f55f];_0x16f55f[_0x14f65d(0x352)](_0x2b4fa4)?(_0x407f5f=_0x407f5f['filter'](_0x203142=>_0x203142!==_0x2b4fa4),_0x537f30=Math[_0x14f65d(0x259)](0x0,_0x537f30-0x1),await updateDoc(_0x512ea8,{'likes':_0x537f30,'likedBy':_0x407f5f}),_0x4ef0a3[_0x14f65d(0x19e)]=_0x14f65d(0x24e)+_0x537f30+')'):(_0x407f5f['push'](_0x2b4fa4),_0x537f30+=0x1,await updateDoc(_0x512ea8,{'likes':_0x537f30,'likedBy':_0x407f5f}),_0x4ef0a3[_0x14f65d(0x19e)]='<i\x20class=\x22fas\x20fa-heart-broken\x22></i>\x20Unlike\x20('+_0x537f30+')',addLikedPref(_0x179be7[_0x14f65d(0x3c3)],_0x179be7[_0x14f65d(0x360)])),_0x542cfe[_0x14f65d(0x276)](_0x264b57,{'id':_0x264b57,'data':{..._0x179be7,'likes':_0x537f30,'likedBy':_0x407f5f},'score':getPostScore({..._0x179be7,'likes':_0x537f30,'likedBy':_0x407f5f},getLikedPrefs())}),setCachedPosts(_0x542cfe);});if(_0x28bf97>0x1)setupSearchCarousel(_0x264b57);}catch(_0x1298ba){console[_0x15e39d(0x290)](_0x15e39d(0x2a6),_0x1298ba),_0x5f429b[_0x15e39d(0x396)]=_0x15e39d(0x1c4);}finally{isSearching=![];}}function setupSearchCarousel(_0xe9462c){const _0x513b9b=_0x3b0fb3,_0x4bafb8=document[_0x513b9b(0x34f)](_0x513b9b(0x48e)+_0xe9462c+_0x513b9b(0x280)),_0x48242e=_0x4bafb8[_0x513b9b(0x2f2)]('.carousel-prev[data-post-id=\x22'+_0xe9462c+_0x513b9b(0x47d)),_0x13031b=_0x4bafb8[_0x513b9b(0x2f2)]('.carousel-next[data-post-id=\x22'+_0xe9462c+_0x513b9b(0x47d)),_0x31ac41=_0x4bafb8['querySelector'](_0x513b9b(0x3f2));let _0x5df9e1=JSON['parse'](_0x4bafb8[_0x513b9b(0x468)][_0x513b9b(0x191)]||'[]'),_0x2bc3d3=0x0;if(!_0x48242e||!_0x13031b||!_0x31ac41)return;_0x5df9e1[_0x513b9b(0x2fe)]===0x0&&(_0x5df9e1=[_0x513b9b(0x3f7)]),_0x31ac41[_0x513b9b(0x261)]=_0x5df9e1[0x0],_0x48242e[_0x513b9b(0x4a9)](_0x513b9b(0x372),_0x2dd190=>{const _0x264a71=_0x513b9b;_0x2dd190[_0x264a71(0x1af)](),_0x2bc3d3=(_0x2bc3d3-0x1+_0x5df9e1[_0x264a71(0x2fe)])%_0x5df9e1[_0x264a71(0x2fe)],_0x31ac41[_0x264a71(0x261)]=_0x5df9e1[_0x2bc3d3];}),_0x13031b[_0x513b9b(0x4a9)](_0x513b9b(0x372),_0x470de5=>{const _0xd702da=_0x513b9b;_0x470de5[_0xd702da(0x1af)](),_0x2bc3d3=(_0x2bc3d3+0x1)%_0x5df9e1[_0xd702da(0x2fe)],_0x31ac41['src']=_0x5df9e1[_0x2bc3d3];});}async function acceptProfileRequest(_0x5c8cb9,_0x34e2ef){const _0x42a6b6=_0x3b0fb3,_0x25f0a4=doc(db,'users',_0x34e2ef,_0x42a6b6(0x4ac),_0x5c8cb9),_0x13037d=await getDoc(_0x25f0a4),_0x196cdf=_0x13037d[_0x42a6b6(0x1fe)]()[_0x42a6b6(0x297)],_0x21644b=await fetchCurrentUserData();await updateDoc(_0x25f0a4,{'status':'accepted'}),await addDoc(collection(db,_0x42a6b6(0x1b4),_0x196cdf,_0x42a6b6(0x443)),{'type':_0x42a6b6(0x18e),'message':(_0x21644b[_0x42a6b6(0x2fb)]||_0x42a6b6(0x488))+_0x42a6b6(0x4d0),'requestId':_0x5c8cb9,'timestamp':new Date(),'seen':![]});const _0x478cff=doc(db,'users',_0x196cdf);await runTransaction(db,async _0x37b949=>{const _0x3786c9=_0x42a6b6,_0x9c90e5=await _0x37b949['get'](_0x478cff),_0x1fe147=_0x9c90e5[_0x3786c9(0x150)]()?_0x9c90e5[_0x3786c9(0x1fe)]()[_0x3786c9(0x3b9)]||0x0:0x0;_0x37b949[_0x3786c9(0x276)](_0x478cff,{'unseenCount':_0x1fe147+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x3786c9(0x375)](_0x3786c9(0x16a)+_0x196cdf+'\x20to\x20'+(_0x1fe147+0x1));}),alert('Profile\x20view\x20request\x20accepted!'),closeModal('viewProfileViewRequestsModal'),await updateProfileRequestsUI(_0x34e2ef),viewProfileViewRequests(_0x34e2ef),setTimeout(()=>updateNotificationBadge(_0x196cdf,!![]),0x3e8);}async function declineProfileRequest(_0x5a9553,_0x633bba){const _0x241a09=_0x3b0fb3,_0x17b523=doc(db,_0x241a09(0x1b4),_0x633bba,_0x241a09(0x4ac),_0x5a9553),_0x226671=await getDoc(_0x17b523),_0x24ea7a=_0x226671['data']()[_0x241a09(0x297)],_0xb9b3dd=await fetchCurrentUserData();await deleteDoc(_0x17b523),await addDoc(collection(db,_0x241a09(0x1b4),_0x24ea7a,_0x241a09(0x443)),{'type':_0x241a09(0x199),'message':(_0xb9b3dd[_0x241a09(0x2fb)]||_0x241a09(0x488))+'\x20declined\x20your\x20profile\x20view\x20request.','requestId':_0x5a9553,'timestamp':new Date(),'seen':![]});const _0x4d9cb5=doc(db,_0x241a09(0x1b4),_0x24ea7a);await runTransaction(db,async _0x126c23=>{const _0x42805a=_0x241a09,_0x27e7f5=await _0x126c23[_0x42805a(0x338)](_0x4d9cb5),_0x2d26bb=_0x27e7f5[_0x42805a(0x150)]()?_0x27e7f5[_0x42805a(0x1fe)]()[_0x42805a(0x3b9)]||0x0:0x0;_0x126c23[_0x42805a(0x276)](_0x4d9cb5,{'unseenCount':_0x2d26bb+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x42805a(0x375)]('Client:\x20Incremented\x20unseenCount\x20for\x20'+_0x24ea7a+'\x20to\x20'+(_0x2d26bb+0x1));}),alert('Profile\x20view\x20request\x20declined!'),closeModal('viewProfileViewRequestsModal'),await updateProfileRequestsUI(_0x633bba),viewProfileViewRequests(_0x633bba),setTimeout(()=>updateNotificationBadge(_0x24ea7a,!![]),0x3e8);}async function revokeProfileAccess(_0x326917,_0x1261aa){const _0x56071f=_0x3b0fb3,_0x506b5f=doc(db,_0x56071f(0x1b4),_0x326917,_0x56071f(0x4ac),_0x1261aa);await deleteDoc(_0x506b5f),alert(_0x56071f(0x35c)),closeModal(_0x56071f(0x3ff)),await viewProfile(_0x326917);}async function revokeProfileAccessFromModal(_0x5a022e,_0x2176ac){const _0x426942=_0x3b0fb3,_0x227cb0=doc(db,'users',_0x2176ac,_0x426942(0x4ac),_0x5a022e);await deleteDoc(_0x227cb0),alert(_0x426942(0x35c)),closeModal(_0x426942(0x494)),await updateProfileRequestsUI(_0x2176ac),viewProfileViewRequests(_0x2176ac);}async function viewProfileViewRequests(_0x1b76cd){const _0x5b26c1=_0x3b0fb3,_0x18dd68=document[_0x5b26c1(0x34f)](_0x5b26c1(0x494)),_0xafbeac=document[_0x5b26c1(0x34f)](_0x5b26c1(0x151)),_0x20a254=document[_0x5b26c1(0x34f)](_0x5b26c1(0x454)),_0x4a9222=collection(db,_0x5b26c1(0x1b4),_0x1b76cd,_0x5b26c1(0x4ac)),_0x3e23e5=query(_0x4a9222,where(_0x5b26c1(0x315),'==',_0x5b26c1(0x3b3))),_0xf61410=await getDocs(_0x3e23e5);_0xafbeac['innerHTML']=_0xf61410[_0x5b26c1(0x3b2)]?_0x5b26c1(0x1ce):'';for(const _0x486ddc of _0xf61410[_0x5b26c1(0x3ab)]){const _0x5e9462=_0x486ddc['data'](),_0x57747a=await fetchUserData(_0x5e9462[_0x5b26c1(0x297)]);_0xafbeac[_0x5b26c1(0x396)]+=_0x5b26c1(0x20f)+_0x486ddc['id']+_0x5b26c1(0x351)+_0x57747a[_0x5b26c1(0x2fb)]+'\x20('+_0x57747a[_0x5b26c1(0x48c)]+')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22accept-btn\x22\x20data-request-id=\x22'+_0x486ddc['id']+'\x22>Accept</button>\x0a\x20\x20\x20\x20<button\x20class=\x22decline-btn\x22\x20data-request-id=\x22'+_0x486ddc['id']+'\x22>Decline</button>\x0a\x20\x20</div>\x0a';}const _0xa94029=query(_0x4a9222,where(_0x5b26c1(0x315),'==',_0x5b26c1(0x2a3))),_0x2c7d2b=await getDocs(_0xa94029);_0x20a254[_0x5b26c1(0x396)]=_0x2c7d2b[_0x5b26c1(0x3b2)]?_0x5b26c1(0x3c1):'';for(const _0x19e869 of _0x2c7d2b['docs']){const _0x2b0ea7=_0x19e869[_0x5b26c1(0x1fe)](),_0x3febd0=await fetchUserData(_0x2b0ea7[_0x5b26c1(0x297)]);_0x20a254[_0x5b26c1(0x396)]+=_0x5b26c1(0x17c)+_0x19e869['id']+'\x22>\x0a\x20\x20\x20\x20<span>'+_0x3febd0[_0x5b26c1(0x2fb)]+'\x20('+_0x3febd0['username']+_0x5b26c1(0x42f)+_0x19e869['id']+_0x5b26c1(0x282);}document['querySelectorAll'](_0x5b26c1(0x225))[_0x5b26c1(0x2b3)](_0x166745=>_0x166745[_0x5b26c1(0x145)][_0x5b26c1(0x430)]='none'),_0x18dd68[_0x5b26c1(0x145)][_0x5b26c1(0x430)]=_0x5b26c1(0x39e),_0x18dd68[_0x5b26c1(0x38f)]['remove']('hidden'),_0xafbeac[_0x5b26c1(0x40d)](_0x5b26c1(0x37a))['forEach'](_0x5213a0=>{const _0x509f72=_0x5b26c1;_0x5213a0['addEventListener'](_0x509f72(0x372),()=>acceptProfileRequest(_0x5213a0[_0x509f72(0x468)]['requestId'],_0x1b76cd));}),_0xafbeac['querySelectorAll'](_0x5b26c1(0x3d0))['forEach'](_0x7056ed=>{const _0x1f5213=_0x5b26c1;_0x7056ed[_0x1f5213(0x4a9)](_0x1f5213(0x372),()=>declineProfileRequest(_0x7056ed['dataset']['requestId'],_0x1b76cd));}),_0x20a254['querySelectorAll'](_0x5b26c1(0x478))[_0x5b26c1(0x2b3)](_0x57b57b=>{const _0x42ea82=_0x5b26c1;_0x57b57b[_0x42ea82(0x4a9)](_0x42ea82(0x372),()=>revokeProfileAccessFromModal(_0x57b57b['dataset'][_0x42ea82(0x163)],_0x1b76cd));});}let currentMembers=[];async function viewMembers(_0x175edd){const _0x204ad2=_0x3b0fb3,_0x45a323=document[_0x204ad2(0x34f)](_0x204ad2(0x44e)),_0x448f37=document['getElementById'](_0x204ad2(0x38a)),_0x3c211f=document[_0x204ad2(0x34f)](_0x204ad2(0x2e1));if(!_0x45a323||!_0x448f37||!_0x3c211f){console[_0x204ad2(0x290)](_0x204ad2(0x1e6));return;}lastMemberDoc=null,_0x448f37[_0x204ad2(0x396)]=_0x204ad2(0x35d),_0x45a323[_0x204ad2(0x145)][_0x204ad2(0x430)]=_0x204ad2(0x39e),_0x45a323[_0x204ad2(0x38f)][_0x204ad2(0x1f3)](_0x204ad2(0x26a));const _0x15be1e=await getCommData(),_0x3bdc79=_0x15be1e[_0x204ad2(0x2f4)]||0x0;console['log']('Total\x20members\x20from\x20memberCount:',_0x3bdc79);const _0x36a001=_0x45a323[_0x204ad2(0x2f2)]('h2')||document[_0x204ad2(0x22d)]('h2');if(!_0x45a323[_0x204ad2(0x2f2)]('h2'))_0x45a323[_0x204ad2(0x2f2)](_0x204ad2(0x13f))[_0x204ad2(0x1d8)](_0x36a001);_0x36a001[_0x204ad2(0x19e)]=_0x204ad2(0x43b)+_0x3bdc79+')';const _0x137dd2=collection(db,'communities',_0x175edd,'members'),_0x41865a=query(_0x137dd2,limit(ITEMS_PER_PAGE));let _0x6b4f71;try{_0x6b4f71=await getDocs(_0x41865a);}catch(_0x1f3652){console['error']('Error\x20fetching\x20initial\x20members:',_0x1f3652),_0x448f37[_0x204ad2(0x396)]=_0x204ad2(0x4d1);return;}currentMembers=_0x6b4f71[_0x204ad2(0x3ab)]['map'](_0x3f743a=>_0x3f743a['id']),console[_0x204ad2(0x375)](_0x204ad2(0x428),currentMembers[_0x204ad2(0x2fe)]),await loadMembersBatch(_0x6b4f71,!![],_0x3bdc79),_0x3c211f[_0x204ad2(0x3ca)]=debounce(_0x5778c6=>searchMembers(_0x175edd,_0x5778c6[_0x204ad2(0x146)]['value']),0x12c);}async function loadMembersBatch(_0x5dd5a2,_0x58b25d=![],_0x265bc9){const _0x205e6d=_0x3b0fb3,_0x3c3c0a=document[_0x205e6d(0x34f)]('membersList');_0x58b25d&&(_0x3c3c0a[_0x205e6d(0x396)]='',lastMemberDoc=null);const _0x21e96e=lastMemberDoc?_0x3c3c0a[_0x205e6d(0x40d)](_0x205e6d(0x408))[_0x205e6d(0x2fe)]:0x0;console['log']('Loading\x20batch:',{'startIndex':_0x21e96e,'batchSize':_0x5dd5a2['docs'][_0x205e6d(0x2fe)]});if(_0x5dd5a2[_0x205e6d(0x3b2)]&&_0x21e96e===0x0){_0x3c3c0a[_0x205e6d(0x396)]='<p>No\x20members\x20yet!</p>',updateMembersButtons(_0x265bc9,0x0);return;}const _0x46dc74=_0x5dd5a2[_0x205e6d(0x3ab)][_0x205e6d(0x180)](_0x2abc9a=>_0x2abc9a['id']);let _0x22b394;try{const _0x24a7fd=query(collection(db,_0x205e6d(0x1b4)),where(_0x205e6d(0x256),'in',_0x46dc74));_0x22b394=await getDocs(_0x24a7fd);}catch(_0x187867){console[_0x205e6d(0x290)](_0x205e6d(0x24d),_0x187867),_0x3c3c0a[_0x205e6d(0x396)]+=_0x205e6d(0x209);return;}console[_0x205e6d(0x375)](_0x205e6d(0x1da),_0x22b394[_0x205e6d(0x3ab)][_0x205e6d(0x2fe)]),_0x22b394[_0x205e6d(0x3ab)][_0x205e6d(0x2b3)](_0x2f9f95=>{const _0x1e05da=_0x205e6d,_0x6b2881=_0x2f9f95['data'](),_0x52a8dd=_0x1e05da(0x310)+_0x2f9f95['id'];if(!document[_0x1e05da(0x34f)](_0x52a8dd)){const _0x6b2d36=document[_0x1e05da(0x22d)](_0x1e05da(0x3b0));_0x6b2d36[_0x1e05da(0x289)]='user-item',_0x6b2d36['id']=_0x52a8dd,_0x6b2d36[_0x1e05da(0x396)]=_0x1e05da(0x370)+(_0x6b2881['profilePhoto']||_0x1e05da(0x3f7))+'\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22'+_0x2f9f95['id']+'\x22>'+_0x6b2881[_0x1e05da(0x2fb)]+_0x1e05da(0x48b),_0x3c3c0a[_0x1e05da(0x467)](_0x6b2d36),_0x6b2d36[_0x1e05da(0x2f2)](_0x1e05da(0x2fd)+_0x2f9f95['id']+'\x22]')[_0x1e05da(0x4a9)](_0x1e05da(0x372),()=>viewProfile(_0x2f9f95['id']));}}),lastMemberDoc=_0x5dd5a2[_0x205e6d(0x3ab)][_0x205e6d(0x2fe)]===ITEMS_PER_PAGE?_0x5dd5a2['docs'][_0x5dd5a2[_0x205e6d(0x3ab)][_0x205e6d(0x2fe)]-0x1]:null;const _0x30dee5=_0x3c3c0a[_0x205e6d(0x40d)](_0x205e6d(0x408))[_0x205e6d(0x2fe)];console['log'](_0x205e6d(0x4b0),_0x30dee5),updateMembersButtons(_0x265bc9,_0x30dee5);}function updateMembersButtons(_0x2bf737,_0x21769b){const _0x17bf56=_0x3b0fb3,_0x537c93=document['getElementById'](_0x17bf56(0x38a)),_0x2897ab=_0x537c93[_0x17bf56(0x2f2)]('#seeMoreMembersBtn'),_0x265e31=_0x537c93[_0x17bf56(0x2f2)](_0x17bf56(0x3a6));if(_0x2897ab)_0x2897ab[_0x17bf56(0x1f3)]();if(_0x265e31)_0x265e31['remove']();console['log'](_0x17bf56(0x164),{'totalMembers':_0x2bf737,'loadedCount':_0x21769b});if(_0x2bf737>0x0){const _0x16775a=document[_0x17bf56(0x22d)](_0x17bf56(0x30a));_0x16775a['id']=_0x17bf56(0x33b),_0x16775a[_0x17bf56(0x19e)]='See\x20More',_0x16775a[_0x17bf56(0x289)]=_0x17bf56(0x327),_0x16775a[_0x17bf56(0x145)]['display']=_0x2bf737>_0x21769b?_0x17bf56(0x3b6):'none',_0x16775a[_0x17bf56(0x1c1)]=async()=>{const _0x7f9073=_0x17bf56,_0x29af9d=collection(db,_0x7f9073(0x405),communityId,'members');try{const _0x5f12c7=query(_0x29af9d,startAfter(lastMemberDoc),limit(ITEMS_PER_PAGE)),_0x2d5ebd=await getDocs(_0x5f12c7);currentMembers=currentMembers[_0x7f9073(0x418)](_0x2d5ebd[_0x7f9073(0x3ab)][_0x7f9073(0x180)](_0x2978e5=>_0x2978e5['id'])),await loadMembersBatch(_0x2d5ebd,![],_0x2bf737);}catch(_0x1a75d8){console[_0x7f9073(0x290)]('Error\x20loading\x20more\x20members:',_0x1a75d8),_0x537c93[_0x7f9073(0x396)]+=_0x7f9073(0x324);}};const _0x44009b=document[_0x17bf56(0x22d)](_0x17bf56(0x30a));_0x44009b['id']=_0x17bf56(0x201),_0x44009b[_0x17bf56(0x19e)]=_0x17bf56(0x208),_0x44009b[_0x17bf56(0x289)]='see-less-btn',_0x44009b[_0x17bf56(0x145)][_0x17bf56(0x430)]=_0x21769b>ITEMS_PER_PAGE?_0x17bf56(0x3b6):_0x17bf56(0x31f),_0x44009b[_0x17bf56(0x1c1)]=()=>loadMembersBatch([],!![],_0x2bf737),_0x537c93[_0x17bf56(0x467)](_0x16775a),_0x537c93[_0x17bf56(0x467)](_0x44009b),console['log'](_0x17bf56(0x4c3),_0x16775a[_0x17bf56(0x145)]['display']);}}async function searchMembers(_0x530a25,_0x104848){const _0x585d18=_0x3b0fb3,_0x49c1fa=document[_0x585d18(0x34f)](_0x585d18(0x38a));let _0x54d077=0x0;_0x49c1fa[_0x585d18(0x396)]=_0x585d18(0x459);if(!_0x104848)return lastMemberDoc=null,viewMembers(_0x530a25);const _0x5092d8=collection(db,_0x585d18(0x405),_0x530a25,_0x585d18(0x18a));let _0x20ebad;try{_0x20ebad=await getDocs(_0x5092d8);}catch(_0x2c65ab){console[_0x585d18(0x290)](_0x585d18(0x2f6),_0x2c65ab),_0x49c1fa[_0x585d18(0x396)]=_0x585d18(0x37f);return;}const _0x256f44=_0x20ebad[_0x585d18(0x3ab)]['map'](_0x14e376=>_0x14e376['id']),_0x2ccc24=[];for(const _0xc58835 of _0x256f44){const _0x674afa=userDataCache[_0xc58835]||await fetchUserData(_0xc58835);_0x674afa&&(_0x674afa[_0x585d18(0x2fb)]['toLowerCase']()[_0x585d18(0x352)](_0x104848[_0x585d18(0x279)]())||_0x674afa[_0x585d18(0x48c)][_0x585d18(0x279)]()[_0x585d18(0x352)](_0x104848[_0x585d18(0x279)]()))&&_0x2ccc24[_0x585d18(0x2d1)](_0xc58835);}console[_0x585d18(0x375)](_0x585d18(0x364)+_0x2ccc24[_0x585d18(0x2fe)]+'\x20matches\x20for\x20\x22'+_0x104848+'\x22');async function _0x317a40(_0x74cfe8=![]){const _0x1cc1d4=_0x585d18;_0x74cfe8&&(_0x54d077=0x0,_0x49c1fa[_0x1cc1d4(0x396)]='');const _0x1ced90=_0x2ccc24[_0x1cc1d4(0x2f5)](_0x54d077,_0x54d077+ITEMS_PER_PAGE);console[_0x1cc1d4(0x375)](_0x1cc1d4(0x3a5)+_0x54d077+_0x1cc1d4(0x34e)+_0x1ced90['length']);if(_0x1ced90[_0x1cc1d4(0x2fe)]===0x0){_0x54d077===0x0&&(_0x49c1fa[_0x1cc1d4(0x396)]='<p>No\x20matching\x20members\x20found.</p>');_0x49a1de(_0x2ccc24[_0x1cc1d4(0x2fe)],_0x54d077);return;}let _0x56b0e9;try{const _0x34b421=query(collection(db,_0x1cc1d4(0x1b4)),where(_0x1cc1d4(0x256),'in',_0x1ced90));_0x56b0e9=await getDocs(_0x34b421);}catch(_0x28b21c){console[_0x1cc1d4(0x290)](_0x1cc1d4(0x36c),_0x28b21c),_0x49c1fa[_0x1cc1d4(0x396)]+=_0x1cc1d4(0x394);return;}if(_0x54d077===0x0)_0x49c1fa[_0x1cc1d4(0x396)]='';_0x56b0e9['docs'][_0x1cc1d4(0x2b3)](_0x4e9880=>{const _0x82cbd3=_0x1cc1d4,_0x2fc2e0=_0x4e9880[_0x82cbd3(0x1fe)](),_0x4818be=_0x82cbd3(0x310)+_0x4e9880['id'];if(!document['getElementById'](_0x4818be)){const _0x30ac2f=document[_0x82cbd3(0x22d)](_0x82cbd3(0x3b0));_0x30ac2f['className']='user-item',_0x30ac2f['id']=_0x4818be,_0x30ac2f['innerHTML']=_0x82cbd3(0x228)+(_0x2fc2e0[_0x82cbd3(0x317)]||_0x82cbd3(0x3f7))+'\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22'+_0x4e9880['id']+'\x22>'+_0x2fc2e0[_0x82cbd3(0x2fb)]+_0x82cbd3(0x492),_0x49c1fa[_0x82cbd3(0x467)](_0x30ac2f),_0x30ac2f[_0x82cbd3(0x2f2)]('.username[data-uid=\x22'+_0x4e9880['id']+'\x22]')[_0x82cbd3(0x4a9)]('click',()=>viewProfile(_0x4e9880['id']));}});const _0x4bd6db=_0x49c1fa['querySelectorAll'](_0x1cc1d4(0x408))[_0x1cc1d4(0x2fe)];_0x49a1de(_0x2ccc24['length'],_0x4bd6db);}function _0x49a1de(_0x300c12,_0x8bf046){const _0x360ce3=_0x585d18,_0x2e36cd=_0x49c1fa[_0x360ce3(0x2f2)](_0x360ce3(0x153)),_0x5298ac=_0x49c1fa[_0x360ce3(0x2f2)](_0x360ce3(0x376));if(_0x2e36cd)_0x2e36cd[_0x360ce3(0x1f3)]();if(_0x5298ac)_0x5298ac[_0x360ce3(0x1f3)]();console[_0x360ce3(0x375)]('Search\x20buttons:\x20totalFiltered='+_0x300c12+',\x20loadedCount='+_0x8bf046);if(_0x300c12>0x0){const _0x5899a8=document[_0x360ce3(0x22d)](_0x360ce3(0x30a));_0x5899a8['id']=_0x360ce3(0x20c),_0x5899a8['textContent']='See\x20More',_0x5899a8[_0x360ce3(0x289)]='see-more-btn',_0x5899a8['style'][_0x360ce3(0x430)]=_0x300c12>_0x8bf046?_0x360ce3(0x3b6):_0x360ce3(0x31f),_0x5899a8['onclick']=()=>{_0x54d077+=ITEMS_PER_PAGE,_0x317a40();};const _0x40b615=document[_0x360ce3(0x22d)](_0x360ce3(0x30a));_0x40b615['id']=_0x360ce3(0x1a4),_0x40b615['textContent']=_0x360ce3(0x208),_0x40b615['className']=_0x360ce3(0x2b9),_0x40b615[_0x360ce3(0x145)][_0x360ce3(0x430)]=_0x8bf046>ITEMS_PER_PAGE?_0x360ce3(0x3b6):'none',_0x40b615['onclick']=()=>_0x317a40(!![]),_0x49c1fa[_0x360ce3(0x467)](_0x5899a8),_0x49c1fa['appendChild'](_0x40b615);}}await _0x317a40(!![]);}async function viewCommunities(_0x306106){const _0x51ef9b=_0x3b0fb3,_0xceecc4=document[_0x51ef9b(0x34f)](_0x51ef9b(0x27f)),_0x124bf2=document[_0x51ef9b(0x34f)](_0x51ef9b(0x14e)),_0x460395=document['getElementById'](_0x51ef9b(0x314));_0x124bf2[_0x51ef9b(0x396)]=_0x51ef9b(0x35d),_0xceecc4[_0x51ef9b(0x145)]['display']=_0x51ef9b(0x39e),_0xceecc4[_0x51ef9b(0x38f)]['remove'](_0x51ef9b(0x26a));const _0x5aac63=doc(db,_0x51ef9b(0x1b4),_0x306106),_0x53c1cc=await getDoc(_0x5aac63),_0x3bd150=_0x53c1cc['data']()[_0x51ef9b(0x186)]||[];if(_0x3bd150[_0x51ef9b(0x2fe)]===0x0)_0x124bf2[_0x51ef9b(0x396)]='<p>You’re\x20not\x20in\x20any\x20communities\x20yet!</p>';else{_0x124bf2[_0x51ef9b(0x396)]='';const _0x310ff5=_0x3bd150[_0x51ef9b(0x180)](_0x1e9e1e=>getDoc(doc(db,_0x51ef9b(0x405),_0x1e9e1e))),_0x1d1a93=await Promise[_0x51ef9b(0x25e)](_0x310ff5);_0x1d1a93[_0x51ef9b(0x2b3)](_0x1a5973=>{const _0x5df6f9=_0x51ef9b;if(_0x1a5973[_0x5df6f9(0x150)]()){const _0x49a1d8=_0x1a5973[_0x5df6f9(0x1fe)](),_0x348656=(_0x49a1d8[_0x5df6f9(0x412)]||[])[_0x5df6f9(0x352)](_0x306106);if(!_0x348656){const _0x213ab5=document[_0x5df6f9(0x22d)](_0x5df6f9(0x3b0));_0x213ab5[_0x5df6f9(0x289)]=_0x5df6f9(0x386),_0x213ab5['innerHTML']=_0x5df6f9(0x4b3)+_0x1a5973['id']+'\x22>'+(_0x49a1d8[_0x5df6f9(0x2fb)]||_0x5df6f9(0x3df))+_0x5df6f9(0x179),_0x124bf2[_0x5df6f9(0x467)](_0x213ab5);}}}),!_0x124bf2['children'][_0x51ef9b(0x2fe)]&&(_0x124bf2['innerHTML']=_0x51ef9b(0x147));}_0x460395[_0x51ef9b(0x1c1)]=()=>{const _0x2f2841=_0x51ef9b;_0xceecc4[_0x2f2841(0x145)][_0x2f2841(0x430)]=_0x2f2841(0x31f),_0xceecc4['classList'][_0x2f2841(0x4d4)](_0x2f2841(0x26a));};}async function getUnseenNotificationCount(_0x97172b,_0x2242a5=![]){const _0x2b7b6e=_0x3b0fb3,_0x111a0f=Date[_0x2b7b6e(0x42a)](),_0x325ca1='unseenNotifCount_'+_0x97172b,_0x544be8=0x3c*0x3c*0x3e8,_0x21a834=JSON[_0x2b7b6e(0x392)](localStorage[_0x2b7b6e(0x37d)](_0x325ca1))||{'count':0x0,'timestamp':0x0};if(!_0x2242a5&&_0x21a834[_0x2b7b6e(0x33f)]&&_0x111a0f-_0x21a834[_0x2b7b6e(0x33f)]<_0x544be8)return console[_0x2b7b6e(0x375)]('Using\x20cached\x20unseen\x20count:\x20'+_0x21a834[_0x2b7b6e(0x3d2)]+_0x2b7b6e(0x3ec)+Math[_0x2b7b6e(0x302)]((_0x111a0f-_0x21a834[_0x2b7b6e(0x33f)])/0x3e8)+'s)'),_0x21a834[_0x2b7b6e(0x3d2)];console[_0x2b7b6e(0x375)](_0x2b7b6e(0x2dc));const _0x21ccf4=doc(db,'users',_0x97172b);try{const _0x28e072=await getDoc(_0x21ccf4);if(!_0x28e072[_0x2b7b6e(0x150)]())throw new Error('User\x20not\x20found');const _0x97a598=_0x28e072[_0x2b7b6e(0x1fe)]()[_0x2b7b6e(0x3b9)]||0x0;return localStorage[_0x2b7b6e(0x46f)](_0x325ca1,JSON[_0x2b7b6e(0x463)]({'count':_0x97a598,'timestamp':_0x111a0f})),console[_0x2b7b6e(0x375)](_0x2b7b6e(0x45a)+_0x97a598),_0x97a598;}catch(_0x499e5a){return console[_0x2b7b6e(0x290)](_0x2b7b6e(0x3db),_0x499e5a),_0x21a834['count'];}}window[_0x3b0fb3(0x453)]=updateNotificationBadge;async function updateNotificationBadge(_0x58cf83,_0x3a3627=!![]){const _0x5c3b93=_0x3b0fb3,_0x46f96d=await getUnseenNotificationCount(_0x58cf83,_0x3a3627),_0xa83261=document[_0x5c3b93(0x34f)](_0x5c3b93(0x353));return _0xa83261&&(_0xa83261[_0x5c3b93(0x19e)]=_0x46f96d>0x0?'('+_0x46f96d+')':'',_0xa83261[_0x5c3b93(0x145)][_0x5c3b93(0x430)]=_0x46f96d>0x0?_0x5c3b93(0x272):'none',console[_0x5c3b93(0x375)]('Badge\x20updated\x20to:\x20'+_0x46f96d)),_0x46f96d;}document['addEventListener']('DOMContentLoaded',async()=>{const _0x1d7f4d=_0x3b0fb3,_0x5d2bc1=auth[_0x1d7f4d(0x243)];_0x5d2bc1&&await updateNotificationBadge(_0x5d2bc1[_0x1d7f4d(0x3c5)],!![]);});async function openNotificationsModal(_0xad9532){const _0x135059=_0x3b0fb3,_0x5efcb2=document[_0x135059(0x34f)](_0x135059(0x2a2)),_0x351047=document['getElementById'](_0x135059(0x1f8)),_0x24a50d=document[_0x135059(0x34f)](_0x135059(0x368)),_0x25eb8b=document['getElementById'](_0x135059(0x423));if(!_0x5efcb2||!_0x351047||!_0x24a50d||!_0x25eb8b){console[_0x135059(0x290)]('Notifications\x20modal\x20elements\x20missing\x20from\x20DOM!'),alert(_0x135059(0x429));return;}let _0x5bc70e=_0x5efcb2[_0x135059(0x2f2)](_0x135059(0x43c));!_0x5bc70e&&(_0x5bc70e=document[_0x135059(0x22d)](_0x135059(0x30a)),_0x5bc70e['id']=_0x135059(0x472),_0x5bc70e[_0x135059(0x19e)]=_0x135059(0x2f7),_0x5bc70e[_0x135059(0x145)]['marginLeft']=_0x135059(0x3e0),_0x5efcb2[_0x135059(0x2f2)]('.modal-content')['insertBefore'](_0x5bc70e,document[_0x135059(0x34f)](_0x135059(0x21b))));_0x351047[_0x135059(0x396)]=_0x135059(0x35d),_0x5efcb2['style'][_0x135059(0x430)]=_0x135059(0x39e),_0x5efcb2['classList'][_0x135059(0x1f3)](_0x135059(0x26a));const _0x168a27=doc(db,'users',_0xad9532);let _0x272ce6=[];try{const _0x46ed1f=await getDoc(_0x168a27);if(!_0x46ed1f[_0x135059(0x150)]())throw new Error(_0x135059(0x3ea));const _0x6032f3=_0x46ed1f['data']()['communityIds']||[],_0x4f3538=await Promise[_0x135059(0x25e)](_0x6032f3[_0x135059(0x180)](_0x3cda07=>getDoc(doc(db,_0x135059(0x405),_0x3cda07))));_0x272ce6=_0x4f3538[_0x135059(0x217)](_0x156cd3=>_0x156cd3[_0x135059(0x150)]())[_0x135059(0x180)](_0x3c6c12=>({'id':_0x3c6c12['id'],'name':_0x3c6c12[_0x135059(0x1fe)]()['name']||_0x135059(0x486)}));}catch(_0x55fd02){console[_0x135059(0x290)](_0x135059(0x206),_0x55fd02),_0x351047[_0x135059(0x396)]=_0x135059(0x2ed);return;}_0x25eb8b[_0x135059(0x396)]=_0x135059(0x461),_0x272ce6[_0x135059(0x2b3)](_0xc005df=>{const _0x4cce21=_0x135059,_0x4de621=document['createElement'](_0x4cce21(0x192));_0x4de621[_0x4cce21(0x2db)]=_0xc005df['id'],_0x4de621[_0x4cce21(0x19e)]=_0xc005df['name'],_0x25eb8b['appendChild'](_0x4de621);});const _0x477e17=0xa,_0x118fb9=await updateNotificationBadge(_0xad9532,![]);_0x24a50d[_0x135059(0x19e)]=_0x118fb9;async function _0x335c06(){const _0x5d69df=_0x135059;console[_0x5d69df(0x375)]('handleViewChatsClick\x20triggered\x20with\x20userId:',_0xad9532,_0x5d69df(0x2b5),communityId),await updateChatBadge(_0xad9532,!![]),await window[_0x5d69df(0x4d7)](communityId),await updateChatBadge(_0xad9532);}async function _0x3fdedd(_0x3e7ed8=![],_0x446b09=![]){const _0x35889a=_0x135059,_0x38c05f=_0x25eb8b[_0x35889a(0x2db)];_0x3e7ed8&&(lastDoc=null,displayedCount=0x0,allNotifications=[],_0x351047[_0x35889a(0x396)]=_0x35889a(0x35d));let _0x27d504=0x3;while(_0x27d504>0x0){try{const _0x1fa7c6=collection(db,_0x35889a(0x1b4),_0xad9532,_0x35889a(0x443));let _0x373797;_0x38c05f===_0x35889a(0x25e)?_0x373797=query(_0x1fa7c6,orderBy(_0x35889a(0x33f),_0x35889a(0x240)),...lastDoc&&!_0x3e7ed8?[startAfter(lastDoc)]:[],limit(_0x477e17)):_0x373797=query(_0x1fa7c6,where('communityId','==',_0x38c05f),orderBy('timestamp',_0x35889a(0x240)),...lastDoc&&!_0x3e7ed8?[startAfter(lastDoc)]:[],limit(_0x477e17));const _0x5104b4=await getDocs(_0x373797),_0x1c87b9=_0x5104b4['docs'][_0x35889a(0x180)](_0xf42034=>({'id':_0xf42034['id'],'data':_0xf42034[_0x35889a(0x1fe)]()}));_0x446b09?_0x1c87b9[_0x35889a(0x2b3)](_0x4c3208=>{!allNotifications['some'](_0x49a796=>_0x49a796['id']===_0x4c3208['id'])&&allNotifications['unshift'](_0x4c3208);}):(_0x1c87b9[_0x35889a(0x2b3)](_0x57338e=>{const _0x1cdef8=_0x35889a;!allNotifications[_0x1cdef8(0x167)](_0x4948e7=>_0x4948e7['id']===_0x57338e['id'])&&allNotifications[_0x1cdef8(0x2d1)](_0x57338e);}),lastDoc=_0x5104b4['docs'][_0x35889a(0x2fe)]===_0x477e17?_0x5104b4[_0x35889a(0x3ab)][_0x5104b4[_0x35889a(0x3ab)][_0x35889a(0x2fe)]-0x1]:null);allNotifications[_0x35889a(0x49a)]((_0x59251f,_0x2003c5)=>_0x2003c5[_0x35889a(0x1fe)][_0x35889a(0x33f)][_0x35889a(0x1a8)]()-_0x59251f[_0x35889a(0x1fe)][_0x35889a(0x33f)][_0x35889a(0x1a8)]());if(allNotifications[_0x35889a(0x2fe)]===0x0)_0x351047['innerHTML']='<p>No\x20notifications\x20yet.</p>';else{const _0x5c9190=_0x3e7ed8?0x0:displayedCount,_0x1dabc5=Math[_0x35889a(0x215)](_0x5c9190+_0x477e17,allNotifications[_0x35889a(0x2fe)]),_0x299e6e=allNotifications['slice'](0x0,_0x1dabc5)[_0x35889a(0x180)](_0x217c26=>_0x599df3({'id':_0x217c26['id'],'data':()=>_0x217c26['data']},_0x272ce6))[_0x35889a(0x25a)]('');_0x351047[_0x35889a(0x396)]=_0x299e6e,displayedCount=_0x1dabc5;}const _0x1eb414=await getUnseenNotificationCount(_0xad9532,_0x446b09);_0x24a50d['textContent']=_0x1eb414,_0x1b12e3(),_0xb74891();break;}catch(_0xb9946a){console[_0x35889a(0x290)](_0x35889a(0x42d),_0xb9946a),_0x27d504--;if(_0x27d504===0x0){_0x351047[_0x35889a(0x396)]=_0x35889a(0x27e),_0x1b12e3();break;}await new Promise(_0x40a5c3=>setTimeout(_0x40a5c3,0x3e8));}}}function _0x599df3(_0x469ca,_0x8de7b7){const _0x1d0b98=_0x135059,_0x235593=_0x469ca[_0x1d0b98(0x1fe)](),_0x31fbd6=new Date(_0x235593[_0x1d0b98(0x33f)]['toDate']())[_0x1d0b98(0x1a0)]();let _0x48e447=_0x235593[_0x1d0b98(0x2d9)]||'No\x20message';if(_0x235593['communityId']&&_0x235593[_0x1d0b98(0x29e)]!==_0x1d0b98(0x22f)){const _0x23cd51=_0x8de7b7[_0x1d0b98(0x196)](_0x3dcbcb=>_0x3dcbcb['id']===_0x235593[_0x1d0b98(0x24b)])?.['name']||_0x1d0b98(0x3e4);_0x48e447+='\x20('+_0x23cd51+')';}let _0x40c607=_0x1d0b98(0x300)+(_0x235593['seen']?_0x1d0b98(0x1a1):'')+_0x1d0b98(0x398)+_0x469ca['id']+_0x1d0b98(0x32b)+_0x235593[_0x1d0b98(0x29e)]+_0x1d0b98(0x140);return _0x235593[_0x1d0b98(0x29e)]==='follow'&&_0x235593[_0x1d0b98(0x391)]?_0x40c607+=_0x1d0b98(0x1c3)+_0x235593[_0x1d0b98(0x391)]+'\x22>'+_0x48e447+_0x1d0b98(0x14b):_0x40c607+=_0x1d0b98(0x413)+_0x48e447+_0x1d0b98(0x2ac),_0x40c607+=_0x1d0b98(0x4b9)+_0x31fbd6+_0x1d0b98(0x48b)+(_0x235593['postId']?'<button\x20class=\x22copy-id-btn2\x22\x20data-post-id=\x22'+_0x235593[_0x1d0b98(0x4c1)]+'\x22>Copy\x20ID</button>':'')+'\x0a\x20\x20<button\x20class=\x22mark-seen-btn2\x22\x20data-id=\x22'+_0x469ca['id']+'\x22\x20'+(_0x235593[_0x1d0b98(0x1a1)]?_0x1d0b98(0x3de):'')+'>'+(_0x235593[_0x1d0b98(0x1a1)]?'Seen':'Mark\x20as\x20Seen')+_0x1d0b98(0x47c),_0x235593[_0x1d0b98(0x29e)]===_0x1d0b98(0x22f)&&!_0x235593[_0x1d0b98(0x44a)]&&(_0x40c607+=_0x1d0b98(0x33e)+_0x469ca['id']+'\x22>\x0a\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20</form>\x0a'),_0x40c607+=_0x1d0b98(0x181),_0x40c607;}function _0xb74891(){const _0x3ec7d4=_0x135059;_0x351047[_0x3ec7d4(0x40d)](_0x3ec7d4(0x321))[_0x3ec7d4(0x2b3)](_0x12eb69=>{const _0x168bb5=_0x3ec7d4;_0x12eb69[_0x168bb5(0x4a9)](_0x168bb5(0x372),_0x5846a5=>{const _0x24ff8f=_0x168bb5;_0x5846a5['stopPropagation'](),copyPostId(_0x12eb69[_0x24ff8f(0x468)][_0x24ff8f(0x4c1)]);});}),_0x351047[_0x3ec7d4(0x40d)](_0x3ec7d4(0x460))[_0x3ec7d4(0x2b3)](_0x24b528=>{const _0x2fd896=_0x3ec7d4;!_0x24b528['disabled']&&_0x24b528[_0x2fd896(0x4a9)](_0x2fd896(0x372),_0x291c76=>{const _0x380d0c=_0x2fd896;_0x291c76['stopPropagation'](),markNotificationSeen(_0x24b528[_0x380d0c(0x468)]['id']);});}),_0x351047[_0x3ec7d4(0x40d)](_0x3ec7d4(0x1d6))[_0x3ec7d4(0x2b3)](_0xf18f54=>{const _0x31bc1a=_0x3ec7d4;_0xf18f54[_0x31bc1a(0x4a9)](_0x31bc1a(0x155),async _0xc907cd=>{const _0x39f8d7=_0x31bc1a;_0xc907cd['preventDefault']();const _0x139a96=_0xf18f54[_0x39f8d7(0x2f2)]('textarea')[_0x39f8d7(0x2db)][_0x39f8d7(0x369)]();if(_0x139a96){const _0x3af61c=_0xf18f54[_0x39f8d7(0x468)]['id'],_0x59d56a=allNotifications[_0x39f8d7(0x196)](_0x2a3c3b=>_0x2a3c3b['id']===_0x3af61c)[_0x39f8d7(0x1fe)];try{const _0xb2fc51=await getDoc(doc(db,_0x39f8d7(0x1b4),_0xad9532)),_0x4ed3a9=_0xb2fc51[_0x39f8d7(0x150)]()?_0xb2fc51[_0x39f8d7(0x1fe)]():{'username':_0x39f8d7(0x23d)+_0xad9532[_0x39f8d7(0x2f5)](0x0,0x8)};await addDoc(collection(db,_0x39f8d7(0x405),_0x59d56a[_0x39f8d7(0x24b)],'banAppeals'),{'userId':_0xad9532,'username':_0x4ed3a9[_0x39f8d7(0x48c)],'message':_0x139a96,'timestamp':new Date(),'notificationId':_0x3af61c}),await updateDoc(doc(db,_0x39f8d7(0x1b4),_0xad9532,'notifications',_0x3af61c),{'appealSubmitted':!![]}),alert('Appeal\x20sent!'),await _0x3fdedd(!![]);}catch(_0x3f82a6){console[_0x39f8d7(0x290)](_0x39f8d7(0x3dc),_0x3f82a6),alert(_0x39f8d7(0x31c));}}});}),_0x351047['querySelectorAll'](_0x3ec7d4(0x1fa))['forEach'](_0x6729bf=>{const _0x1f8aab=_0x3ec7d4;_0x6729bf[_0x1f8aab(0x4a9)](_0x1f8aab(0x372),async _0x189426=>{const _0x4c2bd8=_0x1f8aab;if(_0x189426[_0x4c2bd8(0x146)][_0x4c2bd8(0x184)]==='BUTTON'||_0x189426['target'][_0x4c2bd8(0x184)]===_0x4c2bd8(0x390)||_0x189426[_0x4c2bd8(0x146)][_0x4c2bd8(0x1bc)]('form'))return;const _0x33b711=allNotifications[_0x4c2bd8(0x196)](_0x494434=>_0x494434['id']===_0x6729bf[_0x4c2bd8(0x468)]['id'])[_0x4c2bd8(0x1fe)],_0x2aae33=_0x6729bf[_0x4c2bd8(0x468)][_0x4c2bd8(0x29e)];if(_0x2aae33===_0x4c2bd8(0x247)&&_0x33b711[_0x4c2bd8(0x391)])closeModal(_0x4c2bd8(0x2a2)),await viewProfile(_0x33b711[_0x4c2bd8(0x391)]);else{if(_0x2aae33===_0x4c2bd8(0x1eb)||_0x2aae33===_0x4c2bd8(0x18e)||_0x2aae33===_0x4c2bd8(0x199))closeModal(_0x4c2bd8(0x2a2)),await viewProfileViewRequests(_0xad9532);else{if(_0x2aae33===_0x4c2bd8(0x30c)||_0x2aae33===_0x4c2bd8(0x3e7))console[_0x4c2bd8(0x375)]('Chat\x20notification\x20clicked,\x20triggering\x20handleViewChatsClick'),closeModal('notificationsModal'),await _0x335c06();else{if(_0x33b711['postId']&&_0x33b711[_0x4c2bd8(0x24b)]){if(_0x33b711[_0x4c2bd8(0x24b)]!==communityId)window['location'][_0x4c2bd8(0x18d)]=_0x4c2bd8(0x265)+_0x33b711[_0x4c2bd8(0x24b)]+_0x4c2bd8(0x450)+_0x33b711[_0x4c2bd8(0x4c1)];else{closeModal('notificationsModal'),await searchPostsById(_0x33b711[_0x4c2bd8(0x4c1)]);const _0x5d5cc1=document[_0x4c2bd8(0x34f)](_0x4c2bd8(0x278));_0x5d5cc1?_0x5d5cc1['scrollIntoView']({'behavior':_0x4c2bd8(0x27c)}):console[_0x4c2bd8(0x2b0)](_0x4c2bd8(0x1e8));}}}}}});}),_0x351047[_0x3ec7d4(0x40d)]('.clickable-profile')[_0x3ec7d4(0x2b3)](_0x3ff334=>{const _0x4e63a5=_0x3ec7d4;_0x3ff334[_0x4e63a5(0x4a9)](_0x4e63a5(0x372),async _0x361837=>{const _0x3ab258=_0x4e63a5;_0x361837[_0x3ab258(0x45b)]();const _0x13961d=_0x3ff334['dataset']['uid'];closeModal(_0x3ab258(0x2a2)),await viewProfile(_0x13961d);});});}function _0x1b12e3(){const _0x7c01df=_0x135059;let _0x1d1ad9=_0x351047[_0x7c01df(0x2f2)](_0x7c01df(0x238)),_0x4811a2=_0x351047['querySelector'](_0x7c01df(0x2c3));if(_0x1d1ad9)_0x1d1ad9[_0x7c01df(0x1f3)]();if(_0x4811a2)_0x4811a2[_0x7c01df(0x1f3)]();const _0x3138df=allNotifications[_0x7c01df(0x2fe)],_0x3e793f=lastDoc&&displayedCount<_0x3138df;_0x3e793f&&(_0x1d1ad9=document[_0x7c01df(0x22d)](_0x7c01df(0x30a)),_0x1d1ad9['id']='loadMoreBtn',_0x1d1ad9[_0x7c01df(0x19e)]=_0x7c01df(0x231),_0x1d1ad9[_0x7c01df(0x289)]=_0x7c01df(0x4cb),_0x1d1ad9[_0x7c01df(0x1c1)]=()=>_0x3fdedd(![],![]),_0x351047[_0x7c01df(0x467)](_0x1d1ad9)),displayedCount>_0x477e17&&(_0x4811a2=document[_0x7c01df(0x22d)](_0x7c01df(0x30a)),_0x4811a2['id']=_0x7c01df(0x383),_0x4811a2[_0x7c01df(0x19e)]=_0x7c01df(0x19b),_0x4811a2[_0x7c01df(0x289)]=_0x7c01df(0x16d),_0x4811a2[_0x7c01df(0x1c1)]=()=>{const _0x3e9f56=_0x7c01df;displayedCount=_0x477e17,_0x351047[_0x3e9f56(0x396)]=allNotifications['slice'](0x0,_0x477e17)[_0x3e9f56(0x180)](_0x1501d2=>_0x599df3({'id':_0x1501d2['id'],'data':()=>_0x1501d2[_0x3e9f56(0x1fe)]},_0x272ce6))['join'](''),_0x1b12e3(),_0xb74891();},_0x351047[_0x7c01df(0x467)](_0x4811a2));}try{await _0x3fdedd(!![]);}catch(_0x14d4d9){console[_0x135059(0x290)](_0x135059(0x1ff),_0x14d4d9),_0x351047[_0x135059(0x396)]=_0x135059(0x470);}_0x5bc70e[_0x135059(0x1c1)]=async()=>{const _0x16dbdb=_0x135059;_0x5bc70e['disabled']=!![],_0x5bc70e[_0x16dbdb(0x19e)]='Refreshing...';try{await _0x3fdedd(![],!![]),await updateNotificationBadge(_0xad9532,!![]);}catch(_0x269adb){console[_0x16dbdb(0x290)](_0x16dbdb(0x28f),_0x269adb),_0x351047['innerHTML']=_0x16dbdb(0x2c4);}_0x5bc70e[_0x16dbdb(0x3de)]=![],_0x5bc70e[_0x16dbdb(0x19e)]=_0x16dbdb(0x2f7);},_0x25eb8b[_0x135059(0x220)]=()=>_0x3fdedd(!![]);}async function markNotificationSeen(_0x4b737c){const _0x439784=_0x3b0fb3,_0x14f162=auth['currentUser']?.[_0x439784(0x3c5)];if(!_0x14f162){console[_0x439784(0x290)](_0x439784(0x244));return;}const _0x480a19=doc(db,_0x439784(0x1b4),_0x14f162,_0x439784(0x443),_0x4b737c),_0x34480c=doc(db,'users',_0x14f162);try{const _0x361489=await getDoc(_0x480a19);if(!_0x361489['exists']()){console[_0x439784(0x2b0)](_0x439784(0x350)+_0x4b737c+_0x439784(0x323));return;}const _0x10db26=_0x361489[_0x439784(0x1fe)]();if(_0x10db26[_0x439784(0x1a1)]){console['log']('Notification\x20'+_0x4b737c+'\x20already\x20seen.');return;}await runTransaction(db,async _0x448469=>{const _0x3952a8=_0x439784,_0x2b2e5e=await _0x448469['get'](_0x34480c);if(!_0x2b2e5e[_0x3952a8(0x150)]())throw new Error(_0x3952a8(0x3ea));const _0x12c72f=_0x2b2e5e[_0x3952a8(0x1fe)]()[_0x3952a8(0x3b9)]||0x0;_0x448469[_0x3952a8(0x26b)](_0x480a19,{'seen':!![]}),_0x12c72f>0x0&&_0x448469[_0x3952a8(0x26b)](_0x34480c,{'unseenCount':_0x12c72f-0x1,'lastUpdated':new Date()});}),console[_0x439784(0x375)]('Marked\x20notification\x20'+_0x4b737c+'\x20as\x20seen.');const _0x28dd3f=document['querySelector'](_0x439784(0x270)+_0x4b737c+'\x22]');_0x28dd3f&&(_0x28dd3f[_0x439784(0x3de)]=!![],_0x28dd3f[_0x439784(0x19e)]=_0x439784(0x3b8),_0x28dd3f['classList'][_0x439784(0x4d4)](_0x439784(0x3de))),await updateNotificationBadge(_0x14f162),!document[_0x439784(0x34f)](_0x439784(0x2a2))['classList'][_0x439784(0x308)](_0x439784(0x26a))&&await openNotificationsModal(_0x14f162);}catch(_0x2b9e99){console[_0x439784(0x290)]('Error\x20marking\x20notification\x20'+_0x4b737c+'\x20as\x20seen:',_0x2b9e99);}}async function clearNotifications(){const _0x72d42a=_0x3b0fb3,_0x3422c7=auth[_0x72d42a(0x243)]?.[_0x72d42a(0x3c5)];if(!_0x3422c7){console[_0x72d42a(0x290)](_0x72d42a(0x244));return;}const _0x3c41ef=document[_0x72d42a(0x34f)](_0x72d42a(0x423));if(!_0x3c41ef){console[_0x72d42a(0x290)](_0x72d42a(0x248));return;}const _0x5e4ba2=_0x3c41ef['value'],_0x45019c=_0x5e4ba2===_0x72d42a(0x25e)?'Clear\x20all\x20notifications?':_0x72d42a(0x362)+(_0x3c41ef[_0x72d42a(0x2f1)][_0x3c41ef[_0x72d42a(0x3cc)]]?.[_0x72d42a(0x200)]||'selected\x20community')+_0x72d42a(0x419);if(!confirm(_0x45019c)){console[_0x72d42a(0x375)](_0x72d42a(0x407));return;}try{const _0x3ac192=collection(db,_0x72d42a(0x1b4),_0x3422c7,_0x72d42a(0x443));let _0x2142cf;_0x5e4ba2==='all'?_0x2142cf=query(_0x3ac192):_0x2142cf=query(_0x3ac192,where('communityId','==',_0x5e4ba2));const _0x1423f0=await getDocs(_0x2142cf);if(_0x1423f0[_0x72d42a(0x3b2)]){console['log']('No\x20notifications\x20to\x20clear.'),await updateNotificationBadge(_0x3422c7),await openNotificationsModal(_0x3422c7);return;}const _0x3467ae=doc(db,_0x72d42a(0x1b4),_0x3422c7);await runTransaction(db,async _0x52b89d=>{const _0x43c458=_0x72d42a,_0x8ebada=await _0x52b89d[_0x43c458(0x338)](_0x3467ae);if(!_0x8ebada[_0x43c458(0x150)]())throw new Error(_0x43c458(0x3ea));const _0x40ba21=_0x8ebada[_0x43c458(0x1fe)]()[_0x43c458(0x3b9)]||0x0,_0x32702b=_0x1423f0[_0x43c458(0x3ab)][_0x43c458(0x217)](_0x420d61=>!_0x420d61[_0x43c458(0x1fe)]()['seen'])['length'],_0x3173ba=Math[_0x43c458(0x259)](0x0,_0x40ba21-_0x32702b);_0x52b89d[_0x43c458(0x26b)](_0x3467ae,{'unseenCount':_0x3173ba,'lastUpdated':new Date()}),_0x1423f0['docs'][_0x43c458(0x2b3)](_0x519d94=>_0x52b89d[_0x43c458(0x156)](_0x519d94['ref']));}),console[_0x72d42a(0x375)](_0x72d42a(0x301)+_0x1423f0[_0x72d42a(0x481)]+_0x72d42a(0x2ef)),await updateNotificationBadge(_0x3422c7),await openNotificationsModal(_0x3422c7);}catch(_0x355993){console[_0x72d42a(0x290)](_0x72d42a(0x387),_0x355993);}}let commDataCache=null,lastFetchTime=0x0;function _0x4a3e(_0x30f89c,_0x21cfc8){const _0x24e9e0=_0x24e9();return _0x4a3e=function(_0x4a3e4f,_0x3331bc){_0x4a3e4f=_0x4a3e4f-0x13e;let _0x453beb=_0x24e9e0[_0x4a3e4f];return _0x453beb;},_0x4a3e(_0x30f89c,_0x21cfc8);}const CACHE_TTL=0x1e*0x3c*0x3e8,ITEMS_PER_PAGE=0x64;async function getCommData(_0x140c6e=![]){const _0x376077=_0x3b0fb3,_0x154b41=Date[_0x376077(0x42a)]();if(commDataCache&&_0x154b41-lastFetchTime<CACHE_TTL&&!_0x140c6e)return commDataCache;const _0x19ac22=doc(db,_0x376077(0x405),communityId);try{const _0xd66663=await getDoc(_0x19ac22);if(!_0xd66663['exists']())throw new Error(_0x376077(0x25d));const _0x16703b=_0xd66663[_0x376077(0x1fe)](),_0x4e5def=await getDocs(collection(db,_0x376077(0x405),communityId,'members')),_0x381e7c=_0x4e5def[_0x376077(0x3ab)]['map'](_0x32671d=>_0x32671d['id']),_0x4d8691=new Proxy(_0x381e7c,{'get'(_0x52f420,_0x26b340){const _0x1479cc=_0x376077;if(typeof _0x26b340===_0x1479cc(0x41e)&&!isNaN(_0x26b340)){const _0x481987=parseInt(_0x26b340),_0xddbe6f=Math['floor'](_0x481987/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x52f420[_0x1479cc(0x2f5)](_0xddbe6f,_0xddbe6f+ITEMS_PER_PAGE)[_0x481987%ITEMS_PER_PAGE];}if(_0x26b340===_0x1479cc(0x2fe))return _0x52f420[_0x1479cc(0x2fe)];if(_0x26b340==='includes')return _0x5b9b0b=>_0x52f420['includes'](_0x5b9b0b);if(_0x26b340===Symbol[_0x1479cc(0x2c7)])return _0x52f420[Symbol[_0x1479cc(0x2c7)]][_0x1479cc(0x2aa)](_0x52f420);if(_0x26b340==='slice')return _0x52f420[_0x1479cc(0x2f5)][_0x1479cc(0x2aa)](_0x52f420);if(_0x26b340===_0x1479cc(0x217))return _0x52f420['filter'][_0x1479cc(0x2aa)](_0x52f420);if(_0x26b340===_0x1479cc(0x418))return _0x52f420[_0x1479cc(0x418)]['bind'](_0x52f420);return _0x52f420[_0x26b340];}}),_0x1fb020=new Proxy(_0x16703b[_0x376077(0x412)]||[],{'get'(_0x42a112,_0x30b527){const _0x8d2ec9=_0x376077;if(typeof _0x30b527===_0x8d2ec9(0x41e)&&!isNaN(_0x30b527)){const _0x387bc5=parseInt(_0x30b527),_0x40351c=Math['floor'](_0x387bc5/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x42a112[_0x8d2ec9(0x2f5)](_0x40351c,_0x40351c+ITEMS_PER_PAGE)[_0x387bc5%ITEMS_PER_PAGE];}if(_0x30b527==='length')return _0x42a112[_0x8d2ec9(0x2fe)];if(_0x30b527===_0x8d2ec9(0x352))return _0x47046f=>_0x42a112[_0x8d2ec9(0x352)](_0x47046f);if(_0x30b527===Symbol['iterator'])return _0x42a112[Symbol[_0x8d2ec9(0x2c7)]]['bind'](_0x42a112);return _0x42a112[_0x30b527];}}),_0x24df80=new Proxy(_0x16703b[_0x376077(0x479)]||[],{'get'(_0x540e1e,_0x5c96ce){const _0x41dd77=_0x376077;if(typeof _0x5c96ce===_0x41dd77(0x41e)&&!isNaN(_0x5c96ce)){const _0x3572c4=parseInt(_0x5c96ce),_0x47b3a9=Math[_0x41dd77(0x41c)](_0x3572c4/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x540e1e[_0x41dd77(0x2f5)](_0x47b3a9,_0x47b3a9+ITEMS_PER_PAGE)[_0x3572c4%ITEMS_PER_PAGE];}if(_0x5c96ce===_0x41dd77(0x2fe))return _0x540e1e['length'];if(_0x5c96ce===_0x41dd77(0x352))return _0x489604=>_0x540e1e[_0x41dd77(0x352)](_0x489604);if(_0x5c96ce===Symbol[_0x41dd77(0x2c7)])return _0x540e1e[Symbol[_0x41dd77(0x2c7)]][_0x41dd77(0x2aa)](_0x540e1e);return _0x540e1e[_0x5c96ce];}});return commDataCache={..._0x16703b,'members':_0x4d8691,'bannedUsers':_0x1fb020,'admins':_0x24df80},lastFetchTime=_0x154b41,console[_0x376077(0x375)]('Fetched\x20fresh\x20community\x20data\x20for\x20'+communityId+_0x376077(0x21a)+_0x381e7c[_0x376077(0x2fe)]+_0x376077(0x1cc)),commDataCache;}catch(_0x4acbae){console[_0x376077(0x290)]('Error\x20fetching\x20community\x20data:',_0x4acbae);if(commDataCache)return commDataCache;return{'members':[],'bannedUsers':[],'admins':[],'creatorId':'','name':_0x376077(0x1b2),'banReasons':{}};}}function resetCommDataCache(){const _0x440a79=_0x3b0fb3;commDataCache=null,lastFetchTime=0x0,console[_0x440a79(0x375)]('Cleared\x20community\x20data\x20cache');}function debounce(_0x2e2a8e,_0x3cae85){let _0x4086b5;return function(..._0x40a056){const _0x282b5b=_0x4a3e;clearTimeout(_0x4086b5),_0x4086b5=setTimeout(()=>_0x2e2a8e[_0x282b5b(0x1fc)](this,_0x40a056),_0x3cae85);};}window[_0x3b0fb3(0x288)]=getCommData,window['closeModal']=closeModal,window[_0x3b0fb3(0x222)]=debounce,window['communitySearchPostsById']=searchPostsById,window[_0x3b0fb3(0x45d)]=renderPosts,window['searchPostsById']=searchPostsById,window[_0x3b0fb3(0x293)]=fetchUserData,window[_0x3b0fb3(0x3b1)]=getCachedUser,window[_0x3b0fb3(0x1ea)]=setCachedUser,window[_0x3b0fb3(0x3ad)]=fetchCurrentUserData,window['leaveCommunity']=leaveCommunity,window[_0x3b0fb3(0x2c1)]=debouncedLoadAdminReportSummary,window[_0x3b0fb3(0x46c)]=delay,window['resetCommDataCache']=resetCommDataCache;
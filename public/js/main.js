const _0x6d63e4=_0xa1cd;(function(_0x458cc9,_0x484cfe){const _0x152be5=_0xa1cd,_0x586227=_0x458cc9();while(!![]){try{const _0x187df0=-parseInt(_0x152be5(0x229))/0x1*(parseInt(_0x152be5(0x52e))/0x2)+-parseInt(_0x152be5(0x51b))/0x3*(parseInt(_0x152be5(0x3a6))/0x4)+-parseInt(_0x152be5(0x52b))/0x5*(-parseInt(_0x152be5(0x557))/0x6)+parseInt(_0x152be5(0x501))/0x7+-parseInt(_0x152be5(0x447))/0x8*(-parseInt(_0x152be5(0x259))/0x9)+parseInt(_0x152be5(0x39b))/0xa*(parseInt(_0x152be5(0x1d8))/0xb)+-parseInt(_0x152be5(0x520))/0xc*(-parseInt(_0x152be5(0x40d))/0xd);if(_0x187df0===_0x484cfe)break;else _0x586227['push'](_0x586227['shift']());}catch(_0x19b822){_0x586227['push'](_0x586227['shift']());}}}(_0x43ab,0xab2b0));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';import{getFirestore,setDoc,doc,getDoc,updateDoc,addDoc,collection,query,where,getDocs,limit,deleteDoc,limitToLast,startAfter,endBefore,orderBy,enableIndexedDbPersistence,runTransaction,writeBatch,deleteField}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL,deleteObject}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';import{toggleComments}from'./commentsReplies.js';const firebaseConfig={'apiKey':_0x6d63e4(0x2de),'authDomain':_0x6d63e4(0x2c3),'projectId':'life-swap-6065e','storageBucket':_0x6d63e4(0x4f9),'messagingSenderId':'475311181000','appId':_0x6d63e4(0x4d2),'measurementId':'G-CHJY2ZEYYF'},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),storage=getStorage(app);enableIndexedDbPersistence(db)[_0x6d63e4(0x555)](()=>{const _0x462ae7=_0x6d63e4;console[_0x462ae7(0x22e)](_0x462ae7(0x3f8));})[_0x6d63e4(0x2d4)](_0x2db9e5=>{const _0x21b0ee=_0x6d63e4;if(_0x2db9e5[_0x21b0ee(0x219)]===_0x21b0ee(0x467))console[_0x21b0ee(0x37e)](_0x21b0ee(0x309));else _0x2db9e5[_0x21b0ee(0x219)]==='unimplemented'?console[_0x21b0ee(0x37e)](_0x21b0ee(0x247)):console[_0x21b0ee(0x43d)](_0x21b0ee(0x3a5),_0x2db9e5);});export let communityId;export let userDataCache={};const USER_CACHE_TTL=0x3c*0x3c*0x3e8,USER_CACHE_MAX_SIZE=0x64;function getCachedUser(_0x34e38b){const _0x109d8e=_0x6d63e4,_0x28f4a4=userDataCache[_0x34e38b];if(!_0x28f4a4)return null;if(Date[_0x109d8e(0x321)]()>_0x28f4a4[_0x109d8e(0x471)])return delete userDataCache[_0x34e38b],console[_0x109d8e(0x22e)]('Cache\x20expired\x20for\x20'+_0x34e38b),null;return _0x28f4a4[_0x109d8e(0x361)];}function setCachedUser(_0x5322ab,_0x643c2f){const _0x33bba7=_0x6d63e4;if(Object[_0x33bba7(0x4c8)](userDataCache)[_0x33bba7(0x3cb)]>=USER_CACHE_MAX_SIZE){const _0x457c91=Object['keys'](userDataCache)[0x0];delete userDataCache[_0x457c91],console['log'](_0x33bba7(0x428)+_0x457c91);}userDataCache[_0x5322ab]={'value':_0x643c2f,'expiry':Date[_0x33bba7(0x321)]()+USER_CACHE_TTL},console[_0x33bba7(0x22e)](_0x33bba7(0x2ba)+_0x5322ab+',\x20expires\x20at\x20'+new Date(Date[_0x33bba7(0x321)]()+USER_CACHE_TTL));}let currentPage=0x1;export const postsPerPage=0xa;let lastMemberDoc=null;export let carouselPostIds=[];let carouselIndex=0x0;export const postsPerCarousel=window['innerWidth']<0x300?0x2:0x4;export let isLoading=![];let lastPostDoc=null,totalPosts=0x0;function _0xa1cd(_0x54bb09,_0x3c946f){const _0x43ab2a=_0x43ab();return _0xa1cd=function(_0xa1cdd8,_0x4983eb){_0xa1cdd8=_0xa1cdd8-0x1af;let _0x15debd=_0x43ab2a[_0xa1cdd8];return _0x15debd;},_0xa1cd(_0x54bb09,_0x3c946f);}export const postsPerLoad=0xa;let loadedPostIds=new Set(),initialPostsLoaded=![],isSearching=![],postCache=new Map();export const POSTS_PER_LOAD=0x14;let isFetching=![],allNotifications=[],lastDoc=null,displayedCount=0x0;const categoryDisplayMap={'clothing_accessories':_0x6d63e4(0x1f2),'electronics':'Electronics\x20&\x20Gadgets','furniture_decor':_0x6d63e4(0x47f),'kitchen_dining':_0x6d63e4(0x470),'tools_diy':_0x6d63e4(0x44f),'books_media':_0x6d63e4(0x305),'arts_crafts':_0x6d63e4(0x3ea),'toys_games':'Toys\x20&\x20Games','sports_outdoors':_0x6d63e4(0x446),'health_beauty':'Health\x20&\x20Beauty','baby_kids':'Baby\x20&\x20Kids','pet_supplies':_0x6d63e4(0x4e8),'misc':_0x6d63e4(0x206)};document[_0x6d63e4(0x48a)](_0x6d63e4(0x301),()=>{onAuthStateChanged(auth,async _0x11b296=>{const _0x2b2036=_0xa1cd;if(!_0x11b296){console[_0x2b2036(0x22e)](_0x2b2036(0x2fb)),window[_0x2b2036(0x347)]['href']='/login.html';return;}console[_0x2b2036(0x22e)](_0x2b2036(0x2af),_0x11b296['uid']);const _0x5b0b9f=new URLSearchParams(window[_0x2b2036(0x347)][_0x2b2036(0x26c)]);communityId=_0x5b0b9f[_0x2b2036(0x401)]('id'),window[_0x2b2036(0x2b4)]=communityId;if(!communityId){console[_0x2b2036(0x22e)](_0x2b2036(0x25a)),window['location'][_0x2b2036(0x3a4)]=_0x2b2036(0x465);return;}postCache['clear'](),loadedPostIds[_0x2b2036(0x2d5)](),console[_0x2b2036(0x22e)]('Cleared\x20post\x20caches\x20for\x20community\x20'+communityId),await initializeUserSwapInfo();const _0x12128a=await getCommData();if(!_0x12128a){alert('Community\x20not\x20found!'),window[_0x2b2036(0x347)][_0x2b2036(0x3a4)]=_0x2b2036(0x465);return;}const _0x5c9d22=_0x12128a['members'][_0x2b2036(0x542)](_0x11b296['uid']),_0x438d57=_0x12128a[_0x2b2036(0x525)]||[],_0x4c481c=_0x12128a[_0x2b2036(0x2d1)]||{},_0x5190ff=_0x438d57['includes'](_0x11b296[_0x2b2036(0x26b)])&&(_0x4c481c[_0x11b296[_0x2b2036(0x26b)]]===_0x2b2036(0x4c1)||!_0x4c481c[_0x11b296[_0x2b2036(0x26b)]]);if(_0x5190ff){let _0x20dfe3='No\x20admin\x20email\x20available',_0x2aedb4=_0x12128a['banReasons']?.[_0x11b296[_0x2b2036(0x26b)]]||_0x2b2036(0x27d);if(_0x12128a['creatorId']){const _0x5fe4ed=await getDoc(doc(db,_0x2b2036(0x23d),_0x12128a['creatorId']));_0x5fe4ed['exists']()&&_0x5fe4ed[_0x2b2036(0x3b1)]()[_0x2b2036(0x4ef)]&&(_0x20dfe3=_0x5fe4ed[_0x2b2036(0x3b1)]()[_0x2b2036(0x4ef)]);}if(_0x20dfe3==='No\x20admin\x20email\x20available'&&_0x12128a['admins']?.[_0x2b2036(0x3cb)]>0x0){const _0x6046a7=await getDoc(doc(db,'users',_0x12128a['admins'][0x0]));_0x6046a7['exists']()&&_0x6046a7[_0x2b2036(0x3b1)]()['email']&&(_0x20dfe3=_0x6046a7['data']()[_0x2b2036(0x4ef)]);}_0x4c481c[_0x11b296[_0x2b2036(0x26b)]]===_0x2b2036(0x4c1)&&!_0x12128a['banReasons']?.[_0x11b296[_0x2b2036(0x26b)]]&&(_0x2aedb4=_0x2b2036(0x3f2)+_0x20dfe3+_0x2b2036(0x332));document[_0x2b2036(0x4cc)]('.community-page')['innerHTML']=_0x2b2036(0x356)+_0x2aedb4+_0x2b2036(0x4dd)+_0x20dfe3+_0x2b2036(0x4f5);const _0x5ad099=document[_0x2b2036(0x4fb)](_0x2b2036(0x35e));_0x5ad099[_0x2b2036(0x48a)](_0x2b2036(0x24a),async _0x48f88b=>{const _0x1093be=_0x2b2036;_0x48f88b[_0x1093be(0x2e9)]();const _0x3c9dd5=_0x5ad099[_0x1093be(0x4cc)]('textarea')[_0x1093be(0x361)]['trim']();if(_0x3c9dd5){const _0x3338f0=await getDoc(doc(db,_0x1093be(0x23d),_0x11b296[_0x1093be(0x26b)])),_0x3f503d=_0x3338f0[_0x1093be(0x4e4)]()?_0x3338f0[_0x1093be(0x3b1)]():{'username':_0x1093be(0x3e4)+_0x11b296[_0x1093be(0x26b)][_0x1093be(0x334)](0x0,0x8)};await addDoc(collection(db,_0x1093be(0x4d3),communityId,_0x1093be(0x323)),{'userId':_0x11b296[_0x1093be(0x26b)],'username':_0x3f503d[_0x1093be(0x49a)],'message':_0x3c9dd5,'timestamp':new Date()}),alert('Appeal\x20sent!'),_0x5ad099[_0x1093be(0x4cc)](_0x1093be(0x4cf))[_0x1093be(0x242)]=!![],_0x5ad099[_0x1093be(0x4cc)]('button')['disabled']=!![],_0x5ad099[_0x1093be(0x4cc)](_0x1093be(0x4b4))['textContent']=_0x1093be(0x25b);}});return;}else{if(!_0x5c9d22){document[_0x2b2036(0x4cc)](_0x2b2036(0x3e0))[_0x2b2036(0x381)]=_0x2b2036(0x2c0)+communityId+_0x2b2036(0x2f2),document[_0x2b2036(0x4fb)](_0x2b2036(0x549))['addEventListener'](_0x2b2036(0x3b5),_0x2a77f3=>{const _0x539203=_0x2b2036;_0x2a77f3['preventDefault'](),navigator[_0x539203(0x2ef)][_0x539203(0x4d8)](communityId)[_0x539203(0x555)](()=>{const _0xed5dd8=_0x539203;alert(_0xed5dd8(0x369)),setTimeout(()=>{const _0x23915f=_0xed5dd8;window[_0x23915f(0x347)]['href']=_0x23915f(0x3a1);},0x1f4);})[_0x539203(0x2d4)](_0x281c77=>{const _0x386ad8=_0x539203;console['error'](_0x386ad8(0x472),_0x281c77),alert('Failed\x20to\x20copy\x20ID.\x20Please\x20copy\x20it\x20manually:\x20'+communityId);});});return;}}document[_0x2b2036(0x48a)](_0x2b2036(0x360),()=>{const _0x114d84=_0x2b2036;document[_0x114d84(0x1fd)]===_0x114d84(0x1be)?(console[_0x114d84(0x22e)](_0x114d84(0x221)),updateNotificationBadge(_0x11b296[_0x114d84(0x26b)]),updateChatBadge(_0x11b296['uid'])):console[_0x114d84(0x22e)](_0x114d84(0x3ac));}),document['getElementById']('communityName')[_0x2b2036(0x26e)]=_0x12128a[_0x2b2036(0x3d8)];const _0x3cd76a=_0x12128a[_0x2b2036(0x43b)]?new Date(_0x12128a['createdAt'][_0x2b2036(0x23c)]())[_0x2b2036(0x1ca)](_0x2b2036(0x31f),{'month':_0x2b2036(0x25e),'day':_0x2b2036(0x35b),'year':_0x2b2036(0x35b)}):_0x2b2036(0x2a0);document['getElementById'](_0x2b2036(0x43b))[_0x2b2036(0x26e)]=_0x3cd76a;const _0x333939=await fetchUserData(_0x12128a[_0x2b2036(0x49c)]);document[_0x2b2036(0x4fb)](_0x2b2036(0x2bc))[_0x2b2036(0x26e)]=_0x333939['name']||_0x2b2036(0x1bc),document[_0x2b2036(0x4fb)](_0x2b2036(0x2bc))[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>viewProfile(_0x12128a[_0x2b2036(0x49c)])),document['getElementById'](_0x2b2036(0x2b4))[_0x2b2036(0x26e)]='ID:\x20'+communityId,document['getElementById'](_0x2b2036(0x400))['textContent']=_0x12128a[_0x2b2036(0x435)]||_0x12128a[_0x2b2036(0x322)][_0x2b2036(0x3cb)],document['getElementById'](_0x2b2036(0x525))['textContent']=(_0x12128a['bannedUsers']||[])[_0x2b2036(0x3cb)];const _0xc521ea=document[_0x2b2036(0x4fb)]('communityActions');let _0x27ae74=0x0;if(_0x11b296[_0x2b2036(0x26b)]){const _0x19d977=query(collection(db,_0x2b2036(0x420)),where('targetId','==',_0x11b296[_0x2b2036(0x26b)]),where('status','==','pending'));try{const _0x1c65fa=await getDocs(_0x19d977);_0x27ae74=_0x1c65fa[_0x2b2036(0x1b1)];}catch(_0x412edc){console[_0x2b2036(0x43d)](_0x2b2036(0x3fc),_0x412edc);}}else console[_0x2b2036(0x43d)](_0x2b2036(0x389));_0xc521ea[_0x2b2036(0x381)]=_0x2b2036(0x45c)+(_0x12128a[_0x2b2036(0x357)]&&_0x12128a[_0x2b2036(0x357)][_0x2b2036(0x542)](_0x11b296[_0x2b2036(0x26b)])||_0x12128a[_0x2b2036(0x49c)]===_0x11b296[_0x2b2036(0x26b)]?_0x2b2036(0x2e0):'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x12128a['creatorId']===_0x11b296[_0x2b2036(0x26b)]?_0x2b2036(0x537):'')+_0x2b2036(0x3ba)+(_0x12128a[_0x2b2036(0x322)][_0x2b2036(0x542)](_0x11b296['uid'])&&_0x12128a[_0x2b2036(0x49c)]!==_0x11b296['uid']?'<button\x20class=\x22leave-btn\x22\x20id=\x22leaveCommunityBtn\x22>Leave\x20Community</button>':'')+_0x2b2036(0x3ba)+(_0x12128a[_0x2b2036(0x357)]&&_0x12128a['admins'][_0x2b2036(0x542)](_0x11b296[_0x2b2036(0x26b)])||_0x12128a[_0x2b2036(0x49c)]===_0x11b296[_0x2b2036(0x26b)]?_0x2b2036(0x460):'')+_0x2b2036(0x3ba)+(_0x12128a['admins']&&_0x12128a['admins'][_0x2b2036(0x542)](_0x11b296[_0x2b2036(0x26b)])||_0x12128a[_0x2b2036(0x49c)]===_0x11b296[_0x2b2036(0x26b)]?_0x2b2036(0x225):'')+_0x2b2036(0x415)+(_0x27ae74>0x0?_0x2b2036(0x39a)+_0x27ae74+_0x2b2036(0x4b8):'')+_0x2b2036(0x1b2),await new Promise(_0x36af0f=>setTimeout(_0x36af0f,0x0));_0x11b296[_0x2b2036(0x26b)]?await updateProfileRequestsUI(_0x11b296[_0x2b2036(0x26b)]):console[_0x2b2036(0x43d)](_0x2b2036(0x4e2));const _0x4b1b50=document['getElementById']('postSearch'),_0x3d9a01=document[_0x2b2036(0x4fb)](_0x2b2036(0x266)),_0x12a38e=document[_0x2b2036(0x4fb)](_0x2b2036(0x232)),_0x529a3f=document[_0x2b2036(0x4fb)](_0x2b2036(0x37b)),_0x59cb50=document[_0x2b2036(0x4fb)](_0x2b2036(0x3d6)),_0x56d044=document[_0x2b2036(0x4fb)](_0x2b2036(0x2a7)),_0x5244c0=document['getElementById'](_0x2b2036(0x2e6)),_0x137459=document[_0x2b2036(0x4fb)](_0x2b2036(0x516)),_0x494200=document[_0x2b2036(0x4fb)](_0x2b2036(0x2ed)),_0x3b1796=document[_0x2b2036(0x4fb)](_0x2b2036(0x433)),_0xae888f=document[_0x2b2036(0x4fb)](_0x2b2036(0x263)),_0x21e74c=document['getElementById'](_0x2b2036(0x511)),_0x3b1d39=document[_0x2b2036(0x4fb)](_0x2b2036(0x345)),_0x15d3d0=document['getElementById'](_0x2b2036(0x4ea)),_0x5112fe=document['getElementById'](_0x2b2036(0x438)),_0x5ba7a2=document[_0x2b2036(0x4fb)](_0x2b2036(0x1ec)),_0x5ae380=document[_0x2b2036(0x4fb)](_0x2b2036(0x55e)),_0x5ebced=document[_0x2b2036(0x4fb)]('viewNotificationsBtn'),_0x1ce5c6=document[_0x2b2036(0x4fb)](_0x2b2036(0x264)),_0x58e004=document[_0x2b2036(0x4fb)](_0x2b2036(0x2b1)),_0x3c183f=document[_0x2b2036(0x4fb)](_0x2b2036(0x353)),_0x3f538f=document[_0x2b2036(0x4fb)](_0x2b2036(0x506)),_0x54da59=document['getElementById'](_0x2b2036(0x2a2)),_0x5897dc=document[_0x2b2036(0x4fb)](_0x2b2036(0x330)),_0x506ff2=document[_0x2b2036(0x4fb)](_0x2b2036(0x2c6)),_0x5ae6f4=document[_0x2b2036(0x4fb)]('postSearch'),_0x3abd87=document[_0x2b2036(0x4fb)](_0x2b2036(0x4ca)),_0xf6c50f=document[_0x2b2036(0x4fb)](_0x2b2036(0x1f8)),_0x3e32bb=document[_0x2b2036(0x4fb)](_0x2b2036(0x554));_0x4b1b50&&_0x4b1b50[_0x2b2036(0x48a)]('input',debounce(_0x45fd7b=>{const _0x139b94=_0x2b2036;searchPostsById(_0x45fd7b[_0x139b94(0x449)][_0x139b94(0x361)]);},0x12c));_0x3abd87[_0x2b2036(0x48a)](_0x2b2036(0x3b5),async()=>{const _0x518bf1=_0x2b2036;try{const _0x13713a=await navigator[_0x518bf1(0x2ef)][_0x518bf1(0x28c)]();_0x5ae6f4[_0x518bf1(0x361)]=_0x13713a,searchPostsById(_0x13713a);}catch(_0x5a0fe9){console[_0x518bf1(0x43d)](_0x518bf1(0x29b),_0x5a0fe9),alert(_0x518bf1(0x3ff));}}),_0xf6c50f[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>{const _0x2e3983=_0x2b2036;_0x5ae6f4[_0x2e3983(0x361)]='',searchPostsById('');});_0x3d9a01&&_0x3d9a01[_0x2b2036(0x48a)](_0x2b2036(0x38d),()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x12a38e&&_0x12a38e[_0x2b2036(0x48a)]('change',()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x529a3f&&_0x529a3f['addEventListener']('change',()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});if(_0x59cb50)_0x59cb50[_0x2b2036(0x48a)]('click',()=>slideCarousel(-0x1));if(_0x56d044)_0x56d044[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>slideCarousel(0x1));if(_0x5244c0)_0x5244c0[_0x2b2036(0x48a)]('click',copyCommunityId);if(_0x137459)_0x137459[_0x2b2036(0x48a)]('click',createPost);if(_0x494200)_0x494200['addEventListener'](_0x2b2036(0x3b5),()=>viewMembers(communityId));if(_0x3b1796)_0x3b1796[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>viewBannedUsers(communityId));if(_0xae888f)_0xae888f[_0x2b2036(0x48a)]('click',()=>deleteCommunity(communityId));if(_0x21e74c)_0x21e74c[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>leaveCommunity(communityId));if(_0x3b1d39)_0x3b1d39[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>viewProfileViewRequests(_0x11b296[_0x2b2036(0x26b)]));if(_0x15d3d0)_0x15d3d0[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>closeModal('viewProfileModal'));if(_0x5112fe)_0x5112fe[_0x2b2036(0x48a)]('click',()=>closeModal(_0x2b2036(0x3e9)));if(_0x5ba7a2)_0x5ba7a2[_0x2b2036(0x48a)]('click',()=>closeModal(_0x2b2036(0x2e7)));if(_0x5ae380)_0x5ae380[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>closeModal(_0x2b2036(0x4ec)));if(_0x5ebced)_0x5ebced[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>openNotificationsModal(_0x11b296[_0x2b2036(0x26b)]));if(_0x1ce5c6)_0x1ce5c6[_0x2b2036(0x48a)]('click',()=>closeModal(_0x2b2036(0x1c7)));if(_0x58e004)_0x58e004[_0x2b2036(0x48a)]('click',clearNotifications);if(_0x3c183f)_0x3c183f['addEventListener']('click',()=>loadPosts(communityId,!![]));if(_0x3f538f)_0x3f538f['addEventListener']('click',()=>editCommunityName(communityId));if(_0x54da59)_0x54da59[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>viewCommunities(_0x11b296[_0x2b2036(0x26b)]));if(_0x5897dc)_0x5897dc[_0x2b2036(0x48a)](_0x2b2036(0x3b5),()=>viewSavedPosts(_0x11b296['uid']));_0x506ff2&&(_0x506ff2[_0x2b2036(0x40b)](_0x2b2036(0x3b5),_0x78a074),_0x506ff2[_0x2b2036(0x48a)]('click',_0x78a074));_0x3e32bb&&_0x3e32bb[_0x2b2036(0x48a)]('click',()=>viewFollowers(_0x11b296[_0x2b2036(0x26b)]));async function _0x78a074(){const _0x317fba=_0x2b2036;await updateChatBadge(_0x11b296[_0x317fba(0x26b)],!![]),await window['viewChats'](communityId),await updateChatBadge(_0x11b296[_0x317fba(0x26b)]);}setupLocationAutocomplete(),setupCommunitySelection(),loadYourPosts(_0x11b296[_0x2b2036(0x26b)]),loadPosts(communityId,![]),loadCarouselPosts(communityId),updateNotificationBadge(_0x11b296['uid']),await updateChatBadge(_0x11b296['uid']),await loadAdminReportSummary(_0x11b296[_0x2b2036(0x26b)]);});});async function initializeUserSwapInfo(){const _0x53ba24=_0x6d63e4,_0x5257a0=auth[_0x53ba24(0x224)];if(!_0x5257a0)return;if(!communityId){console[_0x53ba24(0x43d)](_0x53ba24(0x231));return;}const _0x1a17ad=doc(db,_0x53ba24(0x23d),_0x5257a0['uid']);let _0x2f40af=await getDoc(_0x1a17ad),_0x55e6c4;console[_0x53ba24(0x22e)](_0x53ba24(0x329)+_0x5257a0[_0x53ba24(0x26b)]);if(!_0x2f40af[_0x53ba24(0x4e4)]())_0x55e6c4={'name':_0x5257a0[_0x53ba24(0x406)]||_0x53ba24(0x2e3),'username':_0x53ba24(0x3e4)+_0x5257a0[_0x53ba24(0x26b)]['slice'](0x0,0x8),'profilePhoto':_0x5257a0[_0x53ba24(0x2f4)]||null,'email':_0x5257a0['email']||null,'city':null,'phone':null,'communityIds':[communityId],'swaps':0x0,'createdAt':new Date()},console[_0x53ba24(0x22e)]('Creating\x20new\x20user\x20with\x20data:',_0x55e6c4),await setDoc(_0x1a17ad,_0x55e6c4),console[_0x53ba24(0x22e)](_0x53ba24(0x403)+_0x55e6c4[_0x53ba24(0x49a)]);else{_0x55e6c4=_0x2f40af['data'](),console[_0x53ba24(0x22e)](_0x53ba24(0x492),_0x55e6c4);typeof _0x55e6c4[_0x53ba24(0x1e1)]==='undefined'&&(console['log'](_0x53ba24(0x335)),await updateDoc(_0x1a17ad,{'swaps':0x0}),_0x55e6c4['swaps']=0x0);!Array[_0x53ba24(0x3dc)](_0x55e6c4[_0x53ba24(0x3d0)])&&(console[_0x53ba24(0x22e)](_0x53ba24(0x235)),_0x55e6c4[_0x53ba24(0x3d0)]=[],await updateDoc(_0x1a17ad,{'communityIds':_0x55e6c4[_0x53ba24(0x3d0)]}));if(!_0x55e6c4['communityIds'][_0x53ba24(0x542)](communityId)){console[_0x53ba24(0x22e)](_0x53ba24(0x1c5)+communityId+'\x20to\x20communityIds'),_0x55e6c4['communityIds'][_0x53ba24(0x22f)](communityId);try{console['log'](_0x53ba24(0x2b5),_0x55e6c4[_0x53ba24(0x3d0)]),await updateDoc(_0x1a17ad,{'communityIds':_0x55e6c4[_0x53ba24(0x3d0)]});}catch(_0x526531){console['error'](_0x53ba24(0x42c),_0x526531),console[_0x53ba24(0x22e)](_0x53ba24(0x40f),_0x55e6c4);throw _0x526531;}}}const _0x15823b=document[_0x53ba24(0x4fb)](_0x53ba24(0x54d)),_0x28803d=document[_0x53ba24(0x4fb)](_0x53ba24(0x293));!_0x55e6c4[_0x53ba24(0x49a)]&&(console[_0x53ba24(0x43d)](_0x53ba24(0x1d6)),_0x55e6c4['username']=_0x53ba24(0x3e4)+_0x5257a0[_0x53ba24(0x26b)][_0x53ba24(0x334)](0x0,0x8),await updateDoc(_0x1a17ad,{'username':_0x55e6c4[_0x53ba24(0x49a)]})),_0x15823b[_0x53ba24(0x26e)]=_0x55e6c4[_0x53ba24(0x49a)],_0x28803d[_0x53ba24(0x26e)]=_0x55e6c4['swaps'],_0x15823b[_0x53ba24(0x48a)](_0x53ba24(0x3b5),()=>{const _0x52f95c=_0x53ba24;navigator['clipboard'][_0x52f95c(0x4d8)](_0x55e6c4[_0x52f95c(0x49a)])[_0x52f95c(0x555)](()=>alert(_0x52f95c(0x532)))[_0x52f95c(0x2d4)](_0x5d9c11=>console['error']('Failed\x20to\x20copy\x20username:',_0x5d9c11));});}async function updateChatBadge(_0x1af1e6,_0x5e8e92=![]){const _0x505806=_0x6d63e4,_0x4e8a2f=query(collection(db,_0x505806(0x23d),_0x1af1e6,_0x505806(0x28e)),where(_0x505806(0x24d),'==',!![])),_0x172fd5=await getDocs(_0x4e8a2f),_0x2134ba=document[_0x505806(0x4fb)](_0x505806(0x2c6));if(_0x5e8e92&&_0x172fd5['size']>0x0){const _0x194eb9=writeBatch(db);_0x172fd5[_0x505806(0x55b)][_0x505806(0x518)](_0x505509=>{const _0x137678=_0x505806;_0x194eb9[_0x137678(0x44e)](_0x505509[_0x137678(0x269)],{'hasUnread':![]});}),await _0x194eb9[_0x505806(0x3c1)](),console[_0x505806(0x22e)](_0x505806(0x521),_0x172fd5['size']);}const _0xc8c0af=_0x5e8e92?![]:_0x172fd5[_0x505806(0x1b1)]>0x0;_0x2134ba&&(_0x2134ba[_0x505806(0x381)]='ðŸ’¬\x20Chats\x20'+(_0xc8c0af?_0x505806(0x32e):''));}async function updateProfileRequestsUI(_0x2db440){const _0x549688=_0x6d63e4,_0x1334d3=collection(db,_0x549688(0x23d),_0x2db440,_0x549688(0x420)),_0x255e29=query(_0x1334d3,where(_0x549688(0x410),'==',_0x549688(0x54a))),_0x5ce155=await getDocs(_0x255e29),_0x2884cb=_0x5ce155['size'],_0x464d9e=document[_0x549688(0x4fb)](_0x549688(0x2ae));_0x464d9e?_0x464d9e[_0x549688(0x381)]=_0x2884cb>0x0?_0x549688(0x32c)+_0x2884cb+_0x549688(0x1f3):'':console[_0x549688(0x43d)](_0x549688(0x1e0));document[_0x549688(0x4fb)]('viewRequestsBtn')&&document[_0x549688(0x4fb)](_0x549688(0x42d))[_0x549688(0x48a)](_0x549688(0x3b5),()=>viewProfileViewRequests(_0x2db440));const _0x24af4b=document['getElementById'](_0x549688(0x213));if(_0x24af4b){const _0x7067ca=query(_0x1334d3,where(_0x549688(0x410),'==','pending')),_0x5ef7c3=await getDocs(_0x7067ca),_0x33d846=_0x5ef7c3[_0x549688(0x1b1)],_0x230a85=_0x24af4b[_0x549688(0x4cc)](_0x549688(0x234));_0x230a85&&(_0x230a85[_0x549688(0x381)]=_0x549688(0x333)+(_0x33d846>0x0?_0x549688(0x39a)+_0x33d846+'</span>':''));}}function closeModal(_0x2095b3){const _0x3261cb=_0x6d63e4,_0x5b8f33=document[_0x3261cb(0x4fb)](_0x2095b3);_0x5b8f33['classList'][_0x3261cb(0x4f7)](_0x3261cb(0x4b1)),_0x5b8f33['style']['display']='none';const _0x4b79f8=Array[_0x3261cb(0x4aa)](document[_0x3261cb(0x47a)]('.modal:not(.hidden)'));if(_0x4b79f8[_0x3261cb(0x3cb)]>0x0)_0x4b79f8[_0x4b79f8[_0x3261cb(0x3cb)]-0x1]['style'][_0x3261cb(0x2da)]='flex';document[_0x3261cb(0x47a)](_0x3261cb(0x2e5))[_0x3261cb(0x518)](_0x457bad=>_0x457bad[_0x3261cb(0x284)][_0x3261cb(0x4f7)]('hidden'));}function copyCommunityId(){const _0x434fc3=_0x6d63e4;navigator[_0x434fc3(0x2ef)][_0x434fc3(0x4d8)](communityId)[_0x434fc3(0x555)](()=>alert(_0x434fc3(0x21b)))['catch'](_0x7dc9b5=>console[_0x434fc3(0x43d)]('Failed\x20to\x20copy:',_0x7dc9b5));}function copyPostId(_0x12635c){const _0x39cff1=_0x6d63e4;navigator['clipboard']['writeText'](_0x12635c)['then'](()=>alert(_0x39cff1(0x3ef)))[_0x39cff1(0x2d4)](_0x4dcd1e=>console[_0x39cff1(0x43d)](_0x39cff1(0x258),_0x4dcd1e));}async function deleteCommunity(_0x19a2ae){const _0x5d27fd=_0x6d63e4;if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20community?\x20This\x20action\x20is\x20permanent\x20and\x20cannot\x20be\x20undone.'))return;const _0x88c5c=doc(db,_0x5d27fd(0x4d3),_0x19a2ae),_0xfc6803=['members',_0x5d27fd(0x31e),_0x5d27fd(0x323),_0x5d27fd(0x319)],_0x388e57=document['getElementById'](_0x5d27fd(0x339)),_0x45b33e=document['body'],_0x1a6a9a=0x5;let _0x230f46=0x0;function _0x3cc6c1(_0x1679f5,_0x17657f=_0x5d27fd(0x4af)){const _0x4a0507=_0x5d27fd;_0x388e57&&(_0x388e57[_0x4a0507(0x26e)]=_0x1679f5,_0x388e57[_0x4a0507(0x396)]='delete-status\x20'+(_0x17657f===_0x4a0507(0x4af)?_0x4a0507(0x490):_0x17657f),_0x388e57[_0x4a0507(0x52f)][_0x4a0507(0x2da)]=_0x4a0507(0x21e)),_0x17657f===_0x4a0507(0x4af)?_0x45b33e['classList'][_0x4a0507(0x4f7)](_0x4a0507(0x490)):_0x45b33e['classList'][_0x4a0507(0x3ab)](_0x4a0507(0x490)),console['log'](_0x4a0507(0x3a2)+_0x1679f5);}_0x3cc6c1(_0x5d27fd(0x526),_0x5d27fd(0x4af));try{console[_0x5d27fd(0x22e)](_0x5d27fd(0x205),db[_0x5d27fd(0x4fd)]()),console[_0x5d27fd(0x22e)](_0x5d27fd(0x3da),_0x88c5c[_0x5d27fd(0x3af)]);const _0x4e42d1=await getDoc(_0x88c5c);console[_0x5d27fd(0x22e)](_0x5d27fd(0x2fd),_0x4e42d1['exists']());if(_0x4e42d1[_0x5d27fd(0x4e4)]())console[_0x5d27fd(0x22e)](_0x5d27fd(0x36d),_0x4e42d1[_0x5d27fd(0x3b1)]());else{_0x3cc6c1(_0x5d27fd(0x4fc),_0x5d27fd(0x523));return;}async function _0x1c0ea2(){const _0x563091=_0x5d27fd,_0x3cc05d=Date[_0x563091(0x321)]();console[_0x563091(0x22e)](_0x563091(0x268),new Date()[_0x563091(0x260)]()),await runTransaction(db,async _0x357206=>{const _0x3966fb=_0x563091,_0x455f02=await _0x357206[_0x3966fb(0x401)](_0x88c5c);if(!_0x455f02[_0x3966fb(0x4e4)]()){console[_0x3966fb(0x22e)](_0x3966fb(0x4c4));return;}for(const _0x5d5822 of _0xfc6803){console[_0x3966fb(0x22e)](_0x3966fb(0x1dc)+_0x5d5822);const _0x438cb4=collection(_0x88c5c,_0x5d5822),_0x61722e=await getDocs(_0x438cb4);console['log'](_0x3966fb(0x3a2)+_0x5d5822+_0x3966fb(0x2ce)+_0x61722e[_0x3966fb(0x1b1)]+_0x3966fb(0x27b)),_0x61722e[_0x3966fb(0x518)](_0x4f0861=>{const _0x3ab696=_0x3966fb;_0x357206[_0x3ab696(0x1e5)](_0x4f0861[_0x3ab696(0x269)]);}),console['log'](_0x3966fb(0x1df)+_0x61722e[_0x3966fb(0x1b1)]+_0x3966fb(0x3be)+_0x5d5822+'\x20for\x20deletion');}_0x357206[_0x3966fb(0x1e5)](_0x88c5c),console[_0x3966fb(0x22e)](_0x3966fb(0x2eb));}),console[_0x563091(0x22e)]('[DeleteCommunity]\x20Transaction\x20completed\x20in:',(Date[_0x563091(0x321)]()-_0x3cc05d)/0x3e8,_0x563091(0x2db));}_0x3cc6c1(_0x5d27fd(0x38a)),await _0x1c0ea2();while(_0x230f46<_0x1a6a9a){const _0x264891=await getDoc(_0x88c5c);console[_0x5d27fd(0x22e)](_0x5d27fd(0x32f)+(_0x230f46+0x1)+_0x5d27fd(0x1dd),_0x264891[_0x5d27fd(0x4e4)]());!_0x264891['exists']()?console[_0x5d27fd(0x22e)](_0x5d27fd(0x2c2)):console[_0x5d27fd(0x22e)](_0x5d27fd(0x217),_0x264891[_0x5d27fd(0x3b1)]());await new Promise(_0x3f3360=>setTimeout(_0x3f3360,0x7d0));const _0x3ea85b=await getDoc(_0x88c5c);console[_0x5d27fd(0x22e)]('[DeleteCommunity]\x20Verification\x20'+(_0x230f46+0x1)+_0x5d27fd(0x1ff),_0x3ea85b[_0x5d27fd(0x4e4)]());if(!_0x3ea85b[_0x5d27fd(0x4e4)]()){console[_0x5d27fd(0x22e)](_0x5d27fd(0x558));break;}else console['error']('[DeleteCommunity]\x20Document\x20reappeared\x20with\x20data:',_0x3ea85b[_0x5d27fd(0x3b1)]()),_0x230f46++,_0x3cc6c1(_0x5d27fd(0x20f)+_0x230f46+'/'+_0x1a6a9a+_0x5d27fd(0x50d)),console[_0x5d27fd(0x22e)](_0x5d27fd(0x37c)+_0x230f46+'\x20initiated\x20at:',new Date()[_0x5d27fd(0x260)]()),await _0x1c0ea2();}if(_0x230f46>=_0x1a6a9a)throw new Error(_0x5d27fd(0x1e9));resetCommDataCache(),console[_0x5d27fd(0x22e)]('[DeleteCommunity]\x20Local\x20cache\x20cleared.'),_0x3cc6c1(_0x5d27fd(0x4b7)+_0x19a2ae+'\x20successfully\x20deleted.\x20Redirecting...',_0x5d27fd(0x523)),setTimeout(()=>{const _0x5329a1=_0x5d27fd;window[_0x5329a1(0x347)][_0x5329a1(0x3a4)]=_0x5329a1(0x3a1);},0x7d0);}catch(_0x1d35dc){console[_0x5d27fd(0x43d)]('[DeleteCommunity]\x20Deletion\x20process\x20failed:',_0x1d35dc),_0x3cc6c1('Error:\x20'+_0x1d35dc[_0x5d27fd(0x44b)],'error'),alert(_0x5d27fd(0x419));}}async function leaveCommunity(_0x369919){const _0x40e5d2=_0x6d63e4;if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20leave\x20this\x20community?'))return;const _0xe20f45=auth[_0x40e5d2(0x224)];if(!_0xe20f45){console[_0x40e5d2(0x43d)](_0x40e5d2(0x21d)),alert(_0x40e5d2(0x3bc));return;}const _0x4a1659=doc(db,_0x40e5d2(0x23d),_0xe20f45[_0x40e5d2(0x26b)]),_0x59bb8c=doc(db,_0x40e5d2(0x4d3),_0x369919,_0x40e5d2(0x322),_0xe20f45[_0x40e5d2(0x26b)]);try{const _0x1c2915=writeBatch(db);_0x1c2915['delete'](_0x59bb8c),console[_0x40e5d2(0x22e)](_0x40e5d2(0x3b3)+_0xe20f45[_0x40e5d2(0x26b)]+_0x40e5d2(0x3ed)+_0x369919);const _0x3000a7=await getDoc(_0x4a1659);if(!_0x3000a7[_0x40e5d2(0x4e4)]())throw new Error(_0x40e5d2(0x3d2));const _0x605b07=_0x3000a7[_0x40e5d2(0x3b1)]();let _0x133e9e=_0x605b07[_0x40e5d2(0x3d0)]||[];console[_0x40e5d2(0x22e)]('Current\x20communityIds\x20before\x20leaving:',_0x133e9e);const _0x52128b=_0x133e9e[_0x40e5d2(0x1b4)](_0x1cd60f=>_0x1cd60f!==_0x369919);_0x133e9e['length']===_0x52128b[_0x40e5d2(0x3cb)]?console[_0x40e5d2(0x37e)](_0x40e5d2(0x1d1)+_0x369919+'\x20not\x20found\x20in\x20user\x27s\x20communityIds\x20array'):(console[_0x40e5d2(0x22e)](_0x40e5d2(0x4e9),_0x52128b),_0x1c2915[_0x40e5d2(0x44e)](_0x4a1659,{'communityIds':_0x52128b}));await _0x1c2915['commit'](),console[_0x40e5d2(0x22e)](_0x40e5d2(0x223)+_0x369919+_0x40e5d2(0x314),_0x52128b);const _0x435913=await getDoc(_0x4a1659),_0x331525=_0x435913[_0x40e5d2(0x3b1)]()[_0x40e5d2(0x3d0)]||[];console[_0x40e5d2(0x22e)](_0x40e5d2(0x387),_0x331525);if(!_0x331525[_0x40e5d2(0x542)](_0x369919))console['log'](_0x40e5d2(0x541)+_0x369919+_0x40e5d2(0x276));else{console[_0x40e5d2(0x43d)](_0x40e5d2(0x20d)+_0x369919+_0x40e5d2(0x388));throw new Error('Verification\x20failed:\x20Community\x20ID\x20still\x20present\x20in\x20user\x27s\x20communityIds');}resetCommDataCache(),alert(_0x40e5d2(0x24c)),window['location'][_0x40e5d2(0x3a4)]=_0x40e5d2(0x3a1);}catch(_0x2691c8){console['error']('Error\x20leaving\x20community:',_0x2691c8),alert(_0x40e5d2(0x4dc)+_0x2691c8[_0x40e5d2(0x44b)]+'.\x20Check\x20the\x20console\x20for\x20details.');}}async function fetchCurrentUserData(){const _0x1f15a3=_0x6d63e4,_0xf9201=auth[_0x1f15a3(0x224)],_0x3748a4=_0x1f15a3(0x254);let _0x11b94f=JSON[_0x1f15a3(0x2cf)](sessionStorage[_0x1f15a3(0x246)](_0x3748a4));if(_0x11b94f&&_0x11b94f[_0x1f15a3(0x26b)]===_0xf9201['uid'])return _0x11b94f;const _0x167204=doc(db,_0x1f15a3(0x23d),_0xf9201[_0x1f15a3(0x26b)]),_0xe79835=await getDoc(_0x167204);if(!_0xe79835['exists']()){console[_0x1f15a3(0x22e)](_0x1f15a3(0x441)+_0xf9201['uid']);const _0x581682={'name':_0x1f15a3(0x1bc),'username':'unknown','profilePhoto':null,'email':null,'city':null,'phone':null,'uid':_0xf9201['uid']};return sessionStorage[_0x1f15a3(0x1cf)](_0x3748a4,JSON[_0x1f15a3(0x377)](_0x581682)),_0x581682;}const _0xb95a90=_0xe79835[_0x1f15a3(0x3b1)](),_0x42a241={'name':_0xb95a90[_0x1f15a3(0x3d8)]||'Unknown','username':_0xb95a90[_0x1f15a3(0x49a)]||_0x1f15a3(0x23f),'profilePhoto':_0xb95a90[_0x1f15a3(0x407)]||null,'email':_0xb95a90['email']||null,'city':_0xb95a90[_0x1f15a3(0x27f)]||null,'phone':_0xb95a90[_0x1f15a3(0x312)]||null,'uid':_0xf9201[_0x1f15a3(0x26b)]};return sessionStorage['setItem'](_0x3748a4,JSON[_0x1f15a3(0x377)](_0x42a241)),_0x42a241;}async function fetchUserData(_0x56d00c){const _0x1f373b=_0x6d63e4;if(!_0x56d00c)return{'name':_0x1f373b(0x1bc),'username':_0x1f373b(0x23f),'profilePhoto':_0x1f373b(0x4ed),'uid':_0x1f373b(0x23f)};const _0x240da9=Array[_0x1f373b(0x3dc)](_0x56d00c)?_0x56d00c:[_0x56d00c],_0x319123=_0x240da9['filter'](_0x703d27=>!userDataCache[_0x703d27]||userDataCache[_0x703d27][_0x1f373b(0x3d8)]===_0x1f373b(0x1bc));if(_0x319123[_0x1f373b(0x3cb)]>0x0){const _0x54ff77=[];for(let _0xcb4d5b=0x0;_0xcb4d5b<_0x319123[_0x1f373b(0x3cb)];_0xcb4d5b+=0xa){_0x54ff77['push'](_0x319123[_0x1f373b(0x334)](_0xcb4d5b,_0xcb4d5b+0xa));}for(const _0x143714 of _0x54ff77){const _0x53a7f7=query(collection(db,_0x1f373b(0x23d)),where('__name__','in',_0x143714)),_0x4f6ded=await getDocs(_0x53a7f7);_0x4f6ded['forEach'](_0x19a769=>{const _0x1fc097=_0x1f373b,_0x374ddb=_0x19a769[_0x1fc097(0x3b1)]();userDataCache[_0x19a769['id']]={'name':_0x374ddb[_0x1fc097(0x3d8)]||_0x1fc097(0x1bc),'username':_0x374ddb[_0x1fc097(0x49a)]||_0x1fc097(0x23f),'profilePhoto':_0x374ddb[_0x1fc097(0x407)]||_0x1fc097(0x4ed),'email':_0x374ddb[_0x1fc097(0x4ef)]||null,'city':_0x374ddb[_0x1fc097(0x27f)]||null,'phone':_0x374ddb[_0x1fc097(0x312)]||null,'uid':_0x19a769['id'],'swaps':_0x374ddb['swaps']||0x0},userDataCache['username:'+_0x374ddb[_0x1fc097(0x49a)]]=userDataCache[_0x19a769['id']];}),_0x143714['forEach'](_0x185e9c=>{const _0x282136=_0x1f373b;!userDataCache[_0x185e9c]&&(userDataCache[_0x185e9c]={'name':'Unknown','username':_0x282136(0x23f),'profilePhoto':'https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y','uid':_0x185e9c});});}}return _0x240da9['length']===0x1?userDataCache[_0x240da9[0x0]]:_0x240da9['map'](_0x4985c6=>userDataCache[_0x4985c6]);}async function getPostReportStatus(_0x2dccd1){const _0x5d2383=_0x6d63e4,_0x2eed92=collection(db,_0x5d2383(0x4d3),communityId,'postReports'),_0x34c24b=query(_0x2eed92,where(_0x5d2383(0x20b),'==',_0x2dccd1)),_0x397145=await getDocs(_0x34c24b),_0x244d39=_0x397145[_0x5d2383(0x1b1)],_0x4c0e48=await getCommData(),_0x2a74d2=auth['currentUser'],_0x581e2a=_0x4c0e48[_0x5d2383(0x357)]?.[_0x5d2383(0x542)](_0x2a74d2[_0x5d2383(0x26b)])||_0x4c0e48[_0x5d2383(0x49c)]===_0x2a74d2[_0x5d2383(0x26b)],_0x10c3ec=doc(db,'communities',communityId,_0x5d2383(0x31e),_0x2dccd1),_0x32a774=await getDoc(_0x10c3ec);if(!_0x32a774[_0x5d2383(0x4e4)]())return console['log'](_0x5d2383(0x50b)+_0x2dccd1+'\x20not\x20foundâ€”assuming\x20deleted.'),{'reportCount':_0x244d39,'isHidden':_0x244d39>=0x2&&!_0x581e2a,'isAdmin':_0x581e2a,'isOwner':![]};const _0x429283=_0x32a774[_0x5d2383(0x3b1)](),_0x406704=_0x429283['userId']===_0x2a74d2[_0x5d2383(0x26b)];return{'reportCount':_0x244d39,'isHidden':_0x244d39>=0x2&&!_0x581e2a&&!_0x406704,'isAdmin':_0x581e2a,'isOwner':_0x406704};}async function reportPost(_0x5bc4f3){const _0x295f3e=_0x6d63e4,_0x20d78f=auth[_0x295f3e(0x224)],_0x2003f5=collection(db,_0x295f3e(0x4d3),communityId,_0x295f3e(0x319)),_0x5ec314=query(_0x2003f5,where('postId','==',_0x5bc4f3),where(_0x295f3e(0x249),'==',_0x20d78f[_0x295f3e(0x26b)])),_0x4ff6ef=await getDocs(_0x5ec314);if(!_0x4ff6ef[_0x295f3e(0x371)]){alert(_0x295f3e(0x2dc));return;}if(!confirm(_0x295f3e(0x3ec)))return;await addDoc(_0x2003f5,{'postId':_0x5bc4f3,'reporterId':_0x20d78f['uid'],'communityId':communityId,'timestamp':new Date()}),alert(_0x295f3e(0x509)),refreshReportSummary(_0x20d78f[_0x295f3e(0x26b)]);const _0x5bfba6=document[_0x295f3e(0x4fb)](_0x295f3e(0x4d6)+_0x5bc4f3),_0xc558b0=await getPostReportStatus(_0x5bc4f3),_0x3583bb=await getCommData(),_0x2ebf7e=_0x3583bb[_0x295f3e(0x357)]?.[_0x295f3e(0x542)](_0x20d78f[_0x295f3e(0x26b)])||_0x3583bb[_0x295f3e(0x49c)]===_0x20d78f[_0x295f3e(0x26b)];if(_0x5bfba6){const _0x64ca9f=_0x5bfba6[_0x295f3e(0x4cc)](_0x295f3e(0x39d)),_0x525099=_0x5bfba6[_0x295f3e(0x4cc)](_0x295f3e(0x418));if(_0x64ca9f)_0x64ca9f[_0x295f3e(0x3ab)]();if(_0x525099)_0x525099[_0x295f3e(0x3ab)]();if(_0xc558b0[_0x295f3e(0x2ec)]){_0x5bfba6[_0x295f3e(0x3ab)]();return;}if(_0xc558b0['isOwner']){if(_0xc558b0[_0x295f3e(0x30c)]===0x1)_0x5bfba6[_0x295f3e(0x23e)]('beforeend',_0x295f3e(0x412)+_0x5bc4f3+_0x295f3e(0x49b));else _0xc558b0[_0x295f3e(0x30c)]>=0x2&&_0x5bfba6[_0x295f3e(0x23e)](_0x295f3e(0x262),_0x295f3e(0x412)+_0x5bc4f3+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20'+_0xc558b0[_0x295f3e(0x30c)]+_0x295f3e(0x539));}_0x2ebf7e&&_0xc558b0[_0x295f3e(0x30c)]>0x0&&(_0x5bfba6[_0x295f3e(0x23e)](_0x295f3e(0x262),'<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-'+_0x5bc4f3+_0x295f3e(0x459)+_0xc558b0[_0x295f3e(0x30c)]+_0x295f3e(0x265)+(_0xc558b0[_0x295f3e(0x30c)]>0x1?'s':'')+_0x295f3e(0x29a)+_0x5bc4f3+'\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22'+_0x5bc4f3+_0x295f3e(0x241)),_0x5bfba6[_0x295f3e(0x4cc)](_0x295f3e(0x502)+_0x5bc4f3+'\x22]')[_0x295f3e(0x48a)](_0x295f3e(0x3b5),()=>deletePost(_0x5bc4f3)),_0x5bfba6[_0x295f3e(0x4cc)](_0x295f3e(0x395)+_0x5bc4f3+'\x22]')[_0x295f3e(0x48a)]('click',()=>clearReports(_0x5bc4f3)));}const _0x303700=document[_0x295f3e(0x4cc)](_0x295f3e(0x4f2)+_0x5bc4f3);if(_0x303700){const _0x5e9fdb=_0x303700[_0x295f3e(0x4cc)](_0x295f3e(0x39d));if(_0x5e9fdb)_0x5e9fdb[_0x295f3e(0x3ab)]();if(_0xc558b0[_0x295f3e(0x4a1)]){if(_0xc558b0[_0x295f3e(0x30c)]===0x1)_0x303700['insertAdjacentHTML']('beforeend',_0x295f3e(0x412)+_0x5bc4f3+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it\x20from\x20othersâ€”check\x20it\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>');else _0xc558b0['reportCount']>=0x2&&_0x303700['insertAdjacentHTML'](_0x295f3e(0x262),'<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x5bc4f3+_0x295f3e(0x385)+_0xc558b0[_0x295f3e(0x30c)]+_0x295f3e(0x539));}}await loadAdminReportSummary(_0x20d78f['uid']);}async function clearReports(_0x23de98){const _0x1b2930=_0x6d63e4;if(confirm('Clear\x20all\x20reports\x20for\x20this\x20post?\x20Itâ€™ll\x20be\x20visible\x20again.')){const _0x190b61=auth[_0x1b2930(0x224)],_0xd86960=collection(db,'communities',communityId,'postReports'),_0x2dd825=query(_0xd86960,where(_0x1b2930(0x20b),'==',_0x23de98)),_0x49afac=await getDocs(_0x2dd825),_0x390964=_0x49afac[_0x1b2930(0x55b)][_0x1b2930(0x473)](_0x1fad77=>deleteDoc(_0x1fad77[_0x1b2930(0x269)]));await Promise['all'](_0x390964),loadPosts(communityId,currentPage),loadCarouselPosts(communityId),refreshReportSummary(_0x190b61[_0x1b2930(0x26b)]);}}async function compressImage(_0x14d1ed){return new Promise(_0x2b3983=>{const _0x514c9f=_0xa1cd,_0xc26c9e=new Image(),_0x18a8e2=document[_0x514c9f(0x2ff)]('canvas'),_0x2aeaa1=_0x18a8e2[_0x514c9f(0x2b8)]('2d');_0xc26c9e['onload']=()=>{const _0x7932fe=_0x514c9f,_0x5aa588=0x320,_0x11589e=0x320;let _0x485bdf=_0xc26c9e['width'],_0x10835c=_0xc26c9e['height'];_0x485bdf>_0x10835c?_0x485bdf>_0x5aa588&&(_0x10835c*=_0x5aa588/_0x485bdf,_0x485bdf=_0x5aa588):_0x10835c>_0x11589e&&(_0x485bdf*=_0x11589e/_0x10835c,_0x10835c=_0x11589e),_0x18a8e2['width']=_0x485bdf,_0x18a8e2[_0x7932fe(0x40a)]=_0x10835c,_0x2aeaa1[_0x7932fe(0x2c7)](_0xc26c9e,0x0,0x0,_0x485bdf,_0x10835c),_0x18a8e2[_0x7932fe(0x4a0)](_0x24aeed=>_0x2b3983(_0x24aeed),_0x7932fe(0x30b),0.7);},_0xc26c9e[_0x514c9f(0x34c)]=URL[_0x514c9f(0x1fb)](_0x14d1ed);});}function setupLocationAutocomplete(){const _0x31180c=_0x6d63e4,_0x32e9ae=document[_0x31180c(0x4fb)]('postLocation'),_0xcd9aaa=document[_0x31180c(0x4fb)]('postLocationSuggestions');if(!_0x32e9ae||!_0xcd9aaa){console[_0x31180c(0x43d)](_0x31180c(0x4a9));return;}const _0x3c029f=0xa*0x3c*0x3e8,_0x353d85=0x32,_0x53edcd=new Map();function _0x8464a9(_0xda89c7,_0xdcb2bb){const _0x3ddbd4=_0x31180c;if(_0x53edcd['size']>=_0x353d85){const _0x102eb8=_0x53edcd['keys']()['next']()[_0x3ddbd4(0x361)];_0x53edcd[_0x3ddbd4(0x1e5)](_0x102eb8);}_0x53edcd[_0x3ddbd4(0x244)](_0xda89c7,{'value':_0xdcb2bb,'expiry':Date['now']()+_0x3c029f});}function _0x232702(_0x23450){const _0x19c1e2=_0x31180c,_0x4bc569=_0x53edcd[_0x19c1e2(0x401)](_0x23450);if(!_0x4bc569)return null;if(Date[_0x19c1e2(0x321)]()>_0x4bc569[_0x19c1e2(0x471)])return _0x53edcd[_0x19c1e2(0x1e5)](_0x23450),null;return _0x4bc569['value'];}async function _0x4a186a(_0x1b1230){const _0x39360f=_0x31180c,_0x5d0256=_0x232702(_0x1b1230);if(_0x5d0256)return _0x5d0256;const _0x328f79=_0x39360f(0x43c)+encodeURIComponent(_0x1b1230)+'&format=json&limit=5&addressdetails=1';try{const _0x2ff26e=await fetch(_0x328f79,{'headers':{'User-Agent':_0x39360f(0x416)}});if(!_0x2ff26e['ok'])throw new Error(_0x39360f(0x3b9)+_0x2ff26e['status']);const _0x46db62=await _0x2ff26e['json']();return _0x8464a9(_0x1b1230,_0x46db62),_0x46db62;}catch(_0x87ce75){return console[_0x39360f(0x43d)](_0x39360f(0x46f),_0x87ce75),[];}}async function _0x2d3a08(){const _0x5c7326=_0x31180c,_0x4cd650=_0x32e9ae[_0x5c7326(0x361)][_0x5c7326(0x3b6)]();if(_0x4cd650['length']<0x2){_0xcd9aaa[_0x5c7326(0x381)]='',_0xcd9aaa['classList'][_0x5c7326(0x4f7)](_0x5c7326(0x4b1));return;}_0xcd9aaa['innerHTML']=_0x5c7326(0x442);const _0x34ceda=await _0x4a186a(_0x4cd650);_0x359106(_0x34ceda);}function _0x359106(_0x2c4b94){const _0x4d2764=_0x31180c;_0xcd9aaa[_0x4d2764(0x381)]='';if(_0x2c4b94[_0x4d2764(0x3cb)]===0x0){_0xcd9aaa[_0x4d2764(0x284)][_0x4d2764(0x4f7)](_0x4d2764(0x4b1));return;}_0xcd9aaa[_0x4d2764(0x284)][_0x4d2764(0x3ab)](_0x4d2764(0x4b1));const _0x3fd607=document[_0x4d2764(0x331)]();_0x2c4b94[_0x4d2764(0x518)](_0x2bc366=>{const _0x15fce1=_0x4d2764,_0x205973=_0x2bc366[_0x15fce1(0x535)]['city']||_0x2bc366[_0x15fce1(0x535)][_0x15fce1(0x245)]||_0x2bc366[_0x15fce1(0x535)][_0x15fce1(0x3c7)]||'',_0x238cd1=_0x2bc366[_0x15fce1(0x535)][_0x15fce1(0x4ab)]||'',_0x4c0b17=_0x2bc366[_0x15fce1(0x535)][_0x15fce1(0x559)]||'',_0x432b1c=_0x205973&&_0x238cd1?_0x205973+',\x20'+_0x238cd1:_0x2bc366[_0x15fce1(0x204)],_0x212941=document[_0x15fce1(0x2ff)](_0x15fce1(0x2f6));_0x212941[_0x15fce1(0x284)][_0x15fce1(0x4f7)](_0x15fce1(0x528)),_0x212941[_0x15fce1(0x26e)]=_0x432b1c,_0x212941[_0x15fce1(0x3e2)]=()=>{const _0x513567=_0x15fce1;_0x32e9ae[_0x513567(0x361)]=_0x432b1c,_0x32e9ae['dataset'][_0x513567(0x373)]=_0x2bc366[_0x513567(0x373)],_0x32e9ae[_0x513567(0x3f5)][_0x513567(0x3a9)]=_0x2bc366[_0x513567(0x3a9)],_0xcd9aaa[_0x513567(0x381)]='',_0xcd9aaa[_0x513567(0x284)][_0x513567(0x4f7)](_0x513567(0x4b1));},_0x3fd607[_0x15fce1(0x218)](_0x212941);}),_0xcd9aaa['appendChild'](_0x3fd607);}_0x32e9ae['oninput']=debounce(_0x2d3a08,0x1f4);}async function editCommunityName(_0x44472f){const _0x4da9a3=_0x6d63e4,_0x5bd11f=doc(db,_0x4da9a3(0x4d3),_0x44472f),_0x3a7f85=await getDoc(_0x5bd11f),_0x2eda50=_0x3a7f85[_0x4da9a3(0x3b1)](),_0x3ebfe4=_0x2eda50['name'],_0x5c0249=document[_0x4da9a3(0x2ff)]('div');_0x5c0249['id']=_0x4da9a3(0x46c),_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x440)]=_0x4da9a3(0x2bd),_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x4f4)]='50%',_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x372)]=_0x4da9a3(0x364),_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x486)]=_0x4da9a3(0x2cb),_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x432)]=_0x4da9a3(0x48e),_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x23a)]='20px',_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x534)]='1px\x20solid\x20#ccc',_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x1d3)]=_0x4da9a3(0x2f8),_0x5c0249[_0x4da9a3(0x52f)][_0x4da9a3(0x270)]=_0x4da9a3(0x1e4),_0x5c0249[_0x4da9a3(0x381)]='\x0a<h3>Edit\x20Community\x20Name</h3>\x0a<input\x20type=\x22text\x22\x20id=\x22newCommunityName\x22\x20value=\x22'+_0x3ebfe4+'\x22\x20style=\x22width:\x20100%;\x20margin-bottom:\x2010px;\x22>\x0a<button\x20id=\x22saveNameBtn\x22>Save</button>\x0a<button\x20id=\x22cancelNameBtn\x22>Cancel</button>\x0a',document[_0x4da9a3(0x43a)][_0x4da9a3(0x218)](_0x5c0249),document[_0x4da9a3(0x4fb)](_0x4da9a3(0x4c6))['addEventListener'](_0x4da9a3(0x3b5),async()=>{const _0x324f53=_0x4da9a3,_0x1d13a7=document['getElementById'](_0x324f53(0x4f8))[_0x324f53(0x361)]['trim']();if(!_0x1d13a7){alert(_0x324f53(0x355));return;}if(_0x1d13a7===_0x3ebfe4){alert(_0x324f53(0x374)),document[_0x324f53(0x43a)]['removeChild'](_0x5c0249);return;}await updateDoc(_0x5bd11f,{'name':_0x1d13a7}),document[_0x324f53(0x4fb)](_0x324f53(0x2cc))[_0x324f53(0x26e)]=_0x1d13a7,document['body']['removeChild'](_0x5c0249),alert('Community\x20name\x20updated!');}),document[_0x4da9a3(0x4fb)](_0x4da9a3(0x3b4))[_0x4da9a3(0x48a)](_0x4da9a3(0x3b5),()=>{const _0x45ae87=_0x4da9a3;document[_0x45ae87(0x43a)][_0x45ae87(0x237)](_0x5c0249);});}let reportSummaryCache=null;async function loadAdminReportSummary(_0x1b3b3e){const _0x5e50c3=_0x6d63e4;if(!_0x1b3b3e){console[_0x5e50c3(0x43d)](_0x5e50c3(0x4fa));return;}const _0x12320c=await getCommData(),_0x417d2c=_0x12320c['admins']?.[_0x5e50c3(0x542)](_0x1b3b3e)||_0x12320c['creatorId']===_0x1b3b3e;let _0x53cf50=document['getElementById'](_0x5e50c3(0x527));!_0x53cf50&&(_0x53cf50=document['createElement']('div'),_0x53cf50['id']=_0x5e50c3(0x527),_0x53cf50[_0x5e50c3(0x396)]=_0x5e50c3(0x527),document[_0x5e50c3(0x4cc)]('.community-page')[_0x5e50c3(0x252)](_0x53cf50,document[_0x5e50c3(0x4cc)](_0x5e50c3(0x34a))[_0x5e50c3(0x3db)]));if(reportSummaryCache){_0x53cf50[_0x5e50c3(0x381)]=reportSummaryCache['html'],attachSummaryListeners(_0x53cf50,_0x417d2c,_0x1b3b3e),console[_0x5e50c3(0x22e)]('Loaded\x20report\x20summary\x20from\x20cache!');return;}await updateReportSummaryUI(_0x53cf50,_0x1b3b3e,_0x417d2c);}async function updateReportSummaryUI(_0x2089ee,_0x54ddc8,_0x4a6923){const _0x2beee5=_0x6d63e4,_0xa1f5b5=collection(db,_0x2beee5(0x4d3),communityId,'postReports'),_0xd9fa94=query(_0xa1f5b5),_0x57dcd0=await getDocs(_0xd9fa94),_0x335409=Object[_0x2beee5(0x4c8)](_0x57dcd0[_0x2beee5(0x55b)]['reduce']((_0x2263d9,_0x36a5e0)=>{const _0x13796a=_0x2beee5;return _0x2263d9[_0x36a5e0[_0x13796a(0x3b1)]()['postId']]=!![],_0x2263d9;},{}))[_0x2beee5(0x3cb)];let _0x2010c7=0x0,_0x2cd2d5=0x0;if(_0x4a6923){const _0x3d3cf3=query(collection(db,_0x2beee5(0x4d3),communityId,_0x2beee5(0x323))),_0x160f67=await getDocs(_0x3d3cf3);_0x2cd2d5=_0x160f67[_0x2beee5(0x1b1)];}else{const _0x10d4d8=query(collection(db,_0x2beee5(0x4d3),communityId,_0x2beee5(0x31e)),where(_0x2beee5(0x39f),'==',_0x54ddc8)),_0x4f8764=await getDocs(_0x10d4d8),_0x79efcc=[];for(const _0x3508b2 of _0x4f8764[_0x2beee5(0x55b)]){const _0x1cc1ec=_0x3508b2['id'],_0x3199b0=query(_0xa1f5b5,where(_0x2beee5(0x20b),'==',_0x1cc1ec)),_0x253d11=await getDocs(_0x3199b0);if(!_0x253d11['empty'])_0x79efcc['push'](_0x1cc1ec);}_0x2010c7=_0x79efcc[_0x2beee5(0x3cb)];}const _0xdcf48c=_0x4a6923?_0x335409+_0x2cd2d5:_0x2010c7;_0x2089ee[_0x2beee5(0x381)]=_0x2beee5(0x1b8)+(_0xdcf48c>0x0?'('+_0xdcf48c+')\x20':'')+_0x2beee5(0x463),reportSummaryCache={'html':_0x2089ee['innerHTML']},attachSummaryListeners(_0x2089ee,_0x4a6923,_0x54ddc8);}function attachSummaryListeners(_0x5ba569,_0x177a42,_0x1a843e){const _0xc4494e=_0x6d63e4,_0x1f8263=_0x5ba569[_0xc4494e(0x4cc)]('details');_0x1f8263[_0xc4494e(0x48a)](_0xc4494e(0x283),async()=>{const _0x337dfe=_0xc4494e,_0x55a033=_0x5ba569[_0x337dfe(0x4cc)](_0x337dfe(0x508));if(_0x1f8263[_0x337dfe(0x4bd)]){_0x55a033[_0x337dfe(0x381)]=_0x337dfe(0x25c),_0x1f8263['querySelector'](_0x337dfe(0x55f))[_0x337dfe(0x26e)]=(reportSummaryCache[_0x337dfe(0x402)]['match'](/\(\d+\)/)||'')+'Hide\x20Reports';if(_0x177a42){let _0x3e49ff='';const _0x4b7cad=collection(db,_0x337dfe(0x4d3),communityId,'postReports'),_0xe0b181=await getDocs(query(_0x4b7cad));if(_0xe0b181[_0x337dfe(0x371)])_0x3e49ff+=_0x337dfe(0x2d0);else{_0x3e49ff+=_0x337dfe(0x4be);const _0x437baa={};_0xe0b181[_0x337dfe(0x518)](_0x232eb6=>{const _0x3b4c6e=_0x337dfe,_0x4f40f6=_0x232eb6[_0x3b4c6e(0x3b1)]()[_0x3b4c6e(0x20b)];_0x437baa[_0x4f40f6]=(_0x437baa[_0x4f40f6]||0x0)+0x1;});for(const [_0x43cb7c,_0x570f0e]of Object[_0x337dfe(0x1f7)](_0x437baa)){try{const _0x369026=await getDoc(doc(db,_0x337dfe(0x4d3),communityId,_0x337dfe(0x31e),_0x43cb7c)),_0x2288dd=_0x369026['exists']()?_0x369026[_0x337dfe(0x3b1)]():null,_0x28d959=_0x2288dd?_0x2288dd[_0x337dfe(0x313)]:_0x337dfe(0x4b5),_0x1317bb=_0x2288dd?await fetchUserData(_0x2288dd['userId']):{'name':_0x337dfe(0x1bc)};_0x3e49ff+=_0x337dfe(0x286)+_0x43cb7c+_0x337dfe(0x550)+_0x28d959+_0x337dfe(0x475)+_0x1317bb[_0x337dfe(0x3d8)]+_0x337dfe(0x271)+_0x43cb7c+')\x20-\x20'+_0x570f0e+_0x337dfe(0x265)+(_0x570f0e>0x1?'s':'')+_0x337dfe(0x41a)+_0x43cb7c+'\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22'+_0x43cb7c+_0x337dfe(0x50a);}catch(_0x25d3b8){console[_0x337dfe(0x43d)](_0x337dfe(0x358)+_0x43cb7c+':',_0x25d3b8),_0x3e49ff+=_0x337dfe(0x4a3)+_0x43cb7c+_0x337dfe(0x3bf);}}}try{const _0x245d39=await getDocs(collection(db,'communities',communityId,_0x337dfe(0x323))),_0x17e7fb=(await getDoc(doc(db,_0x337dfe(0x4d3),communityId)))['data']()||{'banReasons':{}};if(!_0x245d39[_0x337dfe(0x371)]){_0x3e49ff+=_0x337dfe(0x42f);for(const _0x2d74a0 of _0x245d39['docs']){const _0x325bab=_0x2d74a0['data'](),_0x4ff640=await fetchUserData(_0x325bab[_0x337dfe(0x39f)]),_0x4a4198=(_0x4ff640['name']||'Unknown')+'\x20('+(_0x325bab[_0x337dfe(0x49a)]||_0x337dfe(0x23f))+')',_0x5bac55=_0x17e7fb[_0x337dfe(0x3fd)]?.[_0x325bab[_0x337dfe(0x39f)]]||_0x337dfe(0x27d);_0x3e49ff+=_0x337dfe(0x4a4)+_0x2d74a0['id']+_0x337dfe(0x35a)+_0x4a4198+_0x337dfe(0x3a3)+_0x325bab['message']+_0x337dfe(0x3c0)+_0x5bac55+_0x337dfe(0x376)+new Date(_0x325bab[_0x337dfe(0x556)][_0x337dfe(0x23c)]())['toLocaleString']()+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-appeal-btn\x22\x20data-appeal-id=\x22'+_0x2d74a0['id']+_0x337dfe(0x341);}}else _0x3e49ff+='<br><h3>User\x20Appeals</h3><p>No\x20appeals\x20yet.</p>';}catch(_0xa6df2d){console[_0x337dfe(0x43d)](_0x337dfe(0x2a5),_0xa6df2d),_0x3e49ff+=_0x337dfe(0x352);}_0x55a033['innerHTML']=_0x3e49ff,_0x55a033[_0x337dfe(0x47a)](_0x337dfe(0x4bb))[_0x337dfe(0x518)](_0x5d714b=>{const _0xb6a37d=_0x337dfe;_0x5d714b[_0xb6a37d(0x48a)](_0xb6a37d(0x3b5),()=>deletePost(_0x5d714b['dataset']['postId']));}),_0x55a033[_0x337dfe(0x47a)]('.clear-reports-btn')[_0x337dfe(0x518)](_0x5a8357=>{const _0x1e5b94=_0x337dfe;_0x5a8357[_0x1e5b94(0x48a)](_0x1e5b94(0x3b5),()=>clearReports(_0x5a8357[_0x1e5b94(0x3f5)][_0x1e5b94(0x20b)]));}),_0x55a033[_0x337dfe(0x47a)](_0x337dfe(0x4b0))['forEach'](_0x4c1600=>{const _0x1cef1c=_0x337dfe;_0x4c1600[_0x1cef1c(0x48a)](_0x1cef1c(0x3b5),async()=>{const _0x2a3dff=_0x1cef1c;confirm(_0x2a3dff(0x434))&&(await deleteDoc(doc(db,'communities',communityId,_0x2a3dff(0x323),_0x4c1600[_0x2a3dff(0x3f5)][_0x2a3dff(0x304)])),refreshReportSummary(_0x1a843e));});});}else{let _0xc1d3b4='';const _0x35b12d=collection(db,'communities',communityId,_0x337dfe(0x319)),_0x1de15a=query(collection(db,_0x337dfe(0x4d3),communityId,'posts'),where(_0x337dfe(0x39f),'==',_0x1a843e));try{const _0x10ee67=await getDocs(_0x1de15a),_0x598f4f=[];for(const _0x3c9f79 of _0x10ee67[_0x337dfe(0x55b)]){const _0x5c9e56=_0x3c9f79['id'],_0x4956b8=query(_0x35b12d,where(_0x337dfe(0x20b),'==',_0x5c9e56)),_0x328108=await getDocs(_0x4956b8);!_0x328108[_0x337dfe(0x371)]&&_0x598f4f[_0x337dfe(0x22f)]({'postId':_0x5c9e56,'title':_0x3c9f79['data']()[_0x337dfe(0x313)],'count':_0x328108['size']});}if(_0x598f4f['length']===0x0)_0xc1d3b4=_0x337dfe(0x303);else{_0xc1d3b4=_0x337dfe(0x1b6);for(const _0x4aa60c of _0x598f4f){const _0x429b6c=query(collection(db,_0x337dfe(0x4d3),communityId,_0x337dfe(0x323)),where(_0x337dfe(0x39f),'==',_0x1a843e),where('postId','==',_0x4aa60c[_0x337dfe(0x20b)])),_0x804db8=await getDocs(_0x429b6c),_0x330011=!_0x804db8[_0x337dfe(0x371)];_0xc1d3b4+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22'+_0x4aa60c[_0x337dfe(0x20b)]+_0x337dfe(0x212)+_0x4aa60c['title']+_0x337dfe(0x2a3)+_0x4aa60c[_0x337dfe(0x20b)]+_0x337dfe(0x3f3)+_0x4aa60c['count']+'\x20report'+(_0x4aa60c['count']>0x1?'s':'')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4aa60c['count']>=0x2?_0x337dfe(0x545):'')+_0x337dfe(0x200)+_0x4aa60c[_0x337dfe(0x20b)]+_0x337dfe(0x26d)+(!_0x330011?_0x337dfe(0x476)+_0x4aa60c[_0x337dfe(0x20b)]+_0x337dfe(0x46b):'<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>')+_0x337dfe(0x479);}}}catch(_0x3f7bd5){console[_0x337dfe(0x43d)](_0x337dfe(0x338),_0x3f7bd5),_0xc1d3b4=_0x337dfe(0x25f);}_0x55a033[_0x337dfe(0x381)]=_0xc1d3b4,_0x55a033['querySelectorAll'](_0x337dfe(0x308))[_0x337dfe(0x518)](_0x460e66=>{const _0x4fec98=_0x337dfe;_0x460e66[_0x4fec98(0x48a)]('submit',async _0x311cd6=>{const _0x19f0bb=_0x4fec98;_0x311cd6[_0x19f0bb(0x2e9)]();const _0x362151=_0x460e66[_0x19f0bb(0x3f5)]['postId'],_0xcbfa98=_0x460e66['querySelector'](_0x19f0bb(0x4cf))[_0x19f0bb(0x361)][_0x19f0bb(0x3b6)]();if(_0xcbfa98){const _0x21a915=await getDoc(doc(db,_0x19f0bb(0x23d),_0x1a843e)),_0x1264a7=_0x21a915[_0x19f0bb(0x4e4)]()?_0x21a915['data']():{'username':_0x19f0bb(0x3e4)+_0x1a843e[_0x19f0bb(0x334)](0x0,0x8)};await addDoc(collection(db,_0x19f0bb(0x4d3),communityId,'banAppeals'),{'userId':_0x1a843e,'username':_0x1264a7[_0x19f0bb(0x49a)],'postId':_0x362151,'message':_0xcbfa98,'timestamp':new Date()}),alert(_0x19f0bb(0x510)),_0x460e66[_0x19f0bb(0x340)](_0x19f0bb(0x4c7))['innerHTML']=_0x19f0bb(0x417),refreshReportSummary(_0x1a843e);}});});}}else _0x1f8263[_0x337dfe(0x4cc)]('summary')[_0x337dfe(0x26e)]=(reportSummaryCache[_0x337dfe(0x402)][_0x337dfe(0x2df)](/\(\d+\)/)||'')+_0x337dfe(0x256),_0x55a033[_0x337dfe(0x381)]='';});}function refreshReportSummary(_0xe02ea1){reportSummaryCache=null,loadAdminReportSummary(_0xe02ea1);}const debouncedLoadAdminReportSummary=debounce(_0x29113c=>loadAdminReportSummary(_0x29113c),0x1f4);async function createPost(){const _0x85bae3=_0x6d63e4,_0x4e164b=document[_0x85bae3(0x4fb)](_0x85bae3(0x516));if(!_0x4e164b){console[_0x85bae3(0x43d)](_0x85bae3(0x23b));return;}if(_0x4e164b[_0x85bae3(0x242)]){console[_0x85bae3(0x22e)](_0x85bae3(0x4ae));return;}_0x4e164b['disabled']=!![];const _0x49b88c=_0x4e164b[_0x85bae3(0x26e)];_0x4e164b['textContent']='Creating...',_0x4e164b['classList']['add'](_0x85bae3(0x391));try{const _0x1eb9a0=auth[_0x85bae3(0x224)],_0x21b498=document[_0x85bae3(0x4fb)]('postTitle')[_0x85bae3(0x361)][_0x85bae3(0x3b6)](),_0x9b65d4=document[_0x85bae3(0x4fb)]('postDescription')[_0x85bae3(0x361)][_0x85bae3(0x3b6)](),_0x9ddee9=document['getElementById'](_0x85bae3(0x453))[_0x85bae3(0x2d6)],_0x381b4e=document[_0x85bae3(0x4fb)](_0x85bae3(0x3ce))['value'][_0x85bae3(0x3b6)](),_0x55ddff=document['getElementById'](_0x85bae3(0x3ce))[_0x85bae3(0x3f5)][_0x85bae3(0x373)],_0x131232=document[_0x85bae3(0x4fb)](_0x85bae3(0x3ce))[_0x85bae3(0x3f5)][_0x85bae3(0x3a9)],_0x4bb00f=document[_0x85bae3(0x47a)](_0x85bae3(0x227)),_0x6dcbde=document[_0x85bae3(0x4fb)](_0x85bae3(0x1ba))[_0x85bae3(0x361)],_0x4f1b56=document['getElementById']('lookingFor')[_0x85bae3(0x361)],_0xbe0f91=document[_0x85bae3(0x4fb)]('offering')[_0x85bae3(0x361)];if(!_0x21b498||!_0x9b65d4||!_0x381b4e||!_0x55ddff||!_0x131232||!_0x6dcbde||!_0x4f1b56||!_0xbe0f91){alert('Fill\x20out\x20all\x20fields,\x20pick\x20a\x20category,\x20and\x20select\x20what\x20you\x27re\x20looking\x20for\x20and\x20offering!');throw new Error('Missing\x20required\x20fields');}if(_0x4bb00f['length']===0x0){alert(_0x85bae3(0x1d9));throw new Error(_0x85bae3(0x354));}let _0x50c578=Array[_0x85bae3(0x4aa)](_0x4bb00f)['map'](_0x5855bd=>_0x5855bd[_0x85bae3(0x361)]);if(_0x50c578[_0x85bae3(0x3cb)]===0x1&&_0x50c578[0x0]==='all'){const _0x588be9=doc(db,_0x85bae3(0x23d),_0x1eb9a0['uid']),_0x382745=await getDoc(_0x588be9);_0x50c578=_0x382745['data']()['communityIds']||[];const _0x3b8e75=[];for(const _0x4b2eaf of _0x50c578){const _0x4d1031=doc(db,_0x85bae3(0x4d3),_0x4b2eaf),_0xb44f9e=await getDoc(_0x4d1031),_0x5b3132=_0xb44f9e[_0x85bae3(0x3b1)]();_0x5b3132[_0x85bae3(0x322)][_0x85bae3(0x542)](_0x1eb9a0[_0x85bae3(0x26b)])&&!(_0x5b3132[_0x85bae3(0x525)]||[])[_0x85bae3(0x542)](_0x1eb9a0[_0x85bae3(0x26b)])&&_0x3b8e75[_0x85bae3(0x22f)](_0x4b2eaf);}_0x50c578=_0x3b8e75;}else _0x50c578=_0x50c578[_0x85bae3(0x473)](_0x5baa43=>_0x5baa43==='current'?communityId:_0x5baa43);if(_0x50c578['length']===0x0){alert(_0x85bae3(0x1c3));throw new Error('No\x20valid\x20communities');}const _0x5248bd={};for(const _0x470cbd of _0x50c578){_0x5248bd[_0x470cbd]=[];for(let _0x3180ac=0x0;_0x3180ac<Math[_0x85bae3(0x2b2)](_0x9ddee9[_0x85bae3(0x3cb)],0x5);_0x3180ac++){const _0x3473d2=await compressImage(_0x9ddee9[_0x3180ac]),_0x31e259=ref(storage,_0x85bae3(0x500)+_0x470cbd+'/'+_0x1eb9a0['uid']+'/'+Date[_0x85bae3(0x321)]()+'_'+_0x3180ac);await uploadBytes(_0x31e259,_0x3473d2);const _0x5e4e01=await getDownloadURL(_0x31e259);_0x5248bd[_0x470cbd]['push'](_0x5e4e01);}}const _0x56ef90=_0x50c578['map'](_0x839c51=>{const _0x48dcf5=_0x85bae3,_0x3b1a95={'title':_0x21b498,'description':_0x9b65d4,'photoUrls':_0x5248bd[_0x839c51],'location':{'latitude':parseFloat(_0x55ddff),'longitude':parseFloat(_0x131232),'name':_0x381b4e},'userId':_0x1eb9a0[_0x48dcf5(0x26b)],'createdAt':new Date(),'category':_0x6dcbde,'lookingFor':_0x4f1b56,'offering':_0xbe0f91,'communityId':_0x839c51,'likes':0x0,'likedBy':[],'commentCount':0x0};return addDoc(collection(db,_0x48dcf5(0x4d3),_0x839c51,'posts'),_0x3b1a95);}),_0x56bf46=await Promise[_0x85bae3(0x2c8)](_0x56ef90);alert('Post\x20created\x20in\x20'+_0x50c578['length']+_0x85bae3(0x3a0)+(_0x50c578[_0x85bae3(0x3cb)]>0x1?'ies':'y')+_0x85bae3(0x2b7)+_0x56bf46['map'](_0x222e2c=>_0x222e2c['id'])[_0x85bae3(0x48c)](',\x20')),document['getElementById']('newPostForm')[_0x85bae3(0x2bb)](),totalYourPosts=0x0,loadYourPosts(_0x1eb9a0[_0x85bae3(0x26b)]),loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,loadCarouselPosts(communityId);}catch(_0x1a8e32){console[_0x85bae3(0x43d)]('Error\x20creating\x20post:',_0x1a8e32),!_0x1a8e32['message'][_0x85bae3(0x542)]('Missing')&&!_0x1a8e32[_0x85bae3(0x44b)][_0x85bae3(0x542)](_0x85bae3(0x4d3))&&alert(_0x85bae3(0x324)+_0x1a8e32[_0x85bae3(0x44b)]);}finally{_0x4e164b[_0x85bae3(0x242)]=![],_0x4e164b['textContent']=_0x49b88c,_0x4e164b[_0x85bae3(0x284)]['remove'](_0x85bae3(0x391));}}async function setupCommunitySelection(){const _0x596f49=_0x6d63e4,_0x42c16f=auth['currentUser'];if(!_0x42c16f){console['error']('No\x20authenticated\x20user\x20found\x20for\x20setupCommunitySelection!');return;}const _0x4d31fa=doc(db,_0x596f49(0x23d),_0x42c16f[_0x596f49(0x26b)]),_0x10ce03=await getDoc(_0x4d31fa),_0x4c223e=_0x10ce03['data']()['communityIds']||[],_0x1be8a0=document['getElementById'](_0x596f49(0x45b));if(!_0x1be8a0){console[_0x596f49(0x43d)]('communityCheckboxes\x20div\x20not\x20found\x20in\x20DOM\x20yet!');return;}_0x1be8a0[_0x596f49(0x381)]='';const _0x3b958d=doc(db,'communities',communityId),_0x30a56f=await getDoc(_0x3b958d),_0x5a13fe=_0x30a56f[_0x596f49(0x3b1)]()[_0x596f49(0x3d8)];_0x1be8a0[_0x596f49(0x381)]+=_0x596f49(0x1d0)+_0x5a13fe+_0x596f49(0x32b),_0x1be8a0['innerHTML']+=_0x596f49(0x4eb);const _0x4094bc=_0x4c223e['filter'](_0x2d7091=>_0x2d7091!==communityId)[_0x596f49(0x473)](_0x581213=>getDoc(doc(db,_0x596f49(0x4d3),_0x581213))),_0x40ab5f=await Promise['all'](_0x4094bc);for(const _0x29feb2 of _0x40ab5f){if(_0x29feb2['exists']()){const _0x16ee7e=_0x29feb2[_0x596f49(0x3b1)](),_0x2111bd=doc(db,_0x596f49(0x4d3),_0x29feb2['id'],_0x596f49(0x322),_0x42c16f[_0x596f49(0x26b)]),_0x5348e7=await getDoc(_0x2111bd),_0x304dae=_0x5348e7[_0x596f49(0x4e4)](),_0x462873=(_0x16ee7e[_0x596f49(0x525)]||[])[_0x596f49(0x542)](_0x42c16f[_0x596f49(0x26b)]);if(_0x304dae&&!_0x462873){const _0x5c9523=document[_0x596f49(0x2ff)](_0x596f49(0x47d));_0x5c9523[_0x596f49(0x368)](_0x596f49(0x49f),'comm-'+_0x29feb2['id']),_0x5c9523['innerHTML']=_0x596f49(0x1f9)+_0x29feb2['id']+_0x596f49(0x2ea)+_0x29feb2['id']+_0x596f49(0x38f)+_0x16ee7e['name']+_0x596f49(0x296),_0x1be8a0['appendChild'](_0x5c9523);}}}const _0x4358c2=_0x1be8a0[_0x596f49(0x4cc)](_0x596f49(0x4c9));_0x4358c2['addEventListener'](_0x596f49(0x38d),_0x1f26c5=>{const _0x4c42ab=_0x596f49,_0x376079=_0x1be8a0['querySelectorAll'](_0x4c42ab(0x39e));_0x1f26c5['target'][_0x4c42ab(0x1cc)]&&_0x376079['forEach'](_0x3dc3e3=>_0x3dc3e3[_0x4c42ab(0x1cc)]=![]);});const _0x3522bc=_0x1be8a0[_0x596f49(0x47a)](_0x596f49(0x39e));_0x3522bc['forEach'](_0x36e182=>{const _0x3fb0d8=_0x596f49;_0x36e182[_0x3fb0d8(0x48a)]('change',()=>{const _0x5d2859=_0x3fb0d8;_0x36e182[_0x5d2859(0x1cc)]&&(_0x4358c2[_0x5d2859(0x1cc)]=![]);});});}async function deletePost(_0x180c4d){const _0x10aaf4=_0x6d63e4,_0x2d4d60=auth[_0x10aaf4(0x224)],_0x5d833b=await getCommData(),_0x3c1385=_0x5d833b[_0x10aaf4(0x357)]?.['includes'](_0x2d4d60[_0x10aaf4(0x26b)])||_0x5d833b['creatorId']===_0x2d4d60[_0x10aaf4(0x26b)],_0x4cc9b3=doc(db,_0x10aaf4(0x4d3),communityId,'posts',_0x180c4d),_0x3295fe=await getDoc(_0x4cc9b3);if(!_0x3295fe[_0x10aaf4(0x4e4)]()){alert(_0x10aaf4(0x2c4));return;}const _0x353fb0=_0x3295fe[_0x10aaf4(0x3b1)]();if(!_0x3c1385&&_0x353fb0[_0x10aaf4(0x39f)]!==_0x2d4d60[_0x10aaf4(0x26b)]){alert('You\x20canâ€™t\x20delete\x20this\x20post!');return;}const _0x10a88f=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x4cd)),_0x23eb8a=document['getElementById'](_0x10aaf4(0x2b6)),_0x1c81a6=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x300)),_0xd6ccb1=document['getElementById'](_0x10aaf4(0x31a)),_0x50abc9=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x3dd)),_0xe79a77=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x220)),_0x15ddaa=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x375)),_0x3a3480=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x315)),_0x4c2dde=document[_0x10aaf4(0x4fb)]('swapPartner'),_0x158632=document[_0x10aaf4(0x4fb)]('editSwapBtn'),_0x4656c5=document['getElementById'](_0x10aaf4(0x346)),_0x1a9b77=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x53f)),_0x17decd=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x48d)),_0x53f5b8=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x24e)),_0x71e22a=document[_0x10aaf4(0x4fb)](_0x10aaf4(0x272));if(!_0x10a88f||!_0x71e22a||!_0x23eb8a||!_0x1c81a6||!_0xd6ccb1||!_0x50abc9||!_0xe79a77||!_0x15ddaa||!_0x3a3480||!_0x4c2dde||!_0x158632||!_0x4656c5||!_0x1a9b77||!_0x17decd||!_0x53f5b8){console['error'](_0x10aaf4(0x30a),{'modal':_0x10a88f,'loadingOverlay':_0x71e22a,'swappedBtn':_0x23eb8a,'justDeleteBtn':_0x1c81a6,'swapDetails':_0xd6ccb1,'swapUsername':_0x50abc9,'validateSwapBtn':_0xe79a77,'swapValidationResult':_0x15ddaa,'swapConfirmed':_0x3a3480,'swapPartner':_0x4c2dde,'editSwapBtn':_0x158632,'proceedSwapBtn':_0x4656c5,'swapSuccess':_0x1a9b77,'swapSuccessMessage':_0x17decd,'closeDeleteModalBtn':_0x53f5b8}),alert(_0x10aaf4(0x3c8));return;}let _0x430ef7=null;_0x10a88f['style'][_0x10aaf4(0x2da)]='flex',_0x10a88f[_0x10aaf4(0x284)][_0x10aaf4(0x3ab)](_0x10aaf4(0x4b1)),_0xd6ccb1[_0x10aaf4(0x284)][_0x10aaf4(0x4f7)](_0x10aaf4(0x4b1)),_0x1a9b77['classList'][_0x10aaf4(0x4f7)](_0x10aaf4(0x4b1)),_0x15ddaa[_0x10aaf4(0x26e)]='',_0x3a3480['classList'][_0x10aaf4(0x4f7)](_0x10aaf4(0x4b1)),_0x4656c5[_0x10aaf4(0x284)]['add'](_0x10aaf4(0x4b1)),_0x1c81a6[_0x10aaf4(0x3e2)]=async()=>{const _0x50dbe8=_0x10aaf4;if(_0x1c81a6[_0x50dbe8(0x242)]){console[_0x50dbe8(0x22e)]('Deletion\x20already\x20in\x20progress,\x20ignoring\x20click.');return;}if(confirm('Delete\x20this\x20post\x20from\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities\x20you\x20posted\x20to.')){_0x1c81a6[_0x50dbe8(0x242)]=!![];const _0x482597=_0x1c81a6[_0x50dbe8(0x26e)];_0x1c81a6[_0x50dbe8(0x26e)]=_0x50dbe8(0x36a),_0x1c81a6[_0x50dbe8(0x284)][_0x50dbe8(0x4f7)](_0x50dbe8(0x391)),_0x71e22a[_0x50dbe8(0x284)][_0x50dbe8(0x3ab)]('hidden');try{await deletePostAndCleanup(_0x180c4d,_0x353fb0[_0x50dbe8(0x379)],![],null),closeModal('deletePostModal'),refreshReportSummary(_0x2d4d60[_0x50dbe8(0x26b)]);}catch(_0x59ec96){console[_0x50dbe8(0x43d)](_0x50dbe8(0x3d4),_0x59ec96),alert(_0x50dbe8(0x4bc));}finally{_0x71e22a['classList'][_0x50dbe8(0x4f7)]('hidden'),_0x1c81a6[_0x50dbe8(0x242)]=![],_0x1c81a6['textContent']=_0x482597,_0x1c81a6['classList'][_0x50dbe8(0x3ab)]('loading');}}},_0x23eb8a[_0x10aaf4(0x3e2)]=()=>{const _0x28362c=_0x10aaf4;_0xd6ccb1[_0x28362c(0x284)][_0x28362c(0x3ab)]('hidden'),_0x1c81a6[_0x28362c(0x52f)][_0x28362c(0x2da)]='none',_0x23eb8a['style']['display']=_0x28362c(0x2d3),_0x50abc9[_0x28362c(0x4f1)]();};async function _0x1feb77(_0x1b6109){const _0x306dcd=_0x10aaf4,_0x1655ff=_0x1b6109['replace'](/^@/,''),_0x2a6329=collection(db,_0x306dcd(0x23d)),_0x579b54=query(_0x2a6329,where(_0x306dcd(0x49a),'==',_0x1655ff)),_0x1db3d7=await getDocs(_0x579b54);if(!_0x1db3d7[_0x306dcd(0x371)]){const _0x218e13=_0x1db3d7[_0x306dcd(0x55b)][0x0];return{'uid':_0x218e13['id'],..._0x218e13[_0x306dcd(0x3b1)]()};}return null;}_0xe79a77[_0x10aaf4(0x3e2)]=async()=>{const _0x5a1b61=_0x10aaf4,_0x5930ae=_0x50abc9['value'][_0x5a1b61(0x3b6)]();if(!_0x5930ae){_0x15ddaa[_0x5a1b61(0x26e)]=_0x5a1b61(0x1e2);return;}_0x15ddaa['textContent']='Checking...';const _0xcd9feb=await _0x1feb77(_0x5930ae);_0xcd9feb?(_0x430ef7=_0xcd9feb['uid'],_0x4c2dde[_0x5a1b61(0x26e)]=_0x5930ae,_0x15ddaa[_0x5a1b61(0x26e)]='',_0x3a3480[_0x5a1b61(0x284)]['remove'](_0x5a1b61(0x4b1)),_0x4656c5['classList']['remove'](_0x5a1b61(0x4b1)),_0x50abc9[_0x5a1b61(0x242)]=!![],_0xe79a77[_0x5a1b61(0x242)]=!![]):(_0x15ddaa[_0x5a1b61(0x26e)]=_0x5a1b61(0x540),_0x430ef7=null);},_0x158632[_0x10aaf4(0x3e2)]=()=>{const _0x5916f4=_0x10aaf4;_0x3a3480[_0x5916f4(0x284)][_0x5916f4(0x4f7)](_0x5916f4(0x4b1)),_0x4656c5['classList']['add'](_0x5916f4(0x4b1)),_0x50abc9[_0x5916f4(0x242)]=![],_0xe79a77[_0x5916f4(0x242)]=![],_0x50abc9[_0x5916f4(0x361)]='',_0x15ddaa[_0x5916f4(0x26e)]='',_0x50abc9['focus']();},_0x4656c5[_0x10aaf4(0x3e2)]=async()=>{const _0x68636f=_0x10aaf4;if(_0x4656c5[_0x68636f(0x242)]){console['log']('Swap\x20deletion\x20already\x20in\x20progress,\x20ignoring\x20click.');return;}if(!_0x430ef7){_0x15ddaa[_0x68636f(0x26e)]=_0x68636f(0x51e);return;}const _0x5a00fb=_0x4c2dde[_0x68636f(0x26e)];if(confirm(_0x68636f(0x30e)+_0x5a00fb+_0x68636f(0x3b8))){_0x4656c5[_0x68636f(0x242)]=!![];const _0x31c6f2=_0x4656c5[_0x68636f(0x26e)];_0x4656c5[_0x68636f(0x26e)]='Deleting...',_0x4656c5[_0x68636f(0x284)][_0x68636f(0x4f7)]('loading'),_0x71e22a[_0x68636f(0x284)][_0x68636f(0x3ab)](_0x68636f(0x4b1));try{await deletePostAndCleanup(_0x180c4d,_0x353fb0[_0x68636f(0x379)],!![],_0x430ef7),_0xd6ccb1[_0x68636f(0x284)][_0x68636f(0x4f7)](_0x68636f(0x4b1)),_0x1a9b77['classList'][_0x68636f(0x3ab)](_0x68636f(0x4b1)),_0x17decd[_0x68636f(0x26e)]='Thanks!\x20You\x20and\x20'+_0x5a00fb+_0x68636f(0x547),_0x53f5b8['textContent']=_0x68636f(0x1f5),refreshReportSummary(_0x2d4d60[_0x68636f(0x26b)]);}catch(_0x412716){console[_0x68636f(0x43d)]('Swap\x20and\x20deletion\x20failed:',_0x412716),alert(_0x68636f(0x1fa));}finally{_0x71e22a[_0x68636f(0x284)][_0x68636f(0x4f7)](_0x68636f(0x4b1)),_0x4656c5[_0x68636f(0x242)]=![],_0x4656c5['textContent']=_0x31c6f2,_0x4656c5[_0x68636f(0x284)]['remove'](_0x68636f(0x391));}}};function _0x663660(){const _0x280d82=_0x10aaf4;_0xd6ccb1[_0x280d82(0x284)]['add'](_0x280d82(0x4b1)),_0x1a9b77[_0x280d82(0x284)][_0x280d82(0x4f7)](_0x280d82(0x4b1)),_0x15ddaa[_0x280d82(0x26e)]='',_0x3a3480['classList'][_0x280d82(0x4f7)]('hidden'),_0x4656c5[_0x280d82(0x284)][_0x280d82(0x4f7)](_0x280d82(0x4b1)),_0x1c81a6[_0x280d82(0x52f)][_0x280d82(0x2da)]='block',_0x23eb8a[_0x280d82(0x52f)][_0x280d82(0x2da)]=_0x280d82(0x21e),_0x50abc9[_0x280d82(0x242)]=![],_0xe79a77['disabled']=![],_0x50abc9[_0x280d82(0x361)]='',_0x53f5b8[_0x280d82(0x26e)]=_0x280d82(0x474),_0x430ef7=null;}_0x10a88f[_0x10aaf4(0x52f)]['display']=_0x10aaf4(0x4a5),_0x10a88f['classList'][_0x10aaf4(0x3ab)](_0x10aaf4(0x4b1)),_0x663660(),_0x53f5b8[_0x10aaf4(0x3e2)]=()=>{const _0x35036b=_0x10aaf4;closeModal(_0x35036b(0x4cd)),_0x663660();};}async function deletePostAndCleanup(_0xb2227a,_0x6cfb2d,_0x532797,_0x4af33a){const _0x10f57c=_0x6d63e4,_0x2e202e=doc(db,_0x10f57c(0x4d3),communityId,'posts',_0xb2227a),_0x331674=collection(db,_0x10f57c(0x4d3),communityId,'posts',_0xb2227a,_0x10f57c(0x2a6));await runTransaction(db,async _0x345738=>{const _0x4865b6=_0x10f57c;if(_0x532797&&_0x4af33a){const _0x20fe15=doc(db,_0x4865b6(0x23d),auth['currentUser'][_0x4865b6(0x26b)]),_0x46f9a4=doc(db,_0x4865b6(0x23d),_0x4af33a),_0x22eaa7=await _0x345738[_0x4865b6(0x401)](_0x20fe15),_0xa8f820=await _0x345738['get'](_0x46f9a4);if(!_0x22eaa7[_0x4865b6(0x4e4)]()||!_0xa8f820[_0x4865b6(0x4e4)]())throw new Error('User\x20or\x20partner\x20not\x20found.');const _0x5c5d53=(_0x22eaa7[_0x4865b6(0x3b1)]()['swaps']||0x0)+0x1,_0x351662=(_0xa8f820[_0x4865b6(0x3b1)]()['swaps']||0x0)+0x1;_0x345738[_0x4865b6(0x44e)](_0x20fe15,{'swaps':_0x5c5d53}),_0x345738[_0x4865b6(0x44e)](_0x46f9a4,{'swaps':_0x351662});}_0x345738[_0x4865b6(0x1e5)](_0x2e202e);}),await deleteCollection(_0x331674);const _0x25f5c8=_0x6cfb2d[_0x10f57c(0x473)](_0x2c537f=>{const _0x268f90=_0x10f57c,_0x16a4e1=ref(storage,_0x2c537f);return deleteObject(_0x16a4e1)[_0x268f90(0x2d4)](_0x56ff4f=>console[_0x268f90(0x43d)](_0x268f90(0x26a),_0x56ff4f));});await Promise[_0x10f57c(0x2c8)](_0x25f5c8);const _0x10bc71=document['getElementById'](_0x10f57c(0x4d6)+_0xb2227a);_0x10bc71?(_0x10bc71[_0x10f57c(0x3ab)](),console[_0x10f57c(0x22e)](_0x10f57c(0x4bf)+_0xb2227a+_0x10f57c(0x469))):console[_0x10f57c(0x22e)](_0x10f57c(0x21f)+_0xb2227a+_0x10f57c(0x273)),postCache[_0x10f57c(0x1e5)](_0xb2227a),loadedPostIds[_0x10f57c(0x1e5)](_0xb2227a),PaginationState[_0x10f57c(0x328)][_0x10f57c(0x1e5)](_0xb2227a),totalYourPosts=0x0,await loadYourPosts(auth['currentUser'][_0x10f57c(0x26b)]),await loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,await loadCarouselPosts(communityId);}async function deleteCollection(_0x3a519d,_0x2e8d26=0x1f4){const _0x28f61b=_0x6d63e4,_0x5c621c=query(_0x3a519d,limit(_0x2e8d26)),_0x2dbad0=await getDocs(_0x5c621c);if(_0x2dbad0[_0x28f61b(0x371)])return;const _0xf3f2dd=writeBatch(db);for(const _0x28ccf4 of _0x2dbad0[_0x28f61b(0x55b)]){const _0x8a02ad=collection(db,_0x28ccf4[_0x28f61b(0x269)]['path'],_0x28f61b(0x2a4));await deleteCollection(_0x8a02ad,_0x2e8d26),_0xf3f2dd[_0x28f61b(0x1e5)](_0x28ccf4['ref']);}await _0xf3f2dd[_0x28f61b(0x3c1)](),_0x2dbad0[_0x28f61b(0x1b1)]===_0x2e8d26&&await deleteCollection(_0x3a519d,_0x2e8d26);}function setupYourPostsCarousel(_0x9b5ec7){const _0x18ccec=_0x6d63e4,_0x3aa0d6=document[_0x18ccec(0x4fb)](_0x18ccec(0x202)+_0x9b5ec7+'-your'),_0x298ae0=_0x3aa0d6['querySelector'](_0x18ccec(0x1c6)+_0x9b5ec7+_0x18ccec(0x4ac)),_0x9ef659=_0x3aa0d6[_0x18ccec(0x4cc)](_0x18ccec(0x34d)+_0x9b5ec7+_0x18ccec(0x4ac)),_0x259914=_0x3aa0d6[_0x18ccec(0x4cc)](_0x18ccec(0x36c));let _0x52dc17=JSON[_0x18ccec(0x2cf)](_0x3aa0d6[_0x18ccec(0x3f5)][_0x18ccec(0x3a7)]||'[]');if(!_0x298ae0||!_0x9ef659||!_0x259914){console['error'](_0x18ccec(0x280)+_0x9b5ec7+_0x18ccec(0x22c));return;}_0x52dc17[_0x18ccec(0x3cb)]===0x0&&(_0x52dc17=[_0x18ccec(0x1c0),_0x18ccec(0x1c0)]);_0x259914[_0x18ccec(0x34c)]=_0x52dc17[0x0],_0x259914[_0x18ccec(0x3f5)][_0x18ccec(0x52a)]='0';let _0x78759a=0x0;_0x298ae0[_0x18ccec(0x40b)](_0x18ccec(0x3b5),_0x298ae0[_0x18ccec(0x513)]),_0x9ef659['removeEventListener']('click',_0x9ef659[_0x18ccec(0x513)]),_0x298ae0[_0x18ccec(0x513)]=_0x17dadd=>{const _0x2ab10f=_0x18ccec;_0x17dadd[_0x2ab10f(0x2e9)](),_0x17dadd[_0x2ab10f(0x48f)](),_0x78759a=(_0x78759a-0x1+_0x52dc17['length'])%_0x52dc17['length'],_0x259914['src']=_0x52dc17[_0x78759a],_0x259914[_0x2ab10f(0x3f5)][_0x2ab10f(0x52a)]=_0x78759a;},_0x9ef659[_0x18ccec(0x513)]=_0x497e14=>{const _0x213125=_0x18ccec;_0x497e14[_0x213125(0x2e9)](),_0x497e14['stopPropagation'](),_0x78759a=(_0x78759a+0x1)%_0x52dc17['length'],_0x259914[_0x213125(0x34c)]=_0x52dc17[_0x78759a],_0x259914[_0x213125(0x3f5)]['index']=_0x78759a;},_0x298ae0[_0x18ccec(0x48a)](_0x18ccec(0x3b5),_0x298ae0[_0x18ccec(0x513)]),_0x9ef659[_0x18ccec(0x48a)]('click',_0x9ef659['_carouselHandler']);}function setupCommunityCarousel(_0xdf366){const _0x1736a6=_0x6d63e4,_0x83273=document['getElementById']('carousel-'+_0xdf366+_0x1736a6(0x478)),_0x292473=_0x83273[_0x1736a6(0x4cc)]('.carousel-prev[data-post-id=\x22'+_0xdf366+'-community\x22]'),_0x535182=_0x83273[_0x1736a6(0x4cc)](_0x1736a6(0x34d)+_0xdf366+'-community\x22]'),_0x7a3207=_0x83273[_0x1736a6(0x4cc)](_0x1736a6(0x36c));let _0x3ebeb5=JSON[_0x1736a6(0x2cf)](_0x83273[_0x1736a6(0x3f5)][_0x1736a6(0x3a7)]||'[]');if(!_0x292473||!_0x535182||!_0x7a3207){console[_0x1736a6(0x43d)](_0x1736a6(0x4db)+_0xdf366+_0x1736a6(0x22c));return;}_0x3ebeb5['length']===0x0&&(_0x3ebeb5=[_0x1736a6(0x1c0),_0x1736a6(0x1c0)]);_0x7a3207[_0x1736a6(0x34c)]=_0x3ebeb5[0x0],_0x7a3207['dataset']['index']='0';let _0x44460e=0x0;_0x292473['removeEventListener'](_0x1736a6(0x3b5),_0x292473[_0x1736a6(0x513)]),_0x535182[_0x1736a6(0x40b)](_0x1736a6(0x3b5),_0x535182[_0x1736a6(0x513)]),_0x292473[_0x1736a6(0x513)]=_0x30b4ce=>{const _0x772f6=_0x1736a6;_0x30b4ce['preventDefault'](),_0x30b4ce['stopPropagation'](),_0x44460e=(_0x44460e-0x1+_0x3ebeb5[_0x772f6(0x3cb)])%_0x3ebeb5[_0x772f6(0x3cb)],_0x7a3207[_0x772f6(0x34c)]=_0x3ebeb5[_0x44460e],_0x7a3207[_0x772f6(0x3f5)][_0x772f6(0x52a)]=_0x44460e;},_0x535182[_0x1736a6(0x513)]=_0x492f19=>{const _0x1159d9=_0x1736a6;_0x492f19['preventDefault'](),_0x492f19['stopPropagation'](),_0x44460e=(_0x44460e+0x1)%_0x3ebeb5[_0x1159d9(0x3cb)],_0x7a3207[_0x1159d9(0x34c)]=_0x3ebeb5[_0x44460e],_0x7a3207[_0x1159d9(0x3f5)][_0x1159d9(0x52a)]=_0x44460e;},_0x292473['addEventListener'](_0x1736a6(0x3b5),_0x292473[_0x1736a6(0x513)]),_0x535182[_0x1736a6(0x48a)]('click',_0x535182['_carouselHandler']);}let lastCarouselDoc=null,firstCarouselDoc=null,totalCarouselPosts=0x0,lastFilterState={'lookingFor':'','offering':''},cachedMemberCount=null;async function getMemberCount(_0x554bbf){const _0x309120=_0x6d63e4;if(cachedMemberCount!==null)return cachedMemberCount;const _0x4c3b16=doc(db,'communities',_0x554bbf),_0x582383=await getDoc(_0x4c3b16);if(!_0x582383['exists']())return console[_0x309120(0x43d)](_0x309120(0x48b)),0x0;return cachedMemberCount=_0x582383[_0x309120(0x3b1)]()[_0x309120(0x435)]||0x0,cachedMemberCount;}async function loadCarouselPosts(_0x2be9bf,_0x5e0c7e=0x1){const _0x53ab6e=_0x6d63e4,_0x5450ac=document[_0x53ab6e(0x4fb)](_0x53ab6e(0x20e)),_0x47f52d=document[_0x53ab6e(0x4fb)]('carouselPrevBtn'),_0x2d800e=document[_0x53ab6e(0x4fb)]('carouselNextBtn'),_0x500783=document[_0x53ab6e(0x4fb)](_0x53ab6e(0x232))?.[_0x53ab6e(0x361)]||'',_0x17c4ae=document[_0x53ab6e(0x4fb)]('offeringFilter')?.[_0x53ab6e(0x361)]||'',_0x1f9367=window[_0x53ab6e(0x4c2)]<0x300?0x2:0x4;_0x5450ac[_0x53ab6e(0x381)]='<div\x20class=\x22loading\x22>â³\x20Loading...</div>';const _0x270869=await getMemberCount(_0x2be9bf),_0x134e7e=Math[_0x53ab6e(0x414)](0x5,Math['ceil'](_0x270869*0.01)),_0x5ebd2b={'lookingFor':_0x500783,'offering':_0x17c4ae};if(totalCarouselPosts===0x0||lastFilterState[_0x53ab6e(0x22b)]!==_0x5ebd2b['lookingFor']||lastFilterState[_0x53ab6e(0x24b)]!==_0x5ebd2b[_0x53ab6e(0x24b)]){const _0x236aae=query(collection(db,_0x53ab6e(0x4d3),_0x2be9bf,'posts'),where('likes','>=',_0x134e7e),..._0x500783?[where(_0x53ab6e(0x22b),'==',_0x500783)]:[],..._0x17c4ae?[where('offering','==',_0x17c4ae)]:[]);totalCarouselPosts=(await getDocs(_0x236aae))[_0x53ab6e(0x1b1)],lastFilterState=_0x5ebd2b,console[_0x53ab6e(0x22e)](_0x53ab6e(0x1e8)+_0x2be9bf+':\x20'+totalCarouselPosts);}const _0x1af11f=Math[_0x53ab6e(0x414)](0x0,Math['ceil'](totalCarouselPosts/_0x1f9367)-0x1);if(carouselIndex<0x0)carouselIndex=_0x1af11f;else carouselIndex>_0x1af11f&&(carouselIndex=0x0);let _0xf118b9=query(collection(db,_0x53ab6e(0x4d3),_0x2be9bf,'posts'),where(_0x53ab6e(0x1b5),'>=',_0x134e7e),..._0x500783?[where('lookingFor','==',_0x500783)]:[],..._0x17c4ae?[where(_0x53ab6e(0x24b),'==',_0x17c4ae)]:[],orderBy(_0x53ab6e(0x1b5),_0x53ab6e(0x2a9)));if(_0x5e0c7e>0x0&&carouselIndex>0x0&&lastCarouselDoc&&carouselIndex<=_0x1af11f)_0xf118b9=query(_0xf118b9,startAfter(lastCarouselDoc),limit(_0x1f9367));else{if(_0x5e0c7e<0x0&&carouselIndex>=0x0&&firstCarouselDoc&&carouselIndex<_0x1af11f)_0xf118b9=query(_0xf118b9,endBefore(firstCarouselDoc),limitToLast(_0x1f9367));else{if(carouselIndex===0x0||totalCarouselPosts<=_0x1f9367)_0xf118b9=query(_0xf118b9,limit(_0x1f9367));else carouselIndex===_0x1af11f&&(_0xf118b9=query(collection(db,_0x53ab6e(0x4d3),_0x2be9bf,_0x53ab6e(0x31e)),where(_0x53ab6e(0x1b5),'>=',_0x134e7e),..._0x500783?[where(_0x53ab6e(0x22b),'==',_0x500783)]:[],..._0x17c4ae?[where('offering','==',_0x17c4ae)]:[],orderBy('likes','desc'),limitToLast(_0x1f9367)));}}const _0x1972f1=await getDocs(_0xf118b9),_0x51a27f=_0x1972f1[_0x53ab6e(0x55b)][_0x53ab6e(0x473)](_0x719565=>({'id':_0x719565['id'],..._0x719565[_0x53ab6e(0x3b1)](),'communityId':_0x2be9bf}));if(_0x1972f1['docs'][_0x53ab6e(0x3cb)]>0x0)lastCarouselDoc=_0x1972f1['docs'][_0x1972f1[_0x53ab6e(0x55b)][_0x53ab6e(0x3cb)]-0x1],firstCarouselDoc=_0x1972f1['docs'][0x0];else{if(_0x5e0c7e>0x0)carouselIndex=0x0,_0xf118b9=query(collection(db,_0x53ab6e(0x4d3),_0x2be9bf,_0x53ab6e(0x31e)),where(_0x53ab6e(0x1b5),'>=',_0x134e7e),..._0x500783?[where(_0x53ab6e(0x22b),'==',_0x500783)]:[],..._0x17c4ae?[where(_0x53ab6e(0x24b),'==',_0x17c4ae)]:[],orderBy(_0x53ab6e(0x1b5),'desc'),limit(_0x1f9367));else _0x5e0c7e<0x0&&(carouselIndex=_0x1af11f,_0xf118b9=query(collection(db,'communities',_0x2be9bf,_0x53ab6e(0x31e)),where(_0x53ab6e(0x1b5),'>=',_0x134e7e),..._0x500783?[where(_0x53ab6e(0x22b),'==',_0x500783)]:[],..._0x17c4ae?[where(_0x53ab6e(0x24b),'==',_0x17c4ae)]:[],orderBy(_0x53ab6e(0x1b5),_0x53ab6e(0x2a9)),limitToLast(_0x1f9367)));const _0x3f05e7=await getDocs(_0xf118b9);_0x51a27f[_0x53ab6e(0x22f)](..._0x3f05e7['docs'][_0x53ab6e(0x473)](_0x55b480=>({'id':_0x55b480['id'],..._0x55b480[_0x53ab6e(0x3b1)](),'communityId':_0x2be9bf}))),_0x3f05e7[_0x53ab6e(0x55b)][_0x53ab6e(0x3cb)]>0x0&&(lastCarouselDoc=_0x3f05e7[_0x53ab6e(0x55b)][_0x3f05e7[_0x53ab6e(0x55b)][_0x53ab6e(0x3cb)]-0x1],firstCarouselDoc=_0x3f05e7[_0x53ab6e(0x55b)][0x0]);}_0x51a27f[_0x53ab6e(0x518)](_0x17276e=>{const _0x18d929=_0x53ab6e;!postCache[_0x18d929(0x493)](_0x17276e['id'])&&(postCache[_0x18d929(0x244)](_0x17276e['id'],_0x17276e),console[_0x18d929(0x22e)](_0x18d929(0x1f0)+_0x17276e['id']+_0x18d929(0x1ee)+_0x2be9bf));}),_0x5450ac[_0x53ab6e(0x381)]=_0x51a27f[_0x53ab6e(0x3cb)]===0x0?_0x53ab6e(0x29c):'';for(const _0x116c47 of _0x51a27f){if(_0x116c47[_0x53ab6e(0x2b4)]!==_0x2be9bf){console['log']('Skipping\x20carousel\x20post\x20'+_0x116c47['id']+_0x53ab6e(0x45a)+_0x116c47[_0x53ab6e(0x2b4)]+_0x53ab6e(0x47e)+_0x2be9bf);continue;}const _0xa565f8=await fetchUserData(_0x116c47[_0x53ab6e(0x39f)]),_0x4f6b1d=document[_0x53ab6e(0x2ff)]('div');_0x4f6b1d[_0x53ab6e(0x396)]='carousel-post',_0x4f6b1d['innerHTML']=_0x53ab6e(0x2fa)+(_0x116c47[_0x53ab6e(0x313)]||_0x53ab6e(0x2b3))+_0x53ab6e(0x3f9)+(_0x116c47[_0x53ab6e(0x22b)]||_0x53ab6e(0x2a0))+_0x53ab6e(0x289)+(_0x116c47[_0x53ab6e(0x24b)]||'N/A')+_0x53ab6e(0x4f6)+(_0x116c47[_0x53ab6e(0x1b5)]||0x0)+'</p>\x0a\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22'+_0x116c47[_0x53ab6e(0x39f)]+'\x22>'+(_0xa565f8[_0x53ab6e(0x3d8)]||_0x53ab6e(0x1bc))+'</span></p>\x0a\x20\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22'+_0x116c47['id']+'\x22>Copy\x20Post\x20ID</button>\x0a',_0x5450ac[_0x53ab6e(0x218)](_0x4f6b1d),_0x4f6b1d[_0x53ab6e(0x4cc)](_0x53ab6e(0x363))[_0x53ab6e(0x48a)](_0x53ab6e(0x3b5),()=>viewProfile(_0x116c47['userId'])),_0x4f6b1d[_0x53ab6e(0x4cc)](_0x53ab6e(0x4e7))[_0x53ab6e(0x48a)](_0x53ab6e(0x3b5),_0x42a7c1=>{const _0x2f7828=_0x53ab6e;_0x42a7c1[_0x2f7828(0x48f)](),copyPostId(_0x116c47['id']);});}_0x47f52d['disabled']=totalCarouselPosts===0x0,_0x2d800e[_0x53ab6e(0x242)]=totalCarouselPosts===0x0,console[_0x53ab6e(0x22e)](_0x53ab6e(0x3de)+_0x2be9bf+_0x53ab6e(0x1f6)+carouselIndex);}function slideCarousel(_0xf8e3a7){carouselIndex+=_0xf8e3a7,loadCarouselPosts(communityId,_0xf8e3a7);}const delay=_0x2c0ad7=>new Promise(_0x176ec3=>setTimeout(_0x176ec3,_0x2c0ad7)),POST_CACHE_KEY=_0x6d63e4(0x366)+communityId,LIKED_PREFS_KEY=_0x6d63e4(0x4d5)+communityId,CACHE_TIMESTAMP_KEY=_0x6d63e4(0x4b6)+communityId,CACHE_EXPIRY_HOURS=0x8,PaginationState={'POSTS_PER_PAGE':0xa,'currentPage':0x1,'displayedPostIds':new Set()};function isCacheExpired(){const _0x500260=_0x6d63e4,_0x32a734=sessionStorage[_0x500260(0x246)](CACHE_TIMESTAMP_KEY);if(!_0x32a734)return!![];const _0x43912e=Date[_0x500260(0x321)]()-parseInt(_0x32a734);return _0x43912e>CACHE_EXPIRY_HOURS*0x3c*0x3c*0x3e8;}function resetCache(){const _0xc33fb=_0x6d63e4;sessionStorage[_0xc33fb(0x45e)](POST_CACHE_KEY),sessionStorage['removeItem'](LIKED_PREFS_KEY),sessionStorage['setItem'](CACHE_TIMESTAMP_KEY,Date['now']()[_0xc33fb(0x4fd)]());}function getLikedPrefs(){const _0x407679=_0x6d63e4;if(isCacheExpired())resetCache();const _0x20b0f3=sessionStorage['getItem'](LIKED_PREFS_KEY);if(!_0x20b0f3)return{'categories':new Set(),'offerings':new Set()};const _0x7ce411=JSON[_0x407679(0x2cf)](_0x20b0f3);return{'categories':new Set(_0x7ce411['categories']),'offerings':new Set(_0x7ce411[_0x407679(0x1e6)])};}function addLikedPref(_0x41d99b,_0x75bf99){const _0x4e4ea3=_0x6d63e4,_0x477666=getLikedPrefs();_0x477666['categories'][_0x4e4ea3(0x4f7)](_0x41d99b),_0x477666[_0x4e4ea3(0x1e6)][_0x4e4ea3(0x4f7)](_0x75bf99),sessionStorage[_0x4e4ea3(0x1cf)](LIKED_PREFS_KEY,JSON[_0x4e4ea3(0x377)]({'categories':Array['from'](_0x477666[_0x4e4ea3(0x482)]),'offerings':Array[_0x4e4ea3(0x4aa)](_0x477666[_0x4e4ea3(0x1e6)])}));}function normalizePostData(_0x5ca67b){const _0x5abeaa=_0x6d63e4;return{..._0x5ca67b,'createdAt':_0x5ca67b[_0x5abeaa(0x43b)]instanceof Object&&_0x5abeaa(0x23c)in _0x5ca67b[_0x5abeaa(0x43b)]?_0x5ca67b[_0x5abeaa(0x43b)][_0x5abeaa(0x23c)]():new Date(_0x5ca67b['createdAt'])};}function getCachedPosts(){const _0x325947=_0x6d63e4;if(isCacheExpired())resetCache();const _0x20c32a=sessionStorage[_0x325947(0x246)](POST_CACHE_KEY);if(!_0x20c32a)return new Map();const _0x3b0903=JSON[_0x325947(0x2cf)](_0x20c32a);return new Map(_0x3b0903['map'](([_0x224b12,_0x4e4827])=>{const _0x35dc2b=_0x325947;return _0x4e4827['data'][_0x35dc2b(0x43b)]=new Date(_0x4e4827['data'][_0x35dc2b(0x43b)]),[_0x224b12,_0x4e4827];}));}function setCachedPosts(_0x9c660c){const _0x153a13=_0x6d63e4,_0xe2945d=0x3e8,_0x1484f6=new Map(Array[_0x153a13(0x4aa)](_0x9c660c[_0x153a13(0x1f7)]())[_0x153a13(0x473)](([_0x2f9bd7,_0x13a7ba])=>{const _0x1d3070=_0x153a13;return[_0x2f9bd7,{..._0x13a7ba,'data':{..._0x13a7ba[_0x1d3070(0x3b1)],'createdAt':_0x13a7ba[_0x1d3070(0x3b1)]['createdAt'][_0x1d3070(0x260)]()}}];}));if(_0x1484f6['size']>_0xe2945d){const _0xd63c0b=_0x1484f6[_0x153a13(0x1b1)]-_0xe2945d,_0x343bb7=Array['from'](_0x1484f6[_0x153a13(0x4c8)]())['slice'](0x0,_0xd63c0b);_0x343bb7[_0x153a13(0x518)](_0x3bff6c=>_0x1484f6[_0x153a13(0x1e5)](_0x3bff6c)),console[_0x153a13(0x22e)]('Trimmed\x20'+_0xd63c0b+_0x153a13(0x378));}sessionStorage[_0x153a13(0x1cf)](POST_CACHE_KEY,JSON['stringify'](Array[_0x153a13(0x4aa)](_0x1484f6['entries']()))),!sessionStorage[_0x153a13(0x246)](CACHE_TIMESTAMP_KEY)&&sessionStorage[_0x153a13(0x1cf)](CACHE_TIMESTAMP_KEY,Date[_0x153a13(0x321)]()[_0x153a13(0x4fd)]());}function getPostScore(_0x2a3ef1,_0x3fea46){const _0x48bfd8=_0x6d63e4,_0x1723cf=Date['now'](),_0x41d9c7=(_0x1723cf-_0x2a3ef1[_0x48bfd8(0x43b)]['getTime']())/(0x3e8*0x3c*0x3c),_0x322b3e=Math[_0x48bfd8(0x414)](0x0,0x1e-_0x41d9c7/0x18)/0x1e,_0x317e60=Math[_0x48bfd8(0x2b2)](_0x2a3ef1[_0x48bfd8(0x1b5)]||0x0,0x32)/0x32,_0x5013e4=Math[_0x48bfd8(0x2b2)](_0x2a3ef1[_0x48bfd8(0x2e8)]||0x0,0x14)/0x14;let _0x284066=0.4*_0x317e60+0.4*_0x5013e4+0.2*_0x322b3e;const _0x3ebc65=new Set(_0x3fea46[_0x48bfd8(0x482)]),_0xc52444=new Set(_0x3fea46['offerings']);return(_0x3ebc65[_0x48bfd8(0x493)](_0x2a3ef1[_0x48bfd8(0x1ba)])||_0xc52444[_0x48bfd8(0x493)](_0x2a3ef1[_0x48bfd8(0x24b)]))&&(_0x284066+=0.3),_0x41d9c7<0x18&&(_0x284066+=0.5),Math['min'](1.5,_0x284066);}async function loadPosts(_0x24d2d6,_0x57985f=![],_0x365668=PaginationState[_0x6d63e4(0x533)]){const _0x1d3dd6=_0x6d63e4;if(isFetching||isSearching)return;isFetching=!![];const _0x54dff5=document[_0x1d3dd6(0x4fb)](_0x1d3dd6(0x50e)),_0x252880=document[_0x1d3dd6(0x4fb)](_0x1d3dd6(0x291)),_0x2fcd2f={'category':document[_0x1d3dd6(0x4fb)](_0x1d3dd6(0x266))?.[_0x1d3dd6(0x361)]||'','lookingFor':document['getElementById'](_0x1d3dd6(0x232))?.[_0x1d3dd6(0x361)]||'','offering':document[_0x1d3dd6(0x4fb)](_0x1d3dd6(0x37b))?.[_0x1d3dd6(0x361)]||''};_0x57985f&&(_0x54dff5[_0x1d3dd6(0x381)]='',_0x252880[_0x1d3dd6(0x52f)][_0x1d3dd6(0x2da)]='none',loadedPostIds['clear'](),PaginationState[_0x1d3dd6(0x328)][_0x1d3dd6(0x2d5)](),lastPostDoc=null,postCache[_0x1d3dd6(0x2d5)](),PaginationState[_0x1d3dd6(0x533)]=0x1,resetCache(),console['log'](_0x1d3dd6(0x1b7)+_0x24d2d6));PaginationState['currentPage']=_0x365668;const _0x455a92=getCachedPosts(),_0x26bb92=getLikedPrefs(),_0x3acf47=0x19;let _0x11c21f=null;if(_0x455a92[_0x1d3dd6(0x1b1)]>0x0){const _0xe43885=Array['from'](_0x455a92[_0x1d3dd6(0x423)]())[_0x1d3dd6(0x1b4)](_0x1d47aa=>_0x1d47aa[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x2b4)]===_0x24d2d6)['map'](_0xf808ee=>_0xf808ee['data']['createdAt']['getTime']());_0x11c21f=_0xe43885[_0x1d3dd6(0x3cb)]>0x0?Math[_0x1d3dd6(0x414)](..._0xe43885):null,console[_0x1d3dd6(0x22e)](_0x1d3dd6(0x257)+_0xe43885['length']+_0x1d3dd6(0x3b2)+_0x24d2d6+_0x1d3dd6(0x458)+(_0x11c21f?new Date(_0x11c21f)[_0x1d3dd6(0x1ca)]():_0x1d3dd6(0x2a0)));}else console['log'](_0x1d3dd6(0x51c)+_0x24d2d6+_0x1d3dd6(0x228));const _0xf09012=(PaginationState[_0x1d3dd6(0x533)]-0x1)*PaginationState['POSTS_PER_PAGE'],_0xeb5955=_0xf09012+PaginationState['POSTS_PER_PAGE'];let _0x435a1f=Array[_0x1d3dd6(0x4aa)](_0x455a92['values']())[_0x1d3dd6(0x1b4)](_0x4cdeaf=>_0x4cdeaf[_0x1d3dd6(0x3b1)]['communityId']===_0x24d2d6)[_0x1d3dd6(0x473)](_0x23972d=>({..._0x23972d,'score':getPostScore(_0x23972d['data'],_0x26bb92)}))[_0x1d3dd6(0x1b4)](_0x537565=>(!_0x2fcd2f[_0x1d3dd6(0x1ba)]||_0x537565[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x1ba)]===_0x2fcd2f[_0x1d3dd6(0x1ba)])&&(!_0x2fcd2f[_0x1d3dd6(0x22b)]||_0x537565[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x22b)]===_0x2fcd2f[_0x1d3dd6(0x22b)])&&(!_0x2fcd2f[_0x1d3dd6(0x24b)]||_0x537565[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x24b)]===_0x2fcd2f[_0x1d3dd6(0x24b)]))[_0x1d3dd6(0x29f)]((_0x2077ff,_0x160244)=>_0x160244['score']-_0x2077ff['score']);const _0x5cd282=_0x435a1f[_0x1d3dd6(0x334)](_0xf09012,_0xeb5955)['filter'](_0x2c9d3b=>!PaginationState[_0x1d3dd6(0x328)][_0x1d3dd6(0x493)](_0x2c9d3b['id'])),_0x205a3c=_0x5cd282[_0x1d3dd6(0x3cb)]===PaginationState[_0x1d3dd6(0x32d)]||_0xf09012+_0x5cd282[_0x1d3dd6(0x3cb)]>=_0x435a1f[_0x1d3dd6(0x3cb)];if(!_0x205a3c||_0x57985f||_0x455a92['size']===0x0){let _0x4d95e3=query(collection(db,_0x1d3dd6(0x4d3),_0x24d2d6,_0x1d3dd6(0x31e)),..._0x2fcd2f['category']?[where(_0x1d3dd6(0x1ba),'==',_0x2fcd2f[_0x1d3dd6(0x1ba)])]:[],..._0x2fcd2f[_0x1d3dd6(0x22b)]?[where(_0x1d3dd6(0x22b),'==',_0x2fcd2f['lookingFor'])]:[],..._0x2fcd2f['offering']?[where(_0x1d3dd6(0x24b),'==',_0x2fcd2f[_0x1d3dd6(0x24b)])]:[],orderBy(_0x1d3dd6(0x43b),'desc'),limit(_0x3acf47),...lastPostDoc&&!_0x57985f?[startAfter(lastPostDoc)]:[],..._0x11c21f&&!_0x57985f?[where(_0x1d3dd6(0x43b),'>',new Date(_0x11c21f))]:[]);try{const _0xa4366=await getDocs(_0x4d95e3),_0x1cd628=_0xa4366[_0x1d3dd6(0x55b)][_0x1d3dd6(0x473)](_0x28bb11=>({'id':_0x28bb11['id'],'data':{...normalizePostData(_0x28bb11[_0x1d3dd6(0x3b1)]()),'communityId':_0x24d2d6},'score':getPostScore(normalizePostData(_0x28bb11['data']()),_0x26bb92)}));console['log'](_0x1d3dd6(0x54f)+_0x1cd628[_0x1d3dd6(0x3cb)]+'\x20new\x20posts\x20for\x20'+_0x24d2d6+'\x20('+_0x3acf47+'\x20reads)'),_0x1cd628[_0x1d3dd6(0x518)](_0x310f2b=>_0x455a92['set'](_0x310f2b['id'],_0x310f2b)),setCachedPosts(_0x455a92),_0x435a1f=Array[_0x1d3dd6(0x4aa)](_0x455a92[_0x1d3dd6(0x423)]())[_0x1d3dd6(0x1b4)](_0x3a40ab=>_0x3a40ab[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x2b4)]===_0x24d2d6)['map'](_0x458b57=>({..._0x458b57,'score':getPostScore(_0x458b57['data'],_0x26bb92)}))['filter'](_0x13aa99=>(!_0x2fcd2f[_0x1d3dd6(0x1ba)]||_0x13aa99['data'][_0x1d3dd6(0x1ba)]===_0x2fcd2f['category'])&&(!_0x2fcd2f[_0x1d3dd6(0x22b)]||_0x13aa99[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x22b)]===_0x2fcd2f[_0x1d3dd6(0x22b)])&&(!_0x2fcd2f[_0x1d3dd6(0x24b)]||_0x13aa99[_0x1d3dd6(0x3b1)][_0x1d3dd6(0x24b)]===_0x2fcd2f[_0x1d3dd6(0x24b)]))['sort']((_0x56e981,_0x352158)=>_0x352158[_0x1d3dd6(0x34f)]-_0x56e981[_0x1d3dd6(0x34f)]);}catch(_0x4d1291){console[_0x1d3dd6(0x43d)](_0x1d3dd6(0x1cb)+_0x24d2d6+':',_0x4d1291),_0x54dff5['innerHTML']='<p>Oops,\x20something\x20broke!\x20Refresh.</p>',isFetching=![];return;}}const _0x1412ec=_0x435a1f[_0x1d3dd6(0x334)](_0xf09012,_0xeb5955)[_0x1d3dd6(0x1b4)](_0x32d6e8=>!PaginationState[_0x1d3dd6(0x328)][_0x1d3dd6(0x493)](_0x32d6e8['id']));console[_0x1d3dd6(0x22e)]('Showing\x20'+_0x1412ec[_0x1d3dd6(0x3cb)]+'\x20posts\x20for\x20'+_0x24d2d6+'\x20on\x20page\x20'+PaginationState['currentPage']);if(_0x1412ec[_0x1d3dd6(0x3cb)]===0x0&&!initialPostsLoaded)_0x54dff5['innerHTML']=_0x1d3dd6(0x529),_0x252880[_0x1d3dd6(0x52f)][_0x1d3dd6(0x2da)]=_0x1d3dd6(0x2d3);else{totalPosts=totalPosts||parseInt(sessionStorage[_0x1d3dd6(0x246)]('totalPosts_'+_0x24d2d6))||await getTotalPosts(_0x24d2d6),sessionStorage[_0x1d3dd6(0x1cf)]('totalPosts_'+_0x24d2d6,totalPosts),initialPostsLoaded=!![],_0x1412ec[_0x1d3dd6(0x518)](_0x357bdf=>postCache[_0x1d3dd6(0x244)](_0x357bdf['id'],{'id':_0x357bdf['id'],'data':_0x357bdf[_0x1d3dd6(0x3b1)]}));const _0x16d577=query(collection(doc(db,'users',auth[_0x1d3dd6(0x224)][_0x1d3dd6(0x26b)]),'savedPosts'),where('communityId','==',_0x24d2d6)),_0xd9fd2=await getDocs(_0x16d577),_0x568069=new Set(_0xd9fd2[_0x1d3dd6(0x55b)][_0x1d3dd6(0x473)](_0x3cfc5b=>_0x3cfc5b[_0x1d3dd6(0x3b1)]()['postId']));_0x54dff5[_0x1d3dd6(0x381)]='',PaginationState[_0x1d3dd6(0x328)][_0x1d3dd6(0x2d5)](),await renderPosts({'docs':_0x1412ec[_0x1d3dd6(0x473)](_0x22b1e6=>({'id':_0x22b1e6['id'],'data':()=>_0x22b1e6[_0x1d3dd6(0x3b1)]}))},_0x54dff5,_0x568069),addPaginationControls(_0x54dff5,_0x435a1f[_0x1d3dd6(0x3cb)],_0x24d2d6),_0x252880['style']['display']=PaginationState[_0x1d3dd6(0x533)]*PaginationState[_0x1d3dd6(0x32d)]>=totalPosts?_0x1d3dd6(0x21e):_0x1d3dd6(0x2d3);}isFetching=![];}document['getElementById'](_0x6d63e4(0x266))?.[_0x6d63e4(0x48a)](_0x6d63e4(0x38d),()=>loadPosts(communityId,!![])),document['getElementById'](_0x6d63e4(0x232))?.[_0x6d63e4(0x48a)](_0x6d63e4(0x38d),()=>loadPosts(communityId,!![])),document[_0x6d63e4(0x4fb)](_0x6d63e4(0x37b))?.[_0x6d63e4(0x48a)](_0x6d63e4(0x38d),()=>loadPosts(communityId,!![]));async function renderPosts(_0x28c5ed,_0x23a384,_0x297a79){const _0x27885c=_0x6d63e4,_0x380254=await getCommData(),_0x23aa14=_0x380254?.[_0x27885c(0x357)]?.[_0x27885c(0x542)](auth[_0x27885c(0x224)][_0x27885c(0x26b)])||_0x380254?.[_0x27885c(0x49c)]===auth['currentUser'][_0x27885c(0x26b)],_0x3ab79e=[...new Set(_0x28c5ed[_0x27885c(0x55b)]['map'](_0x58f2a7=>_0x58f2a7[_0x27885c(0x3b1)]()[_0x27885c(0x39f)])[_0x27885c(0x1b4)](Boolean))];await fetchUserData(_0x3ab79e);for(const _0x3f90b1 of _0x28c5ed[_0x27885c(0x55b)]){const _0x5134c9=_0x3f90b1['id'];if(PaginationState['displayedPostIds']['has'](_0x5134c9))continue;if(PaginationState[_0x27885c(0x328)][_0x27885c(0x1b1)]>=PaginationState[_0x27885c(0x32d)])break;const _0x131ad3=postCache[_0x27885c(0x401)](_0x5134c9)?.[_0x27885c(0x3b1)]||_0x3f90b1['data']();if(_0x131ad3[_0x27885c(0x2b4)]&&_0x131ad3['communityId']!==communityId){console['log'](_0x27885c(0x2ac)+_0x5134c9+_0x27885c(0x45a)+_0x131ad3[_0x27885c(0x2b4)]+_0x27885c(0x47e)+communityId);continue;}PaginationState[_0x27885c(0x328)]['add'](_0x5134c9),loadedPostIds[_0x27885c(0x4f7)](_0x5134c9);const _0x3601cf=userDataCache[_0x131ad3[_0x27885c(0x39f)]]||{'profilePhoto':_0x27885c(0x4ed),'name':_0x27885c(0x1bc),'username':_0x27885c(0x23f)},_0x18eb12=_0x380254?.[_0x27885c(0x357)]?.[_0x27885c(0x542)](_0x131ad3[_0x27885c(0x39f)])||_0x380254?.['creatorId']===_0x131ad3[_0x27885c(0x39f)],_0x28b420=query(collection(db,_0x27885c(0x4d3),communityId,'posts',_0x5134c9,_0x27885c(0x2a6)),orderBy('createdAt','desc')),_0x2d87a0=await getDocs(_0x28b420),_0x1d0758=_0x2d87a0['size'],_0x5751f6=_0x131ad3[_0x27885c(0x43b)]?new Date(_0x131ad3[_0x27885c(0x43b)])[_0x27885c(0x1ca)]():_0x27885c(0x2a0),_0x151aab=_0x131ad3[_0x27885c(0x379)]||[],_0x3bd8db=_0x151aab[_0x27885c(0x3cb)],_0x2e3096=await getPostReportStatus(_0x5134c9),_0x215088=_0x297a79[_0x27885c(0x493)](_0x5134c9),_0x357731=categoryDisplayMap[_0x131ad3[_0x27885c(0x1ba)]]||_0x131ad3[_0x27885c(0x1ba)];if(_0x2e3096?.[_0x27885c(0x2ec)]){PaginationState[_0x27885c(0x328)]['delete'](_0x5134c9),loadedPostIds['delete'](_0x5134c9);continue;}const _0x404c28=document[_0x27885c(0x2ff)](_0x27885c(0x2f6));_0x404c28[_0x27885c(0x396)]=_0x27885c(0x33f),_0x404c28['id']=_0x27885c(0x4d6)+_0x5134c9,_0x404c28[_0x27885c(0x381)]=_0x27885c(0x210)+_0x3601cf[_0x27885c(0x407)]+_0x27885c(0x404)+_0x131ad3[_0x27885c(0x39f)]+'\x22>'+_0x3601cf['name']+_0x27885c(0x51a)+_0x3601cf[_0x27885c(0x49a)]+_0x27885c(0x380)+(_0x18eb12?_0x27885c(0x2d9):'')+_0x27885c(0x28d)+(_0x131ad3[_0x27885c(0x313)]||_0x27885c(0x2b3))+_0x27885c(0x344)+(_0x131ad3[_0x27885c(0x3c3)]||'')+_0x27885c(0x31b)+_0x5134c9+_0x27885c(0x483)+JSON[_0x27885c(0x377)](_0x151aab)+_0x27885c(0x3e8)+(_0x3bd8db>0x1?'<button\x20class=\x22carousel-prev\x22\x20data-post-id=\x22'+_0x5134c9+'-community\x22><</button>':'')+'\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x151aab[0x0]||_0x27885c(0x1c0))+_0x27885c(0x40e)+(_0x3bd8db>0x1?_0x27885c(0x33d)+_0x5134c9+_0x27885c(0x450):'')+_0x27885c(0x457)+(_0x131ad3[_0x27885c(0x347)]?.[_0x27885c(0x3d8)]||_0x27885c(0x2a0))+'</p>\x0a\x20\x20<p>Category:\x20'+_0x357731+_0x27885c(0x4d0)+(_0x131ad3[_0x27885c(0x22b)]||_0x27885c(0x2a0))+_0x27885c(0x1b3)+(_0x131ad3[_0x27885c(0x24b)]||_0x27885c(0x2a0))+_0x27885c(0x2ab)+_0x5751f6+_0x27885c(0x2b9)+_0x5134c9+_0x27885c(0x544)+_0x5134c9+_0x27885c(0x519)+_0x5134c9+'\x22>'+((_0x131ad3[_0x27885c(0x531)]||[])[_0x27885c(0x542)](auth['currentUser'][_0x27885c(0x26b)])?_0x27885c(0x4e0):'â¤ï¸\x20Like')+'\x20('+(_0x131ad3[_0x27885c(0x1b5)]||0x0)+')</button>\x0a\x20\x20<button\x20class=\x22save-toggle-btn\x22\x20data-post-id=\x22'+_0x5134c9+'\x22\x20data-community-id=\x22'+communityId+'\x22>'+(_0x215088?'ðŸ—‘ï¸\x20Unsave':_0x27885c(0x53a))+_0x27885c(0x524)+_0x5134c9+_0x27885c(0x4d4)+(_0x131ad3[_0x27885c(0x39f)]===auth[_0x27885c(0x224)][_0x27885c(0x26b)]||_0x23aa14?'<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-'+_0x5134c9+_0x27885c(0x3eb):'')+'\x0a\x20\x20'+(_0x2e3096?.['isOwner']&&_0x2e3096['reportCount']===0x1?_0x27885c(0x464)+_0x5134c9+_0x27885c(0x253):'')+_0x27885c(0x30d)+(_0x2e3096?.['isOwner']&&_0x2e3096['reportCount']>=0x2?_0x27885c(0x464)+_0x5134c9+_0x27885c(0x422)+_0x2e3096[_0x27885c(0x30c)]+'\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20</div>':'')+'\x0a\x20\x20'+(_0x23aa14&&_0x2e3096?.['reportCount']>0x0?_0x27885c(0x34b)+_0x5134c9+_0x27885c(0x422)+_0x2e3096[_0x27885c(0x30c)]+_0x27885c(0x265)+(_0x2e3096['reportCount']>0x1?'s':'')+_0x27885c(0x208)+_0x5134c9+_0x27885c(0x31d)+_0x5134c9+_0x27885c(0x430):'')+_0x27885c(0x46a)+_0x5134c9+'\x22>'+_0x1d0758+_0x27885c(0x285)+_0x5134c9+'\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20<form\x20id=\x22commentForm-'+_0x5134c9+_0x27885c(0x370)+_0x5134c9+_0x27885c(0x4ce),_0x23a384[_0x27885c(0x218)](_0x404c28);const _0xb25c88=_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x1bf)+_0x5134c9+'\x22]');_0xb25c88[_0x27885c(0x48a)]('click',async()=>{const _0x553b43=_0x27885c,_0x509812=doc(db,_0x553b43(0x4d3),communityId,_0x553b43(0x31e),_0x5134c9),_0x2d646c=await getDoc(_0x509812);if(!_0x2d646c['exists']()){alert('Post\x20not\x20foundâ€”mightâ€™ve\x20been\x20deleted!');return;}const _0xa63a4b=normalizePostData(_0x2d646c[_0x553b43(0x3b1)]()),_0x2fb91a=auth['currentUser'][_0x553b43(0x26b)],_0x45a952=_0xa63a4b[_0x553b43(0x531)]||[];let _0x1cc7a7=_0xa63a4b[_0x553b43(0x1b5)]||0x0,_0x528615=[..._0x45a952];_0x45a952['includes'](_0x2fb91a)?(_0x528615=_0x528615[_0x553b43(0x1b4)](_0xed0fa4=>_0xed0fa4!==_0x2fb91a),_0x1cc7a7=Math['max'](0x0,_0x1cc7a7-0x1)):(_0x528615['push'](_0x2fb91a),_0x1cc7a7+=0x1,addLikedPref(_0xa63a4b['category'],_0xa63a4b[_0x553b43(0x24b)]));await updateDoc(_0x509812,{'likes':_0x1cc7a7,'likedBy':_0x528615}),_0xb25c88[_0x553b43(0x26e)]=(_0x45a952[_0x553b43(0x542)](_0x2fb91a)?_0x553b43(0x22d):_0x553b43(0x4e0))+'\x20('+_0x1cc7a7+')';const _0x104ab3=getCachedPosts();_0x104ab3[_0x553b43(0x244)](_0x5134c9,{'id':_0x5134c9,'data':{..._0xa63a4b,'likes':_0x1cc7a7,'likedBy':_0x528615,'communityId':communityId}}),setCachedPosts(_0x104ab3);});const _0x5720b1=_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x4ff)+_0x5134c9+'\x22]');_0x5720b1['replaceWith'](_0x5720b1['cloneNode'](!![]));const _0x27d053=_0x404c28[_0x27885c(0x4cc)]('.save-toggle-btn[data-post-id=\x22'+_0x5134c9+'\x22]');let _0x5323fb=![];_0x27d053[_0x27885c(0x48a)](_0x27885c(0x3b5),_0x2edeca=>{const _0x456db6=_0x27885c;_0x2edeca[_0x456db6(0x2e9)]();if(_0x5323fb)return;_0x5323fb=!![],_0x27d053[_0x456db6(0x26e)]===_0x456db6(0x1d2)?deleteSavedPostFromPost(_0x5134c9,communityId,_0x27d053)[_0x456db6(0x555)](()=>_0x5323fb=![])[_0x456db6(0x2d4)](()=>_0x5323fb=![]):savePost(_0x5134c9,communityId,_0x27d053)[_0x456db6(0x555)](()=>_0x5323fb=![])[_0x456db6(0x2d4)](()=>_0x5323fb=![]);}),_0x404c28['querySelector'](_0x27885c(0x288)+_0x131ad3[_0x27885c(0x39f)]+'\x22]')?.['addEventListener'](_0x27885c(0x3b5),()=>viewProfile(_0x131ad3[_0x27885c(0x39f)])),_0x404c28[_0x27885c(0x4cc)]('#toggleComments-'+_0x5134c9)?.['addEventListener'](_0x27885c(0x3b5),_0x5077ff=>{_0x5077ff['preventDefault'](),toggleComments(_0x5134c9);}),_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x45f)+_0x5134c9)?.['addEventListener']('submit',_0x434038=>{const _0x578a3e=_0x27885c;_0x434038[_0x578a3e(0x2e9)](),addComment(_0x5134c9,_0x131ad3[_0x578a3e(0x39f)]);}),_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x1eb)+_0x5134c9)?.[_0x27885c(0x48a)]('click',()=>deletePost(_0x5134c9)),_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x282)+_0x5134c9)?.[_0x27885c(0x48a)](_0x27885c(0x3b5),()=>reportPost(_0x5134c9)),_0x404c28['querySelector'](_0x27885c(0x362)+_0x5134c9+'\x22]')?.['addEventListener'](_0x27885c(0x3b5),_0x322dcf=>{_0x322dcf['stopPropagation'](),copyPostId(_0x5134c9);});_0x23aa14&&(_0x404c28['querySelector'](_0x27885c(0x502)+_0x5134c9+'\x22]')?.[_0x27885c(0x48a)](_0x27885c(0x3b5),()=>deletePost(_0x5134c9)),_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x395)+_0x5134c9+'\x22]')?.[_0x27885c(0x48a)](_0x27885c(0x3b5),()=>clearReports(_0x5134c9)));const _0x3c2c55=_0x404c28[_0x27885c(0x4cc)](_0x27885c(0x45f)+_0x5134c9+_0x27885c(0x55d));if(_0x3c2c55){if(_0x3c2c55['_debouncedInput'])_0x3c2c55[_0x27885c(0x40b)](_0x27885c(0x36b),_0x3c2c55[_0x27885c(0x36f)]);_0x3c2c55['_debouncedInput']=debounce(_0x45ec97=>showTagSuggestions(_0x45ec97[_0x27885c(0x449)],_0x5134c9),0x1f4),_0x3c2c55[_0x27885c(0x48a)]('input',_0x3c2c55[_0x27885c(0x36f)]);}if(_0x3bd8db>0x1)setupCommunityCarousel(_0x5134c9);}}function addPaginationControls(_0x2d61b8,_0x200101,_0x5ad069){const _0x9037c0=_0x6d63e4,_0x101848=Math['ceil'](_0x200101/PaginationState[_0x9037c0(0x32d)]),_0xe7c697=document[_0x9037c0(0x2ff)](_0x9037c0(0x2f6));_0xe7c697['className']='pagination';if(PaginationState[_0x9037c0(0x533)]>0x1){const _0x41d780=document[_0x9037c0(0x2ff)](_0x9037c0(0x4b4));_0x41d780[_0x9037c0(0x26e)]='<',_0x41d780['addEventListener']('click',async()=>{const _0x40b0e9=_0x9037c0;PaginationState[_0x40b0e9(0x533)]>0x1&&(_0x2d61b8['innerHTML']=_0x40b0e9(0x25c),await loadPosts(_0x5ad069,![],PaginationState[_0x40b0e9(0x533)]-0x1));}),_0xe7c697[_0x9037c0(0x218)](_0x41d780);}const _0x58ca60=[0x1];if(_0x101848<=0x5){for(let _0x4dcc9b=0x2;_0x4dcc9b<=_0x101848;_0x4dcc9b++)_0x58ca60['push'](_0x4dcc9b);}else{const _0x32265b=[PaginationState[_0x9037c0(0x533)]-0x1,PaginationState[_0x9037c0(0x533)],PaginationState[_0x9037c0(0x533)]+0x1]['filter'](_0x2dd115=>_0x2dd115>0x1&&_0x2dd115<_0x101848);_0x58ca60[_0x9037c0(0x22f)](..._0x32265b);if(!_0x58ca60[_0x9037c0(0x542)](_0x101848))_0x58ca60['push'](_0x101848);if(PaginationState[_0x9037c0(0x533)]>0x3&&!_0x58ca60[_0x9037c0(0x542)](0x2))_0x58ca60[_0x9037c0(0x22f)](0x2);if(PaginationState[_0x9037c0(0x533)]<_0x101848-0x2&&!_0x58ca60[_0x9037c0(0x542)](_0x101848-0x1))_0x58ca60[_0x9037c0(0x22f)](_0x101848-0x1);_0x58ca60[_0x9037c0(0x29f)]((_0x30455a,_0xc8c32d)=>_0x30455a-_0xc8c32d);}_0x58ca60[_0x9037c0(0x518)]((_0x40eba4,_0x15ef1f)=>{const _0x16afe4=_0x9037c0;if(_0x15ef1f>0x0&&_0x40eba4-_0x58ca60[_0x15ef1f-0x1]>0x1){const _0x2f6eb1=document['createElement'](_0x16afe4(0x42e));_0x2f6eb1[_0x16afe4(0x26e)]=_0x16afe4(0x297),_0xe7c697[_0x16afe4(0x218)](_0x2f6eb1);}const _0x393b0b=document[_0x16afe4(0x2ff)]('button');_0x393b0b[_0x16afe4(0x26e)]=_0x40eba4,_0x393b0b[_0x16afe4(0x396)]=_0x40eba4===PaginationState[_0x16afe4(0x533)]?'active':'',_0x40eba4===PaginationState[_0x16afe4(0x533)]?_0x393b0b[_0x16afe4(0x242)]=!![]:_0x393b0b[_0x16afe4(0x48a)](_0x16afe4(0x3b5),async()=>{const _0x576f83=_0x16afe4;_0x2d61b8[_0x576f83(0x381)]='<div\x20class=\x22loading\x22>â³\x20Loading...</div>',await loadPosts(_0x5ad069,![],_0x40eba4);}),_0xe7c697[_0x16afe4(0x218)](_0x393b0b);});if(PaginationState['currentPage']<_0x101848){const _0x2a1af5=document[_0x9037c0(0x2ff)](_0x9037c0(0x4b4));_0x2a1af5[_0x9037c0(0x26e)]='>',_0x2a1af5[_0x9037c0(0x48a)](_0x9037c0(0x3b5),async()=>{const _0x21b7f7=_0x9037c0;PaginationState[_0x21b7f7(0x533)]<_0x101848&&(_0x2d61b8[_0x21b7f7(0x381)]=_0x21b7f7(0x25c),await loadPosts(_0x5ad069,![],PaginationState['currentPage']+0x1));}),_0xe7c697[_0x9037c0(0x218)](_0x2a1af5);}_0x2d61b8[_0x9037c0(0x218)](_0xe7c697);}document[_0x6d63e4(0x4fb)](_0x6d63e4(0x353))[_0x6d63e4(0x48a)](_0x6d63e4(0x3b5),async()=>{await loadPosts(communityId,!![]);});let totalYourPosts=0x0;async function loadYourPosts(_0x4e2200){const _0x325268=_0x6d63e4,_0x2ea719=document[_0x325268(0x4fb)](_0x325268(0x4c5));_0x2ea719[_0x325268(0x381)]='';let _0x43c4af=null,_0x502728=null,_0x2b4bec=new Set();async function _0x3d4d4b(_0x18174f=![]){const _0x41ec79=_0x325268,_0x1f9c5f=await getCommData(),_0x195cf3=_0x1f9c5f[_0x41ec79(0x357)]?.[_0x41ec79(0x542)](auth[_0x41ec79(0x224)]['uid'])||_0x1f9c5f[_0x41ec79(0x49c)]===auth['currentUser'][_0x41ec79(0x26b)];await fetchUserData(_0x4e2200);const _0x122f3d=_0x18174f?0x0:window[_0x41ec79(0x41b)]||document[_0x41ec79(0x33e)]['scrollTop'];if(!totalYourPosts||_0x18174f){const _0x25f30f=query(collection(db,_0x41ec79(0x4d3),communityId,_0x41ec79(0x31e)),where(_0x41ec79(0x39f),'==',_0x4e2200));totalYourPosts=(await getDocs(_0x25f30f))['size'];}let _0x2f1592=query(collection(db,'communities',communityId,_0x41ec79(0x31e)),where(_0x41ec79(0x39f),'==',_0x4e2200),orderBy(_0x41ec79(0x43b),_0x41ec79(0x2a9)),limit(0x2));if(_0x43c4af&&!_0x18174f)_0x2f1592=query(_0x2f1592,startAfter(_0x43c4af));else{if(_0x18174f)_0x502728=null;}try{const _0x3b180d=await getDocs(_0x2f1592);if(_0x3b180d[_0x41ec79(0x371)]&&_0x2b4bec['size']===0x0){_0x2ea719[_0x41ec79(0x381)]=_0x41ec79(0x216),await _0x1ebda8();if(!_0x18174f)window['scrollTo'](0x0,_0x122f3d);else document['getElementById'](_0x41ec79(0x348))?.[_0x41ec79(0x1ce)]({'behavior':'smooth'});return;}if(!_0x502728)_0x502728=_0x3b180d[_0x41ec79(0x55b)][0x0];_0x43c4af=_0x3b180d[_0x41ec79(0x55b)][_0x3b180d[_0x41ec79(0x55b)][_0x41ec79(0x3cb)]-0x1];_0x18174f&&(_0x2ea719[_0x41ec79(0x381)]='',_0x2b4bec[_0x41ec79(0x2d5)]());const _0x5e217c=_0x3b180d[_0x41ec79(0x55b)]['map'](_0x2678b8=>_0x2678b8['id']),_0x40b800=await Promise[_0x41ec79(0x2c8)](_0x5e217c[_0x41ec79(0x473)](getPostReportStatus));for(let _0x2763fe=0x0;_0x2763fe<_0x3b180d[_0x41ec79(0x55b)]['length'];_0x2763fe++){const _0x1971e6=_0x3b180d[_0x41ec79(0x55b)][_0x2763fe],_0x5aa31f=_0x40b800[_0x2763fe];if(_0x2b4bec['has'](_0x1971e6['id']))continue;_0x2b4bec[_0x41ec79(0x4f7)](_0x1971e6['id']);const _0x43cdac=_0x1971e6['data']();if(!_0x43cdac[_0x41ec79(0x39f)]){console[_0x41ec79(0x43d)](_0x41ec79(0x50b)+_0x1971e6['id']+_0x41ec79(0x3e3),_0x43cdac),_0x2ea719[_0x41ec79(0x381)]+=_0x41ec79(0x233)+_0x1971e6['id']+_0x41ec79(0x316);continue;}const _0x42d692=userDataCache[_0x43cdac[_0x41ec79(0x39f)]],_0x5314df=_0x1f9c5f[_0x41ec79(0x357)]?.[_0x41ec79(0x542)](_0x43cdac[_0x41ec79(0x39f)])||_0x1f9c5f[_0x41ec79(0x49c)]===_0x43cdac[_0x41ec79(0x39f)],_0x3d80e7=new Date(_0x43cdac[_0x41ec79(0x43b)]['toDate']())[_0x41ec79(0x1ca)](),_0x25d99c=_0x43cdac['photoUrls']||[],_0x1b65d5=_0x25d99c[_0x41ec79(0x3cb)],_0x3d820f=document[_0x41ec79(0x2ff)](_0x41ec79(0x2f6));_0x3d820f['className']=_0x41ec79(0x33f),_0x3d820f['id']=_0x41ec79(0x4d6)+_0x1971e6['id'],_0x3d820f[_0x41ec79(0x381)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x42d692[_0x41ec79(0x407)]||'https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y')+'\x22\x20class=\x22profile-photo\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3><span\x20class=\x22username\x22\x20data-uid=\x22'+_0x43cdac['userId']+'\x22>'+_0x42d692[_0x41ec79(0x3d8)]+'</span>\x20<span\x20class=\x22at-user\x22>@'+_0x42d692[_0x41ec79(0x49a)]+_0x41ec79(0x380)+(_0x5314df?'<span\x20class=\x22admin-tag\x22>Admin</span>':'')+_0x41ec79(0x2f3)+_0x43cdac['title']+_0x41ec79(0x359)+_0x43cdac['description']+_0x41ec79(0x326)+_0x1971e6['id']+_0x41ec79(0x436)+JSON['stringify'](_0x25d99c)+_0x41ec79(0x317)+(_0x1b65d5>0x1?_0x41ec79(0x4a6)+_0x1971e6['id']+_0x41ec79(0x342):'')+_0x41ec79(0x451)+(_0x25d99c[0x0]||_0x41ec79(0x1c0))+_0x41ec79(0x53b)+(_0x1b65d5>0x1?_0x41ec79(0x33d)+_0x1971e6['id']+_0x41ec79(0x454):'')+_0x41ec79(0x4c3)+_0x43cdac[_0x41ec79(0x347)][_0x41ec79(0x3d8)]+'</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Category:\x20'+(_0x43cdac[_0x41ec79(0x1ba)]||_0x41ec79(0x2a0))+_0x41ec79(0x261)+(_0x43cdac[_0x41ec79(0x22b)]||_0x41ec79(0x2a0))+'\x20|\x20Offering:\x20'+(_0x43cdac[_0x41ec79(0x24b)]||_0x41ec79(0x2a0))+'</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22timestamp\x22>'+_0x3d80e7+_0x41ec79(0x50c)+_0x1971e6['id']+'\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22'+_0x1971e6['id']+'\x22>Copy</button></p>\x0a\x20\x20\x20\x20\x20\x20'+(_0x43cdac[_0x41ec79(0x39f)]===auth[_0x41ec79(0x224)]['uid']||_0x195cf3?'<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-'+_0x1971e6['id']+_0x41ec79(0x3eb):'')+_0x41ec79(0x3ba)+(_0x5aa31f[_0x41ec79(0x4a1)]&&_0x5aa31f[_0x41ec79(0x30c)]===0x1?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x1971e6['id']+_0x41ec79(0x36e):'')+_0x41ec79(0x3ba)+(_0x5aa31f[_0x41ec79(0x4a1)]&&_0x5aa31f['reportCount']>=0x2?_0x41ec79(0x302)+_0x1971e6['id']+_0x41ec79(0x2f7)+_0x5aa31f['reportCount']+'\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>':'')+_0x41ec79(0x296),_0x2ea719[_0x41ec79(0x218)](_0x3d820f),_0x3d820f['querySelector'](_0x41ec79(0x288)+_0x43cdac[_0x41ec79(0x39f)]+'\x22]')[_0x41ec79(0x48a)](_0x41ec79(0x3b5),()=>viewProfile(_0x43cdac['userId']));const _0x373814=_0x3d820f['querySelector'](_0x41ec79(0x1eb)+_0x1971e6['id']);if(_0x373814)_0x373814[_0x41ec79(0x48a)](_0x41ec79(0x3b5),()=>deletePost(_0x1971e6['id']));_0x3d820f[_0x41ec79(0x4cc)](_0x41ec79(0x362)+_0x1971e6['id']+'\x22]')[_0x41ec79(0x48a)](_0x41ec79(0x3b5),_0x119f44=>{const _0x5a821b=_0x41ec79;_0x119f44[_0x5a821b(0x48f)](),copyPostId(_0x1971e6['id']);});if(_0x1b65d5>0x1)setupYourPostsCarousel(_0x1971e6['id']);}await _0x1ebda8();if(!_0x18174f)window[_0x41ec79(0x239)](0x0,_0x122f3d);else document['getElementById'](_0x41ec79(0x348))?.[_0x41ec79(0x1ce)]({'behavior':_0x41ec79(0x42b)});}catch(_0x4d0411){console['error'](_0x41ec79(0x2ca),_0x4d0411),_0x2ea719[_0x41ec79(0x381)]=_0x41ec79(0x2a1);if(!_0x18174f)window['scrollTo'](0x0,_0x122f3d);else document[_0x41ec79(0x4fb)](_0x41ec79(0x348))?.[_0x41ec79(0x1ce)]({'behavior':_0x41ec79(0x42b)});}}async function _0x1ebda8(){const _0x447312=_0x325268,_0x2ece0e=_0x2ea719[_0x447312(0x4cc)](_0x447312(0x2d7)),_0x2af73d=_0x2ea719[_0x447312(0x4cc)](_0x447312(0x20c));if(_0x2ece0e)_0x2ece0e[_0x447312(0x3ab)]();if(_0x2af73d)_0x2af73d[_0x447312(0x3ab)]();const _0x3f8729=document[_0x447312(0x2ff)](_0x447312(0x2f6));_0x3f8729['id']=_0x447312(0x37d),_0x3f8729[_0x447312(0x52f)][_0x447312(0x54c)]=_0x447312(0x26f);const _0x3d3158=document[_0x447312(0x2ff)](_0x447312(0x4b4));_0x3d3158['id']=_0x447312(0x1cd),_0x3d3158[_0x447312(0x26e)]='See\x20More',_0x3d3158[_0x447312(0x396)]=_0x447312(0x536),_0x3d3158[_0x447312(0x52f)]['cssText']='display:\x20none\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20hidden\x20!important;\x20opacity:\x200\x20!important;',_0x3d3158[_0x447312(0x48a)](_0x447312(0x3b5),()=>_0x3d4d4b());const _0xc5cc7b=document[_0x447312(0x2ff)](_0x447312(0x4b4));_0xc5cc7b['id']='seeLessYourPostsBtn',_0xc5cc7b[_0x447312(0x26e)]=_0x447312(0x43e),_0xc5cc7b[_0x447312(0x396)]=_0x447312(0x243),_0xc5cc7b[_0x447312(0x52f)][_0x447312(0x54c)]=_0x447312(0x311),_0xc5cc7b[_0x447312(0x48a)](_0x447312(0x3b5),async()=>{await _0x3d4d4b(!![]);}),_0x3f8729[_0x447312(0x218)](_0x3d3158),_0x3f8729[_0x447312(0x218)](_0xc5cc7b),_0x2ea719['appendChild'](_0x3f8729),totalYourPosts>_0x2b4bec[_0x447312(0x1b1)]&&totalYourPosts>0x2&&(_0x3d3158[_0x447312(0x52f)][_0x447312(0x54c)]=_0x447312(0x1bb)),_0x2b4bec['size']>0x2&&(_0xc5cc7b[_0x447312(0x52f)][_0x447312(0x54c)]=_0x447312(0x1bb));}await _0x3d4d4b();}async function savePost(_0x19d1a8,_0x50a0b7,_0x49239f){const _0x569f60=_0x6d63e4;console['log'](_0x569f60(0x2a8)+_0x19d1a8);const _0x1ffc0a=document[_0x569f60(0x4fb)](_0x569f60(0x27a)),_0x15d892=document[_0x569f60(0x4fb)]('savePostNote'),_0x3b85d4=document[_0x569f60(0x4fb)](_0x569f60(0x279)),_0x52421f=document[_0x569f60(0x4fb)]('cancelSavePostBtn'),_0x1f05d5=auth['currentUser'];_0x15d892[_0x569f60(0x361)]='',_0x1ffc0a[_0x569f60(0x52f)][_0x569f60(0x2da)]=_0x569f60(0x4a5),_0x1ffc0a[_0x569f60(0x284)][_0x569f60(0x3ab)](_0x569f60(0x4b1)),_0x3b85d4[_0x569f60(0x3f5)][_0x569f60(0x20b)]=_0x19d1a8,_0x3b85d4[_0x569f60(0x3f5)]['communityId']=_0x50a0b7,_0x3b85d4[_0x569f60(0x3e2)]=async()=>{const _0x4f6722=_0x569f60,_0x5d096e=_0x15d892['value'][_0x4f6722(0x3b6)](),_0x16bffa=doc(db,_0x4f6722(0x23d),_0x1f05d5[_0x4f6722(0x26b)]),_0x42fc8d=collection(_0x16bffa,'savedPosts'),_0x448243=query(_0x42fc8d,where('postId','==',_0x19d1a8),where(_0x4f6722(0x2b4),'==',_0x50a0b7)),_0x2dfec7=await getDocs(_0x448243);if(!_0x2dfec7[_0x4f6722(0x371)]){alert(_0x4f6722(0x41d)),closeModal(_0x4f6722(0x27a));return;}await addDoc(_0x42fc8d,{'postId':_0x19d1a8,'communityId':_0x50a0b7,'note':_0x5d096e||'','savedAt':new Date()});if(_0x49239f)_0x49239f[_0x4f6722(0x26e)]=_0x4f6722(0x1d2);alert(_0x4f6722(0x32a)),closeModal('savePostModal');},_0x52421f[_0x569f60(0x3e2)]=()=>closeModal(_0x569f60(0x27a));}function _0x43ab(){const _0xa970f7=['span','<br><h3>User\x20Appeals\x20(Bans/Posts)</h3>','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20</div>','accepted','background','viewBannedBtn','Delete\x20this\x20appeal?','memberCount','-your\x22\x20data-photos=\x27','\x20members\x20from\x20subcollection','closeMembersBtn','-search\x22>></button>','body','createdAt','https://nominatim.openstreetmap.org/search?q=','error','See\x20Less','followerId','position','No\x20user\x20doc\x20found\x20for\x20current\x20uid\x20','<div\x20class=\x27loading\x27>â³\x20Searching...</div>','\x20matches\x20for\x20\x22','\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','\x0a\x20\x20\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','Sports\x20&\x20Outdoors','248408yGcTGr','chat','target','Refresh','message','<div\x20class=\x22loading\x22>â³\x20Searching...</div>','load-more-btn','update','Tools\x20&\x20DIY','-community\x22>></button>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','\x0a\x20\x20<span\x20class=\x22timestamp\x22>','postPhotos','-your\x22>></button>','Profile\x20view\x20request\x20declined!','.mark-seen-btn2[data-id=\x22','\x0a\x20\x20</div>\x0a\x20\x20<p>Location:\x20',',\x20last\x20cached\x20at:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20','â€”belongs\x20to\x20','communityCheckboxes','\x0a\x20\x20\x20\x20<div\x20class=\x22admin-menu\x22>\x0a\x20\x20\x20\x20\x20\x20','floor','removeItem','#commentForm-','<button\x20id=\x22viewBannedBtn\x22>Banned\x20(Users/Appeals)</button>','Error\x20fetching\x20user\x20data\x20for\x20members:','\x20already\x20seen.','See\x20Reports</summary>\x0a\x20\x20<div\x20id=\x22report-content\x22\x20class=\x22report-content\x22></div>\x0a</details>\x0a','\x0a\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','/index.html','profileViewRequestsList','failed-precondition','Community\x20not\x20found','\x20from\x20DOM','\x0a\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Appeal\x20to\x20admins\x20(e.g.,\x20\x27Not\x20breaking\x20rules\x20because...\x27)\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-name-form','Chat\x20notification\x20clicked,\x20triggering\x20handleViewChatsClick','\x0a\x20\x20<button\x20class=\x22mark-seen-btn2\x22\x20data-id=\x22','Error\x20fetching\x20location\x20suggestions:','Kitchen\x20&\x20Dining','expiry','Failed\x20to\x20copy\x20community\x20ID:','map','Cancel','\x22\x20by\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20class=\x22appeal-form\x22\x20data-post-id=\x22','</h3>\x0a\x20\x20\x20\x20<p\x20class=\x22post-description\x22>','-community','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','profile_request_declined','function','label',',\x20not\x20','Furniture\x20&\x20Home\x20Decor','\x0a\x20\x20<span\x20class=\x22clickable-profile\x22\x20data-uid=\x22','\x20not\x20found\x20in\x20savedPosts','categories','-community\x22\x20data-photos=\x27','\x27>\x0a\x20\x20\x20\x20\x20\x20','#post-','transform','loadLessBtn',')</button>\x0a\x20\x20\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20itâ€”check\x20summary!\x0a\x20\x20\x20\x20\x20\x20</div>','addEventListener','Community\x20not\x20found!','join','swapSuccessMessage','#fff','stopPropagation','deleting','<p>No\x20matching\x20members\x20found.</p>','Existing\x20user\x20data:','has','handleViewChatsClick\x20triggered\x20with\x20userId:','closeModal','.copyable-post-id[data-post-id=\x22','\x0a\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','tagName','apply','username','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it\x20from\x20othersâ€”check\x20it\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','creatorId','Are\x20you\x20sure\x20you\x20want\x20to\x20unsave\x20this\x20post?','db:','for','toBlob','isOwner','<p>No\x20active\x20communities\x20found.</p>','<p>Error\x20loading\x20post\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-item\x22\x20data-appeal-id=\x22','flex','<button\x20class=\x22carousel-prev\x22\x20data-post-id=\x22','user-item','-search\x22\x20data-photos=\x27','Location\x20input\x20or\x20suggestions\x20div\x20not\x20found!','from','state','-your\x22]','.revoke-btn','Post\x20creation\x20in\x20progress,\x20ignoring\x20extra\x20click.','in-progress','.delete-appeal-btn','hidden','\x20is\x20hidden\x20due\x20to\x20reports\x20(visible\x20to\x20admins/owner\x20only).</p>','-search\x22><</button>','button','Deleted\x20Post','cacheTimestamp_','Community\x20','</span>','\x20only?','Error\x20fetching\x20all\x20members\x20for\x20search:','.remove-post-btn','Something\x20went\x20wrong.\x20Please\x20try\x20again.','open','<h3>Reported\x20Posts</h3>','Removed\x20post-','closeCommunitiesBtn','active','innerWidth','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<p>Location:\x20','[DeleteCommunity]\x20Document\x20not\x20found\x20during\x20transaction\x20-\x20skipping.','yourPostsList','saveNameBtn','.appeal-container','keys','input[value=\x22all\x22]','pasteSearchBtn','Fetching\x20fresh\x20unseen\x20notification\x20count...','querySelector','deletePostModal','\x22\x20class=\x22suggestions\x20hidden\x22></div>\x0a\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20</form>\x0a\x20\x20</div>\x0a','textarea','</p>\x0a\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','\x22>Decline</button>\x0a\x20\x20</div>\x0a','1:475311181000:web:32d03d80f70081bfb629fd','communities','\x22>Report\x20Post</button>\x0a\x20\x20<br><br>\x0a\x20\x20','likedPrefs_','post-','grantedProfileAccessList','writeText','round','\x22\x20data-type=\x22','Community\x20carousel\x20setup\x20failed\x20for\x20post\x20','Failed\x20to\x20leave\x20the\x20community:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Think\x20this\x20is\x20a\x20mistake?\x20Send\x20an\x20appeal\x20below\x20or\x20contact\x20an\x20admin\x20at:\x20','.user-item','Post\x20unsaved!','ðŸ’”\x20Unlike','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','Skipping\x20updateProfileRequestsUI\x20due\x20to\x20undefined\x20UID','viewCommunitiesModal','exists','appealSubmitted','Community\x20filter\x20not\x20found.','.copy-btn','Pet\x20Supplies','Updated\x20communityIds\x20after\x20leaving:','closeProfileBtn','\x0a<label\x20for=\x22comm-all\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-all\x22\x20name=\x22communities\x22\x20value=\x22all\x22>\x20All\x20Communities\x0a</label>\x0a','viewProfileViewRequestsModal','https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y','debounce','email','\x20with\x20','focus','#yourPostsList\x20#post-','.edit-note-btn[data-doc-id=\x22','top','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22banAppealForm\x22\x20class=\x22ban-appeal-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20<p>â¤ï¸\x20Likes:\x20','add','newCommunityName','life-swap-6065e.firebasestorage.app','No\x20userId\x20provided\x20to\x20loadAdminReportSummary','getElementById','Community\x20does\x20not\x20exist.\x20Deletion\x20unnecessary.','toString','seeLessSearchMembersBtn','.save-toggle-btn[data-post-id=\x22','posts/','7324513WEmbCU','.remove-post-btn[data-post-id=\x22','Marked\x20notification\x20','updateNotificationBadge','</button>\x0a','editNameBtn','Initial\x20members\x20loaded:','#report-content','Post\x20reported!','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Post\x20','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20',')...','postList','type','Appeal\x20sent!','leaveCommunityBtn','debouncedLoadAdminReportSummary','_carouselHandler',')</span></p>\x0a\x20\x20\x20\x20<p>Location:\x20','Edit\x20Note','createPostBtn','</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22saved-note\x22>Note:\x20<span\x20data-doc-id=\x22','forEach','\x22>Copy</button></p>\x0a\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','</span>\x20<span\x20class=\x22at-user\x22>@','1155STxzFr','No\x20cached\x20posts\x20found\x20for\x20',')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22accept-btn\x22\x20data-request-id=\x22','No\x20valid\x20user\x20selected.','<p\x20class=\x27no-posts-message\x27>No\x20saved\x20posts\x20yet!</p>','108gmhoRa','Cleared\x20unread\x20flags\x20for\x20chats:','.saved-note[data-doc-id=\x22','success','</button>\x0a\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-','bannedUsers','Initiating\x20community\x20deletion\x20process...\x20Please\x20wait.','admin-report-summary','suggestion-item','<p>No\x20new\x20posts\x20to\x20show!</p>','index','6275dWgUeK','docId','<p>No\x20post\x20found\x20with\x20ID:\x20','8wWhzxI','style','<p>No\x20granted\x20profile\x20access.</p>','likedBy','Username\x20copied\x20to\x20clipboard!','currentPage','border','address','see-more-btn','<button\x20class=\x22delete-btn\x22\x20id=\x22deleteCommunityBtn\x22>Delete\x20(Community)</button>','Copy\x20failed:','\x20reports\x20and\x20is\x20hidden\x20from\x20others.\x20Appeal\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','ðŸ’¾\x20Save','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','#seeMoreMembersBtn','form','fetchUserData','swapSuccess','User\x20not\x20found.','Confirmed:\x20Community\x20ID\x20','includes','Error\x20loading\x20saved\x20posts:','\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22','<p\x20style=\x22color:\x20red;\x22>Hidden\x20from\x20others!</p>','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','\x20swapped\x20this\x20item.\x20Help\x20us\x20continue\x20our\x20service\x20free.\x20Tip\x20us!','\x22>\x0a','copyAndJoinLink','pending','seeMoreMembersBtn','cssText','userNameCopy','Error\x20marking\x20notification\x20','Fetched\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Post\x20\x22','unshift','.saved-post-card[data-doc-id=\x22','Failed\x20to\x20unsave\x20post.\x20Try\x20again.','viewMyFollowersBtn','then','timestamp','246nGGkOs','[DeleteCommunity]\x20Deletion\x20confirmed\x20-\x20Document\x20permanently\x20removed.','country','contains','docs','selected\x20community','\x20textarea','closeProfileViewRequestsBtn','summary','</span>\x0a\x20\x20','Notification\x20','size','</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewSavedPostsBtn\x22>Saved\x20Posts</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewChatsBtn\x22>ðŸ’¬\x20Chats</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMyFollowersBtn\x22>Followers</button>\x0a\x20\x20\x20\x20','\x20|\x20Offering:\x20','filter','likes','<h3>Your\x20Reported\x20Posts</h3>','Reset\x20post\x20list\x20and\x20caches\x20for\x20community\x20','\x0a<details>\x0a\x20\x20<summary>','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>','category','display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;','Unknown','-search','visible','.like-btn[data-post-id=\x22','https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430','BUTTON','Members\x20modal\x20elements\x20missing!','No\x20valid\x20communities\x20selected!','\x22>ðŸ—‘ï¸\x20Unsave</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Adding\x20communityId\x20','.carousel-prev[data-post-id=\x22','notificationsModal','__name__','ban_appeal','toLocaleString','Failed\x20to\x20load\x20posts\x20for\x20','checked','seeMoreYourPostsBtn','scrollIntoView','setItem','\x0a<label\x20for=\x22comm-current\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-current\x22\x20name=\x22communities\x22\x20value=\x22current\x22\x20checked>\x20Current\x20(','Community\x20ID\x20','Unsave','boxShadow','User\x20canceled\x20clearing\x20notifications.','requesterId','Username\x20is\x20undefined,\x20falling\x20back\x20to\x20UID-based\x20default','Profile\x20access\x20revoked!','66VqzCzX','Pick\x20at\x20least\x20one\x20community\x20to\x20post!','.ban-appeal-form','Someone','[DeleteCommunity]\x20Processing\x20subcollection:\x20','\x20-\x20Post-deletion\x20check\x20-\x20Exists:','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20</div>','[DeleteCommunity]\x20Queued\x20','profileRequestsBtn\x20not\x20found\x20in\x20DOM','swaps','Please\x20enter\x20a\x20username.','</div>','1000','delete','offerings','toLowerCase','Total\x20trending\x20posts\x20for\x20','Unable\x20to\x20delete\x20community\x20-\x20Document\x20persists\x20after\x20maximum\x20retries.','Initial\x20load\x20failed:','#deletePost-','closeBannedBtn','notifications','\x20for\x20','count','Cached\x20carousel\x20post\x20','find','Clothing\x20&\x20Accessories',')</button>','.saved-post-card','Close',',\x20index:\x20','entries','clearSearchBtn','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-','Something\x20went\x20wrong\x20during\x20the\x20swap.\x20Please\x20try\x20again.','createObjectURL','closeSavedPostsBtn','visibilityState','\x22>\x0a\x20\x20\x20\x20<span>','\x20-\x20After\x202s\x20delay\x20-\x20Exists:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-container\x22\x20data-post-id=\x22','No\x20message','carousel-','Total\x20members\x20from\x20memberCount:','display_name','[DeleteCommunity]\x20Firestore\x20instance:','Miscellaneous','<span>','.\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','\x0a<div\x20class=\x22notification-item\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20','postId','#seeLessYourPostsBtn','Failed\x20to\x20remove\x20community\x20ID\x20','carouselTrack','Deletion\x20incomplete\x20-\x20Retrying\x20(','\x0a\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','cancelSavePostBtn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20\x22','communityActions','Save','Mark\x20as\x20Seen','<p>No\x20posts\x20yet!</p>','[DeleteCommunity]\x20Document\x20still\x20present:','appendChild','code','requestId','Community\x20ID\x20copied!','option','No\x20authenticated\x20user!','block','Post-','validateSwapBtn','User\x20is\x20back\x20on\x20screen,\x20resuming\x20checks.','Firebase\x20setup\x20issue\x20-\x20doc:','Successfully\x20left\x20community\x20','currentUser','<button\x20id=\x22editNameBtn\x22>Edit\x20Name\x20(Community)</button>','options','#communityCheckboxes\x20input[name=\x27communities\x27]:checked','â€”fetching\x20fresh\x20batch.','171176lpeBuz','No\x20notifications\x20to\x20clear.','lookingFor',':\x20missing\x20elements','â¤ï¸\x20Like','log','push','modalNotificationCount','communityId\x20is\x20undefined,\x20cannot\x20initialize\x20user\x20swap\x20info','lookingForFilter','<div\x20class=\x22post-error\x22>Error:\x20Post\x20','#viewProfileViewRequestsBtn','communityIds\x20is\x20not\x20an\x20array\x20or\x20undefined,\x20initializing\x20as\x20[]','saved-post-card','removeChild','seeMoreSearchMembersBtn','scrollTo','padding','Create\x20Post\x20button\x20not\x20found!','toDate','users','insertAdjacentHTML','unknown','profile_request_accepted','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','disabled','see-less-btn','set','town','getItem','Persistence\x20not\x20available:\x20Browser\x20doesnâ€™t\x20support\x20it.','children','reporterId','submit','offering','You\x20have\x20successfully\x20left\x20the\x20community!','hasUnread','closeDeleteModalBtn','communitySearchPostsById','oninput','Error\x20clearing\x20notifications:','insertBefore','\x22>\x0a\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20itâ€”check\x20summary!\x0a\x20\x20\x20\x20</div>','currentUserData','\x20comments</a>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-','See\x20Reports','Using\x20','Failed\x20to\x20copy:','225oudCio','No\x20community\x20ID,\x20redirecting\x20to\x20index...','Appeal\x20Sent','<div\x20class=\x22loading\x22>â³\x20Loading...</div>','onchange','long','<p>Error\x20loading\x20your\x20reports!</p>','toISOString','\x20|\x20Looking\x20For:\x20','beforeend','deleteCommunityBtn','closeNotificationsBtn','\x20report','categoryFilter','Search\x20error:','[DeleteCommunity]\x20Executing\x20deletion\x20transaction\x20at:','ref','Failed\x20to\x20delete\x20photo:','uid','search','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','margin-top:\x2010px;\x20text-align:\x20center;\x20display:\x20block\x20!important;\x20visibility:\x20visible\x20!important;','zIndex','\x20(ID:\x20','loadingOverlay','\x20not\x20found\x20in\x20DOMâ€”already\x20gone\x20or\x20never\x20rendered','Failed\x20to\x20update\x20note.\x20Try\x20again.','.delete-saved-btn[data-doc-id=\x22','\x20removed\x20from\x20user\x27s\x20communityIds','inline','Error\x20fetching\x20communities:','confirmSavePostBtn','savePostModal','\x20documents','Unknown\x20Community','No\x20reason\x20provided','Members\x20(Total:\x20','city','Your\x20Posts\x20carousel\x20setup\x20failed\x20for\x20post\x20','<p>Failed\x20to\x20load\x20some\x20members.</p>','#reportPost-','toggle','classList','\x20comments</a>\x0a\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22','#loadMoreBtn','.username[data-uid=\x22','</p>\x0a\x20\x20<p\x20class=\x22highlight\x22>Offering:\x20','\x22>Accept</button>\x0a\x20\x20\x20\x20<button\x20class=\x22decline-btn\x22\x20data-request-id=\x22','Scroll\x20target\x20#search-scrolldown\x20not\x20found!','readText','</h3>\x0a\x20\x20</div>\x0a\x20\x20<h3>','chatIds','<p>Failed\x20to\x20load\x20more\x20members.</p>','unseenCount','caughtUpMessage','Error\x20fetching\x20initial\x20members:','swapCount','Error\x20submitting\x20appeal:','Loaded\x20count:','\x0a\x20\x20\x20\x20','...','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22','<p>Refresh\x20failed.\x20Try\x20again.</p>','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','Paste\x20failed:','<p\x20class=\x22no-posts\x22>No\x20trending\x20posts\x20yet!</p>','Unnamed\x20Community','Error\x20updating\x20note:','sort','N/A','<p>Oops,\x20something\x20broke!\x20Try\x20refreshing.</p>','viewCommunitiesBtn','\x22\x20(ID:\x20','replies','Error\x20loading\x20appeals:','comments','carouselNextBtn','savePost\x20called\x20for\x20postId:\x20','desc','membersList','</p>\x0a\x20\x20<p\x20class=\x22timestamp\x22>','Skipping\x20post\x20','</span>\x0a','profileRequestsBtn','User\x20authenticated:','<p>Failed\x20to\x20search\x20members.</p>','clearNotificationsBtn','min','Untitled','communityId','Updating\x20communityIds\x20with:','swappedBtn','!\x20IDs:\x20','getContext','</p>\x0a\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20','Cached\x20','reset','creatorName','fixed','Save\x20Post','</span>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22not-member-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20aren\x27t\x20a\x20member\x20of\x20this\x20community.</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Copy\x20the\x20community\x20ID\x20and\x20go\x20back\x20to\x20join!\x20We\x20are\x20waiting\x20for\x20you!\x20ðŸ’š</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Community\x20ID:</strong>\x20<span\x20id=\x22communityIdText\x22>','<p>Failed\x20to\x20load\x20some\x20member\x20data.</p>','[DeleteCommunity]\x20Document\x20successfully\x20removed\x20-\x20verifying\x20persistence...','life-swap-6065e.firebaseapp.com','Post\x20not\x20found!','leaveCommunity','viewChatsBtn','drawImage','all','<p>Failed\x20to\x20load\x20members.\x20Try\x20again.</p>','Failed\x20to\x20load\x20your\x20posts:','translate(-50%,\x20-50%)','communityName','load-less-btn','\x20contains\x20','parse','<p>No\x20reported\x20posts!</p>','banStatus','new_message','none','catch','clear','files','#seeMoreYourPostsBtn','Post\x20already\x20unsaved!','<span\x20class=\x22admin-tag\x22>Admin</span>','display','seconds','Youâ€™ve\x20already\x20reported\x20this\x20post!','searchPostsById','AIzaSyB5Q0kHoViWJl-t-pWCKj_AT-ClAMadfrU','match','<h3>Admin:</h3>','.copy-id-btn2','seen','Unnamed\x20User','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Community:\x20<a\x20href=\x22./community.html?id=','.suggestions','copyCommunityIdBtn','viewBannedModal','commentCount','preventDefault','\x22\x20name=\x22communities\x22\x20value=\x22','[DeleteCommunity]\x20Main\x20community\x20document\x20queued\x20for\x20deletion','isHidden','viewMembersBtn','.modal-content','clipboard','notificationList','prepend','</span>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./start.html\x22\x20id=\x22copyAndJoinLink\x22>Copy\x20ID\x20and\x20Join</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','</h3>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<h3>','photoURL',',\x20batchSize=','div','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','0\x200\x2010px\x20rgba(0,0,0,0.2)','/community.html?id=','\x0a\x20\x20<h4>','No\x20user\x20detected,\x20redirecting\x20to\x20login...','See\x20More\x20display:','[DeleteCommunity]\x20Pre-deletion\x20check\x20-\x20Document\x20exists:','\x22>Copy</button></p>\x0a\x20\x20\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','createElement','justDeleteBtn','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','<p>No\x20reports\x20on\x20your\x20posts!</p>','appealId','Books,\x20Movies\x20&\x20Music','\x22\x20data-id=\x22','postCount','.appeal-form','Persistence\x20failed:\x20Multiple\x20tabs\x20open.\x20Only\x20one\x20tab\x20can\x20enable\x20persistence.','Missing\x20modal\x20or\x20loading\x20elements:','image/jpeg','reportCount','\x0a\x20\x20','Mark\x20this\x20post\x20as\x20swapped\x20with\x20','No\x20note','\x20to\x20','display:\x20none\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20hidden\x20!important;\x20opacity:\x200\x20!important;','phone','title','.\x20Updated\x20communityIds:','swapConfirmed','\x20is\x20missing\x20user\x20data.</div>','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','string','postReports','swapDetails','</p>\x0a\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','Search\x20buttons:\x20totalFiltered=','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','posts','en-US','follow','now','members','banAppeals','Failed\x20to\x20create\x20post:\x20','Error\x20fetching\x20community\x20data:','</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','some','displayedPostIds','Fetching\x20user\x20data\x20for\x20UID:\x20','Post\x20saved!',')\x0a</label>\x0a','<button\x20id=\x22viewRequestsBtn\x22>Profile\x20Requests\x20(','POSTS_PER_PAGE','<span\x20class=\x22chat-badge\x22>(new)</span>','[DeleteCommunity]\x20Verification\x20','viewSavedPostsBtn','createDocumentFragment','\x20or\x20submit\x20an\x20appeal\x20below.','Profile\x20Requests\x20','slice','Swaps\x20field\x20undefined,\x20setting\x20to\x200','viewChats','\x22>Revoke</button>\x0a\x20\x20</div>\x0a','Error\x20loading\x20user\x20reports:','delete-status','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22>\x0a\x20\x20\x20\x20\x20\x20','communityFilter','</p>\x0a\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22','documentElement','post','closest','\x22>Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','-your\x22><</button>','\x22>âœï¸\x20Edit\x20Note</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-saved-btn\x22\x20data-doc-id=\x22','</h3>\x0a\x20\x20<p\x20class=\x22post-description\x22>','viewProfileViewRequestsBtn','proceedSwapBtn','location','scroll-to-ur-posts','\x20(age:\x20','.top-bar','\x0a\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','src','.carousel-next[data-post-id=\x22','Search\x20filtered\x20members:\x20','score','Post\x20Deleted','</p>\x0a\x20\x20\x20\x20<p>Posted:\x20','<br><p>Error\x20loading\x20appeals!</p>','refreshPostsBtn','No\x20communities\x20selected','Name\x20canâ€™t\x20be\x20empty!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ban-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20are\x20banned\x20from\x20this\x20community!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Reason:</strong>\x20','admins','Error\x20loading\x20post\x20','</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-description\x22>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>','numeric','#seeMoreSearchMembersBtn','Failed\x20to\x20fetch\x20community\x20','banAppealForm','fetchCurrentUserData','visibilitychange','value','.copy-btn[data-post-id=\x22','.username','50%','No\x20Title','postCache_','Using\x20cached\x20unseen\x20count:\x20','setAttribute','Community\x20ID\x20copied\x20to\x20clipboard!\x20Head\x20back\x20to\x20join.','Deleting...','input','.carousel-image','[DeleteCommunity]\x20Pre-deletion\x20document\x20data:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20itâ€”check\x20summary!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','_debouncedInput','\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22tagSuggestions-','empty','left','lat','Thatâ€™s\x20already\x20the\x20name!','swapValidationResult',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','stringify','\x20oldest\x20posts\x20from\x20cache','photoUrls','resetCommDataCache','offeringFilter','[DeleteCommunity]\x20Retry\x20','yourPostsButtons','warn','</p>\x0a\x20\x20\x20\x20<p>Post\x20ID:\x20','</span>\x20','innerHTML','communityId:','text','Refresh\x20failed:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22','Verified\x20communityIds\x20in\x20Firestore\x20after\x20update:','\x20from\x20user\x27s\x20communityIds','User\x20UID\x20is\x20undefined,\x20skipping\x20profile\x20requests\x20query!','Deleting\x20community\x20data...','<button\x20class=\x22copy-id-btn2\x22\x20data-post-id=\x22','iterator','change','.modal:not(#viewProfileViewRequestsModal)','\x22>\x20','renderPosts','loading','<p>No\x20members\x20yet!</p>','concat','<p>No\x20notifications\x20yet.</p>','.clear-reports-btn[data-post-id=\x22','className','note','Error\x20loading\x20more\x20members:','-search\x22]','<span\x20class=\x22request-badge\x22>','266510QzkVif','TEXTAREA','.report-warning','input[name=\x22communities\x22]:not([value=\x22all\x22])','userId','\x20communit','./start.html','[DeleteCommunity]\x20',':</strong>\x20\x22','href','Persistence\x20error:','9652iydKEo','photos','\x22>\x0a\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20</form>\x0a','lon','opacity','remove','User\x20is\x20away\x20from\x20screen,\x20stopping\x20updates.','<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-','Seen','path','Client:\x20Incremented\x20unseenCount\x20for\x20','data','\x20cached\x20posts\x20for\x20','Queued\x20deletion\x20of\x20member\x20','cancelNameBtn','click','trim','Error\x20fetching\x20unseen\x20count:','\x20in\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities.','HTTP\x20error!\x20Status:\x20','\x0a\x20\x20\x20\x20\x20\x20','Error\x20deleting\x20saved\x20post:','You\x20must\x20be\x20logged\x20in\x20to\x20leave\x20a\x20community.','Profile\x20view\x20request\x20accepted!','\x20documents\x20in\x20','</p>','\x22\x20(Ban\x20Reason:\x20','commit','notificationCount','description','unseenNotifCount_','loadMoreBtn','Load\x20Less','village','Error:\x20Modal\x20setup\x20incomplete.\x20Please\x20refresh\x20the\x20page.','viewSavedPostsModal','\x22>\x0a\x20\x20\x20\x20<h3>','length','Refreshing...','User\x20not\x20found','postLocation',')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22revoke-btn\x22\x20data-request-id=\x22','communityIds','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22granted-','User\x20document\x20not\x20found\x20in\x20Firestore','#refreshNotificationsBtn','Deletion\x20failed:','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','carouselPrevBtn','\x20not\x20found.','name','<p>Post\x20ID\x20','[DeleteCommunity]\x20Community\x20reference\x20path:','nextSibling','isArray','swapUsername','Loaded\x20carousel\x20posts\x20for\x20community\x20','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22request-','.community-page','opacity\x200.3s\x20ease','onclick','\x20has\x20no\x20userId!\x20Post\x20data:','user_','No\x20authenticated\x20user\x20found.','See\x20More','seeLessMembersBtn','\x27>\x0a\x20\x20\x20\x20','viewMembersModal','Arts\x20&\x20Crafts','\x22>Delete\x20Post</button>','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20post?','\x20from\x20community\x20','savedPosts','Post\x20ID\x20copied!','<p\x20class=\x27error-message\x27>Oops,\x20something\x20went\x20wrong.\x20Try\x20again\x20later.</p>','savedAt','An\x20administrator\x20has\x20reinstated\x20your\x20ban.\x20For\x20the\x20original\x20or\x20a\x20diffrent\x20reason.\x20Please\x20contact\x20us\x20at\x20',')\x20has\x20','Like\x20(','dataset','ðŸ’”\x20Unlike\x20(','<p>Failed\x20to\x20load\x20communities.\x20Try\x20refreshing.</p>','Offline\x20persistence\x20enabled\x20successfully!','</h4>\x0a\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','\x20as\x20seen:','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','Failed\x20to\x20fetch\x20profile\x20view\x20requests:','banReasons','\x22>Report\x20Post</button>\x0a\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20','Couldnâ€™t\x20pasteâ€”check\x20clipboard\x20permissions!','totalUsers','get','html','Created\x20new\x20user\x20in\x20DB:\x20','\x22\x20class=\x22profile-photo\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20<h3><span\x20class=\x22username\x22\x20data-uid=\x22','community-item','displayName','profilePhoto','.notification-item','<p\x20class=\x27error-message\x27>Error:\x20Couldnâ€™t\x20load\x20saved\x20posts.\x20Try\x20refreshing.</p>','height','removeEventListener','\x0a\x20\x20<div\x20id=\x22searchMessage\x22\x20class=\x22search-message\x22>\x0a\x20\x20\x20\x20<p>Showing\x20post\x20with\x20ID:\x20','405626NRcGhG','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20','Current\x20userData\x20state:','status','#seeLessSearchMembersBtn','<div\x20class=\x22report-warning\x22\x20id=\x22warning-','member-','max','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMembersBtn\x22>Members</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewProfileViewRequestsBtn\x22>Profile\x20Requests\x20','LifeSwap/1.0\x20(your-email@example.com)','<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>','.admin-report-controls','Community\x20deletion\x20failed.\x20Please\x20review\x20the\x20console\x20for\x20details.','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','scrollY','bind','Youâ€™ve\x20already\x20saved\x20this\x20post!','</p>\x0a\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','\x0a\x20\x20<form\x20class=\x22ban-appeal-form\x22\x20data-id=\x22','profileRequests','getCachedUser','\x22>\x0a\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','values','<p>Failed\x20to\x20load\x20notifications\x20after\x20retries.\x20Check\x20your\x20connection!</p>','Fetched\x20fresh\x20community\x20data\x20for\x20','postSearch','<p>Something\x20went\x20wrong,\x20try\x20again!</p>','Cache\x20size\x20limit\x20hit,\x20removed\x20','#seeLessMembersBtn','\x22>Copy\x20ID</button>','smooth','Error\x20updating\x20communityIds:','viewRequestsBtn'];_0x43ab=function(){return _0xa970f7;};return _0x43ab();}async function deleteSavedPostFromPost(_0x234d10,_0x32c3cb,_0x2321a8){const _0x3e3a08=_0x6d63e4;console[_0x3e3a08(0x22e)]('deleteSavedPostFromPost\x20called\x20for\x20postId:\x20'+_0x234d10);const _0x1cc83c=auth[_0x3e3a08(0x224)],_0x2a9eeb=doc(db,_0x3e3a08(0x23d),_0x1cc83c[_0x3e3a08(0x26b)]),_0x582744=query(collection(_0x2a9eeb,'savedPosts'),where('postId','==',_0x234d10),where(_0x3e3a08(0x2b4),'==',_0x32c3cb)),_0x12f3f6=await getDocs(_0x582744);if(_0x12f3f6[_0x3e3a08(0x371)]){console[_0x3e3a08(0x22e)](_0x3e3a08(0x50b)+_0x234d10+_0x3e3a08(0x481)),alert(_0x3e3a08(0x2d8));if(_0x2321a8)_0x2321a8[_0x3e3a08(0x26e)]=_0x3e3a08(0x214);return;}if(confirm(_0x3e3a08(0x49d))){const _0x2db790=_0x12f3f6[_0x3e3a08(0x55b)][0x0];await deleteDoc(doc(db,'users',_0x1cc83c[_0x3e3a08(0x26b)],_0x3e3a08(0x3ee),_0x2db790['id']));if(_0x2321a8)_0x2321a8[_0x3e3a08(0x26e)]=_0x3e3a08(0x214);alert(_0x3e3a08(0x4df));}}async function viewSavedPosts(_0xe1a1e8){const _0x5e3140=_0x6d63e4,_0x307c16=document[_0x5e3140(0x4fb)](_0x5e3140(0x3c9)),_0x1b668a=document['getElementById']('savedPostsList'),_0x2fb47f=document['getElementById'](_0x5e3140(0x1fc));if(typeof doc!==_0x5e3140(0x47c)||!db){console[_0x5e3140(0x43d)](_0x5e3140(0x222),doc,_0x5e3140(0x49e),db),_0x1b668a[_0x5e3140(0x381)]=_0x5e3140(0x409),_0x307c16[_0x5e3140(0x52f)][_0x5e3140(0x2da)]=_0x5e3140(0x4a5),_0x307c16[_0x5e3140(0x284)]['remove'](_0x5e3140(0x4b1)),_0x2fb47f[_0x5e3140(0x3e2)]=()=>closeModal(_0x5e3140(0x3c9));return;}_0x1b668a['innerHTML']=_0x5e3140(0x25c),_0x307c16[_0x5e3140(0x52f)][_0x5e3140(0x2da)]='flex',_0x307c16[_0x5e3140(0x284)][_0x5e3140(0x3ab)](_0x5e3140(0x4b1));try{const _0x1b4324=doc(db,_0x5e3140(0x23d),_0xe1a1e8),_0x5874c4=query(collection(_0x1b4324,_0x5e3140(0x3ee)),orderBy(_0x5e3140(0x3f1),_0x5e3140(0x2a9))),_0xa5b63d=await getDocs(_0x5874c4);_0x1b668a['innerHTML']='',_0x1b668a[_0x5e3140(0x284)][_0x5e3140(0x4f7)]('saved-posts-grid');if(_0xa5b63d[_0x5e3140(0x371)])_0x1b668a['innerHTML']=_0x5e3140(0x51f);else for(const _0x362371 of _0xa5b63d[_0x5e3140(0x55b)]){const _0x48af41=_0x362371[_0x5e3140(0x3b1)]();let _0x576159=null,_0x2d1389={'name':_0x5e3140(0x1bc)},_0x2ea886=_0x5e3140(0x27c);try{const _0x58bc2d=doc(db,_0x5e3140(0x4d3),_0x48af41[_0x5e3140(0x2b4)],_0x5e3140(0x31e),_0x48af41['postId']),_0x3cbe7a=await getDoc(_0x58bc2d);_0x576159=_0x3cbe7a[_0x5e3140(0x4e4)]()?_0x3cbe7a[_0x5e3140(0x3b1)]():null,_0x576159&&(_0x2d1389=await fetchUserData(_0x576159[_0x5e3140(0x39f)]||'unknown'));}catch(_0x1888f7){console[_0x5e3140(0x37e)]('Failed\x20to\x20fetch\x20post\x20'+_0x48af41[_0x5e3140(0x20b)]+':',_0x1888f7);}try{const _0x531eaa=doc(db,_0x5e3140(0x4d3),_0x48af41['communityId']),_0xdd1097=await getDoc(_0x531eaa);_0x2ea886=_0xdd1097[_0x5e3140(0x4e4)]()?_0xdd1097['data']()[_0x5e3140(0x3d8)]||_0x5e3140(0x29d):_0x5e3140(0x27c);}catch(_0x356937){console[_0x5e3140(0x37e)](_0x5e3140(0x35d)+_0x48af41['communityId']+':',_0x356937);}const _0x25336d=document[_0x5e3140(0x2ff)](_0x5e3140(0x2f6));_0x25336d[_0x5e3140(0x396)]=_0x5e3140(0x236),_0x25336d[_0x5e3140(0x3f5)][_0x5e3140(0x52c)]=_0x362371['id'],_0x25336d[_0x5e3140(0x381)]=_0x5e3140(0x1b9)+(_0x576159?_0x576159['title']:_0x5e3140(0x350))+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>By:\x20'+_0x2d1389[_0x5e3140(0x3d8)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20ID:\x20<span\x20class=\x22copyable-post-id\x20clickable\x22\x20data-post-id=\x22'+_0x48af41[_0x5e3140(0x20b)]+'\x22>'+_0x48af41[_0x5e3140(0x20b)]+_0x5e3140(0x2e4)+_0x48af41[_0x5e3140(0x2b4)]+'\x22>'+_0x2ea886+_0x5e3140(0x517)+_0x362371['id']+'\x22>'+(_0x48af41['note']||_0x5e3140(0x30f))+'</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-note-btn\x22\x20data-doc-id=\x22'+_0x362371['id']+_0x5e3140(0x343)+_0x362371['id']+_0x5e3140(0x1c4),_0x1b668a[_0x5e3140(0x218)](_0x25336d),_0x25336d[_0x5e3140(0x52f)][_0x5e3140(0x3aa)]='0',setTimeout(()=>{const _0x20c8a3=_0x5e3140;_0x25336d[_0x20c8a3(0x52f)]['transition']='opacity\x200.3s\x20ease',_0x25336d[_0x20c8a3(0x52f)]['opacity']='1';},0x32),_0x25336d[_0x5e3140(0x4cc)](_0x5e3140(0x496)+_0x48af41[_0x5e3140(0x20b)]+'\x22]')[_0x5e3140(0x48a)](_0x5e3140(0x3b5),()=>{const _0xcc4b24=_0x5e3140;navigator[_0xcc4b24(0x2ef)][_0xcc4b24(0x4d8)](_0x48af41[_0xcc4b24(0x20b)])[_0xcc4b24(0x555)](()=>alert(_0xcc4b24(0x3ef)))[_0xcc4b24(0x2d4)](_0x2eb750=>console[_0xcc4b24(0x43d)](_0xcc4b24(0x538),_0x2eb750));}),_0x25336d[_0x5e3140(0x4cc)](_0x5e3140(0x4f3)+_0x362371['id']+'\x22]')[_0x5e3140(0x48a)](_0x5e3140(0x3b5),()=>editSavedNote(_0x362371['id'],_0x48af41[_0x5e3140(0x397)])),_0x25336d[_0x5e3140(0x4cc)](_0x5e3140(0x275)+_0x362371['id']+'\x22]')[_0x5e3140(0x48a)](_0x5e3140(0x3b5),()=>deleteSavedPost(_0x362371['id'],_0xe1a1e8));}}catch(_0x410b8d){console[_0x5e3140(0x43d)](_0x5e3140(0x543),_0x410b8d),_0x1b668a[_0x5e3140(0x381)]=_0x5e3140(0x3f0);}_0x2fb47f['onclick']=()=>closeModal(_0x5e3140(0x3c9));}async function editSavedNote(_0x407dd2,_0x18f511){const _0x54cb58=_0x6d63e4,_0x5d766d=document['getElementById']('savePostModal'),_0x2c46a1=document[_0x54cb58(0x4fb)]('savePostNote'),_0x4c64dd=document[_0x54cb58(0x4fb)](_0x54cb58(0x279)),_0x4441c0=document[_0x54cb58(0x4fb)](_0x54cb58(0x211));_0x5d766d[_0x54cb58(0x4cc)]('h2')[_0x54cb58(0x26e)]=_0x54cb58(0x515),_0x2c46a1[_0x54cb58(0x361)]=_0x18f511,_0x5d766d[_0x54cb58(0x52f)]['display']=_0x54cb58(0x4a5),_0x5d766d['classList'][_0x54cb58(0x3ab)](_0x54cb58(0x4b1)),_0x4c64dd['onclick']=async()=>{const _0x2c789d=_0x54cb58,_0x595438=_0x2c46a1['value'][_0x2c789d(0x3b6)](),_0x2f8e20=auth[_0x2c789d(0x224)],_0x42f880=doc(db,_0x2c789d(0x23d),_0x2f8e20[_0x2c789d(0x26b)],_0x2c789d(0x3ee),_0x407dd2);try{await updateDoc(_0x42f880,{'note':_0x595438||''}),document[_0x2c789d(0x4cc)](_0x2c789d(0x522)+_0x407dd2+'\x22]')[_0x2c789d(0x26e)]=_0x595438||_0x2c789d(0x30f),closeModal(_0x2c789d(0x27a)),_0x5d766d['querySelector']('h2')['textContent']=_0x2c789d(0x2be);}catch(_0xff9a11){console['error'](_0x2c789d(0x29e),_0xff9a11),alert(_0x2c789d(0x274));}},_0x4441c0['onclick']=()=>{const _0x1fe067=_0x54cb58;closeModal(_0x1fe067(0x27a)),_0x5d766d[_0x1fe067(0x4cc)]('h2')[_0x1fe067(0x26e)]=_0x1fe067(0x2be);};}async function deleteSavedPost(_0x466d6f,_0x4f40a7){const _0x26325b=_0x6d63e4;if(confirm(_0x26325b(0x49d))){const _0x32337e=auth[_0x26325b(0x224)],_0xd72326=doc(db,_0x26325b(0x23d),_0x32337e[_0x26325b(0x26b)],_0x26325b(0x3ee),_0x466d6f),_0x59bf23=document[_0x26325b(0x4fb)]('savedPostsList'),_0x464a5d=_0x59bf23[_0x26325b(0x4cc)](_0x26325b(0x552)+_0x466d6f+'\x22]');try{_0x464a5d&&(_0x464a5d[_0x26325b(0x52f)]['transition']=_0x26325b(0x3e1),_0x464a5d[_0x26325b(0x52f)][_0x26325b(0x3aa)]='0',await new Promise(_0x297407=>setTimeout(_0x297407,0x12c)));await deleteDoc(_0xd72326);if(_0x464a5d)_0x464a5d[_0x26325b(0x3ab)]();!_0x59bf23[_0x26325b(0x4cc)](_0x26325b(0x1f4))&&(_0x59bf23[_0x26325b(0x381)]=_0x26325b(0x51f)),alert(_0x26325b(0x4df));}catch(_0x1e679c){console['error'](_0x26325b(0x3bb),_0x1e679c);if(_0x464a5d)_0x464a5d['style'][_0x26325b(0x3aa)]='1';alert(_0x26325b(0x553));}}}async function getTotalPosts(_0x705308){const _0x363396=_0x6d63e4,_0x350cb8=doc(db,_0x363396(0x4d3),_0x705308),_0x5526fe=await getDoc(_0x350cb8),_0x82e0b0=_0x5526fe['data']();return _0x82e0b0[_0x363396(0x307)]||0x0;}async function searchPostsById(_0x4f608d){const _0x513e27=_0x6d63e4,_0x569f5f=document[_0x513e27(0x4fb)](_0x513e27(0x50e)),_0x5c59d5=document['getElementById'](_0x513e27(0x291));_0x569f5f[_0x513e27(0x381)]='<div\x20class=\x22loading\x22>â³\x20Searching...</div>',_0x5c59d5['style'][_0x513e27(0x2da)]='none';if(!_0x4f608d||_0x4f608d[_0x513e27(0x3b6)]()===''){isSearching=![],_0x569f5f[_0x513e27(0x381)]='',await loadPosts(communityId,!![]);return;}isSearching=!![];try{const _0x551b23=getCachedPosts(),_0x21d40e=_0x551b23[_0x513e27(0x401)](_0x4f608d[_0x513e27(0x3b6)]());let _0x63e3a,_0x584c65,_0x35bb73,_0x436872,_0x5de708;if(_0x21d40e){console[_0x513e27(0x22e)]('Post\x20'+_0x4f608d+'\x20found\x20in\x20cacheâ€”no\x20Firestore\x20read\x20needed.'),_0x63e3a=_0x21d40e[_0x513e27(0x3b1)],_0x584c65=_0x4f608d[_0x513e27(0x3b6)](),_0x35bb73=await fetchUserData(_0x63e3a[_0x513e27(0x39f)]||_0x513e27(0x23f)),_0x436872=await getPostReportStatus(_0x584c65);const _0x311b60=query(collection(db,_0x513e27(0x4d3),communityId,_0x513e27(0x31e),_0x584c65,_0x513e27(0x2a6))),_0x581710=await getDocs(_0x311b60);_0x5de708=_0x581710[_0x513e27(0x1b1)];}else{console[_0x513e27(0x22e)](_0x513e27(0x50b)+_0x4f608d+'\x20not\x20in\x20cacheâ€”fetching\x20from\x20Firestore.');const _0x317c4a=query(collection(db,'communities',communityId,_0x513e27(0x31e)),where(_0x513e27(0x1c8),'==',_0x4f608d[_0x513e27(0x3b6)]())),_0x5ce670=await getDocs(_0x317c4a);_0x569f5f[_0x513e27(0x381)]='';if(_0x5ce670['empty']){_0x569f5f[_0x513e27(0x381)]=_0x513e27(0x52d)+_0x4f608d+_0x513e27(0x3bf);return;}const _0x2fdf03=_0x5ce670[_0x513e27(0x55b)][0x0];_0x63e3a=normalizePostData(_0x2fdf03[_0x513e27(0x3b1)]()),_0x584c65=_0x2fdf03['id'],_0x35bb73=await fetchUserData(_0x63e3a[_0x513e27(0x39f)]||_0x513e27(0x23f)),_0x551b23[_0x513e27(0x244)](_0x584c65,{'id':_0x584c65,'data':_0x63e3a,'score':getPostScore(_0x63e3a,getLikedPrefs())}),setCachedPosts(_0x551b23),_0x436872=await getPostReportStatus(_0x584c65);const _0x5da4c4=query(collection(db,_0x513e27(0x4d3),communityId,_0x513e27(0x31e),_0x584c65,_0x513e27(0x2a6))),_0x40fcb9=await getDocs(_0x5da4c4);_0x5de708=_0x40fcb9[_0x513e27(0x1b1)];}const _0x58cc1f=auth[_0x513e27(0x224)],_0x324d94=await getCommData(),_0x49f8b3=_0x324d94?.[_0x513e27(0x357)]?.['includes'](_0x58cc1f[_0x513e27(0x26b)])||_0x324d94?.[_0x513e27(0x49c)]===_0x58cc1f[_0x513e27(0x26b)],_0x92bbdb=_0x63e3a[_0x513e27(0x39f)]===_0x58cc1f[_0x513e27(0x26b)];if(_0x436872[_0x513e27(0x2ec)]&&!_0x49f8b3&&!_0x92bbdb){_0x569f5f[_0x513e27(0x381)]=_0x513e27(0x3d9)+_0x4f608d+_0x513e27(0x4b2);return;}const _0x5cff3d=_0x63e3a[_0x513e27(0x43b)]?new Date(_0x63e3a[_0x513e27(0x43b)])[_0x513e27(0x1ca)]():_0x513e27(0x2a0),_0x521a8c=_0x63e3a[_0x513e27(0x379)]||[],_0x30a1b4=_0x521a8c[_0x513e27(0x3cb)];_0x569f5f[_0x513e27(0x381)]=_0x513e27(0x40c)+_0x584c65+'.\x20<button\x20id=\x22showAllPostsBtn\x22>Click\x20here\x20to\x20see\x20all\x20posts\x20again</button></p>\x0a\x20\x20</div>\x0a\x20\x20<div\x20class=\x22post\x22\x20id=\x22post-'+_0x584c65+_0x513e27(0x3ca)+(_0x63e3a[_0x513e27(0x313)]||_0x513e27(0x365))+_0x513e27(0x477)+(_0x63e3a['description']||'No\x20Description')+_0x513e27(0x33c)+_0x584c65+_0x513e27(0x4a8)+JSON[_0x513e27(0x377)](_0x521a8c)+_0x513e27(0x484)+(_0x30a1b4>0x1?_0x513e27(0x4a6)+_0x584c65+_0x513e27(0x4b3):'')+'\x0a\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x521a8c[0x0]||_0x513e27(0x1c0))+_0x513e27(0x33a)+(_0x30a1b4>0x1?'<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22'+_0x584c65+_0x513e27(0x439):'')+_0x513e27(0x298)+(_0x63e3a[_0x513e27(0x39f)]||_0x513e27(0x23f))+'\x22>'+(_0x35bb73['name']||'Unknown')+'\x20('+(_0x35bb73['username']||_0x513e27(0x23f))+_0x513e27(0x514)+(_0x63e3a['location']?.[_0x513e27(0x3d8)]||'N/A')+'</p>\x0a\x20\x20\x20\x20<p>Category:\x20'+(_0x63e3a['category']||_0x513e27(0x2a0))+_0x513e27(0x41e)+(_0x63e3a[_0x513e27(0x22b)]||_0x513e27(0x2a0))+'\x20|\x20Offering:\x20'+(_0x63e3a['offering']||'N/A')+_0x513e27(0x351)+_0x5cff3d+_0x513e27(0x37f)+_0x584c65+_0x513e27(0x544)+_0x584c65+_0x513e27(0x2fe)+_0x584c65+'\x22>'+((_0x63e3a[_0x513e27(0x531)]||[])[_0x513e27(0x542)](_0x58cc1f[_0x513e27(0x26b)])?_0x513e27(0x4e0):_0x513e27(0x22d))+'\x20('+(_0x63e3a['likes']||0x0)+_0x513e27(0x488)+_0x584c65+_0x513e27(0x3fe)+(_0x92bbdb||_0x49f8b3?_0x513e27(0x3ad)+_0x584c65+_0x513e27(0x3eb):'')+_0x513e27(0x296)+(_0x436872[_0x513e27(0x4a1)]&&_0x436872[_0x513e27(0x30c)]===0x1?_0x513e27(0x546)+_0x584c65+_0x513e27(0x489):'')+'\x0a\x20\x20\x20\x20'+(_0x436872[_0x513e27(0x4a1)]&&_0x436872[_0x513e27(0x30c)]>=0x2?_0x513e27(0x546)+_0x584c65+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20'+_0x436872['reportCount']+'\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20</div>':'')+_0x513e27(0x296)+(_0x49f8b3&&_0x436872[_0x513e27(0x30c)]>0x0?_0x513e27(0x3fb)+_0x584c65+_0x513e27(0x20a)+_0x436872['reportCount']+_0x513e27(0x265)+(_0x436872['reportCount']>0x1?'s':'')+_0x513e27(0x4e1)+_0x584c65+_0x513e27(0x3d5)+_0x584c65+_0x513e27(0x1de):'')+_0x513e27(0x445)+_0x584c65+'\x22>'+_0x5de708+_0x513e27(0x255)+_0x584c65+'\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<form\x20id=\x22commentForm-'+_0x584c65+'\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a';const _0x2a8d5c=_0x569f5f[_0x513e27(0x4cc)]('#showAllPostsBtn');_0x2a8d5c&&_0x2a8d5c[_0x513e27(0x48a)]('click',async()=>{const _0x1184f2=_0x513e27,_0x82bb43=document[_0x1184f2(0x4fb)](_0x1184f2(0x426));if(_0x82bb43)_0x82bb43['value']='';isSearching=![],_0x569f5f['innerHTML']='',await loadPosts(communityId,!![]);});const _0x3dccef=_0x569f5f[_0x513e27(0x4cc)](_0x513e27(0x485)+_0x584c65);_0x3dccef[_0x513e27(0x4cc)]('.username[data-uid=\x22'+(_0x63e3a[_0x513e27(0x39f)]||_0x513e27(0x23f))+'\x22]')[_0x513e27(0x48a)](_0x513e27(0x3b5),()=>viewProfile(_0x63e3a[_0x513e27(0x39f)]||_0x513e27(0x23f))),_0x3dccef[_0x513e27(0x4cc)](_0x513e27(0x362)+_0x584c65+'\x22]')[_0x513e27(0x48a)](_0x513e27(0x3b5),_0x15c0fe=>{const _0x1895ab=_0x513e27;_0x15c0fe[_0x1895ab(0x48f)](),copyPostId(_0x584c65);}),_0x3dccef[_0x513e27(0x4cc)](_0x513e27(0x282)+_0x584c65)[_0x513e27(0x48a)](_0x513e27(0x3b5),()=>reportPost(_0x584c65));const _0x4fb209=_0x3dccef[_0x513e27(0x4cc)](_0x513e27(0x1eb)+_0x584c65);if(_0x4fb209)_0x4fb209[_0x513e27(0x48a)](_0x513e27(0x3b5),()=>deletePost(_0x584c65));_0x49f8b3&&(_0x3dccef[_0x513e27(0x4cc)](_0x513e27(0x502)+_0x584c65+'\x22]')?.[_0x513e27(0x48a)]('click',()=>deletePost(_0x584c65)),_0x3dccef['querySelector'](_0x513e27(0x395)+_0x584c65+'\x22]')?.[_0x513e27(0x48a)](_0x513e27(0x3b5),()=>clearReports(_0x584c65)));_0x3dccef[_0x513e27(0x4cc)]('#toggleComments-'+_0x584c65)[_0x513e27(0x48a)](_0x513e27(0x3b5),_0x1e2c00=>{const _0x1f3f9b=_0x513e27;_0x1e2c00[_0x1f3f9b(0x2e9)](),toggleComments(_0x584c65);}),_0x3dccef[_0x513e27(0x4cc)]('#commentForm-'+_0x584c65)[_0x513e27(0x48a)](_0x513e27(0x24a),_0x5e8b57=>{const _0x5e8796=_0x513e27;_0x5e8b57[_0x5e8796(0x2e9)](),addComment(_0x584c65,_0x63e3a[_0x5e8796(0x39f)]);});const _0x5d86ab=_0x3dccef[_0x513e27(0x4cc)](_0x513e27(0x1bf)+_0x584c65+'\x22]');_0x5d86ab[_0x513e27(0x48a)](_0x513e27(0x3b5),async()=>{const _0x5e554c=_0x513e27,_0x18eb4b=doc(db,'communities',communityId,'posts',_0x584c65),_0x315ffe=await getDoc(_0x18eb4b);if(!_0x315ffe[_0x5e554c(0x4e4)]()){alert('Post\x20not\x20foundâ€”mightâ€™ve\x20been\x20deleted!');return;}const _0x4e5aab=normalizePostData(_0x315ffe[_0x5e554c(0x3b1)]()),_0x1bc732=auth[_0x5e554c(0x224)][_0x5e554c(0x26b)],_0x58a8cd=_0x4e5aab[_0x5e554c(0x531)]||[];let _0x775cb1=_0x4e5aab[_0x5e554c(0x1b5)]||0x0,_0xc6784b=[..._0x58a8cd];_0x58a8cd[_0x5e554c(0x542)](_0x1bc732)?(_0xc6784b=_0xc6784b[_0x5e554c(0x1b4)](_0x9dff11=>_0x9dff11!==_0x1bc732),_0x775cb1=Math[_0x5e554c(0x414)](0x0,_0x775cb1-0x1),await updateDoc(_0x18eb4b,{'likes':_0x775cb1,'likedBy':_0xc6784b}),_0x5d86ab[_0x5e554c(0x26e)]=_0x5e554c(0x3f4)+_0x775cb1+')'):(_0xc6784b[_0x5e554c(0x22f)](_0x1bc732),_0x775cb1+=0x1,await updateDoc(_0x18eb4b,{'likes':_0x775cb1,'likedBy':_0xc6784b}),_0x5d86ab[_0x5e554c(0x26e)]=_0x5e554c(0x3f6)+_0x775cb1+')',addLikedPref(_0x4e5aab[_0x5e554c(0x1ba)],_0x4e5aab[_0x5e554c(0x24b)])),_0x551b23[_0x5e554c(0x244)](_0x584c65,{'id':_0x584c65,'data':{..._0x4e5aab,'likes':_0x775cb1,'likedBy':_0xc6784b},'score':getPostScore({..._0x4e5aab,'likes':_0x775cb1,'likedBy':_0xc6784b},getLikedPrefs())}),setCachedPosts(_0x551b23);});if(_0x30a1b4>0x1)setupSearchCarousel(_0x584c65);}catch(_0x2bd522){console[_0x513e27(0x43d)](_0x513e27(0x267),_0x2bd522),_0x569f5f['innerHTML']=_0x513e27(0x427);}finally{isSearching=![];}}function setupSearchCarousel(_0x4513de){const _0x53633d=_0x6d63e4,_0x492841=document[_0x53633d(0x4fb)](_0x53633d(0x202)+_0x4513de+_0x53633d(0x1bd)),_0x29d3b1=_0x492841[_0x53633d(0x4cc)](_0x53633d(0x1c6)+_0x4513de+_0x53633d(0x399)),_0x1ed537=_0x492841['querySelector'](_0x53633d(0x34d)+_0x4513de+_0x53633d(0x399)),_0x1d43e4=_0x492841[_0x53633d(0x4cc)]('.carousel-image');let _0x545834=JSON[_0x53633d(0x2cf)](_0x492841[_0x53633d(0x3f5)][_0x53633d(0x3a7)]||'[]'),_0x344583=0x0;if(!_0x29d3b1||!_0x1ed537||!_0x1d43e4)return;_0x545834['length']===0x0&&(_0x545834=[_0x53633d(0x4ed)]),_0x1d43e4[_0x53633d(0x34c)]=_0x545834[0x0],_0x29d3b1['addEventListener'](_0x53633d(0x3b5),_0x4b7b79=>{const _0x79ba02=_0x53633d;_0x4b7b79['preventDefault'](),_0x344583=(_0x344583-0x1+_0x545834[_0x79ba02(0x3cb)])%_0x545834[_0x79ba02(0x3cb)],_0x1d43e4[_0x79ba02(0x34c)]=_0x545834[_0x344583];}),_0x1ed537['addEventListener']('click',_0x1c0cf3=>{const _0x47dbe0=_0x53633d;_0x1c0cf3[_0x47dbe0(0x2e9)](),_0x344583=(_0x344583+0x1)%_0x545834[_0x47dbe0(0x3cb)],_0x1d43e4[_0x47dbe0(0x34c)]=_0x545834[_0x344583];});}async function acceptProfileRequest(_0x4a4a66,_0x206649){const _0x28d9b7=_0x6d63e4,_0x31c240=doc(db,'users',_0x206649,_0x28d9b7(0x420),_0x4a4a66),_0x1f8dfe=await getDoc(_0x31c240),_0x2d4e2d=_0x1f8dfe[_0x28d9b7(0x3b1)]()['requesterId'],_0x2e6b79=await fetchCurrentUserData();await updateDoc(_0x31c240,{'status':_0x28d9b7(0x431)}),await addDoc(collection(db,_0x28d9b7(0x23d),_0x2d4e2d,'notifications'),{'type':_0x28d9b7(0x240),'message':(_0x2e6b79[_0x28d9b7(0x3d8)]||_0x28d9b7(0x1db))+'\x20accepted\x20your\x20profile\x20view\x20request!','requestId':_0x4a4a66,'timestamp':new Date(),'seen':![]});const _0x11408b=doc(db,'users',_0x2d4e2d);await runTransaction(db,async _0xf7f0c9=>{const _0x5b2b4e=_0x28d9b7,_0x89367c=await _0xf7f0c9['get'](_0x11408b),_0x46cbe1=_0x89367c[_0x5b2b4e(0x4e4)]()?_0x89367c['data']()[_0x5b2b4e(0x290)]||0x0:0x0;_0xf7f0c9[_0x5b2b4e(0x244)](_0x11408b,{'unseenCount':_0x46cbe1+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x5b2b4e(0x22e)](_0x5b2b4e(0x3b0)+_0x2d4e2d+_0x5b2b4e(0x310)+(_0x46cbe1+0x1));}),alert(_0x28d9b7(0x3bd)),closeModal(_0x28d9b7(0x4ec)),await updateProfileRequestsUI(_0x206649),viewProfileViewRequests(_0x206649),setTimeout(()=>updateNotificationBadge(_0x2d4e2d,!![]),0x3e8);}async function declineProfileRequest(_0x1572bf,_0x6a59f7){const _0x2ff417=_0x6d63e4,_0x194a06=doc(db,_0x2ff417(0x23d),_0x6a59f7,_0x2ff417(0x420),_0x1572bf),_0x43701d=await getDoc(_0x194a06),_0x16be02=_0x43701d[_0x2ff417(0x3b1)]()[_0x2ff417(0x1d5)],_0x14449c=await fetchCurrentUserData();await deleteDoc(_0x194a06),await addDoc(collection(db,_0x2ff417(0x23d),_0x16be02,_0x2ff417(0x1ed)),{'type':_0x2ff417(0x47b),'message':(_0x14449c['name']||_0x2ff417(0x1db))+'\x20declined\x20your\x20profile\x20view\x20request.','requestId':_0x1572bf,'timestamp':new Date(),'seen':![]});const _0x1fcd56=doc(db,_0x2ff417(0x23d),_0x16be02);await runTransaction(db,async _0x41bd30=>{const _0x3dc5a3=_0x2ff417,_0x197b25=await _0x41bd30[_0x3dc5a3(0x401)](_0x1fcd56),_0x12ec91=_0x197b25[_0x3dc5a3(0x4e4)]()?_0x197b25[_0x3dc5a3(0x3b1)]()['unseenCount']||0x0:0x0;_0x41bd30[_0x3dc5a3(0x244)](_0x1fcd56,{'unseenCount':_0x12ec91+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x3dc5a3(0x22e)]('Client:\x20Incremented\x20unseenCount\x20for\x20'+_0x16be02+_0x3dc5a3(0x310)+(_0x12ec91+0x1));}),alert(_0x2ff417(0x455)),closeModal(_0x2ff417(0x4ec)),await updateProfileRequestsUI(_0x6a59f7),viewProfileViewRequests(_0x6a59f7),setTimeout(()=>updateNotificationBadge(_0x16be02,!![]),0x3e8);}async function revokeProfileAccess(_0x2a1008,_0x271728){const _0x35fd9b=_0x6d63e4,_0x495993=doc(db,_0x35fd9b(0x23d),_0x2a1008,_0x35fd9b(0x420),_0x271728);await deleteDoc(_0x495993),alert(_0x35fd9b(0x1d7)),closeModal('viewProfileModal'),await viewProfile(_0x2a1008);}async function revokeProfileAccessFromModal(_0x5740f0,_0x18b5b5){const _0x4bb312=_0x6d63e4,_0x2cfdf8=doc(db,_0x4bb312(0x23d),_0x18b5b5,'profileRequests',_0x5740f0);await deleteDoc(_0x2cfdf8),alert('Profile\x20access\x20revoked!'),closeModal(_0x4bb312(0x4ec)),await updateProfileRequestsUI(_0x18b5b5),viewProfileViewRequests(_0x18b5b5);}async function viewProfileViewRequests(_0x463fa6){const _0x3f70e1=_0x6d63e4,_0x54aafa=document['getElementById'](_0x3f70e1(0x4ec)),_0x2bb0a9=document[_0x3f70e1(0x4fb)](_0x3f70e1(0x466)),_0x34e2ae=document[_0x3f70e1(0x4fb)](_0x3f70e1(0x4d7)),_0x55071b=collection(db,_0x3f70e1(0x23d),_0x463fa6,_0x3f70e1(0x420)),_0x1c2397=query(_0x55071b,where('status','==','pending')),_0x312384=await getDocs(_0x1c2397);_0x2bb0a9[_0x3f70e1(0x381)]=_0x312384[_0x3f70e1(0x371)]?'<p>No\x20pending\x20profile\x20view\x20requests.</p>':'';for(const _0x5dffe4 of _0x312384[_0x3f70e1(0x55b)]){const _0x49449d=_0x5dffe4[_0x3f70e1(0x3b1)](),_0x256fe3=await fetchUserData(_0x49449d[_0x3f70e1(0x1d5)]);_0x2bb0a9['innerHTML']+=_0x3f70e1(0x3df)+_0x5dffe4['id']+_0x3f70e1(0x1fe)+_0x256fe3[_0x3f70e1(0x3d8)]+'\x20('+_0x256fe3['username']+_0x3f70e1(0x51d)+_0x5dffe4['id']+_0x3f70e1(0x28a)+_0x5dffe4['id']+_0x3f70e1(0x4d1);}const _0x11a0c4=query(_0x55071b,where(_0x3f70e1(0x410),'==',_0x3f70e1(0x431))),_0x4a017c=await getDocs(_0x11a0c4);_0x34e2ae[_0x3f70e1(0x381)]=_0x4a017c[_0x3f70e1(0x371)]?_0x3f70e1(0x530):'';for(const _0x365cbe of _0x4a017c[_0x3f70e1(0x55b)]){const _0x55b5f8=_0x365cbe[_0x3f70e1(0x3b1)](),_0x397f4b=await fetchUserData(_0x55b5f8[_0x3f70e1(0x1d5)]);_0x34e2ae[_0x3f70e1(0x381)]+=_0x3f70e1(0x3d1)+_0x365cbe['id']+'\x22>\x0a\x20\x20\x20\x20<span>'+_0x397f4b[_0x3f70e1(0x3d8)]+'\x20('+_0x397f4b[_0x3f70e1(0x49a)]+_0x3f70e1(0x3cf)+_0x365cbe['id']+_0x3f70e1(0x337);}document[_0x3f70e1(0x47a)](_0x3f70e1(0x38e))[_0x3f70e1(0x518)](_0x13a245=>_0x13a245['style'][_0x3f70e1(0x2da)]=_0x3f70e1(0x2d3)),_0x54aafa[_0x3f70e1(0x52f)][_0x3f70e1(0x2da)]=_0x3f70e1(0x4a5),_0x54aafa[_0x3f70e1(0x284)][_0x3f70e1(0x3ab)](_0x3f70e1(0x4b1)),_0x2bb0a9[_0x3f70e1(0x47a)]('.accept-btn')[_0x3f70e1(0x518)](_0x5d44a2=>{const _0x46cbca=_0x3f70e1;_0x5d44a2[_0x46cbca(0x48a)](_0x46cbca(0x3b5),()=>acceptProfileRequest(_0x5d44a2[_0x46cbca(0x3f5)]['requestId'],_0x463fa6));}),_0x2bb0a9['querySelectorAll']('.decline-btn')[_0x3f70e1(0x518)](_0x3be964=>{const _0x2e366f=_0x3f70e1;_0x3be964[_0x2e366f(0x48a)](_0x2e366f(0x3b5),()=>declineProfileRequest(_0x3be964[_0x2e366f(0x3f5)]['requestId'],_0x463fa6));}),_0x34e2ae[_0x3f70e1(0x47a)](_0x3f70e1(0x4ad))[_0x3f70e1(0x518)](_0x1372dc=>{const _0x216da5=_0x3f70e1;_0x1372dc[_0x216da5(0x48a)](_0x216da5(0x3b5),()=>revokeProfileAccessFromModal(_0x1372dc[_0x216da5(0x3f5)][_0x216da5(0x21a)],_0x463fa6));});}let currentMembers=[];async function viewMembers(_0x5d322b){const _0x3a3717=_0x6d63e4,_0x1e9db9=document['getElementById'](_0x3a3717(0x3e9)),_0x302608=document[_0x3a3717(0x4fb)](_0x3a3717(0x2aa)),_0x26ca99=document['getElementById']('memberSearch');if(!_0x1e9db9||!_0x302608||!_0x26ca99){console[_0x3a3717(0x43d)](_0x3a3717(0x1c2));return;}lastMemberDoc=null,_0x302608[_0x3a3717(0x381)]=_0x3a3717(0x25c),_0x1e9db9[_0x3a3717(0x52f)][_0x3a3717(0x2da)]=_0x3a3717(0x4a5),_0x1e9db9[_0x3a3717(0x284)][_0x3a3717(0x3ab)](_0x3a3717(0x4b1));const _0x1d0163=await getCommData(),_0x26cb8c=_0x1d0163[_0x3a3717(0x435)]||0x0;console[_0x3a3717(0x22e)](_0x3a3717(0x203),_0x26cb8c);const _0x20683c=_0x1e9db9[_0x3a3717(0x4cc)]('h2')||document[_0x3a3717(0x2ff)]('h2');if(!_0x1e9db9[_0x3a3717(0x4cc)]('h2'))_0x1e9db9[_0x3a3717(0x4cc)](_0x3a3717(0x2ee))[_0x3a3717(0x2f1)](_0x20683c);_0x20683c[_0x3a3717(0x26e)]=_0x3a3717(0x27e)+_0x26cb8c+')';const _0x27fc65=collection(db,'communities',_0x5d322b,_0x3a3717(0x322)),_0x5268ae=query(_0x27fc65,limit(ITEMS_PER_PAGE));let _0x4ca3b3;try{_0x4ca3b3=await getDocs(_0x5268ae);}catch(_0x2a6b93){console[_0x3a3717(0x43d)](_0x3a3717(0x292),_0x2a6b93),_0x302608['innerHTML']=_0x3a3717(0x2c9);return;}currentMembers=_0x4ca3b3[_0x3a3717(0x55b)][_0x3a3717(0x473)](_0x5e01a8=>_0x5e01a8['id']),console[_0x3a3717(0x22e)](_0x3a3717(0x507),currentMembers[_0x3a3717(0x3cb)]),await loadMembersBatch(_0x4ca3b3,!![],_0x26cb8c),_0x26ca99[_0x3a3717(0x250)]=debounce(_0x4d2f3c=>searchMembers(_0x5d322b,_0x4d2f3c[_0x3a3717(0x449)]['value']),0x12c);}async function loadMembersBatch(_0x1b403c,_0x4247d6=![],_0x3ce065){const _0x5e77a2=_0x6d63e4,_0x5cf63d=document[_0x5e77a2(0x4fb)](_0x5e77a2(0x2aa));_0x4247d6&&(_0x5cf63d['innerHTML']='',lastMemberDoc=null);const _0x562444=lastMemberDoc?_0x5cf63d['querySelectorAll'](_0x5e77a2(0x4de))[_0x5e77a2(0x3cb)]:0x0;console[_0x5e77a2(0x22e)]('Loading\x20batch:',{'startIndex':_0x562444,'batchSize':_0x1b403c[_0x5e77a2(0x55b)][_0x5e77a2(0x3cb)]});if(_0x1b403c[_0x5e77a2(0x371)]&&_0x562444===0x0){_0x5cf63d[_0x5e77a2(0x381)]=_0x5e77a2(0x392),updateMembersButtons(_0x3ce065,0x0);return;}const _0x204cc5=_0x1b403c[_0x5e77a2(0x55b)][_0x5e77a2(0x473)](_0x35456a=>_0x35456a['id']);let _0x1dad5c;try{const _0x199d6e=query(collection(db,_0x5e77a2(0x23d)),where('__name__','in',_0x204cc5));_0x1dad5c=await getDocs(_0x199d6e);}catch(_0x4c5b9f){console[_0x5e77a2(0x43d)](_0x5e77a2(0x461),_0x4c5b9f),_0x5cf63d[_0x5e77a2(0x381)]+=_0x5e77a2(0x2c1);return;}console['log']('Fetched\x20users:',_0x1dad5c['docs'][_0x5e77a2(0x3cb)]),_0x1dad5c[_0x5e77a2(0x55b)][_0x5e77a2(0x518)](_0x4d341d=>{const _0x337da2=_0x5e77a2,_0x67a4b5=_0x4d341d[_0x337da2(0x3b1)](),_0x411a4d=_0x337da2(0x413)+_0x4d341d['id'];if(!document['getElementById'](_0x411a4d)){const _0x7dfc03=document[_0x337da2(0x2ff)](_0x337da2(0x2f6));_0x7dfc03[_0x337da2(0x396)]=_0x337da2(0x4a7),_0x7dfc03['id']=_0x411a4d,_0x7dfc03[_0x337da2(0x381)]=_0x337da2(0x444)+(_0x67a4b5[_0x337da2(0x407)]||_0x337da2(0x4ed))+'\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22'+_0x4d341d['id']+'\x22>'+_0x67a4b5['name']+_0x337da2(0x1af),_0x5cf63d[_0x337da2(0x218)](_0x7dfc03),_0x7dfc03[_0x337da2(0x4cc)]('.username[data-uid=\x22'+_0x4d341d['id']+'\x22]')[_0x337da2(0x48a)](_0x337da2(0x3b5),()=>viewProfile(_0x4d341d['id']));}}),lastMemberDoc=_0x1b403c[_0x5e77a2(0x55b)][_0x5e77a2(0x3cb)]===ITEMS_PER_PAGE?_0x1b403c['docs'][_0x1b403c[_0x5e77a2(0x55b)]['length']-0x1]:null;const _0x4a71ce=_0x5cf63d[_0x5e77a2(0x47a)](_0x5e77a2(0x4de))[_0x5e77a2(0x3cb)];console[_0x5e77a2(0x22e)](_0x5e77a2(0x295),_0x4a71ce),updateMembersButtons(_0x3ce065,_0x4a71ce);}function updateMembersButtons(_0x1f151a,_0x40f71f){const _0xb322dd=_0x6d63e4,_0x13c0e0=document['getElementById'](_0xb322dd(0x2aa)),_0x1f0b3d=_0x13c0e0[_0xb322dd(0x4cc)](_0xb322dd(0x53c)),_0x315368=_0x13c0e0[_0xb322dd(0x4cc)](_0xb322dd(0x429));if(_0x1f0b3d)_0x1f0b3d[_0xb322dd(0x3ab)]();if(_0x315368)_0x315368[_0xb322dd(0x3ab)]();console[_0xb322dd(0x22e)]('Updating\x20buttons:',{'totalMembers':_0x1f151a,'loadedCount':_0x40f71f});if(_0x1f151a>0x0){const _0x17c773=document['createElement']('button');_0x17c773['id']=_0xb322dd(0x54b),_0x17c773[_0xb322dd(0x26e)]=_0xb322dd(0x3e6),_0x17c773[_0xb322dd(0x396)]=_0xb322dd(0x536),_0x17c773[_0xb322dd(0x52f)][_0xb322dd(0x2da)]=_0x1f151a>_0x40f71f?_0xb322dd(0x21e):_0xb322dd(0x2d3),_0x17c773[_0xb322dd(0x3e2)]=async()=>{const _0x5acbed=_0xb322dd,_0xd729de=collection(db,'communities',communityId,_0x5acbed(0x322));try{const _0x5108a5=query(_0xd729de,startAfter(lastMemberDoc),limit(ITEMS_PER_PAGE)),_0x939d50=await getDocs(_0x5108a5);currentMembers=currentMembers[_0x5acbed(0x393)](_0x939d50['docs'][_0x5acbed(0x473)](_0x1983ad=>_0x1983ad['id'])),await loadMembersBatch(_0x939d50,![],_0x1f151a);}catch(_0x499efb){console[_0x5acbed(0x43d)](_0x5acbed(0x398),_0x499efb),_0x13c0e0[_0x5acbed(0x381)]+=_0x5acbed(0x28f);}};const _0x526afc=document['createElement'](_0xb322dd(0x4b4));_0x526afc['id']=_0xb322dd(0x3e7),_0x526afc['textContent']=_0xb322dd(0x43e),_0x526afc[_0xb322dd(0x396)]=_0xb322dd(0x243),_0x526afc[_0xb322dd(0x52f)][_0xb322dd(0x2da)]=_0x40f71f>ITEMS_PER_PAGE?'block':'none',_0x526afc['onclick']=()=>loadMembersBatch([],!![],_0x1f151a),_0x13c0e0[_0xb322dd(0x218)](_0x17c773),_0x13c0e0[_0xb322dd(0x218)](_0x526afc),console['log'](_0xb322dd(0x2fc),_0x17c773[_0xb322dd(0x52f)][_0xb322dd(0x2da)]);}}async function searchMembers(_0x521b5a,_0x5e8bb9){const _0x43834a=_0x6d63e4,_0x112696=document[_0x43834a(0x4fb)](_0x43834a(0x2aa));let _0x58bd41=0x0;_0x112696[_0x43834a(0x381)]=_0x43834a(0x44c);if(!_0x5e8bb9)return lastMemberDoc=null,viewMembers(_0x521b5a);const _0x5a737f=collection(db,'communities',_0x521b5a,_0x43834a(0x322));let _0x3c7e95;try{_0x3c7e95=await getDocs(_0x5a737f);}catch(_0x1f6d98){console[_0x43834a(0x43d)](_0x43834a(0x4ba),_0x1f6d98),_0x112696[_0x43834a(0x381)]=_0x43834a(0x2b0);return;}const _0x1da948=_0x3c7e95[_0x43834a(0x55b)][_0x43834a(0x473)](_0xe0e57a=>_0xe0e57a['id']),_0x314cee=[];for(const _0x227691 of _0x1da948){const _0x1db66a=userDataCache[_0x227691]||await fetchUserData(_0x227691);_0x1db66a&&(_0x1db66a[_0x43834a(0x3d8)]['toLowerCase']()[_0x43834a(0x542)](_0x5e8bb9[_0x43834a(0x1e7)]())||_0x1db66a[_0x43834a(0x49a)][_0x43834a(0x1e7)]()[_0x43834a(0x542)](_0x5e8bb9[_0x43834a(0x1e7)]()))&&_0x314cee[_0x43834a(0x22f)](_0x227691);}console['log'](_0x43834a(0x34e)+_0x314cee[_0x43834a(0x3cb)]+_0x43834a(0x443)+_0x5e8bb9+'\x22');async function _0x11a26f(_0x2125a2=![]){const _0x3038b2=_0x43834a;_0x2125a2&&(_0x58bd41=0x0,_0x112696['innerHTML']='');const _0x20cad6=_0x314cee['slice'](_0x58bd41,_0x58bd41+ITEMS_PER_PAGE);console['log']('Loading\x20search\x20batch:\x20startIndex='+_0x58bd41+_0x3038b2(0x2f5)+_0x20cad6[_0x3038b2(0x3cb)]);if(_0x20cad6[_0x3038b2(0x3cb)]===0x0){_0x58bd41===0x0&&(_0x112696[_0x3038b2(0x381)]=_0x3038b2(0x491));_0x54728c(_0x314cee[_0x3038b2(0x3cb)],_0x58bd41);return;}let _0x2ed4e5;try{const _0x201b08=query(collection(db,'users'),where(_0x3038b2(0x1c8),'in',_0x20cad6));_0x2ed4e5=await getDocs(_0x201b08);}catch(_0x54e6e5){console[_0x3038b2(0x43d)]('Error\x20fetching\x20search\x20batch:',_0x54e6e5),_0x112696[_0x3038b2(0x381)]+=_0x3038b2(0x281);return;}if(_0x58bd41===0x0)_0x112696[_0x3038b2(0x381)]='';_0x2ed4e5['docs'][_0x3038b2(0x518)](_0x226067=>{const _0x4e8ffa=_0x3038b2,_0x4e2bcd=_0x226067[_0x4e8ffa(0x3b1)](),_0x15494f=_0x4e8ffa(0x413)+_0x226067['id'];if(!document['getElementById'](_0x15494f)){const _0x3ceb05=document[_0x4e8ffa(0x2ff)](_0x4e8ffa(0x2f6));_0x3ceb05[_0x4e8ffa(0x396)]='user-item',_0x3ceb05['id']=_0x15494f,_0x3ceb05[_0x4e8ffa(0x381)]=_0x4e8ffa(0x497)+(_0x4e2bcd[_0x4e8ffa(0x407)]||_0x4e8ffa(0x4ed))+_0x4e8ffa(0x386)+_0x226067['id']+'\x22>'+_0x4e2bcd[_0x4e8ffa(0x3d8)]+_0x4e8ffa(0x2bf),_0x112696[_0x4e8ffa(0x218)](_0x3ceb05),_0x3ceb05['querySelector'](_0x4e8ffa(0x288)+_0x226067['id']+'\x22]')[_0x4e8ffa(0x48a)](_0x4e8ffa(0x3b5),()=>viewProfile(_0x226067['id']));}});const _0x61ca9e=_0x112696['querySelectorAll'](_0x3038b2(0x4de))[_0x3038b2(0x3cb)];_0x54728c(_0x314cee[_0x3038b2(0x3cb)],_0x61ca9e);}function _0x54728c(_0x252317,_0x3f0e29){const _0x5e14bc=_0x43834a,_0x3358ad=_0x112696[_0x5e14bc(0x4cc)](_0x5e14bc(0x35c)),_0x314fe4=_0x112696[_0x5e14bc(0x4cc)](_0x5e14bc(0x411));if(_0x3358ad)_0x3358ad[_0x5e14bc(0x3ab)]();if(_0x314fe4)_0x314fe4[_0x5e14bc(0x3ab)]();console['log'](_0x5e14bc(0x31c)+_0x252317+',\x20loadedCount='+_0x3f0e29);if(_0x252317>0x0){const _0x470378=document[_0x5e14bc(0x2ff)](_0x5e14bc(0x4b4));_0x470378['id']=_0x5e14bc(0x238),_0x470378[_0x5e14bc(0x26e)]='See\x20More',_0x470378[_0x5e14bc(0x396)]=_0x5e14bc(0x536),_0x470378[_0x5e14bc(0x52f)][_0x5e14bc(0x2da)]=_0x252317>_0x3f0e29?_0x5e14bc(0x21e):_0x5e14bc(0x2d3),_0x470378[_0x5e14bc(0x3e2)]=()=>{_0x58bd41+=ITEMS_PER_PAGE,_0x11a26f();};const _0x482653=document[_0x5e14bc(0x2ff)](_0x5e14bc(0x4b4));_0x482653['id']=_0x5e14bc(0x4fe),_0x482653[_0x5e14bc(0x26e)]=_0x5e14bc(0x43e),_0x482653['className']='see-less-btn',_0x482653['style'][_0x5e14bc(0x2da)]=_0x3f0e29>ITEMS_PER_PAGE?_0x5e14bc(0x21e):_0x5e14bc(0x2d3),_0x482653[_0x5e14bc(0x3e2)]=()=>_0x11a26f(!![]),_0x112696['appendChild'](_0x470378),_0x112696[_0x5e14bc(0x218)](_0x482653);}}await _0x11a26f(!![]);}async function viewCommunities(_0x264ddf){const _0x3e4610=_0x6d63e4,_0x2eacd0=document[_0x3e4610(0x4fb)](_0x3e4610(0x4e3)),_0x52cac8=document[_0x3e4610(0x4fb)]('communitiesList'),_0x17a5e7=document[_0x3e4610(0x4fb)](_0x3e4610(0x4c0));_0x52cac8[_0x3e4610(0x381)]=_0x3e4610(0x25c),_0x2eacd0['style'][_0x3e4610(0x2da)]=_0x3e4610(0x4a5),_0x2eacd0[_0x3e4610(0x284)]['remove'](_0x3e4610(0x4b1));const _0x2a130a=doc(db,_0x3e4610(0x23d),_0x264ddf),_0x209928=await getDoc(_0x2a130a),_0x6c827e=_0x209928[_0x3e4610(0x3b1)]()['communityIds']||[];if(_0x6c827e[_0x3e4610(0x3cb)]===0x0)_0x52cac8[_0x3e4610(0x381)]='<p>Youâ€™re\x20not\x20in\x20any\x20communities\x20yet!</p>';else{_0x52cac8['innerHTML']='';const _0x570a98=_0x6c827e[_0x3e4610(0x473)](_0x52db22=>getDoc(doc(db,_0x3e4610(0x4d3),_0x52db22))),_0xe57fe0=await Promise['all'](_0x570a98);_0xe57fe0[_0x3e4610(0x518)](_0x1272a1=>{const _0x57a899=_0x3e4610;if(_0x1272a1[_0x57a899(0x4e4)]()){const _0x125c17=_0x1272a1[_0x57a899(0x3b1)](),_0x52a799=(_0x125c17[_0x57a899(0x525)]||[])[_0x57a899(0x542)](_0x264ddf);if(!_0x52a799){const _0x260dd4=document[_0x57a899(0x2ff)](_0x57a899(0x2f6));_0x260dd4['className']=_0x57a899(0x405),_0x260dd4[_0x57a899(0x381)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./community.html?id='+_0x1272a1['id']+'\x22>'+(_0x125c17[_0x57a899(0x3d8)]||'Unnamed')+'</a>\x0a\x20\x20\x20\x20\x20\x20',_0x52cac8[_0x57a899(0x218)](_0x260dd4);}}}),!_0x52cac8[_0x3e4610(0x248)]['length']&&(_0x52cac8[_0x3e4610(0x381)]=_0x3e4610(0x4a2));}_0x17a5e7[_0x3e4610(0x3e2)]=()=>{const _0x2846a8=_0x3e4610;_0x2eacd0[_0x2846a8(0x52f)][_0x2846a8(0x2da)]=_0x2846a8(0x2d3),_0x2eacd0[_0x2846a8(0x284)][_0x2846a8(0x4f7)]('hidden');};}async function getUnseenNotificationCount(_0x3592b3,_0x24ab33=![]){const _0x44f977=_0x6d63e4,_0x101745=Date[_0x44f977(0x321)](),_0x457a82=_0x44f977(0x3c4)+_0x3592b3,_0x493f99=0x3c*0x3c*0x3e8,_0x19f6b1=JSON[_0x44f977(0x2cf)](localStorage[_0x44f977(0x246)](_0x457a82))||{'count':0x0,'timestamp':0x0};if(!_0x24ab33&&_0x19f6b1[_0x44f977(0x556)]&&_0x101745-_0x19f6b1[_0x44f977(0x556)]<_0x493f99)return console[_0x44f977(0x22e)](_0x44f977(0x367)+_0x19f6b1[_0x44f977(0x1ef)]+_0x44f977(0x349)+Math[_0x44f977(0x4d9)]((_0x101745-_0x19f6b1[_0x44f977(0x556)])/0x3e8)+'s)'),_0x19f6b1[_0x44f977(0x1ef)];console[_0x44f977(0x22e)](_0x44f977(0x4cb));const _0x16906f=doc(db,_0x44f977(0x23d),_0x3592b3);try{const _0x44e4ab=await getDoc(_0x16906f);if(!_0x44e4ab[_0x44f977(0x4e4)]())throw new Error(_0x44f977(0x3cd));const _0x5e2413=_0x44e4ab[_0x44f977(0x3b1)]()['unseenCount']||0x0;return localStorage[_0x44f977(0x1cf)](_0x457a82,JSON[_0x44f977(0x377)]({'count':_0x5e2413,'timestamp':_0x101745})),console['log']('Fetched\x20unseen\x20count:\x20'+_0x5e2413),_0x5e2413;}catch(_0x5b64fd){return console[_0x44f977(0x43d)](_0x44f977(0x3b7),_0x5b64fd),_0x19f6b1[_0x44f977(0x1ef)];}}window[_0x6d63e4(0x504)]=updateNotificationBadge;async function updateNotificationBadge(_0x50b57c,_0x5b95bc=!![]){const _0xa17b43=_0x6d63e4,_0x12894a=await getUnseenNotificationCount(_0x50b57c,_0x5b95bc),_0x2ddcc5=document[_0xa17b43(0x4fb)](_0xa17b43(0x3c2));return _0x2ddcc5&&(_0x2ddcc5[_0xa17b43(0x26e)]=_0x12894a>0x0?'('+_0x12894a+')':'',_0x2ddcc5[_0xa17b43(0x52f)]['display']=_0x12894a>0x0?_0xa17b43(0x277):_0xa17b43(0x2d3),console['log']('Badge\x20updated\x20to:\x20'+_0x12894a)),_0x12894a;}document['addEventListener'](_0x6d63e4(0x301),async()=>{const _0x3b80dc=_0x6d63e4,_0x4f9051=auth[_0x3b80dc(0x224)];_0x4f9051&&await updateNotificationBadge(_0x4f9051[_0x3b80dc(0x26b)],!![]);});async function openNotificationsModal(_0x55617f){const _0x4ef633=_0x6d63e4,_0x351bb9=document[_0x4ef633(0x4fb)](_0x4ef633(0x1c7)),_0x2142ee=document[_0x4ef633(0x4fb)](_0x4ef633(0x2f0)),_0xa99f06=document[_0x4ef633(0x4fb)](_0x4ef633(0x230)),_0x5a33ed=document[_0x4ef633(0x4fb)](_0x4ef633(0x33b));if(!_0x351bb9||!_0x2142ee||!_0xa99f06||!_0x5a33ed){console[_0x4ef633(0x43d)]('Notifications\x20modal\x20elements\x20missing\x20from\x20DOM!'),alert('Somethingâ€™s\x20brokenâ€”refresh\x20the\x20page!');return;}let _0x27c40d=_0x351bb9[_0x4ef633(0x4cc)](_0x4ef633(0x3d3));!_0x27c40d&&(_0x27c40d=document[_0x4ef633(0x2ff)](_0x4ef633(0x4b4)),_0x27c40d['id']='refreshNotificationsBtn',_0x27c40d['textContent']=_0x4ef633(0x44a),_0x27c40d[_0x4ef633(0x52f)]['marginLeft']='10px',_0x351bb9['querySelector']('.modal-content')[_0x4ef633(0x252)](_0x27c40d,document[_0x4ef633(0x4fb)](_0x4ef633(0x2b1))));_0x2142ee[_0x4ef633(0x381)]=_0x4ef633(0x25c),_0x351bb9[_0x4ef633(0x52f)]['display']=_0x4ef633(0x4a5),_0x351bb9[_0x4ef633(0x284)][_0x4ef633(0x3ab)](_0x4ef633(0x4b1));const _0x32b91f=doc(db,_0x4ef633(0x23d),_0x55617f);let _0x18e95f=[];try{const _0x45ae1e=await getDoc(_0x32b91f);if(!_0x45ae1e[_0x4ef633(0x4e4)]())throw new Error(_0x4ef633(0x3cd));const _0x1b3aba=_0x45ae1e['data']()[_0x4ef633(0x3d0)]||[],_0x33f3f7=await Promise[_0x4ef633(0x2c8)](_0x1b3aba[_0x4ef633(0x473)](_0x477690=>getDoc(doc(db,_0x4ef633(0x4d3),_0x477690))));_0x18e95f=_0x33f3f7[_0x4ef633(0x1b4)](_0x2b1cba=>_0x2b1cba['exists']())[_0x4ef633(0x473)](_0x4272e3=>({'id':_0x4272e3['id'],'name':_0x4272e3[_0x4ef633(0x3b1)]()[_0x4ef633(0x3d8)]||_0x4ef633(0x29d)}));}catch(_0x6d2ae2){console[_0x4ef633(0x43d)](_0x4ef633(0x278),_0x6d2ae2),_0x2142ee['innerHTML']=_0x4ef633(0x3f7);return;}_0x5a33ed[_0x4ef633(0x381)]='<option\x20value=\x22all\x22>All\x20Communities</option>',_0x18e95f[_0x4ef633(0x518)](_0x4ea439=>{const _0x2ea796=_0x4ef633,_0x1cf87f=document['createElement'](_0x2ea796(0x21c));_0x1cf87f['value']=_0x4ea439['id'],_0x1cf87f['textContent']=_0x4ea439[_0x2ea796(0x3d8)],_0x5a33ed[_0x2ea796(0x218)](_0x1cf87f);});const _0x4bab1f=0xa,_0x3d4633=await updateNotificationBadge(_0x55617f,![]);_0xa99f06[_0x4ef633(0x26e)]=_0x3d4633;async function _0x1794cf(){const _0x4c4ee3=_0x4ef633;console[_0x4c4ee3(0x22e)](_0x4c4ee3(0x494),_0x55617f,_0x4c4ee3(0x382),communityId),await updateChatBadge(_0x55617f,!![]),await window[_0x4c4ee3(0x336)](communityId),await updateChatBadge(_0x55617f);}async function _0x488204(_0x2c0f58=![],_0x24cb7e=![]){const _0x9bfb54=_0x4ef633,_0x2be402=_0x5a33ed['value'];_0x2c0f58&&(lastDoc=null,displayedCount=0x0,allNotifications=[],_0x2142ee[_0x9bfb54(0x381)]='<div\x20class=\x22loading\x22>â³\x20Loading...</div>');let _0x58aa11=0x3;while(_0x58aa11>0x0){try{const _0x1d8dc4=collection(db,_0x9bfb54(0x23d),_0x55617f,_0x9bfb54(0x1ed));let _0x2fd08c;_0x2be402==='all'?_0x2fd08c=query(_0x1d8dc4,orderBy(_0x9bfb54(0x556),_0x9bfb54(0x2a9)),...lastDoc&&!_0x2c0f58?[startAfter(lastDoc)]:[],limit(_0x4bab1f)):_0x2fd08c=query(_0x1d8dc4,where(_0x9bfb54(0x2b4),'==',_0x2be402),orderBy('timestamp',_0x9bfb54(0x2a9)),...lastDoc&&!_0x2c0f58?[startAfter(lastDoc)]:[],limit(_0x4bab1f));const _0xa44625=await getDocs(_0x2fd08c),_0x1fa841=_0xa44625['docs'][_0x9bfb54(0x473)](_0x48ef6c=>({'id':_0x48ef6c['id'],'data':_0x48ef6c[_0x9bfb54(0x3b1)]()}));_0x24cb7e?_0x1fa841['forEach'](_0x5e8970=>{const _0x3d6260=_0x9bfb54;!allNotifications[_0x3d6260(0x327)](_0x8af7f=>_0x8af7f['id']===_0x5e8970['id'])&&allNotifications[_0x3d6260(0x551)](_0x5e8970);}):(_0x1fa841[_0x9bfb54(0x518)](_0x199d82=>{const _0x204cab=_0x9bfb54;!allNotifications[_0x204cab(0x327)](_0x121953=>_0x121953['id']===_0x199d82['id'])&&allNotifications[_0x204cab(0x22f)](_0x199d82);}),lastDoc=_0xa44625[_0x9bfb54(0x55b)][_0x9bfb54(0x3cb)]===_0x4bab1f?_0xa44625[_0x9bfb54(0x55b)][_0xa44625[_0x9bfb54(0x55b)][_0x9bfb54(0x3cb)]-0x1]:null);allNotifications[_0x9bfb54(0x29f)]((_0x670a22,_0x1177a4)=>_0x1177a4[_0x9bfb54(0x3b1)]['timestamp'][_0x9bfb54(0x23c)]()-_0x670a22[_0x9bfb54(0x3b1)][_0x9bfb54(0x556)]['toDate']());if(allNotifications[_0x9bfb54(0x3cb)]===0x0)_0x2142ee[_0x9bfb54(0x381)]=_0x9bfb54(0x394);else{const _0xcca593=_0x2c0f58?0x0:displayedCount,_0x93398d=Math[_0x9bfb54(0x2b2)](_0xcca593+_0x4bab1f,allNotifications['length']),_0x359e62=allNotifications['slice'](0x0,_0x93398d)[_0x9bfb54(0x473)](_0xe21fc7=>_0x42dc7c({'id':_0xe21fc7['id'],'data':()=>_0xe21fc7['data']},_0x18e95f))[_0x9bfb54(0x48c)]('');_0x2142ee[_0x9bfb54(0x381)]=_0x359e62,displayedCount=_0x93398d;}const _0x25a031=await getUnseenNotificationCount(_0x55617f,_0x24cb7e);_0xa99f06[_0x9bfb54(0x26e)]=_0x25a031,_0x299fc8(),_0x5c79fc();break;}catch(_0x4d85d2){console[_0x9bfb54(0x43d)]('Error\x20fetching\x20notifications:',_0x4d85d2),_0x58aa11--;if(_0x58aa11===0x0){_0x2142ee[_0x9bfb54(0x381)]=_0x9bfb54(0x424),_0x299fc8();break;}await new Promise(_0x38177d=>setTimeout(_0x38177d,0x3e8));}}}function _0x42dc7c(_0x2ae677,_0x46f3d6){const _0x11e41d=_0x4ef633,_0x45bb07=_0x2ae677[_0x11e41d(0x3b1)](),_0x308913=new Date(_0x45bb07['timestamp'][_0x11e41d(0x23c)]())[_0x11e41d(0x1ca)]();let _0x2cdacf=_0x45bb07[_0x11e41d(0x44b)]||_0x11e41d(0x201);if(_0x45bb07[_0x11e41d(0x2b4)]&&_0x45bb07[_0x11e41d(0x50f)]!==_0x11e41d(0x1c9)){const _0x50b13a=_0x46f3d6['find'](_0x50a361=>_0x50a361['id']===_0x45bb07[_0x11e41d(0x2b4)])?.[_0x11e41d(0x3d8)]||_0x11e41d(0x27c);_0x2cdacf+='\x20('+_0x50b13a+')';}let _0x1769c8=_0x11e41d(0x209)+(_0x45bb07[_0x11e41d(0x2e2)]?_0x11e41d(0x2e2):'')+_0x11e41d(0x306)+_0x2ae677['id']+_0x11e41d(0x4da)+_0x45bb07[_0x11e41d(0x50f)]+_0x11e41d(0x548);return _0x45bb07['type']===_0x11e41d(0x320)&&_0x45bb07[_0x11e41d(0x43f)]?_0x1769c8+=_0x11e41d(0x480)+_0x45bb07[_0x11e41d(0x43f)]+'\x22>'+_0x2cdacf+_0x11e41d(0x2ad):_0x1769c8+=_0x11e41d(0x207)+_0x2cdacf+_0x11e41d(0x4b8),_0x1769c8+=_0x11e41d(0x452)+_0x308913+_0x11e41d(0x1af)+(_0x45bb07[_0x11e41d(0x20b)]?_0x11e41d(0x38b)+_0x45bb07[_0x11e41d(0x20b)]+_0x11e41d(0x42a):'')+_0x11e41d(0x46e)+_0x2ae677['id']+'\x22\x20'+(_0x45bb07[_0x11e41d(0x2e2)]?_0x11e41d(0x242):'')+'>'+(_0x45bb07[_0x11e41d(0x2e2)]?_0x11e41d(0x3ae):_0x11e41d(0x215))+_0x11e41d(0x505),_0x45bb07[_0x11e41d(0x50f)]==='ban_appeal'&&!_0x45bb07[_0x11e41d(0x4e5)]&&(_0x1769c8+=_0x11e41d(0x41f)+_0x2ae677['id']+_0x11e41d(0x3a8)),_0x1769c8+=_0x11e41d(0x1e3),_0x1769c8;}function _0x5c79fc(){const _0x11ef02=_0x4ef633;_0x2142ee[_0x11ef02(0x47a)](_0x11ef02(0x2e1))[_0x11ef02(0x518)](_0x41db61=>{const _0x652fe=_0x11ef02;_0x41db61[_0x652fe(0x48a)]('click',_0x578d85=>{const _0x40268f=_0x652fe;_0x578d85[_0x40268f(0x48f)](),copyPostId(_0x41db61[_0x40268f(0x3f5)]['postId']);});}),_0x2142ee[_0x11ef02(0x47a)]('.mark-seen-btn2')[_0x11ef02(0x518)](_0x5b69cc=>{const _0x54607c=_0x11ef02;!_0x5b69cc['disabled']&&_0x5b69cc[_0x54607c(0x48a)](_0x54607c(0x3b5),_0x3c8e8c=>{const _0x3cf091=_0x54607c;_0x3c8e8c[_0x3cf091(0x48f)](),markNotificationSeen(_0x5b69cc[_0x3cf091(0x3f5)]['id']);});}),_0x2142ee[_0x11ef02(0x47a)](_0x11ef02(0x1da))[_0x11ef02(0x518)](_0x48feae=>{const _0x2673db=_0x11ef02;_0x48feae[_0x2673db(0x48a)](_0x2673db(0x24a),async _0x8335e0=>{const _0x18febb=_0x2673db;_0x8335e0[_0x18febb(0x2e9)]();const _0x5eafd4=_0x48feae[_0x18febb(0x4cc)](_0x18febb(0x4cf))[_0x18febb(0x361)]['trim']();if(_0x5eafd4){const _0x187272=_0x48feae[_0x18febb(0x3f5)]['id'],_0x494c31=allNotifications[_0x18febb(0x1f1)](_0x3084bc=>_0x3084bc['id']===_0x187272)[_0x18febb(0x3b1)];try{const _0x7e709b=await getDoc(doc(db,'users',_0x55617f)),_0x18bfb=_0x7e709b['exists']()?_0x7e709b[_0x18febb(0x3b1)]():{'username':'user_'+_0x55617f[_0x18febb(0x334)](0x0,0x8)};await addDoc(collection(db,_0x18febb(0x4d3),_0x494c31[_0x18febb(0x2b4)],_0x18febb(0x323)),{'userId':_0x55617f,'username':_0x18bfb[_0x18febb(0x49a)],'message':_0x5eafd4,'timestamp':new Date(),'notificationId':_0x187272}),await updateDoc(doc(db,_0x18febb(0x23d),_0x55617f,_0x18febb(0x1ed),_0x187272),{'appealSubmitted':!![]}),alert(_0x18febb(0x510)),await _0x488204(!![]);}catch(_0x1e2efe){console['error'](_0x18febb(0x294),_0x1e2efe),alert('Failed\x20to\x20send\x20appeal.');}}});}),_0x2142ee[_0x11ef02(0x47a)](_0x11ef02(0x408))[_0x11ef02(0x518)](_0x53297f=>{const _0x123306=_0x11ef02;_0x53297f['addEventListener'](_0x123306(0x3b5),async _0x590ba2=>{const _0x22b02f=_0x123306;if(_0x590ba2['target']['tagName']===_0x22b02f(0x1c1)||_0x590ba2[_0x22b02f(0x449)][_0x22b02f(0x498)]===_0x22b02f(0x39c)||_0x590ba2[_0x22b02f(0x449)]['closest'](_0x22b02f(0x53d)))return;const _0x2f3220=allNotifications['find'](_0x39bcb6=>_0x39bcb6['id']===_0x53297f[_0x22b02f(0x3f5)]['id'])[_0x22b02f(0x3b1)],_0x531be4=_0x53297f[_0x22b02f(0x3f5)]['type'];if(_0x531be4===_0x22b02f(0x320)&&_0x2f3220['followerId'])closeModal(_0x22b02f(0x1c7)),await viewProfile(_0x2f3220['followerId']);else{if(_0x531be4==='profile_request'||_0x531be4===_0x22b02f(0x240)||_0x531be4===_0x22b02f(0x47b))closeModal(_0x22b02f(0x1c7)),await viewProfileViewRequests(_0x55617f);else{if(_0x531be4===_0x22b02f(0x2d2)||_0x531be4===_0x22b02f(0x448))console[_0x22b02f(0x22e)](_0x22b02f(0x46d)),closeModal('notificationsModal'),await _0x1794cf();else{if(_0x2f3220[_0x22b02f(0x20b)]&&_0x2f3220['communityId']){if(_0x2f3220[_0x22b02f(0x2b4)]!==communityId)window[_0x22b02f(0x347)][_0x22b02f(0x3a4)]=_0x22b02f(0x2f9)+_0x2f3220[_0x22b02f(0x2b4)]+'#post-'+_0x2f3220[_0x22b02f(0x20b)];else{closeModal(_0x22b02f(0x1c7)),await searchPostsById(_0x2f3220[_0x22b02f(0x20b)]);const _0x1f8798=document[_0x22b02f(0x4fb)]('search-scrolldown');_0x1f8798?_0x1f8798[_0x22b02f(0x1ce)]({'behavior':_0x22b02f(0x42b)}):console[_0x22b02f(0x37e)](_0x22b02f(0x28b));}}}}}});}),_0x2142ee[_0x11ef02(0x47a)]('.clickable-profile')['forEach'](_0x39d5e2=>{const _0xffb605=_0x11ef02;_0x39d5e2[_0xffb605(0x48a)](_0xffb605(0x3b5),async _0x1377f6=>{const _0x12942a=_0xffb605;_0x1377f6[_0x12942a(0x48f)]();const _0x27ba85=_0x39d5e2[_0x12942a(0x3f5)][_0x12942a(0x26b)];closeModal(_0x12942a(0x1c7)),await viewProfile(_0x27ba85);});});}function _0x299fc8(){const _0x530a1a=_0x4ef633;let _0x10a575=_0x2142ee[_0x530a1a(0x4cc)](_0x530a1a(0x287)),_0x32b333=_0x2142ee[_0x530a1a(0x4cc)]('#loadLessBtn');if(_0x10a575)_0x10a575[_0x530a1a(0x3ab)]();if(_0x32b333)_0x32b333[_0x530a1a(0x3ab)]();const _0x47a829=allNotifications[_0x530a1a(0x3cb)],_0x5e7ca2=lastDoc&&displayedCount<_0x47a829;_0x5e7ca2&&(_0x10a575=document[_0x530a1a(0x2ff)](_0x530a1a(0x4b4)),_0x10a575['id']=_0x530a1a(0x3c5),_0x10a575[_0x530a1a(0x26e)]='Load\x20More',_0x10a575[_0x530a1a(0x396)]=_0x530a1a(0x44d),_0x10a575[_0x530a1a(0x3e2)]=()=>_0x488204(![],![]),_0x2142ee[_0x530a1a(0x218)](_0x10a575)),displayedCount>_0x4bab1f&&(_0x32b333=document[_0x530a1a(0x2ff)](_0x530a1a(0x4b4)),_0x32b333['id']=_0x530a1a(0x487),_0x32b333['textContent']=_0x530a1a(0x3c6),_0x32b333[_0x530a1a(0x396)]=_0x530a1a(0x2cd),_0x32b333[_0x530a1a(0x3e2)]=()=>{const _0x407f80=_0x530a1a;displayedCount=_0x4bab1f,_0x2142ee[_0x407f80(0x381)]=allNotifications['slice'](0x0,_0x4bab1f)[_0x407f80(0x473)](_0x270803=>_0x42dc7c({'id':_0x270803['id'],'data':()=>_0x270803['data']},_0x18e95f))[_0x407f80(0x48c)](''),_0x299fc8(),_0x5c79fc();},_0x2142ee[_0x530a1a(0x218)](_0x32b333));}try{await _0x488204(!![]);}catch(_0x2ae7eb){console[_0x4ef633(0x43d)](_0x4ef633(0x1ea),_0x2ae7eb),_0x2142ee[_0x4ef633(0x381)]='<p>Failed\x20to\x20load\x20notifications.\x20Try\x20refreshing.</p>';}_0x27c40d[_0x4ef633(0x3e2)]=async()=>{const _0x56be4c=_0x4ef633;_0x27c40d['disabled']=!![],_0x27c40d[_0x56be4c(0x26e)]=_0x56be4c(0x3cc);try{await _0x488204(![],!![]),await updateNotificationBadge(_0x55617f,!![]);}catch(_0x1afb62){console['error'](_0x56be4c(0x384),_0x1afb62),_0x2142ee[_0x56be4c(0x381)]=_0x56be4c(0x299);}_0x27c40d[_0x56be4c(0x242)]=![],_0x27c40d[_0x56be4c(0x26e)]=_0x56be4c(0x44a);},_0x5a33ed[_0x4ef633(0x25d)]=()=>_0x488204(!![]);}async function markNotificationSeen(_0x317c90){const _0x1785af=_0x6d63e4,_0x363cf6=auth[_0x1785af(0x224)]?.['uid'];if(!_0x363cf6){console['error']('No\x20authenticated\x20user\x20found.');return;}const _0x4ea131=doc(db,_0x1785af(0x23d),_0x363cf6,_0x1785af(0x1ed),_0x317c90),_0x2a9c4b=doc(db,_0x1785af(0x23d),_0x363cf6);try{const _0x42d704=await getDoc(_0x4ea131);if(!_0x42d704[_0x1785af(0x4e4)]()){console['warn']('Notification\x20'+_0x317c90+_0x1785af(0x3d7));return;}const _0x229615=_0x42d704[_0x1785af(0x3b1)]();if(_0x229615['seen']){console['log'](_0x1785af(0x1b0)+_0x317c90+_0x1785af(0x462));return;}await runTransaction(db,async _0x5ca666=>{const _0xe660f6=_0x1785af,_0x2ae77a=await _0x5ca666['get'](_0x2a9c4b);if(!_0x2ae77a['exists']())throw new Error('User\x20not\x20found');const _0x5e783e=_0x2ae77a[_0xe660f6(0x3b1)]()[_0xe660f6(0x290)]||0x0;_0x5ca666['update'](_0x4ea131,{'seen':!![]}),_0x5e783e>0x0&&_0x5ca666['update'](_0x2a9c4b,{'unseenCount':_0x5e783e-0x1,'lastUpdated':new Date()});}),console[_0x1785af(0x22e)](_0x1785af(0x503)+_0x317c90+'\x20as\x20seen.');const _0x3d1981=document[_0x1785af(0x4cc)](_0x1785af(0x456)+_0x317c90+'\x22]');_0x3d1981&&(_0x3d1981[_0x1785af(0x242)]=!![],_0x3d1981[_0x1785af(0x26e)]=_0x1785af(0x3ae),_0x3d1981['classList'][_0x1785af(0x4f7)](_0x1785af(0x242))),await updateNotificationBadge(_0x363cf6),!document[_0x1785af(0x4fb)](_0x1785af(0x1c7))['classList'][_0x1785af(0x55a)](_0x1785af(0x4b1))&&await openNotificationsModal(_0x363cf6);}catch(_0x175d2b){console['error'](_0x1785af(0x54e)+_0x317c90+_0x1785af(0x3fa),_0x175d2b);}}async function clearNotifications(){const _0x4d2ddc=_0x6d63e4,_0x3d4ca6=auth[_0x4d2ddc(0x224)]?.[_0x4d2ddc(0x26b)];if(!_0x3d4ca6){console[_0x4d2ddc(0x43d)](_0x4d2ddc(0x3e5));return;}const _0x497095=document[_0x4d2ddc(0x4fb)](_0x4d2ddc(0x33b));if(!_0x497095){console[_0x4d2ddc(0x43d)](_0x4d2ddc(0x4e6));return;}const _0x1af454=_0x497095[_0x4d2ddc(0x361)],_0x5319fa=_0x1af454===_0x4d2ddc(0x2c8)?'Clear\x20all\x20notifications?':'Clear\x20notifications\x20for\x20'+(_0x497095[_0x4d2ddc(0x226)][_0x497095['selectedIndex']]?.[_0x4d2ddc(0x383)]||_0x4d2ddc(0x55c))+_0x4d2ddc(0x4b9);if(!confirm(_0x5319fa)){console['log'](_0x4d2ddc(0x1d4));return;}try{const _0x4b206c=collection(db,'users',_0x3d4ca6,'notifications');let _0x1a8ca8;_0x1af454===_0x4d2ddc(0x2c8)?_0x1a8ca8=query(_0x4b206c):_0x1a8ca8=query(_0x4b206c,where('communityId','==',_0x1af454));const _0x1e3d4c=await getDocs(_0x1a8ca8);if(_0x1e3d4c[_0x4d2ddc(0x371)]){console[_0x4d2ddc(0x22e)](_0x4d2ddc(0x22a)),await updateNotificationBadge(_0x3d4ca6),await openNotificationsModal(_0x3d4ca6);return;}const _0x1e6aaf=doc(db,_0x4d2ddc(0x23d),_0x3d4ca6);await runTransaction(db,async _0x3fa1f1=>{const _0x393542=_0x4d2ddc,_0x1751f7=await _0x3fa1f1[_0x393542(0x401)](_0x1e6aaf);if(!_0x1751f7[_0x393542(0x4e4)]())throw new Error(_0x393542(0x3cd));const _0x1b540e=_0x1751f7[_0x393542(0x3b1)]()[_0x393542(0x290)]||0x0,_0x3ff020=_0x1e3d4c['docs']['filter'](_0x181825=>!_0x181825[_0x393542(0x3b1)]()['seen'])[_0x393542(0x3cb)],_0x48a622=Math[_0x393542(0x414)](0x0,_0x1b540e-_0x3ff020);_0x3fa1f1[_0x393542(0x44e)](_0x1e6aaf,{'unseenCount':_0x48a622,'lastUpdated':new Date()}),_0x1e3d4c[_0x393542(0x55b)][_0x393542(0x518)](_0x10768b=>_0x3fa1f1[_0x393542(0x1e5)](_0x10768b[_0x393542(0x269)]));}),console[_0x4d2ddc(0x22e)]('Cleared\x20'+_0x1e3d4c[_0x4d2ddc(0x1b1)]+'\x20notifications.'),await updateNotificationBadge(_0x3d4ca6),await openNotificationsModal(_0x3d4ca6);}catch(_0x321b5a){console[_0x4d2ddc(0x43d)](_0x4d2ddc(0x251),_0x321b5a);}}let commDataCache=null,lastFetchTime=0x0;const CACHE_TTL=0x1e*0x3c*0x3e8,ITEMS_PER_PAGE=0x64;async function getCommData(_0x5f0717=![]){const _0x174268=_0x6d63e4,_0x41cf80=Date[_0x174268(0x321)]();if(commDataCache&&_0x41cf80-lastFetchTime<CACHE_TTL&&!_0x5f0717)return commDataCache;const _0x38cfb2=doc(db,_0x174268(0x4d3),communityId);try{const _0x22c5f7=await getDoc(_0x38cfb2);if(!_0x22c5f7[_0x174268(0x4e4)]())throw new Error(_0x174268(0x468));const _0x4a3d32=_0x22c5f7['data'](),_0x576afc=await getDocs(collection(db,_0x174268(0x4d3),communityId,_0x174268(0x322))),_0x482568=_0x576afc[_0x174268(0x55b)][_0x174268(0x473)](_0x31bf44=>_0x31bf44['id']),_0x2070e1=new Proxy(_0x482568,{'get'(_0x1926d0,_0x40c675){const _0x436bfe=_0x174268;if(typeof _0x40c675===_0x436bfe(0x318)&&!isNaN(_0x40c675)){const _0x30eb35=parseInt(_0x40c675),_0x5bf75e=Math[_0x436bfe(0x45d)](_0x30eb35/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x1926d0[_0x436bfe(0x334)](_0x5bf75e,_0x5bf75e+ITEMS_PER_PAGE)[_0x30eb35%ITEMS_PER_PAGE];}if(_0x40c675===_0x436bfe(0x3cb))return _0x1926d0[_0x436bfe(0x3cb)];if(_0x40c675===_0x436bfe(0x542))return _0x190fe1=>_0x1926d0['includes'](_0x190fe1);if(_0x40c675===Symbol[_0x436bfe(0x38c)])return _0x1926d0[Symbol['iterator']][_0x436bfe(0x41c)](_0x1926d0);if(_0x40c675===_0x436bfe(0x334))return _0x1926d0[_0x436bfe(0x334)][_0x436bfe(0x41c)](_0x1926d0);if(_0x40c675==='filter')return _0x1926d0['filter'][_0x436bfe(0x41c)](_0x1926d0);if(_0x40c675===_0x436bfe(0x393))return _0x1926d0['concat'][_0x436bfe(0x41c)](_0x1926d0);return _0x1926d0[_0x40c675];}}),_0xbf5ec3=new Proxy(_0x4a3d32[_0x174268(0x525)]||[],{'get'(_0xc6e1b6,_0x37486c){const _0x282a5b=_0x174268;if(typeof _0x37486c===_0x282a5b(0x318)&&!isNaN(_0x37486c)){const _0x49102f=parseInt(_0x37486c),_0x1df542=Math[_0x282a5b(0x45d)](_0x49102f/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0xc6e1b6[_0x282a5b(0x334)](_0x1df542,_0x1df542+ITEMS_PER_PAGE)[_0x49102f%ITEMS_PER_PAGE];}if(_0x37486c===_0x282a5b(0x3cb))return _0xc6e1b6[_0x282a5b(0x3cb)];if(_0x37486c==='includes')return _0x36bbac=>_0xc6e1b6[_0x282a5b(0x542)](_0x36bbac);if(_0x37486c===Symbol['iterator'])return _0xc6e1b6[Symbol[_0x282a5b(0x38c)]][_0x282a5b(0x41c)](_0xc6e1b6);return _0xc6e1b6[_0x37486c];}}),_0x3b36c4=new Proxy(_0x4a3d32[_0x174268(0x357)]||[],{'get'(_0x2b971a,_0x5a0fed){const _0x7b2bde=_0x174268;if(typeof _0x5a0fed===_0x7b2bde(0x318)&&!isNaN(_0x5a0fed)){const _0x5e5b0f=parseInt(_0x5a0fed),_0x330677=Math[_0x7b2bde(0x45d)](_0x5e5b0f/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x2b971a[_0x7b2bde(0x334)](_0x330677,_0x330677+ITEMS_PER_PAGE)[_0x5e5b0f%ITEMS_PER_PAGE];}if(_0x5a0fed===_0x7b2bde(0x3cb))return _0x2b971a[_0x7b2bde(0x3cb)];if(_0x5a0fed===_0x7b2bde(0x542))return _0x5dd2b4=>_0x2b971a[_0x7b2bde(0x542)](_0x5dd2b4);if(_0x5a0fed===Symbol[_0x7b2bde(0x38c)])return _0x2b971a[Symbol[_0x7b2bde(0x38c)]][_0x7b2bde(0x41c)](_0x2b971a);return _0x2b971a[_0x5a0fed];}});return commDataCache={..._0x4a3d32,'members':_0x2070e1,'bannedUsers':_0xbf5ec3,'admins':_0x3b36c4},lastFetchTime=_0x41cf80,console[_0x174268(0x22e)](_0x174268(0x425)+communityId+_0x174268(0x4f0)+_0x482568[_0x174268(0x3cb)]+_0x174268(0x437)),commDataCache;}catch(_0xf321ee){console[_0x174268(0x43d)](_0x174268(0x325),_0xf321ee);if(commDataCache)return commDataCache;return{'members':[],'bannedUsers':[],'admins':[],'creatorId':'','name':'Unknown','banReasons':{}};}}function resetCommDataCache(){const _0x32b865=_0x6d63e4;commDataCache=null,lastFetchTime=0x0,console[_0x32b865(0x22e)]('Cleared\x20community\x20data\x20cache');}function debounce(_0x1d39c4,_0x36e86a){let _0x548274;return function(..._0x14bfc6){const _0x126f60=_0xa1cd;clearTimeout(_0x548274),_0x548274=setTimeout(()=>_0x1d39c4[_0x126f60(0x499)](this,_0x14bfc6),_0x36e86a);};}window['getCommData']=getCommData,window[_0x6d63e4(0x495)]=closeModal,window[_0x6d63e4(0x4ee)]=debounce,window[_0x6d63e4(0x24f)]=searchPostsById,window[_0x6d63e4(0x390)]=renderPosts,window[_0x6d63e4(0x2dd)]=searchPostsById,window[_0x6d63e4(0x53e)]=fetchUserData,window[_0x6d63e4(0x421)]=getCachedUser,window['setCachedUser']=setCachedUser,window[_0x6d63e4(0x35f)]=fetchCurrentUserData,window[_0x6d63e4(0x2c5)]=leaveCommunity,window[_0x6d63e4(0x512)]=debouncedLoadAdminReportSummary,window['delay']=delay,window[_0x6d63e4(0x37a)]=resetCommDataCache;
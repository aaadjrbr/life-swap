const _0xb3da24=_0x54fb;(function(_0x14331b,_0x17bcbc){const _0x4b730e=_0x54fb,_0x397c58=_0x14331b();while(!![]){try{const _0x1e2b10=parseInt(_0x4b730e(0x3b2))/0x1+parseInt(_0x4b730e(0x303))/0x2+-parseInt(_0x4b730e(0x113))/0x3*(parseInt(_0x4b730e(0x488))/0x4)+parseInt(_0x4b730e(0x23f))/0x5*(parseInt(_0x4b730e(0x282))/0x6)+-parseInt(_0x4b730e(0x417))/0x7+parseInt(_0x4b730e(0x2b4))/0x8*(parseInt(_0x4b730e(0x2ae))/0x9)+-parseInt(_0x4b730e(0x41e))/0xa;if(_0x1e2b10===_0x17bcbc)break;else _0x397c58['push'](_0x397c58['shift']());}catch(_0x5a1851){_0x397c58['push'](_0x397c58['shift']());}}}(_0x22c1,0xc601a));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';import{getFirestore,setDoc,doc,getDoc,updateDoc,addDoc,collection,query,where,getDocs,limit,deleteDoc,limitToLast,startAfter,endBefore,orderBy,enableIndexedDbPersistence,runTransaction,writeBatch,deleteField}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL,deleteObject}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';import{toggleComments}from'./commentsReplies.js';const firebaseConfig={'apiKey':_0xb3da24(0x3fa),'authDomain':_0xb3da24(0x207),'projectId':_0xb3da24(0x306),'storageBucket':_0xb3da24(0x2e5),'messagingSenderId':'475311181000','appId':_0xb3da24(0x3c4),'measurementId':_0xb3da24(0x25a)},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),storage=getStorage(app);enableIndexedDbPersistence(db)[_0xb3da24(0x1a2)](()=>{const _0x16ad47=_0xb3da24;console[_0x16ad47(0x395)](_0x16ad47(0x36f));})['catch'](_0x532e73=>{const _0x29fa27=_0xb3da24;if(_0x532e73[_0x29fa27(0x14f)]===_0x29fa27(0x3a7))console[_0x29fa27(0x1dd)](_0x29fa27(0x196));else _0x532e73[_0x29fa27(0x14f)]==='unimplemented'?console[_0x29fa27(0x1dd)](_0x29fa27(0x487)):console[_0x29fa27(0x292)](_0x29fa27(0x19b),_0x532e73);});export let communityId;export let userDataCache={};const USER_CACHE_TTL=0x3c*0x3c*0x3e8,USER_CACHE_MAX_SIZE=0x64;function getCachedUser(_0x46b3f3){const _0x2c6912=_0xb3da24,_0x191228=userDataCache[_0x46b3f3];if(!_0x191228)return null;if(Date[_0x2c6912(0x347)]()>_0x191228[_0x2c6912(0x3fe)])return delete userDataCache[_0x46b3f3],console[_0x2c6912(0x395)](_0x2c6912(0x1c8)+_0x46b3f3),null;return _0x191228[_0x2c6912(0x2b5)];}function setCachedUser(_0x211b6e,_0x3cda9f){const _0x41c4a7=_0xb3da24;if(Object['keys'](userDataCache)[_0x41c4a7(0x1d5)]>=USER_CACHE_MAX_SIZE){const _0x2218f4=Object['keys'](userDataCache)[0x0];delete userDataCache[_0x2218f4],console['log'](_0x41c4a7(0x3ba)+_0x2218f4);}userDataCache[_0x211b6e]={'value':_0x3cda9f,'expiry':Date[_0x41c4a7(0x347)]()+USER_CACHE_TTL},console[_0x41c4a7(0x395)](_0x41c4a7(0x1bd)+_0x211b6e+_0x41c4a7(0x39d)+new Date(Date['now']()+USER_CACHE_TTL));}let currentPage=0x1;export const postsPerPage=0xa;let lastMemberDoc=null;export let carouselPostIds=[];let carouselIndex=0x0;export const postsPerCarousel=window[_0xb3da24(0x445)]<0x300?0x2:0x4;export let isLoading=![];let lastPostDoc=null,totalPosts=0x0;export const postsPerLoad=0xa;let loadedPostIds=new Set(),initialPostsLoaded=![],isSearching=![],postCache=new Map();export const POSTS_PER_LOAD=0x14;let isFetching=![],allNotifications=[],lastDoc=null,displayedCount=0x0;const categoryDisplayMap={'clothing_accessories':_0xb3da24(0x3b5),'electronics':_0xb3da24(0x484),'furniture_decor':_0xb3da24(0x317),'kitchen_dining':'Kitchen\x20&\x20Dining','tools_diy':_0xb3da24(0x261),'books_media':_0xb3da24(0x1e0),'arts_crafts':'Arts\x20&\x20Crafts','toys_games':_0xb3da24(0x39a),'sports_outdoors':_0xb3da24(0x14c),'health_beauty':'Health\x20&\x20Beauty','baby_kids':_0xb3da24(0x161),'pet_supplies':'Pet\x20Supplies','misc':_0xb3da24(0x2e4)};document['addEventListener']('DOMContentLoaded',()=>{onAuthStateChanged(auth,async _0x4b1927=>{const _0x2a6156=_0x54fb;if(!_0x4b1927){console[_0x2a6156(0x395)]('No\x20user\x20detected,\x20redirecting\x20to\x20login...'),window[_0x2a6156(0x260)][_0x2a6156(0x126)]=_0x2a6156(0x2fe);return;}console[_0x2a6156(0x395)]('User\x20authenticated:',_0x4b1927[_0x2a6156(0x3d8)]);const _0x3b5cc3=new URLSearchParams(window['location'][_0x2a6156(0x234)]);communityId=_0x3b5cc3[_0x2a6156(0x2fb)]('id'),window['communityId']=communityId;if(!communityId){console['log'](_0x2a6156(0x244)),window[_0x2a6156(0x260)]['href']=_0x2a6156(0x2c3);return;}postCache[_0x2a6156(0x393)](),loadedPostIds[_0x2a6156(0x393)](),console['log'](_0x2a6156(0x2f5)+communityId),await initializeUserSwapInfo();const _0x1b3af9=await getCommData();if(!_0x1b3af9){alert('Community\x20not\x20found!'),window[_0x2a6156(0x260)][_0x2a6156(0x126)]=_0x2a6156(0x2c3);return;}const _0x50001d=_0x1b3af9['members']['includes'](_0x4b1927[_0x2a6156(0x3d8)]),_0x5b8681=_0x1b3af9[_0x2a6156(0x3f3)]||[],_0x50b53f=_0x1b3af9[_0x2a6156(0x170)]||{},_0x2b6165=_0x5b8681[_0x2a6156(0x3d5)](_0x4b1927[_0x2a6156(0x3d8)])&&(_0x50b53f[_0x4b1927[_0x2a6156(0x3d8)]]==='active'||!_0x50b53f[_0x4b1927[_0x2a6156(0x3d8)]]);if(_0x2b6165){let _0x246287=_0x2a6156(0x235),_0x5ac91b=_0x1b3af9[_0x2a6156(0x14a)]?.[_0x4b1927['uid']]||_0x2a6156(0x1f5);if(_0x1b3af9[_0x2a6156(0x337)]){const _0xa3827b=await getDoc(doc(db,_0x2a6156(0x20b),_0x1b3af9['creatorId']));_0xa3827b[_0x2a6156(0x454)]()&&_0xa3827b[_0x2a6156(0x1e8)]()[_0x2a6156(0x340)]&&(_0x246287=_0xa3827b[_0x2a6156(0x1e8)]()['email']);}if(_0x246287==='No\x20admin\x20email\x20available'&&_0x1b3af9[_0x2a6156(0x2e0)]?.[_0x2a6156(0x1d5)]>0x0){const _0x1cadac=await getDoc(doc(db,_0x2a6156(0x20b),_0x1b3af9[_0x2a6156(0x2e0)][0x0]));_0x1cadac[_0x2a6156(0x454)]()&&_0x1cadac['data']()[_0x2a6156(0x340)]&&(_0x246287=_0x1cadac[_0x2a6156(0x1e8)]()[_0x2a6156(0x340)]);}_0x50b53f[_0x4b1927[_0x2a6156(0x3d8)]]==='active'&&!_0x1b3af9[_0x2a6156(0x14a)]?.[_0x4b1927['uid']]&&(_0x5ac91b=_0x2a6156(0x315)+_0x246287+_0x2a6156(0x3e6));document['querySelector'](_0x2a6156(0x2e3))[_0x2a6156(0x13b)]=_0x2a6156(0x335)+_0x5ac91b+_0x2a6156(0x448)+_0x246287+_0x2a6156(0x36e);const _0x485f77=document['getElementById'](_0x2a6156(0x20f));_0x485f77[_0x2a6156(0x3ed)](_0x2a6156(0x45c),async _0x3e4ea9=>{const _0x2dac6c=_0x2a6156;_0x3e4ea9[_0x2dac6c(0x307)]();const _0x2baa7a=_0x485f77['querySelector'](_0x2dac6c(0x20a))[_0x2dac6c(0x2b5)][_0x2dac6c(0x434)]();if(_0x2baa7a){const _0x50a0f2=await getDoc(doc(db,_0x2dac6c(0x20b),_0x4b1927[_0x2dac6c(0x3d8)])),_0x3ef62e=_0x50a0f2['exists']()?_0x50a0f2[_0x2dac6c(0x1e8)]():{'username':'user_'+_0x4b1927[_0x2dac6c(0x3d8)]['slice'](0x0,0x8)};await addDoc(collection(db,_0x2dac6c(0x46e),communityId,_0x2dac6c(0x433)),{'userId':_0x4b1927[_0x2dac6c(0x3d8)],'username':_0x3ef62e[_0x2dac6c(0x17a)],'message':_0x2baa7a,'timestamp':new Date()}),alert(_0x2dac6c(0x200)),_0x485f77['querySelector'](_0x2dac6c(0x20a))[_0x2dac6c(0x254)]=!![],_0x485f77[_0x2dac6c(0x228)](_0x2dac6c(0x24b))[_0x2dac6c(0x254)]=!![],_0x485f77['querySelector'](_0x2dac6c(0x24b))[_0x2dac6c(0x2d3)]='Appeal\x20Sent';}});return;}else{if(!_0x50001d){document[_0x2a6156(0x228)](_0x2a6156(0x2e3))[_0x2a6156(0x13b)]=_0x2a6156(0x3bd)+communityId+_0x2a6156(0x16c),document[_0x2a6156(0x402)]('copyAndJoinLink')['addEventListener']('click',_0x2ccc56=>{const _0x42d116=_0x2a6156;_0x2ccc56['preventDefault'](),navigator['clipboard'][_0x42d116(0x2ce)](communityId)['then'](()=>{const _0x49bc37=_0x42d116;alert(_0x49bc37(0x21e)),setTimeout(()=>{const _0x2c06dc=_0x49bc37;window[_0x2c06dc(0x260)][_0x2c06dc(0x126)]=_0x2c06dc(0x383);},0x1f4);})[_0x42d116(0x122)](_0x29935e=>{const _0x174d0b=_0x42d116;console['error'](_0x174d0b(0x2e1),_0x29935e),alert(_0x174d0b(0x27b)+communityId);});});return;}}document[_0x2a6156(0x3ed)](_0x2a6156(0x192),()=>{const _0xf3cd26=_0x2a6156;document['visibilityState']===_0xf3cd26(0x374)?(console[_0xf3cd26(0x395)]('User\x20is\x20back\x20on\x20screen,\x20resuming\x20checks.'),updateNotificationBadge(_0x4b1927['uid']),updateChatBadge(_0x4b1927[_0xf3cd26(0x3d8)])):console[_0xf3cd26(0x395)](_0xf3cd26(0x42d));}),document['getElementById'](_0x2a6156(0x2ac))[_0x2a6156(0x2d3)]=_0x1b3af9['name'];const _0x5cd0d2=_0x1b3af9[_0x2a6156(0x280)]?new Date(_0x1b3af9['createdAt'][_0x2a6156(0x2fc)]())[_0x2a6156(0x104)](_0x2a6156(0x380),{'month':_0x2a6156(0x3ab),'day':_0x2a6156(0x1f3),'year':_0x2a6156(0x1f3)}):_0x2a6156(0x285);document[_0x2a6156(0x402)](_0x2a6156(0x280))['textContent']=_0x5cd0d2;const _0x5a8169=await fetchUserData(_0x1b3af9[_0x2a6156(0x337)]);document[_0x2a6156(0x402)](_0x2a6156(0x3a2))[_0x2a6156(0x2d3)]=_0x5a8169[_0x2a6156(0x47d)]||'Unknown',document[_0x2a6156(0x402)]('creatorName')[_0x2a6156(0x3ed)](_0x2a6156(0x40e),()=>viewProfile(_0x1b3af9[_0x2a6156(0x337)])),document[_0x2a6156(0x402)](_0x2a6156(0x469))[_0x2a6156(0x2d3)]=_0x2a6156(0x16e)+communityId,document['getElementById']('totalUsers')[_0x2a6156(0x2d3)]=_0x1b3af9[_0x2a6156(0x12c)]||_0x1b3af9['members'][_0x2a6156(0x1d5)],document[_0x2a6156(0x402)](_0x2a6156(0x3f3))[_0x2a6156(0x2d3)]=(_0x1b3af9[_0x2a6156(0x3f3)]||[])[_0x2a6156(0x1d5)];const _0x597c99=document[_0x2a6156(0x402)](_0x2a6156(0x2a9));let _0x793650=0x0;if(_0x4b1927['uid']){const _0x37596b=query(collection(db,_0x2a6156(0x289)),where(_0x2a6156(0x2f2),'==',_0x4b1927[_0x2a6156(0x3d8)]),where(_0x2a6156(0x379),'==',_0x2a6156(0x418)));try{const _0x18b7ef=await getDocs(_0x37596b);_0x793650=_0x18b7ef[_0x2a6156(0x2ed)];}catch(_0x36a855){console[_0x2a6156(0x292)](_0x2a6156(0x2ee),_0x36a855);}}else console[_0x2a6156(0x292)](_0x2a6156(0x3a0));_0x597c99[_0x2a6156(0x13b)]='\x0a\x20\x20\x20\x20<div\x20class=\x22admin-menu\x22>\x0a\x20\x20\x20\x20\x20\x20'+(_0x1b3af9[_0x2a6156(0x2e0)]&&_0x1b3af9[_0x2a6156(0x2e0)]['includes'](_0x4b1927[_0x2a6156(0x3d8)])||_0x1b3af9[_0x2a6156(0x337)]===_0x4b1927[_0x2a6156(0x3d8)]?'<h3>Admin:</h3>':'')+_0x2a6156(0x310)+(_0x1b3af9[_0x2a6156(0x337)]===_0x4b1927[_0x2a6156(0x3d8)]?_0x2a6156(0x3c6):'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x1b3af9[_0x2a6156(0x461)][_0x2a6156(0x3d5)](_0x4b1927[_0x2a6156(0x3d8)])&&_0x1b3af9[_0x2a6156(0x337)]!==_0x4b1927[_0x2a6156(0x3d8)]?'<button\x20class=\x22leave-btn\x22\x20id=\x22leaveCommunityBtn\x22>Leave\x20Community</button>':'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x1b3af9[_0x2a6156(0x2e0)]&&_0x1b3af9[_0x2a6156(0x2e0)]['includes'](_0x4b1927[_0x2a6156(0x3d8)])||_0x1b3af9[_0x2a6156(0x337)]===_0x4b1927[_0x2a6156(0x3d8)]?_0x2a6156(0x238):'')+_0x2a6156(0x310)+(_0x1b3af9[_0x2a6156(0x2e0)]&&_0x1b3af9[_0x2a6156(0x2e0)][_0x2a6156(0x3d5)](_0x4b1927[_0x2a6156(0x3d8)])||_0x1b3af9[_0x2a6156(0x337)]===_0x4b1927[_0x2a6156(0x3d8)]?'<button\x20id=\x22editNameBtn\x22>Edit\x20Name\x20(Community)</button>':'')+_0x2a6156(0x154)+(_0x793650>0x0?_0x2a6156(0x236)+_0x793650+_0x2a6156(0x464):'')+_0x2a6156(0x47e),await new Promise(_0x2aaf76=>setTimeout(_0x2aaf76,0x0));_0x4b1927[_0x2a6156(0x3d8)]?await updateProfileRequestsUI(_0x4b1927[_0x2a6156(0x3d8)]):console[_0x2a6156(0x292)](_0x2a6156(0x2d7));const _0x1a89fc=document[_0x2a6156(0x402)](_0x2a6156(0x350)),_0x556e90=document['getElementById']('categoryFilter'),_0x2abde0=document[_0x2a6156(0x402)](_0x2a6156(0x458)),_0xc4e8b3=document[_0x2a6156(0x402)](_0x2a6156(0x293)),_0x15716d=document[_0x2a6156(0x402)]('carouselPrevBtn'),_0x181d21=document[_0x2a6156(0x402)](_0x2a6156(0x474)),_0x14e560=document[_0x2a6156(0x402)](_0x2a6156(0x220)),_0x5855fd=document['getElementById'](_0x2a6156(0x3d3)),_0x50afb8=document['getElementById'](_0x2a6156(0x2d1)),_0x45d299=document['getElementById'](_0x2a6156(0x321)),_0x13acf7=document[_0x2a6156(0x402)](_0x2a6156(0x2f4)),_0x471633=document[_0x2a6156(0x402)]('leaveCommunityBtn'),_0x3354e7=document[_0x2a6156(0x402)](_0x2a6156(0x21b)),_0x29a60c=document[_0x2a6156(0x402)](_0x2a6156(0x2f3)),_0x5b27a0=document[_0x2a6156(0x402)](_0x2a6156(0x3ec)),_0x78235a=document[_0x2a6156(0x402)](_0x2a6156(0x37f)),_0x10a765=document[_0x2a6156(0x402)](_0x2a6156(0x48a)),_0x47a750=document[_0x2a6156(0x402)](_0x2a6156(0x388)),_0x4337e2=document[_0x2a6156(0x402)](_0x2a6156(0x41f)),_0x1fb2ec=document[_0x2a6156(0x402)](_0x2a6156(0x40c)),_0x79f848=document[_0x2a6156(0x402)](_0x2a6156(0x15a)),_0x1a21d2=document[_0x2a6156(0x402)](_0x2a6156(0x314)),_0x3f0ed0=document['getElementById'](_0x2a6156(0x440)),_0x493e27=document[_0x2a6156(0x402)](_0x2a6156(0x2b6)),_0x1540e1=document[_0x2a6156(0x402)]('viewChatsBtn'),_0x627d05=document[_0x2a6156(0x402)](_0x2a6156(0x350)),_0x3609b9=document[_0x2a6156(0x402)](_0x2a6156(0x3be)),_0x1c8355=document[_0x2a6156(0x402)](_0x2a6156(0x1ec)),_0x24712f=document[_0x2a6156(0x402)](_0x2a6156(0x1d2));_0x1a89fc&&_0x1a89fc[_0x2a6156(0x3ed)](_0x2a6156(0x188),debounce(_0x3dc722=>{const _0x283daf=_0x2a6156;searchPostsById(_0x3dc722[_0x283daf(0x41c)][_0x283daf(0x2b5)]);},0x12c));_0x3609b9[_0x2a6156(0x3ed)](_0x2a6156(0x40e),async()=>{const _0x3ac015=_0x2a6156;try{const _0x53bb26=await navigator[_0x3ac015(0x287)][_0x3ac015(0x2d8)]();_0x627d05[_0x3ac015(0x2b5)]=_0x53bb26,searchPostsById(_0x53bb26);}catch(_0x97b3c4){console[_0x3ac015(0x292)](_0x3ac015(0x299),_0x97b3c4),alert(_0x3ac015(0x2b0));}}),_0x1c8355['addEventListener'](_0x2a6156(0x40e),()=>{const _0x4c3b31=_0x2a6156;_0x627d05[_0x4c3b31(0x2b5)]='',searchPostsById('');});_0x556e90&&_0x556e90[_0x2a6156(0x3ed)]('change',()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x2abde0&&_0x2abde0[_0x2a6156(0x3ed)](_0x2a6156(0x42b),()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0xc4e8b3&&_0xc4e8b3[_0x2a6156(0x3ed)]('change',()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});if(_0x15716d)_0x15716d['addEventListener']('click',()=>slideCarousel(-0x1));if(_0x181d21)_0x181d21[_0x2a6156(0x3ed)]('click',()=>slideCarousel(0x1));if(_0x14e560)_0x14e560[_0x2a6156(0x3ed)](_0x2a6156(0x40e),copyCommunityId);if(_0x5855fd)_0x5855fd[_0x2a6156(0x3ed)](_0x2a6156(0x40e),createPost);if(_0x50afb8)_0x50afb8['addEventListener']('click',()=>viewMembers(communityId));if(_0x45d299)_0x45d299[_0x2a6156(0x3ed)]('click',()=>viewBannedUsers(communityId));if(_0x13acf7)_0x13acf7[_0x2a6156(0x3ed)]('click',()=>deleteCommunity(communityId));if(_0x471633)_0x471633['addEventListener'](_0x2a6156(0x40e),()=>leaveCommunity(communityId));if(_0x3354e7)_0x3354e7['addEventListener']('click',()=>viewProfileViewRequests(_0x4b1927[_0x2a6156(0x3d8)]));if(_0x29a60c)_0x29a60c['addEventListener'](_0x2a6156(0x40e),()=>closeModal(_0x2a6156(0x414)));if(_0x5b27a0)_0x5b27a0[_0x2a6156(0x3ed)](_0x2a6156(0x40e),()=>closeModal(_0x2a6156(0x456)));if(_0x78235a)_0x78235a['addEventListener'](_0x2a6156(0x40e),()=>closeModal('viewBannedModal'));if(_0x10a765)_0x10a765[_0x2a6156(0x3ed)](_0x2a6156(0x40e),()=>closeModal('viewProfileViewRequestsModal'));if(_0x47a750)_0x47a750[_0x2a6156(0x3ed)]('click',()=>openNotificationsModal(_0x4b1927[_0x2a6156(0x3d8)]));if(_0x4337e2)_0x4337e2['addEventListener']('click',()=>closeModal(_0x2a6156(0x399)));if(_0x1fb2ec)_0x1fb2ec['addEventListener'](_0x2a6156(0x40e),clearNotifications);if(_0x79f848)_0x79f848['addEventListener'](_0x2a6156(0x40e),()=>loadPosts(communityId,!![]));if(_0x1a21d2)_0x1a21d2['addEventListener']('click',()=>editCommunityName(communityId));if(_0x3f0ed0)_0x3f0ed0[_0x2a6156(0x3ed)]('click',()=>viewCommunities(_0x4b1927[_0x2a6156(0x3d8)]));if(_0x493e27)_0x493e27['addEventListener']('click',()=>viewSavedPosts(_0x4b1927[_0x2a6156(0x3d8)]));_0x1540e1&&(_0x1540e1['removeEventListener']('click',_0x22c742),_0x1540e1[_0x2a6156(0x3ed)](_0x2a6156(0x40e),_0x22c742));_0x24712f&&_0x24712f[_0x2a6156(0x3ed)](_0x2a6156(0x40e),()=>viewFollowers(_0x4b1927[_0x2a6156(0x3d8)]));async function _0x22c742(){const _0x1e2a0f=_0x2a6156;await updateChatBadge(_0x4b1927[_0x1e2a0f(0x3d8)],!![]),await window[_0x1e2a0f(0x29a)](communityId),await updateChatBadge(_0x4b1927[_0x1e2a0f(0x3d8)]);}setupLocationAutocomplete(),setupCommunitySelection(),loadYourPosts(_0x4b1927[_0x2a6156(0x3d8)]),loadPosts(communityId,![]),loadCarouselPosts(communityId),updateNotificationBadge(_0x4b1927[_0x2a6156(0x3d8)]),await updateChatBadge(_0x4b1927[_0x2a6156(0x3d8)]),await loadAdminReportSummary(_0x4b1927['uid']);});});async function initializeUserSwapInfo(){const _0x24aadd=_0xb3da24,_0x19ed6d=auth[_0x24aadd(0x46c)];if(!_0x19ed6d)return;if(!communityId){console[_0x24aadd(0x292)](_0x24aadd(0x131));return;}const _0x317a86=doc(db,_0x24aadd(0x20b),_0x19ed6d['uid']);let _0x114ea0=await getDoc(_0x317a86),_0x36fb81;console[_0x24aadd(0x395)](_0x24aadd(0x3c0)+_0x19ed6d[_0x24aadd(0x3d8)]);if(!_0x114ea0['exists']())_0x36fb81={'name':_0x19ed6d[_0x24aadd(0x2ba)]||_0x24aadd(0x3fd),'username':_0x24aadd(0x34a)+_0x19ed6d['uid'][_0x24aadd(0x3d7)](0x0,0x8),'profilePhoto':_0x19ed6d[_0x24aadd(0x48c)]||null,'email':_0x19ed6d[_0x24aadd(0x340)]||null,'city':null,'phone':null,'communityIds':[communityId],'swaps':0x0,'createdAt':new Date()},console['log']('Creating\x20new\x20user\x20with\x20data:',_0x36fb81),await setDoc(_0x317a86,_0x36fb81),console['log'](_0x24aadd(0x14d)+_0x36fb81['username']);else{_0x36fb81=_0x114ea0[_0x24aadd(0x1e8)](),console['log'](_0x24aadd(0x237),_0x36fb81);typeof _0x36fb81[_0x24aadd(0x23c)]===_0x24aadd(0xfd)&&(console[_0x24aadd(0x395)](_0x24aadd(0x2de)),await updateDoc(_0x317a86,{'swaps':0x0}),_0x36fb81[_0x24aadd(0x23c)]=0x0);!Array[_0x24aadd(0x258)](_0x36fb81[_0x24aadd(0x2d2)])&&(console[_0x24aadd(0x395)](_0x24aadd(0x30f)),_0x36fb81[_0x24aadd(0x2d2)]=[],await updateDoc(_0x317a86,{'communityIds':_0x36fb81[_0x24aadd(0x2d2)]}));if(!_0x36fb81['communityIds'][_0x24aadd(0x3d5)](communityId)){console[_0x24aadd(0x395)]('Adding\x20communityId\x20'+communityId+_0x24aadd(0x2d9)),_0x36fb81[_0x24aadd(0x2d2)][_0x24aadd(0x21a)](communityId);try{console['log'](_0x24aadd(0x2bd),_0x36fb81[_0x24aadd(0x2d2)]),await updateDoc(_0x317a86,{'communityIds':_0x36fb81[_0x24aadd(0x2d2)]});}catch(_0x1fd80f){console['error'](_0x24aadd(0x2c2),_0x1fd80f),console['log'](_0x24aadd(0x166),_0x36fb81);throw _0x1fd80f;}}}const _0x25d3e5=document[_0x24aadd(0x402)](_0x24aadd(0x3d0)),_0x2b0ac7=document[_0x24aadd(0x402)](_0x24aadd(0x2ad));!_0x36fb81[_0x24aadd(0x17a)]&&(console[_0x24aadd(0x292)](_0x24aadd(0x35e)),_0x36fb81[_0x24aadd(0x17a)]=_0x24aadd(0x34a)+_0x19ed6d[_0x24aadd(0x3d8)][_0x24aadd(0x3d7)](0x0,0x8),await updateDoc(_0x317a86,{'username':_0x36fb81['username']})),_0x25d3e5[_0x24aadd(0x2d3)]=_0x36fb81[_0x24aadd(0x17a)],_0x2b0ac7[_0x24aadd(0x2d3)]=_0x36fb81[_0x24aadd(0x23c)],_0x25d3e5[_0x24aadd(0x3ed)]('click',()=>{const _0x9f1480=_0x24aadd;navigator[_0x9f1480(0x287)]['writeText'](_0x36fb81[_0x9f1480(0x17a)])[_0x9f1480(0x1a2)](()=>alert(_0x9f1480(0x18d)))[_0x9f1480(0x122)](_0x4f4fb0=>console['error'](_0x9f1480(0x1f8),_0x4f4fb0));});}async function updateChatBadge(_0x9c4198,_0x4ebded=![]){const _0x492a72=_0xb3da24,_0x2bd1c2=query(collection(db,_0x492a72(0x20b),_0x9c4198,_0x492a72(0x3da)),where(_0x492a72(0x3a4),'==',!![])),_0xcab494=await getDocs(_0x2bd1c2),_0x32060f=document[_0x492a72(0x402)](_0x492a72(0x199));if(_0x4ebded&&_0xcab494['size']>0x0){const _0x519086=writeBatch(db);_0xcab494[_0x492a72(0x15f)][_0x492a72(0x1e6)](_0xf3c973=>{const _0x4441af=_0x492a72;_0x519086[_0x4441af(0x116)](_0xf3c973[_0x4441af(0xf8)],{'hasUnread':![]});}),await _0x519086[_0x492a72(0x438)](),console[_0x492a72(0x395)]('Cleared\x20unread\x20flags\x20for\x20chats:',_0xcab494['size']);}const _0x317b01=_0x4ebded?![]:_0xcab494[_0x492a72(0x2ed)]>0x0;_0x32060f&&(_0x32060f['innerHTML']=_0x492a72(0x15d)+(_0x317b01?'<span\x20class=\x22chat-badge\x22>(new)</span>':''));}async function updateProfileRequestsUI(_0x55eeb){const _0x5ee245=_0xb3da24,_0x61fb9d=collection(db,_0x5ee245(0x20b),_0x55eeb,_0x5ee245(0x289)),_0x593767=query(_0x61fb9d,where(_0x5ee245(0x379),'==',_0x5ee245(0x418))),_0x20e128=await getDocs(_0x593767),_0x5ba0d5=_0x20e128[_0x5ee245(0x2ed)],_0x213818=document[_0x5ee245(0x402)]('profileRequestsBtn');_0x213818?_0x213818[_0x5ee245(0x13b)]=_0x5ba0d5>0x0?_0x5ee245(0x1b8)+_0x5ba0d5+_0x5ee245(0x443):'':console['error'](_0x5ee245(0x2e8));document[_0x5ee245(0x402)](_0x5ee245(0x343))&&document[_0x5ee245(0x402)]('viewRequestsBtn')['addEventListener']('click',()=>viewProfileViewRequests(_0x55eeb));const _0x3198ea=document['getElementById'](_0x5ee245(0x2a9));if(_0x3198ea){const _0x412996=query(_0x61fb9d,where('status','==','pending')),_0x245c73=await getDocs(_0x412996),_0x470d05=_0x245c73[_0x5ee245(0x2ed)],_0x251daa=_0x3198ea['querySelector']('#viewProfileViewRequestsBtn');_0x251daa&&(_0x251daa[_0x5ee245(0x13b)]=_0x5ee245(0x46f)+(_0x470d05>0x0?_0x5ee245(0x236)+_0x470d05+_0x5ee245(0x464):''));}}function closeModal(_0x1e6f46){const _0x296eab=_0xb3da24,_0x36a03d=document['getElementById'](_0x1e6f46);_0x36a03d['classList'][_0x296eab(0x11c)](_0x296eab(0x480)),_0x36a03d['style'][_0x296eab(0x17e)]=_0x296eab(0x2c1);const _0x3cc33f=Array['from'](document['querySelectorAll'](_0x296eab(0x218)));if(_0x3cc33f[_0x296eab(0x1d5)]>0x0)_0x3cc33f[_0x3cc33f[_0x296eab(0x1d5)]-0x1][_0x296eab(0x361)]['display']='flex';document[_0x296eab(0x2a1)](_0x296eab(0x3ee))[_0x296eab(0x1e6)](_0x527e47=>_0x527e47[_0x296eab(0x16f)][_0x296eab(0x11c)](_0x296eab(0x480)));}function copyCommunityId(){const _0xbd8410=_0xb3da24;navigator[_0xbd8410(0x287)]['writeText'](communityId)[_0xbd8410(0x1a2)](()=>alert(_0xbd8410(0x45e)))['catch'](_0x2cebd7=>console[_0xbd8410(0x292)]('Failed\x20to\x20copy:',_0x2cebd7));}function copyPostId(_0x37603c){const _0x4b955c=_0xb3da24;navigator['clipboard'][_0x4b955c(0x2ce)](_0x37603c)[_0x4b955c(0x1a2)](()=>alert(_0x4b955c(0x33b)))[_0x4b955c(0x122)](_0x588282=>console[_0x4b955c(0x292)](_0x4b955c(0x378),_0x588282));}async function deleteCommunity(_0x1b054c){const _0x23283d=_0xb3da24;if(!confirm(_0x23283d(0xff)))return;const _0x164c20=doc(db,_0x23283d(0x46e),_0x1b054c),_0x705908=[_0x23283d(0x461),_0x23283d(0x408),'banAppeals',_0x23283d(0x3e1)],_0x4df424=document[_0x23283d(0x402)]('delete-status'),_0x11690c=document[_0x23283d(0x437)],_0x6b5a2c=0x5;let _0x4ab08a=0x0;function _0x5f1a5c(_0xe14ec1,_0x553262=_0x23283d(0x29b)){const _0x56009f=_0x23283d;_0x4df424&&(_0x4df424[_0x56009f(0x2d3)]=_0xe14ec1,_0x4df424[_0x56009f(0x436)]=_0x56009f(0x143)+(_0x553262===_0x56009f(0x29b)?_0x56009f(0x3d4):_0x553262),_0x4df424[_0x56009f(0x361)][_0x56009f(0x17e)]=_0x56009f(0x176)),_0x553262===_0x56009f(0x29b)?_0x11690c[_0x56009f(0x16f)][_0x56009f(0x11c)](_0x56009f(0x3d4)):_0x11690c['classList']['remove'](_0x56009f(0x3d4)),console[_0x56009f(0x395)]('[DeleteCommunity]\x20'+_0xe14ec1);}_0x5f1a5c(_0x23283d(0x117),'in-progress');try{console[_0x23283d(0x395)](_0x23283d(0x1a9),db[_0x23283d(0x242)]()),console[_0x23283d(0x395)](_0x23283d(0x103),_0x164c20[_0x23283d(0x124)]);const _0x5b8e4f=await getDoc(_0x164c20);console[_0x23283d(0x395)](_0x23283d(0x327),_0x5b8e4f[_0x23283d(0x454)]());if(_0x5b8e4f['exists']())console[_0x23283d(0x395)]('[DeleteCommunity]\x20Pre-deletion\x20document\x20data:',_0x5b8e4f['data']());else{_0x5f1a5c(_0x23283d(0x226),_0x23283d(0x3f4));return;}async function _0x55ff6b(){const _0x30cb12=_0x23283d,_0x4e8a07=Date['now']();console['log'](_0x30cb12(0x319),new Date()[_0x30cb12(0xfb)]()),await runTransaction(db,async _0x23f625=>{const _0x372135=_0x30cb12,_0x13461b=await _0x23f625['get'](_0x164c20);if(!_0x13461b[_0x372135(0x454)]()){console[_0x372135(0x395)](_0x372135(0x3df));return;}for(const _0x532c10 of _0x705908){console['log']('[DeleteCommunity]\x20Processing\x20subcollection:\x20'+_0x532c10);const _0x54dd78=collection(_0x164c20,_0x532c10),_0x2f046a=await getDocs(_0x54dd78);console[_0x372135(0x395)](_0x372135(0x40b)+_0x532c10+_0x372135(0x225)+_0x2f046a[_0x372135(0x2ed)]+_0x372135(0x398)),_0x2f046a[_0x372135(0x1e6)](_0x57c73b=>{const _0x35bd8a=_0x372135;_0x23f625[_0x35bd8a(0x255)](_0x57c73b[_0x35bd8a(0xf8)]);}),console['log'](_0x372135(0x1b4)+_0x2f046a['size']+_0x372135(0x3e3)+_0x532c10+_0x372135(0x38e));}_0x23f625[_0x372135(0x255)](_0x164c20),console['log']('[DeleteCommunity]\x20Main\x20community\x20document\x20queued\x20for\x20deletion');}),console['log'](_0x30cb12(0x2dc),(Date[_0x30cb12(0x347)]()-_0x4e8a07)/0x3e8,'seconds');}_0x5f1a5c(_0x23283d(0x10a)),await _0x55ff6b();while(_0x4ab08a<_0x6b5a2c){const _0x368ba9=await getDoc(_0x164c20);console[_0x23283d(0x395)](_0x23283d(0x39e)+(_0x4ab08a+0x1)+_0x23283d(0x422),_0x368ba9[_0x23283d(0x454)]());!_0x368ba9[_0x23283d(0x454)]()?console['log'](_0x23283d(0x465)):console[_0x23283d(0x395)]('[DeleteCommunity]\x20Document\x20still\x20present:',_0x368ba9[_0x23283d(0x1e8)]());await new Promise(_0x446598=>setTimeout(_0x446598,0x7d0));const _0x2f0df1=await getDoc(_0x164c20);console[_0x23283d(0x395)](_0x23283d(0x39e)+(_0x4ab08a+0x1)+_0x23283d(0x424),_0x2f0df1[_0x23283d(0x454)]());if(!_0x2f0df1[_0x23283d(0x454)]()){console[_0x23283d(0x395)]('[DeleteCommunity]\x20Deletion\x20confirmed\x20-\x20Document\x20permanently\x20removed.');break;}else console[_0x23283d(0x292)]('[DeleteCommunity]\x20Document\x20reappeared\x20with\x20data:',_0x2f0df1[_0x23283d(0x1e8)]()),_0x4ab08a++,_0x5f1a5c(_0x23283d(0x18e)+_0x4ab08a+'/'+_0x6b5a2c+_0x23283d(0x175)),console[_0x23283d(0x395)](_0x23283d(0x23e)+_0x4ab08a+_0x23283d(0x3b6),new Date()[_0x23283d(0xfb)]()),await _0x55ff6b();}if(_0x4ab08a>=_0x6b5a2c)throw new Error('Unable\x20to\x20delete\x20community\x20-\x20Document\x20persists\x20after\x20maximum\x20retries.');resetCommDataCache(),console[_0x23283d(0x395)](_0x23283d(0x44a)),_0x5f1a5c(_0x23283d(0x305)+_0x1b054c+_0x23283d(0x1c2),_0x23283d(0x3f4)),setTimeout(()=>{const _0x54a6fe=_0x23283d;window[_0x54a6fe(0x260)][_0x54a6fe(0x126)]=_0x54a6fe(0x383);},0x7d0);}catch(_0xc1c5e3){console[_0x23283d(0x292)](_0x23283d(0x190),_0xc1c5e3),_0x5f1a5c('Error:\x20'+_0xc1c5e3[_0x23283d(0x359)],_0x23283d(0x292)),alert(_0x23283d(0x428));}}async function leaveCommunity(_0x41a875){const _0x4fb81f=_0xb3da24;if(!confirm(_0x4fb81f(0x2c5)))return;const _0x5c7b93=auth[_0x4fb81f(0x46c)];if(!_0x5c7b93){console[_0x4fb81f(0x292)]('No\x20authenticated\x20user!'),alert('You\x20must\x20be\x20logged\x20in\x20to\x20leave\x20a\x20community.');return;}const _0x339f04=doc(db,_0x4fb81f(0x20b),_0x5c7b93[_0x4fb81f(0x3d8)]),_0x2b4635=doc(db,'communities',_0x41a875,'members',_0x5c7b93[_0x4fb81f(0x3d8)]);try{const _0x55ce2b=writeBatch(db);_0x55ce2b[_0x4fb81f(0x255)](_0x2b4635),console[_0x4fb81f(0x395)](_0x4fb81f(0x1b1)+_0x5c7b93['uid']+'\x20from\x20community\x20'+_0x41a875);const _0x4799fa=await getDoc(_0x339f04);if(!_0x4799fa[_0x4fb81f(0x454)]())throw new Error(_0x4fb81f(0x3db));const _0x34cd92=_0x4799fa[_0x4fb81f(0x1e8)]();let _0x49f3d9=_0x34cd92['communityIds']||[];console[_0x4fb81f(0x395)](_0x4fb81f(0x128),_0x49f3d9);const _0x2c4b5d=_0x49f3d9[_0x4fb81f(0x382)](_0x29ef73=>_0x29ef73!==_0x41a875);_0x49f3d9[_0x4fb81f(0x1d5)]===_0x2c4b5d['length']?console[_0x4fb81f(0x1dd)](_0x4fb81f(0x21d)+_0x41a875+_0x4fb81f(0x28d)):(console[_0x4fb81f(0x395)]('Updated\x20communityIds\x20after\x20leaving:',_0x2c4b5d),_0x55ce2b[_0x4fb81f(0x116)](_0x339f04,{'communityIds':_0x2c4b5d}));await _0x55ce2b['commit'](),console['log'](_0x4fb81f(0x100)+_0x41a875+_0x4fb81f(0x138),_0x2c4b5d);const _0x4aec7d=await getDoc(_0x339f04),_0x107ae0=_0x4aec7d['data']()[_0x4fb81f(0x2d2)]||[];console['log']('Verified\x20communityIds\x20in\x20Firestore\x20after\x20update:',_0x107ae0);if(!_0x107ae0[_0x4fb81f(0x3d5)](_0x41a875))console[_0x4fb81f(0x395)](_0x4fb81f(0x30d)+_0x41a875+_0x4fb81f(0x1bb));else{console['error'](_0x4fb81f(0x249)+_0x41a875+'\x20from\x20user\x27s\x20communityIds');throw new Error(_0x4fb81f(0x396));}resetCommDataCache(),alert(_0x4fb81f(0x407)),window[_0x4fb81f(0x260)][_0x4fb81f(0x126)]=_0x4fb81f(0x383);}catch(_0x2e91cf){console[_0x4fb81f(0x292)](_0x4fb81f(0x137),_0x2e91cf),alert('Failed\x20to\x20leave\x20the\x20community:\x20'+_0x2e91cf[_0x4fb81f(0x359)]+_0x4fb81f(0x334));}}async function fetchCurrentUserData(){const _0x41ec18=_0xb3da24,_0x927110=auth[_0x41ec18(0x46c)],_0x116617=_0x41ec18(0x146);let _0x51dd32=JSON[_0x41ec18(0x33a)](sessionStorage['getItem'](_0x116617));if(_0x51dd32&&_0x51dd32['uid']===_0x927110[_0x41ec18(0x3d8)])return _0x51dd32;const _0x1becbd=doc(db,_0x41ec18(0x20b),_0x927110[_0x41ec18(0x3d8)]),_0x3df6a3=await getDoc(_0x1becbd);if(!_0x3df6a3['exists']()){console[_0x41ec18(0x395)]('No\x20user\x20doc\x20found\x20for\x20current\x20uid\x20'+_0x927110[_0x41ec18(0x3d8)]);const _0x395db6={'name':'Unknown','username':_0x41ec18(0x127),'profilePhoto':null,'email':null,'city':null,'phone':null,'uid':_0x927110[_0x41ec18(0x3d8)]};return sessionStorage[_0x41ec18(0x31a)](_0x116617,JSON[_0x41ec18(0x372)](_0x395db6)),_0x395db6;}const _0x46dad0=_0x3df6a3[_0x41ec18(0x1e8)](),_0x187629={'name':_0x46dad0[_0x41ec18(0x47d)]||_0x41ec18(0x3ca),'username':_0x46dad0[_0x41ec18(0x17a)]||_0x41ec18(0x127),'profilePhoto':_0x46dad0[_0x41ec18(0x30b)]||null,'email':_0x46dad0[_0x41ec18(0x340)]||null,'city':_0x46dad0[_0x41ec18(0x386)]||null,'phone':_0x46dad0[_0x41ec18(0x460)]||null,'uid':_0x927110[_0x41ec18(0x3d8)]};return sessionStorage['setItem'](_0x116617,JSON[_0x41ec18(0x372)](_0x187629)),_0x187629;}async function fetchUserData(_0x52729e){const _0x5eee8a=_0xb3da24;if(!_0x52729e)return{'name':_0x5eee8a(0x3ca),'username':'unknown','profilePhoto':_0x5eee8a(0xfe),'uid':_0x5eee8a(0x127)};const _0x214e9d=Array[_0x5eee8a(0x258)](_0x52729e)?_0x52729e:[_0x52729e],_0x1b4f80=_0x214e9d[_0x5eee8a(0x382)](_0x41c40c=>!userDataCache[_0x41c40c]||userDataCache[_0x41c40c][_0x5eee8a(0x47d)]===_0x5eee8a(0x3ca));if(_0x1b4f80[_0x5eee8a(0x1d5)]>0x0){const _0x4d72b5=[];for(let _0xbfcb30=0x0;_0xbfcb30<_0x1b4f80[_0x5eee8a(0x1d5)];_0xbfcb30+=0xa){_0x4d72b5[_0x5eee8a(0x21a)](_0x1b4f80[_0x5eee8a(0x3d7)](_0xbfcb30,_0xbfcb30+0xa));}for(const _0x46aabf of _0x4d72b5){const _0x3ae063=query(collection(db,'users'),where(_0x5eee8a(0x278),'in',_0x46aabf)),_0x2dc877=await getDocs(_0x3ae063);_0x2dc877[_0x5eee8a(0x1e6)](_0x1d1d09=>{const _0x41beaf=_0x5eee8a,_0x3df0cc=_0x1d1d09[_0x41beaf(0x1e8)]();userDataCache[_0x1d1d09['id']]={'name':_0x3df0cc[_0x41beaf(0x47d)]||'Unknown','username':_0x3df0cc[_0x41beaf(0x17a)]||'unknown','profilePhoto':_0x3df0cc[_0x41beaf(0x30b)]||'https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y','email':_0x3df0cc[_0x41beaf(0x340)]||null,'city':_0x3df0cc['city']||null,'phone':_0x3df0cc[_0x41beaf(0x460)]||null,'uid':_0x1d1d09['id'],'swaps':_0x3df0cc[_0x41beaf(0x23c)]||0x0},userDataCache['username:'+_0x3df0cc['username']]=userDataCache[_0x1d1d09['id']];}),_0x46aabf['forEach'](_0x3447ee=>{const _0x296225=_0x5eee8a;!userDataCache[_0x3447ee]&&(userDataCache[_0x3447ee]={'name':_0x296225(0x3ca),'username':_0x296225(0x127),'profilePhoto':_0x296225(0xfe),'uid':_0x3447ee});});}}return _0x214e9d[_0x5eee8a(0x1d5)]===0x1?userDataCache[_0x214e9d[0x0]]:_0x214e9d[_0x5eee8a(0x2f7)](_0x1dd5a8=>userDataCache[_0x1dd5a8]);}async function getPostReportStatus(_0x12f373){const _0x2eddd2=_0xb3da24,_0x26f8e0=collection(db,_0x2eddd2(0x46e),communityId,_0x2eddd2(0x3e1)),_0x5a280d=query(_0x26f8e0,where(_0x2eddd2(0x482),'==',_0x12f373)),_0x38304c=await getDocs(_0x5a280d),_0xdd8c76=_0x38304c[_0x2eddd2(0x2ed)],_0x141011=await getCommData(),_0x2823ed=auth[_0x2eddd2(0x46c)],_0x708ede=_0x141011[_0x2eddd2(0x2e0)]?.[_0x2eddd2(0x3d5)](_0x2823ed[_0x2eddd2(0x3d8)])||_0x141011[_0x2eddd2(0x337)]===_0x2823ed['uid'],_0x4ae9f3=doc(db,_0x2eddd2(0x46e),communityId,'posts',_0x12f373),_0x8d9b59=await getDoc(_0x4ae9f3);if(!_0x8d9b59[_0x2eddd2(0x454)]())return console[_0x2eddd2(0x395)]('Post\x20'+_0x12f373+'\x20not\x20found—assuming\x20deleted.'),{'reportCount':_0xdd8c76,'isHidden':_0xdd8c76>=0x2&&!_0x708ede,'isAdmin':_0x708ede,'isOwner':![]};const _0x391ff2=_0x8d9b59[_0x2eddd2(0x1e8)](),_0x164e04=_0x391ff2[_0x2eddd2(0x123)]===_0x2823ed['uid'];return{'reportCount':_0xdd8c76,'isHidden':_0xdd8c76>=0x2&&!_0x708ede&&!_0x164e04,'isAdmin':_0x708ede,'isOwner':_0x164e04};}async function reportPost(_0x1edb13){const _0x3603bf=_0xb3da24,_0x230e09=auth[_0x3603bf(0x46c)],_0x552015=collection(db,_0x3603bf(0x46e),communityId,'postReports'),_0x23bbfd=query(_0x552015,where(_0x3603bf(0x482),'==',_0x1edb13),where(_0x3603bf(0x187),'==',_0x230e09[_0x3603bf(0x3d8)])),_0x3d4a51=await getDocs(_0x23bbfd);if(!_0x3d4a51[_0x3603bf(0x42f)]){alert(_0x3603bf(0x2ca));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20post?'))return;await addDoc(_0x552015,{'postId':_0x1edb13,'reporterId':_0x230e09['uid'],'communityId':communityId,'timestamp':new Date()}),alert(_0x3603bf(0x197)),refreshReportSummary(_0x230e09[_0x3603bf(0x3d8)]);const _0x134cc0=document[_0x3603bf(0x402)]('post-'+_0x1edb13),_0x37908c=await getPostReportStatus(_0x1edb13),_0x556455=await getCommData(),_0x254d8d=_0x556455['admins']?.[_0x3603bf(0x3d5)](_0x230e09[_0x3603bf(0x3d8)])||_0x556455[_0x3603bf(0x337)]===_0x230e09['uid'];if(_0x134cc0){const _0x5b3eca=_0x134cc0[_0x3603bf(0x228)](_0x3603bf(0x475)),_0x5f4d5c=_0x134cc0[_0x3603bf(0x228)](_0x3603bf(0x309));if(_0x5b3eca)_0x5b3eca[_0x3603bf(0x251)]();if(_0x5f4d5c)_0x5f4d5c[_0x3603bf(0x251)]();if(_0x37908c['isHidden']){_0x134cc0[_0x3603bf(0x251)]();return;}if(_0x37908c[_0x3603bf(0x1fb)]){if(_0x37908c[_0x3603bf(0x202)]===0x1)_0x134cc0[_0x3603bf(0x1d0)](_0x3603bf(0x142),_0x3603bf(0x2da)+_0x1edb13+_0x3603bf(0x472));else _0x37908c[_0x3603bf(0x202)]>=0x2&&_0x134cc0[_0x3603bf(0x1d0)](_0x3603bf(0x142),_0x3603bf(0x2da)+_0x1edb13+_0x3603bf(0x2aa)+_0x37908c[_0x3603bf(0x202)]+_0x3603bf(0x135));}_0x254d8d&&_0x37908c[_0x3603bf(0x202)]>0x0&&(_0x134cc0[_0x3603bf(0x1d0)](_0x3603bf(0x142),'<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-'+_0x1edb13+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20'+_0x37908c[_0x3603bf(0x202)]+_0x3603bf(0x291)+(_0x37908c[_0x3603bf(0x202)]>0x1?'s':'')+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22'+_0x1edb13+_0x3603bf(0x1f6)+_0x1edb13+'\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>'),_0x134cc0[_0x3603bf(0x228)]('.remove-post-btn[data-post-id=\x22'+_0x1edb13+'\x22]')[_0x3603bf(0x3ed)](_0x3603bf(0x40e),()=>deletePost(_0x1edb13)),_0x134cc0['querySelector'](_0x3603bf(0x415)+_0x1edb13+'\x22]')['addEventListener']('click',()=>clearReports(_0x1edb13)));}const _0xa00a42=document[_0x3603bf(0x228)](_0x3603bf(0x355)+_0x1edb13);if(_0xa00a42){const _0x25c564=_0xa00a42[_0x3603bf(0x228)]('.report-warning');if(_0x25c564)_0x25c564[_0x3603bf(0x251)]();if(_0x37908c[_0x3603bf(0x1fb)]){if(_0x37908c[_0x3603bf(0x202)]===0x1)_0xa00a42['insertAdjacentHTML'](_0x3603bf(0x142),_0x3603bf(0x2da)+_0x1edb13+_0x3603bf(0x472));else _0x37908c[_0x3603bf(0x202)]>=0x2&&_0xa00a42[_0x3603bf(0x1d0)](_0x3603bf(0x142),'<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x1edb13+_0x3603bf(0x2aa)+_0x37908c['reportCount']+'\x20reports\x20and\x20is\x20hidden\x20from\x20others.\x20Appeal\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>');}}await loadAdminReportSummary(_0x230e09[_0x3603bf(0x3d8)]);}async function clearReports(_0x5a618c){const _0x3f12e3=_0xb3da24;if(confirm(_0x3f12e3(0x10d))){const _0x43b23d=auth['currentUser'],_0x40b5e2=collection(db,_0x3f12e3(0x46e),communityId,_0x3f12e3(0x3e1)),_0x100a76=query(_0x40b5e2,where(_0x3f12e3(0x482),'==',_0x5a618c)),_0x31f104=await getDocs(_0x100a76),_0xb1ff2a=_0x31f104[_0x3f12e3(0x15f)][_0x3f12e3(0x2f7)](_0x867cc2=>deleteDoc(_0x867cc2[_0x3f12e3(0xf8)]));await Promise['all'](_0xb1ff2a),loadPosts(communityId,currentPage),loadCarouselPosts(communityId),refreshReportSummary(_0x43b23d[_0x3f12e3(0x3d8)]);}}async function compressImage(_0x1a8aeb){return new Promise(_0x4bcbc4=>{const _0x2ae730=_0x54fb,_0x763c30=new Image(),_0x52d59b=document['createElement']('canvas'),_0x4541d9=_0x52d59b['getContext']('2d');_0x763c30[_0x2ae730(0x479)]=()=>{const _0x500e98=_0x2ae730,_0x5a6ae9=0x320,_0x5be9ef=0x320;let _0x5d70ce=_0x763c30[_0x500e98(0x110)],_0x29a00e=_0x763c30[_0x500e98(0x264)];_0x5d70ce>_0x29a00e?_0x5d70ce>_0x5a6ae9&&(_0x29a00e*=_0x5a6ae9/_0x5d70ce,_0x5d70ce=_0x5a6ae9):_0x29a00e>_0x5be9ef&&(_0x5d70ce*=_0x5be9ef/_0x29a00e,_0x29a00e=_0x5be9ef),_0x52d59b['width']=_0x5d70ce,_0x52d59b[_0x500e98(0x264)]=_0x29a00e,_0x4541d9['drawImage'](_0x763c30,0x0,0x0,_0x5d70ce,_0x29a00e),_0x52d59b[_0x500e98(0x158)](_0x37ea8e=>_0x4bcbc4(_0x37ea8e),_0x500e98(0x111),0.7);},_0x763c30[_0x2ae730(0x2b3)]=URL[_0x2ae730(0x462)](_0x1a8aeb);});}function setupLocationAutocomplete(){const _0x2fa121=_0xb3da24,_0x4ac1f7=document[_0x2fa121(0x402)](_0x2fa121(0x112)),_0x430389=document[_0x2fa121(0x402)](_0x2fa121(0x3cf));if(!_0x4ac1f7||!_0x430389){console[_0x2fa121(0x292)](_0x2fa121(0x451));return;}const _0x5a7fc5=0xa*0x3c*0x3e8,_0xe68b0f=0x32,_0x3948cd=new Map();function _0x3cc253(_0x4e81ff,_0x4700af){const _0x12633d=_0x2fa121;if(_0x3948cd[_0x12633d(0x2ed)]>=_0xe68b0f){const _0x73875a=_0x3948cd['keys']()[_0x12633d(0x33f)]()[_0x12633d(0x2b5)];_0x3948cd[_0x12633d(0x255)](_0x73875a);}_0x3948cd['set'](_0x4e81ff,{'value':_0x4700af,'expiry':Date[_0x12633d(0x347)]()+_0x5a7fc5});}function _0x19f7c9(_0x2ba9e){const _0x4784e6=_0x2fa121,_0x102d26=_0x3948cd[_0x4784e6(0x2fb)](_0x2ba9e);if(!_0x102d26)return null;if(Date[_0x4784e6(0x347)]()>_0x102d26[_0x4784e6(0x3fe)])return _0x3948cd[_0x4784e6(0x255)](_0x2ba9e),null;return _0x102d26[_0x4784e6(0x2b5)];}async function _0x9938ae(_0x353666){const _0x3bbb01=_0x2fa121,_0x4c0d26=_0x19f7c9(_0x353666);if(_0x4c0d26)return _0x4c0d26;const _0x9471a5='https://nominatim.openstreetmap.org/search?q='+encodeURIComponent(_0x353666)+_0x3bbb01(0x17f);try{const _0x3353d5=await fetch(_0x9471a5,{'headers':{'User-Agent':'LifeSwap/1.0\x20(your-email@example.com)'}});if(!_0x3353d5['ok'])throw new Error(_0x3bbb01(0x16d)+_0x3353d5[_0x3bbb01(0x379)]);const _0x2ab5b5=await _0x3353d5['json']();return _0x3cc253(_0x353666,_0x2ab5b5),_0x2ab5b5;}catch(_0x360bf3){return console['error'](_0x3bbb01(0x325),_0x360bf3),[];}}async function _0x527f49(){const _0x522eed=_0x2fa121,_0x1330d8=_0x4ac1f7[_0x522eed(0x2b5)][_0x522eed(0x434)]();if(_0x1330d8[_0x522eed(0x1d5)]<0x2){_0x430389[_0x522eed(0x13b)]='',_0x430389[_0x522eed(0x16f)]['add'](_0x522eed(0x480));return;}_0x430389[_0x522eed(0x13b)]=_0x522eed(0x214);const _0x196fa1=await _0x9938ae(_0x1330d8);_0x207192(_0x196fa1);}function _0x207192(_0x5987ba){const _0x2652ff=_0x2fa121;_0x430389[_0x2652ff(0x13b)]='';if(_0x5987ba['length']===0x0){_0x430389['classList'][_0x2652ff(0x11c)](_0x2652ff(0x480));return;}_0x430389[_0x2652ff(0x16f)][_0x2652ff(0x251)]('hidden');const _0x3a7bd1=document['createDocumentFragment']();_0x5987ba[_0x2652ff(0x1e6)](_0x267779=>{const _0x1d4932=_0x2652ff,_0x4e0c9b=_0x267779[_0x1d4932(0x14e)][_0x1d4932(0x386)]||_0x267779[_0x1d4932(0x14e)][_0x1d4932(0x119)]||_0x267779[_0x1d4932(0x14e)][_0x1d4932(0x191)]||'',_0x3800ff=_0x267779[_0x1d4932(0x14e)][_0x1d4932(0x2ea)]||'',_0x20d61f=_0x267779[_0x1d4932(0x14e)][_0x1d4932(0x28b)]||'',_0x89f596=_0x4e0c9b&&_0x3800ff?_0x4e0c9b+',\x20'+_0x3800ff:_0x267779[_0x1d4932(0x429)],_0x2f85a7=document[_0x1d4932(0x1de)](_0x1d4932(0x3bf));_0x2f85a7['classList'][_0x1d4932(0x11c)](_0x1d4932(0x478)),_0x2f85a7['textContent']=_0x89f596,_0x2f85a7[_0x1d4932(0x47a)]=()=>{const _0x566e2c=_0x1d4932;_0x4ac1f7[_0x566e2c(0x2b5)]=_0x89f596,_0x4ac1f7[_0x566e2c(0x1e5)][_0x566e2c(0x3cc)]=_0x267779['lat'],_0x4ac1f7[_0x566e2c(0x1e5)][_0x566e2c(0x316)]=_0x267779[_0x566e2c(0x316)],_0x430389[_0x566e2c(0x13b)]='',_0x430389['classList']['add']('hidden');},_0x3a7bd1['appendChild'](_0x2f85a7);}),_0x430389['appendChild'](_0x3a7bd1);}_0x4ac1f7[_0x2fa121(0x3a8)]=debounce(_0x527f49,0x1f4);}async function editCommunityName(_0x33837e){const _0x9b9abb=_0xb3da24,_0x589b23=doc(db,'communities',_0x33837e),_0x446523=await getDoc(_0x589b23),_0x5e1a31=_0x446523[_0x9b9abb(0x1e8)](),_0x5e3617=_0x5e1a31[_0x9b9abb(0x47d)],_0x3a45a4=document[_0x9b9abb(0x1de)](_0x9b9abb(0x3bf));_0x3a45a4['id']=_0x9b9abb(0x41a),_0x3a45a4[_0x9b9abb(0x361)][_0x9b9abb(0x412)]=_0x9b9abb(0x1c5),_0x3a45a4[_0x9b9abb(0x361)][_0x9b9abb(0x2a7)]=_0x9b9abb(0x3cd),_0x3a45a4[_0x9b9abb(0x361)][_0x9b9abb(0x125)]='50%',_0x3a45a4['style'][_0x9b9abb(0x485)]=_0x9b9abb(0x2b8),_0x3a45a4[_0x9b9abb(0x361)][_0x9b9abb(0x376)]=_0x9b9abb(0x449),_0x3a45a4[_0x9b9abb(0x361)][_0x9b9abb(0x3fb)]=_0x9b9abb(0x353),_0x3a45a4['style'][_0x9b9abb(0x3c2)]=_0x9b9abb(0x339),_0x3a45a4[_0x9b9abb(0x361)][_0x9b9abb(0x30a)]=_0x9b9abb(0x2a6),_0x3a45a4[_0x9b9abb(0x361)]['zIndex']=_0x9b9abb(0x24f),_0x3a45a4[_0x9b9abb(0x13b)]='\x0a<h3>Edit\x20Community\x20Name</h3>\x0a<input\x20type=\x22text\x22\x20id=\x22newCommunityName\x22\x20value=\x22'+_0x5e3617+_0x9b9abb(0x1a3),document[_0x9b9abb(0x437)]['appendChild'](_0x3a45a4),document[_0x9b9abb(0x402)](_0x9b9abb(0x35b))[_0x9b9abb(0x3ed)]('click',async()=>{const _0x7297e9=_0x9b9abb,_0x5321dc=document[_0x7297e9(0x402)](_0x7297e9(0x215))[_0x7297e9(0x2b5)][_0x7297e9(0x434)]();if(!_0x5321dc){alert(_0x7297e9(0x431));return;}if(_0x5321dc===_0x5e3617){alert('That’s\x20already\x20the\x20name!'),document[_0x7297e9(0x437)]['removeChild'](_0x3a45a4);return;}await updateDoc(_0x589b23,{'name':_0x5321dc}),document['getElementById']('communityName')[_0x7297e9(0x2d3)]=_0x5321dc,document[_0x7297e9(0x437)]['removeChild'](_0x3a45a4),alert('Community\x20name\x20updated!');}),document[_0x9b9abb(0x402)](_0x9b9abb(0x1bf))[_0x9b9abb(0x3ed)](_0x9b9abb(0x40e),()=>{document['body']['removeChild'](_0x3a45a4);});}let reportSummaryCache=null;async function loadAdminReportSummary(_0x4ece5f){const _0x40c037=_0xb3da24;if(!_0x4ece5f){console[_0x40c037(0x292)]('No\x20userId\x20provided\x20to\x20loadAdminReportSummary');return;}const _0x463ffa=await getCommData(),_0x4e4dfc=_0x463ffa[_0x40c037(0x2e0)]?.[_0x40c037(0x3d5)](_0x4ece5f)||_0x463ffa['creatorId']===_0x4ece5f;let _0x393daf=document[_0x40c037(0x402)](_0x40c037(0x3a5));!_0x393daf&&(_0x393daf=document[_0x40c037(0x1de)]('div'),_0x393daf['id']=_0x40c037(0x3a5),_0x393daf[_0x40c037(0x436)]='admin-report-summary',document['querySelector'](_0x40c037(0x2e3))[_0x40c037(0x259)](_0x393daf,document[_0x40c037(0x228)]('.top-bar')[_0x40c037(0x33d)]));if(reportSummaryCache){_0x393daf[_0x40c037(0x13b)]=reportSummaryCache[_0x40c037(0x266)],attachSummaryListeners(_0x393daf,_0x4e4dfc,_0x4ece5f),console['log'](_0x40c037(0x3d6));return;}await updateReportSummaryUI(_0x393daf,_0x4ece5f,_0x4e4dfc);}async function updateReportSummaryUI(_0x4148e6,_0x2ac3d7,_0x23ca16){const _0x4a38ec=_0xb3da24,_0x3004ef=collection(db,'communities',communityId,_0x4a38ec(0x3e1)),_0xd45b27=query(_0x3004ef),_0x28358a=await getDocs(_0xd45b27),_0x5dd757=Object['keys'](_0x28358a[_0x4a38ec(0x15f)][_0x4a38ec(0x2e9)]((_0x4997c2,_0x570044)=>{const _0x674898=_0x4a38ec;return _0x4997c2[_0x570044[_0x674898(0x1e8)]()[_0x674898(0x482)]]=!![],_0x4997c2;},{}))['length'];let _0x251a72=0x0,_0x3353dd=0x0;if(_0x23ca16){const _0x3b0c1a=query(collection(db,_0x4a38ec(0x46e),communityId,'banAppeals')),_0x1a9745=await getDocs(_0x3b0c1a);_0x3353dd=_0x1a9745['size'];}else{const _0x1809f7=query(collection(db,_0x4a38ec(0x46e),communityId,_0x4a38ec(0x408)),where(_0x4a38ec(0x123),'==',_0x2ac3d7)),_0x4ec411=await getDocs(_0x1809f7),_0x33cde3=[];for(const _0x4692de of _0x4ec411[_0x4a38ec(0x15f)]){const _0x581c67=_0x4692de['id'],_0x1f725d=query(_0x3004ef,where(_0x4a38ec(0x482),'==',_0x581c67)),_0x222e8d=await getDocs(_0x1f725d);if(!_0x222e8d[_0x4a38ec(0x42f)])_0x33cde3['push'](_0x581c67);}_0x251a72=_0x33cde3[_0x4a38ec(0x1d5)];}const _0x465576=_0x23ca16?_0x5dd757+_0x3353dd:_0x251a72;_0x4148e6['innerHTML']=_0x4a38ec(0x489)+(_0x465576>0x0?'('+_0x465576+')\x20':'')+'See\x20Reports</summary>\x0a\x20\x20<div\x20id=\x22report-content\x22\x20class=\x22report-content\x22></div>\x0a</details>\x0a',reportSummaryCache={'html':_0x4148e6[_0x4a38ec(0x13b)]},attachSummaryListeners(_0x4148e6,_0x23ca16,_0x2ac3d7);}function attachSummaryListeners(_0x441f56,_0x39b297,_0x349ece){const _0x26e485=_0xb3da24,_0x420f1f=_0x441f56[_0x26e485(0x228)](_0x26e485(0x3f2));_0x420f1f[_0x26e485(0x3ed)](_0x26e485(0x1eb),async()=>{const _0x224911=_0x26e485,_0x1a5681=_0x441f56[_0x224911(0x228)](_0x224911(0x40d));if(_0x420f1f[_0x224911(0x156)]){_0x1a5681[_0x224911(0x13b)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',_0x420f1f[_0x224911(0x228)](_0x224911(0x11b))[_0x224911(0x2d3)]=(reportSummaryCache['html'][_0x224911(0x2cc)](/\(\d+\)/)||'')+_0x224911(0x1d1);if(_0x39b297){let _0x1be937='';const _0x182583=collection(db,'communities',communityId,_0x224911(0x3e1)),_0x166d75=await getDocs(query(_0x182583));if(_0x166d75[_0x224911(0x42f)])_0x1be937+=_0x224911(0x473);else{_0x1be937+=_0x224911(0x363);const _0x1c0388={};_0x166d75['forEach'](_0x30d0be=>{const _0x17b96f=_0x224911,_0x3c7b6c=_0x30d0be[_0x17b96f(0x1e8)]()[_0x17b96f(0x482)];_0x1c0388[_0x3c7b6c]=(_0x1c0388[_0x3c7b6c]||0x0)+0x1;});for(const [_0x2213b2,_0x261ac1]of Object['entries'](_0x1c0388)){try{const _0x54b059=await getDoc(doc(db,'communities',communityId,_0x224911(0x408),_0x2213b2)),_0x55b262=_0x54b059[_0x224911(0x454)]()?_0x54b059[_0x224911(0x1e8)]():null,_0x632ec1=_0x55b262?_0x55b262[_0x224911(0x467)]:_0x224911(0x1d7),_0xc40698=_0x55b262?await fetchUserData(_0x55b262[_0x224911(0x123)]):{'name':_0x224911(0x3ca)};_0x1be937+=_0x224911(0x397)+_0x2213b2+_0x224911(0x44b)+_0x632ec1+'\x22\x20by\x20'+_0xc40698[_0x224911(0x47d)]+_0x224911(0x3e0)+_0x2213b2+')\x20-\x20'+_0x261ac1+_0x224911(0x291)+(_0x261ac1>0x1?'s':'')+_0x224911(0x24d)+_0x2213b2+_0x224911(0x1ed)+_0x2213b2+_0x224911(0x2df);}catch(_0x273555){console['error']('Error\x20loading\x20post\x20'+_0x2213b2+':',_0x273555),_0x1be937+=_0x224911(0x268)+_0x2213b2+_0x224911(0x13e);}}}try{const _0x262d36=await getDocs(collection(db,'communities',communityId,_0x224911(0x433))),_0x90c1ad=(await getDoc(doc(db,'communities',communityId)))[_0x224911(0x1e8)]()||{'banReasons':{}};if(!_0x262d36[_0x224911(0x42f)]){_0x1be937+='<br><h3>User\x20Appeals\x20(Bans/Posts)</h3>';for(const _0xc7c699 of _0x262d36[_0x224911(0x15f)]){const _0x57d2c9=_0xc7c699[_0x224911(0x1e8)](),_0x47e065=await fetchUserData(_0x57d2c9[_0x224911(0x123)]),_0x54791b=(_0x47e065[_0x224911(0x47d)]||'Unknown')+'\x20('+(_0x57d2c9['username']||'unknown')+')',_0x459414=_0x90c1ad[_0x224911(0x14a)]?.[_0x57d2c9[_0x224911(0x123)]]||_0x224911(0x1f5);_0x1be937+=_0x224911(0x2fa)+_0xc7c699['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>'+_0x54791b+_0x224911(0x375)+_0x57d2c9[_0x224911(0x359)]+_0x224911(0x2b2)+_0x459414+_0x224911(0x2a8)+new Date(_0x57d2c9[_0x224911(0x1dc)][_0x224911(0x2fc)]())[_0x224911(0x104)]()+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-appeal-btn\x22\x20data-appeal-id=\x22'+_0xc7c699['id']+_0x224911(0x27c);}}else _0x1be937+=_0x224911(0x2c8);}catch(_0x14ec90){console[_0x224911(0x292)](_0x224911(0x37c),_0x14ec90),_0x1be937+=_0x224911(0x441);}_0x1a5681[_0x224911(0x13b)]=_0x1be937,_0x1a5681['querySelectorAll']('.remove-post-btn')[_0x224911(0x1e6)](_0x478422=>{const _0x1bdaa0=_0x224911;_0x478422[_0x1bdaa0(0x3ed)](_0x1bdaa0(0x40e),()=>deletePost(_0x478422['dataset']['postId']));}),_0x1a5681[_0x224911(0x2a1)]('.clear-reports-btn')[_0x224911(0x1e6)](_0x5b485b=>{const _0x2a874e=_0x224911;_0x5b485b[_0x2a874e(0x3ed)](_0x2a874e(0x40e),()=>clearReports(_0x5b485b['dataset'][_0x2a874e(0x482)]));}),_0x1a5681[_0x224911(0x2a1)](_0x224911(0x2a0))[_0x224911(0x1e6)](_0x4e231f=>{const _0x157c01=_0x224911;_0x4e231f[_0x157c01(0x3ed)]('click',async()=>{const _0x445daa=_0x157c01;confirm(_0x445daa(0x34d))&&(await deleteDoc(doc(db,_0x445daa(0x46e),communityId,_0x445daa(0x433),_0x4e231f[_0x445daa(0x1e5)][_0x445daa(0x35f)])),refreshReportSummary(_0x349ece));});});}else{let _0x2ddf74='';const _0x1fe74c=collection(db,_0x224911(0x46e),communityId,_0x224911(0x3e1)),_0xbb2f27=query(collection(db,_0x224911(0x46e),communityId,_0x224911(0x408)),where(_0x224911(0x123),'==',_0x349ece));try{const _0x4edeff=await getDocs(_0xbb2f27),_0x2b0c04=[];for(const _0x2fd640 of _0x4edeff[_0x224911(0x15f)]){const _0x227cd9=_0x2fd640['id'],_0x3245c0=query(_0x1fe74c,where('postId','==',_0x227cd9)),_0xeae46c=await getDocs(_0x3245c0);!_0xeae46c['empty']&&_0x2b0c04[_0x224911(0x21a)]({'postId':_0x227cd9,'title':_0x2fd640[_0x224911(0x1e8)]()[_0x224911(0x467)],'count':_0xeae46c[_0x224911(0x2ed)]});}if(_0x2b0c04[_0x224911(0x1d5)]===0x0)_0x2ddf74=_0x224911(0x426);else{_0x2ddf74=_0x224911(0x18c);for(const _0x1fa953 of _0x2b0c04){const _0x3efa0a=query(collection(db,_0x224911(0x46e),communityId,_0x224911(0x433)),where(_0x224911(0x123),'==',_0x349ece),where('postId','==',_0x1fa953[_0x224911(0x482)])),_0x12b853=await getDocs(_0x3efa0a),_0x30c5ee=!_0x12b853[_0x224911(0x42f)];_0x2ddf74+=_0x224911(0x397)+_0x1fa953['postId']+_0x224911(0x447)+_0x1fa953[_0x224911(0x467)]+'\x22\x20(ID:\x20'+_0x1fa953['postId']+_0x224911(0x28a)+_0x1fa953[_0x224911(0x3cb)]+'\x20report'+(_0x1fa953[_0x224911(0x3cb)]>0x1?'s':'')+_0x224911(0x24c)+(_0x1fa953[_0x224911(0x3cb)]>=0x2?'<p\x20style=\x22color:\x20red;\x22>Hidden\x20from\x20others!</p>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-container\x22\x20data-post-id=\x22'+_0x1fa953[_0x224911(0x482)]+_0x224911(0x421)+(!_0x30c5ee?_0x224911(0x213)+_0x1fa953[_0x224911(0x482)]+_0x224911(0x413):_0x224911(0x133))+_0x224911(0x2ab);}}}catch(_0x56b206){console[_0x224911(0x292)](_0x224911(0x277),_0x56b206),_0x2ddf74=_0x224911(0x2cb);}_0x1a5681[_0x224911(0x13b)]=_0x2ddf74,_0x1a5681[_0x224911(0x2a1)]('.appeal-form')[_0x224911(0x1e6)](_0x16fb93=>{const _0x5c4478=_0x224911;_0x16fb93['addEventListener'](_0x5c4478(0x45c),async _0x5d81f5=>{const _0x19538a=_0x5c4478;_0x5d81f5['preventDefault']();const _0x33413c=_0x16fb93['dataset'][_0x19538a(0x482)],_0x454962=_0x16fb93['querySelector']('textarea')['value'][_0x19538a(0x434)]();if(_0x454962){const _0x2ad374=await getDoc(doc(db,'users',_0x349ece)),_0x18328c=_0x2ad374['exists']()?_0x2ad374[_0x19538a(0x1e8)]():{'username':_0x19538a(0x34a)+_0x349ece[_0x19538a(0x3d7)](0x0,0x8)};await addDoc(collection(db,_0x19538a(0x46e),communityId,'banAppeals'),{'userId':_0x349ece,'username':_0x18328c[_0x19538a(0x17a)],'postId':_0x33413c,'message':_0x454962,'timestamp':new Date()}),alert(_0x19538a(0x200)),_0x16fb93['closest'](_0x19538a(0x301))['innerHTML']=_0x19538a(0x133),refreshReportSummary(_0x349ece);}});});}}else _0x420f1f['querySelector']('summary')[_0x224911(0x2d3)]=(reportSummaryCache[_0x224911(0x266)][_0x224911(0x2cc)](/\(\d+\)/)||'')+_0x224911(0x19d),_0x1a5681['innerHTML']='';});}function refreshReportSummary(_0x3aeb6c){reportSummaryCache=null,loadAdminReportSummary(_0x3aeb6c);}const debouncedLoadAdminReportSummary=debounce(_0x532447=>loadAdminReportSummary(_0x532447),0x1f4);async function createPost(){const _0x4b3e3c=_0xb3da24,_0x2a7bf4=document['getElementById']('createPostBtn');if(!_0x2a7bf4){console[_0x4b3e3c(0x292)](_0x4b3e3c(0x1e3));return;}if(_0x2a7bf4[_0x4b3e3c(0x254)]){console[_0x4b3e3c(0x395)](_0x4b3e3c(0x11e));return;}_0x2a7bf4[_0x4b3e3c(0x254)]=!![];const _0x14282d=_0x2a7bf4['textContent'];_0x2a7bf4[_0x4b3e3c(0x2d3)]=_0x4b3e3c(0x272),_0x2a7bf4[_0x4b3e3c(0x16f)][_0x4b3e3c(0x11c)](_0x4b3e3c(0x269));try{const _0x21a671=auth['currentUser'],_0xb8ae35=document[_0x4b3e3c(0x402)](_0x4b3e3c(0x38b))['value'][_0x4b3e3c(0x434)](),_0x5646a5=document[_0x4b3e3c(0x402)](_0x4b3e3c(0xfc))[_0x4b3e3c(0x2b5)][_0x4b3e3c(0x434)](),_0x484f58=document[_0x4b3e3c(0x402)](_0x4b3e3c(0x48d))[_0x4b3e3c(0x30c)],_0x581917=document[_0x4b3e3c(0x402)](_0x4b3e3c(0x112))[_0x4b3e3c(0x2b5)][_0x4b3e3c(0x434)](),_0x230a53=document['getElementById'](_0x4b3e3c(0x112))[_0x4b3e3c(0x1e5)][_0x4b3e3c(0x3cc)],_0x196e4e=document['getElementById'](_0x4b3e3c(0x112))['dataset'][_0x4b3e3c(0x316)],_0x218785=document[_0x4b3e3c(0x2a1)]('#communityCheckboxes\x20input[name=\x27communities\x27]:checked'),_0xa1fe96=document[_0x4b3e3c(0x402)]('category')[_0x4b3e3c(0x2b5)],_0x36b095=document[_0x4b3e3c(0x402)](_0x4b3e3c(0x38c))['value'],_0x84f362=document[_0x4b3e3c(0x402)](_0x4b3e3c(0x181))[_0x4b3e3c(0x2b5)];if(!_0xb8ae35||!_0x5646a5||!_0x581917||!_0x230a53||!_0x196e4e||!_0xa1fe96||!_0x36b095||!_0x84f362){alert(_0x4b3e3c(0x221));throw new Error(_0x4b3e3c(0x304));}if(_0x218785[_0x4b3e3c(0x1d5)]===0x0){alert(_0x4b3e3c(0x312));throw new Error('No\x20communities\x20selected');}let _0x79cf47=Array[_0x4b3e3c(0x2f1)](_0x218785)['map'](_0x4bb260=>_0x4bb260[_0x4b3e3c(0x2b5)]);if(_0x79cf47[_0x4b3e3c(0x1d5)]===0x1&&_0x79cf47[0x0]===_0x4b3e3c(0x342)){const _0x28a49b=doc(db,_0x4b3e3c(0x20b),_0x21a671[_0x4b3e3c(0x3d8)]),_0x31bd47=await getDoc(_0x28a49b);_0x79cf47=_0x31bd47[_0x4b3e3c(0x1e8)]()['communityIds']||[];const _0x15a010=[];for(const _0x52fb10 of _0x79cf47){const _0x18bc62=doc(db,_0x4b3e3c(0x46e),_0x52fb10),_0xd684f8=await getDoc(_0x18bc62),_0x11064b=_0xd684f8[_0x4b3e3c(0x1e8)]();_0x11064b['members'][_0x4b3e3c(0x3d5)](_0x21a671[_0x4b3e3c(0x3d8)])&&!(_0x11064b[_0x4b3e3c(0x3f3)]||[])['includes'](_0x21a671['uid'])&&_0x15a010[_0x4b3e3c(0x21a)](_0x52fb10);}_0x79cf47=_0x15a010;}else _0x79cf47=_0x79cf47['map'](_0x528d5f=>_0x528d5f===_0x4b3e3c(0x3ad)?communityId:_0x528d5f);if(_0x79cf47['length']===0x0){alert(_0x4b3e3c(0x411));throw new Error(_0x4b3e3c(0x10b));}const _0x1a41b4={};for(const _0x1db0de of _0x79cf47){_0x1a41b4[_0x1db0de]=[];for(let _0x432510=0x0;_0x432510<Math[_0x4b3e3c(0x252)](_0x484f58[_0x4b3e3c(0x1d5)],0x5);_0x432510++){const _0x477574=await compressImage(_0x484f58[_0x432510]),_0x275f24=ref(storage,_0x4b3e3c(0x26e)+_0x1db0de+'/'+_0x21a671[_0x4b3e3c(0x3d8)]+'/'+Date[_0x4b3e3c(0x347)]()+'_'+_0x432510);await uploadBytes(_0x275f24,_0x477574);const _0x5d2577=await getDownloadURL(_0x275f24);_0x1a41b4[_0x1db0de]['push'](_0x5d2577);}}const _0x51c5a0=_0x79cf47[_0x4b3e3c(0x2f7)](_0x3ae1b0=>{const _0x5333ff=_0x4b3e3c,_0x17454e={'title':_0xb8ae35,'description':_0x5646a5,'photoUrls':_0x1a41b4[_0x3ae1b0],'location':{'latitude':parseFloat(_0x230a53),'longitude':parseFloat(_0x196e4e),'name':_0x581917},'userId':_0x21a671[_0x5333ff(0x3d8)],'createdAt':new Date(),'category':_0xa1fe96,'lookingFor':_0x36b095,'offering':_0x84f362,'communityId':_0x3ae1b0,'likes':0x0,'likedBy':[],'commentCount':0x0};return addDoc(collection(db,'communities',_0x3ae1b0,_0x5333ff(0x408)),_0x17454e);}),_0x59243d=await Promise['all'](_0x51c5a0);alert(_0x4b3e3c(0x273)+_0x79cf47[_0x4b3e3c(0x1d5)]+_0x4b3e3c(0x351)+(_0x79cf47[_0x4b3e3c(0x1d5)]>0x1?_0x4b3e3c(0x3ae):'y')+_0x4b3e3c(0x115)+_0x59243d[_0x4b3e3c(0x2f7)](_0x3b9dac=>_0x3b9dac['id'])[_0x4b3e3c(0x3f6)](',\x20')),document[_0x4b3e3c(0x402)]('newPostForm')['reset'](),totalYourPosts=0x0,loadYourPosts(_0x21a671[_0x4b3e3c(0x3d8)]),loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,loadCarouselPosts(communityId);}catch(_0x42ad8a){console[_0x4b3e3c(0x292)](_0x4b3e3c(0x29d),_0x42ad8a),!_0x42ad8a[_0x4b3e3c(0x359)][_0x4b3e3c(0x3d5)]('Missing')&&!_0x42ad8a[_0x4b3e3c(0x359)][_0x4b3e3c(0x3d5)]('communities')&&alert(_0x4b3e3c(0x13c)+_0x42ad8a[_0x4b3e3c(0x359)]);}finally{_0x2a7bf4['disabled']=![],_0x2a7bf4['textContent']=_0x14282d,_0x2a7bf4['classList'][_0x4b3e3c(0x251)]('loading');}}async function setupCommunitySelection(){const _0x2b17c8=_0xb3da24,_0x4792f2=auth[_0x2b17c8(0x46c)];if(!_0x4792f2){console[_0x2b17c8(0x292)]('No\x20authenticated\x20user\x20found\x20for\x20setupCommunitySelection!');return;}const _0x1532ab=doc(db,_0x2b17c8(0x20b),_0x4792f2['uid']),_0x57c8b9=await getDoc(_0x1532ab),_0x193042=_0x57c8b9['data']()[_0x2b17c8(0x2d2)]||[],_0x5795ef=document[_0x2b17c8(0x402)]('communityCheckboxes');if(!_0x5795ef){console['error']('communityCheckboxes\x20div\x20not\x20found\x20in\x20DOM\x20yet!');return;}_0x5795ef['innerHTML']='';const _0x5756a5=doc(db,_0x2b17c8(0x46e),communityId),_0x58b890=await getDoc(_0x5756a5),_0x98025a=_0x58b890['data']()[_0x2b17c8(0x47d)];_0x5795ef[_0x2b17c8(0x13b)]+=_0x2b17c8(0x44d)+_0x98025a+_0x2b17c8(0x3c1),_0x5795ef['innerHTML']+=_0x2b17c8(0x1b2);const _0x5ee6a5=_0x193042[_0x2b17c8(0x382)](_0x5d0fdc=>_0x5d0fdc!==communityId)['map'](_0x393aa7=>getDoc(doc(db,_0x2b17c8(0x46e),_0x393aa7))),_0x414979=await Promise['all'](_0x5ee6a5);for(const _0x4210f5 of _0x414979){if(_0x4210f5['exists']()){const _0x36dc38=_0x4210f5[_0x2b17c8(0x1e8)](),_0x464042=doc(db,_0x2b17c8(0x46e),_0x4210f5['id'],_0x2b17c8(0x461),_0x4792f2['uid']),_0x3fd6d5=await getDoc(_0x464042),_0x848acf=_0x3fd6d5[_0x2b17c8(0x454)](),_0x1201b5=(_0x36dc38[_0x2b17c8(0x3f3)]||[])[_0x2b17c8(0x3d5)](_0x4792f2['uid']);if(_0x848acf&&!_0x1201b5){const _0x182465=document[_0x2b17c8(0x1de)](_0x2b17c8(0x29e));_0x182465[_0x2b17c8(0x171)](_0x2b17c8(0x36c),_0x2b17c8(0x284)+_0x4210f5['id']),_0x182465[_0x2b17c8(0x13b)]=_0x2b17c8(0x1aa)+_0x4210f5['id']+_0x2b17c8(0x45a)+_0x4210f5['id']+'\x22>\x20'+_0x36dc38['name']+_0x2b17c8(0x211),_0x5795ef[_0x2b17c8(0x468)](_0x182465);}}}const _0x3f3d7c=_0x5795ef[_0x2b17c8(0x228)](_0x2b17c8(0x208));_0x3f3d7c[_0x2b17c8(0x3ed)]('change',_0x318b9b=>{const _0x5af155=_0x2b17c8,_0x1d12a5=_0x5795ef[_0x5af155(0x2a1)](_0x5af155(0x162));_0x318b9b[_0x5af155(0x41c)][_0x5af155(0x185)]&&_0x1d12a5['forEach'](_0x3708fd=>_0x3708fd[_0x5af155(0x185)]=![]);});const _0x1a403d=_0x5795ef['querySelectorAll']('input[name=\x22communities\x22]:not([value=\x22all\x22])');_0x1a403d[_0x2b17c8(0x1e6)](_0x26d29b=>{const _0x201e68=_0x2b17c8;_0x26d29b[_0x201e68(0x3ed)]('change',()=>{const _0x4d1379=_0x201e68;_0x26d29b[_0x4d1379(0x185)]&&(_0x3f3d7c['checked']=![]);});});}async function deletePost(_0x12b4da){const _0x539bdb=_0xb3da24,_0x3093b3=auth[_0x539bdb(0x46c)],_0x298535=await getCommData(),_0x316218=_0x298535[_0x539bdb(0x2e0)]?.[_0x539bdb(0x3d5)](_0x3093b3['uid'])||_0x298535[_0x539bdb(0x337)]===_0x3093b3['uid'],_0x2e51c6=doc(db,_0x539bdb(0x46e),communityId,_0x539bdb(0x408),_0x12b4da),_0x88e3fa=await getDoc(_0x2e51c6);if(!_0x88e3fa['exists']()){alert('Post\x20not\x20found!');return;}const _0x57fd84=_0x88e3fa[_0x539bdb(0x1e8)]();if(!_0x316218&&_0x57fd84[_0x539bdb(0x123)]!==_0x3093b3['uid']){alert('You\x20can’t\x20delete\x20this\x20post!');return;}const _0x355933=document[_0x539bdb(0x402)]('deletePostModal'),_0x968c81=document['getElementById'](_0x539bdb(0x3f7)),_0x4234f9=document[_0x539bdb(0x402)](_0x539bdb(0x203)),_0x29e0c2=document[_0x539bdb(0x402)](_0x539bdb(0x2c7)),_0x38212f=document['getElementById']('swapUsername'),_0x1f008e=document['getElementById']('validateSwapBtn'),_0x41599e=document[_0x539bdb(0x402)](_0x539bdb(0x1ac)),_0x36d365=document[_0x539bdb(0x402)](_0x539bdb(0x152)),_0x3a4357=document[_0x539bdb(0x402)](_0x539bdb(0x32d)),_0x2d9b67=document[_0x539bdb(0x402)](_0x539bdb(0x3eb)),_0x36af1d=document[_0x539bdb(0x402)]('proceedSwapBtn'),_0x853cc3=document[_0x539bdb(0x402)](_0x539bdb(0x409)),_0x3263ae=document[_0x539bdb(0x402)]('swapSuccessMessage'),_0x397e41=document[_0x539bdb(0x402)]('closeDeleteModalBtn'),_0x34b592=document[_0x539bdb(0x402)]('loadingOverlay');if(!_0x355933||!_0x34b592||!_0x968c81||!_0x4234f9||!_0x29e0c2||!_0x38212f||!_0x1f008e||!_0x41599e||!_0x36d365||!_0x3a4357||!_0x2d9b67||!_0x36af1d||!_0x853cc3||!_0x3263ae||!_0x397e41){console[_0x539bdb(0x292)](_0x539bdb(0x106),{'modal':_0x355933,'loadingOverlay':_0x34b592,'swappedBtn':_0x968c81,'justDeleteBtn':_0x4234f9,'swapDetails':_0x29e0c2,'swapUsername':_0x38212f,'validateSwapBtn':_0x1f008e,'swapValidationResult':_0x41599e,'swapConfirmed':_0x36d365,'swapPartner':_0x3a4357,'editSwapBtn':_0x2d9b67,'proceedSwapBtn':_0x36af1d,'swapSuccess':_0x853cc3,'swapSuccessMessage':_0x3263ae,'closeDeleteModalBtn':_0x397e41}),alert('Error:\x20Modal\x20setup\x20incomplete.\x20Please\x20refresh\x20the\x20page.');return;}let _0x57c4ea=null;_0x355933[_0x539bdb(0x361)][_0x539bdb(0x17e)]='flex',_0x355933[_0x539bdb(0x16f)]['remove']('hidden'),_0x29e0c2[_0x539bdb(0x16f)][_0x539bdb(0x11c)]('hidden'),_0x853cc3['classList']['add'](_0x539bdb(0x480)),_0x41599e[_0x539bdb(0x2d3)]='',_0x36d365[_0x539bdb(0x16f)][_0x539bdb(0x11c)]('hidden'),_0x36af1d[_0x539bdb(0x16f)]['add'](_0x539bdb(0x480)),_0x4234f9[_0x539bdb(0x47a)]=async()=>{const _0x112c24=_0x539bdb;if(_0x4234f9['disabled']){console[_0x112c24(0x395)](_0x112c24(0x241));return;}if(confirm(_0x112c24(0x31b))){_0x4234f9[_0x112c24(0x254)]=!![];const _0x2369af=_0x4234f9[_0x112c24(0x2d3)];_0x4234f9['textContent']=_0x112c24(0x344),_0x4234f9['classList'][_0x112c24(0x11c)](_0x112c24(0x269)),_0x34b592[_0x112c24(0x16f)]['remove']('hidden');try{await deletePostAndCleanup(_0x12b4da,_0x57fd84[_0x112c24(0x39c)],![],null),closeModal(_0x112c24(0x1cf)),refreshReportSummary(_0x3093b3['uid']);}catch(_0x4a2c0c){console[_0x112c24(0x292)](_0x112c24(0x163),_0x4a2c0c),alert('Something\x20went\x20wrong.\x20Please\x20try\x20again.');}finally{_0x34b592[_0x112c24(0x16f)][_0x112c24(0x11c)](_0x112c24(0x480)),_0x4234f9[_0x112c24(0x254)]=![],_0x4234f9[_0x112c24(0x2d3)]=_0x2369af,_0x4234f9['classList']['remove'](_0x112c24(0x269));}}},_0x968c81[_0x539bdb(0x47a)]=()=>{const _0x3f9b9f=_0x539bdb;_0x29e0c2[_0x3f9b9f(0x16f)]['remove'](_0x3f9b9f(0x480)),_0x4234f9[_0x3f9b9f(0x361)][_0x3f9b9f(0x17e)]=_0x3f9b9f(0x2c1),_0x968c81[_0x3f9b9f(0x361)][_0x3f9b9f(0x17e)]=_0x3f9b9f(0x2c1),_0x38212f[_0x3f9b9f(0x186)]();};async function _0xe093b3(_0x5a0064){const _0x93446c=_0x539bdb,_0x379800=_0x5a0064[_0x93446c(0x13d)](/^@/,''),_0x198d0b=collection(db,_0x93446c(0x20b)),_0x1b9d87=query(_0x198d0b,where('username','==',_0x379800)),_0x5b4c7d=await getDocs(_0x1b9d87);if(!_0x5b4c7d['empty']){const _0x23642e=_0x5b4c7d['docs'][0x0];return{'uid':_0x23642e['id'],..._0x23642e['data']()};}return null;}_0x1f008e[_0x539bdb(0x47a)]=async()=>{const _0x1ad2e4=_0x539bdb,_0x5ea3bb=_0x38212f['value'][_0x1ad2e4(0x434)]();if(!_0x5ea3bb){_0x41599e[_0x1ad2e4(0x2d3)]=_0x1ad2e4(0x2ec);return;}_0x41599e['textContent']=_0x1ad2e4(0x1f4);const _0x4fd88f=await _0xe093b3(_0x5ea3bb);_0x4fd88f?(_0x57c4ea=_0x4fd88f[_0x1ad2e4(0x3d8)],_0x3a4357[_0x1ad2e4(0x2d3)]=_0x5ea3bb,_0x41599e[_0x1ad2e4(0x2d3)]='',_0x36d365['classList'][_0x1ad2e4(0x251)](_0x1ad2e4(0x480)),_0x36af1d['classList'][_0x1ad2e4(0x251)](_0x1ad2e4(0x480)),_0x38212f[_0x1ad2e4(0x254)]=!![],_0x1f008e[_0x1ad2e4(0x254)]=!![]):(_0x41599e[_0x1ad2e4(0x2d3)]='User\x20not\x20found.',_0x57c4ea=null);},_0x2d9b67['onclick']=()=>{const _0x2c3325=_0x539bdb;_0x36d365[_0x2c3325(0x16f)][_0x2c3325(0x11c)](_0x2c3325(0x480)),_0x36af1d[_0x2c3325(0x16f)][_0x2c3325(0x11c)](_0x2c3325(0x480)),_0x38212f[_0x2c3325(0x254)]=![],_0x1f008e[_0x2c3325(0x254)]=![],_0x38212f[_0x2c3325(0x2b5)]='',_0x41599e[_0x2c3325(0x2d3)]='',_0x38212f[_0x2c3325(0x186)]();},_0x36af1d[_0x539bdb(0x47a)]=async()=>{const _0x7d9ade=_0x539bdb;if(_0x36af1d[_0x7d9ade(0x254)]){console['log'](_0x7d9ade(0x3de));return;}if(!_0x57c4ea){_0x41599e[_0x7d9ade(0x2d3)]=_0x7d9ade(0x286);return;}const _0x9cd72a=_0x3a4357[_0x7d9ade(0x2d3)];if(confirm(_0x7d9ade(0xf6)+_0x9cd72a+_0x7d9ade(0x384))){_0x36af1d[_0x7d9ade(0x254)]=!![];const _0x172fe8=_0x36af1d['textContent'];_0x36af1d[_0x7d9ade(0x2d3)]=_0x7d9ade(0x344),_0x36af1d[_0x7d9ade(0x16f)][_0x7d9ade(0x11c)]('loading'),_0x34b592[_0x7d9ade(0x16f)][_0x7d9ade(0x251)](_0x7d9ade(0x480));try{await deletePostAndCleanup(_0x12b4da,_0x57fd84[_0x7d9ade(0x39c)],!![],_0x57c4ea),_0x29e0c2[_0x7d9ade(0x16f)][_0x7d9ade(0x11c)](_0x7d9ade(0x480)),_0x853cc3['classList']['remove'](_0x7d9ade(0x480)),_0x3263ae['textContent']=_0x7d9ade(0x381)+_0x9cd72a+_0x7d9ade(0x15c),_0x397e41[_0x7d9ade(0x2d3)]=_0x7d9ade(0x10e),refreshReportSummary(_0x3093b3['uid']);}catch(_0x4b4a86){console[_0x7d9ade(0x292)](_0x7d9ade(0x22e),_0x4b4a86),alert('Something\x20went\x20wrong\x20during\x20the\x20swap.\x20Please\x20try\x20again.');}finally{_0x34b592[_0x7d9ade(0x16f)][_0x7d9ade(0x11c)](_0x7d9ade(0x480)),_0x36af1d[_0x7d9ade(0x254)]=![],_0x36af1d['textContent']=_0x172fe8,_0x36af1d[_0x7d9ade(0x16f)][_0x7d9ade(0x251)]('loading');}}};function _0x4ffc49(){const _0x43a0df=_0x539bdb;_0x29e0c2[_0x43a0df(0x16f)][_0x43a0df(0x11c)](_0x43a0df(0x480)),_0x853cc3[_0x43a0df(0x16f)][_0x43a0df(0x11c)](_0x43a0df(0x480)),_0x41599e['textContent']='',_0x36d365[_0x43a0df(0x16f)]['add'](_0x43a0df(0x480)),_0x36af1d[_0x43a0df(0x16f)][_0x43a0df(0x11c)]('hidden'),_0x4234f9[_0x43a0df(0x361)]['display']=_0x43a0df(0x176),_0x968c81[_0x43a0df(0x361)][_0x43a0df(0x17e)]='block',_0x38212f[_0x43a0df(0x254)]=![],_0x1f008e[_0x43a0df(0x254)]=![],_0x38212f[_0x43a0df(0x2b5)]='',_0x397e41[_0x43a0df(0x2d3)]='Cancel',_0x57c4ea=null;}_0x355933[_0x539bdb(0x361)][_0x539bdb(0x17e)]=_0x539bdb(0x38a),_0x355933[_0x539bdb(0x16f)]['remove']('hidden'),_0x4ffc49(),_0x397e41[_0x539bdb(0x47a)]=()=>{closeModal('deletePostModal'),_0x4ffc49();};}async function deletePostAndCleanup(_0x22cd18,_0x1efd23,_0x3c7fc4,_0x47b5d2){const _0x568825=_0xb3da24,_0x27631=doc(db,_0x568825(0x46e),communityId,'posts',_0x22cd18),_0x2ccf51=collection(db,'communities',communityId,'posts',_0x22cd18,_0x568825(0x11d));await runTransaction(db,async _0x580b93=>{const _0x2e05c1=_0x568825;if(_0x3c7fc4&&_0x47b5d2){const _0x99d7bb=doc(db,_0x2e05c1(0x20b),auth[_0x2e05c1(0x46c)]['uid']),_0x5c3cc9=doc(db,'users',_0x47b5d2),_0xf7a4d=await _0x580b93[_0x2e05c1(0x2fb)](_0x99d7bb),_0x1f8d9a=await _0x580b93[_0x2e05c1(0x2fb)](_0x5c3cc9);if(!_0xf7a4d['exists']()||!_0x1f8d9a['exists']())throw new Error(_0x2e05c1(0x109));const _0x1efd1f=(_0xf7a4d[_0x2e05c1(0x1e8)]()[_0x2e05c1(0x23c)]||0x0)+0x1,_0x2347af=(_0x1f8d9a['data']()[_0x2e05c1(0x23c)]||0x0)+0x1;_0x580b93['update'](_0x99d7bb,{'swaps':_0x1efd1f}),_0x580b93['update'](_0x5c3cc9,{'swaps':_0x2347af});}_0x580b93[_0x2e05c1(0x255)](_0x27631);}),await deleteCollection(_0x2ccf51);const _0x5a63be=_0x1efd23[_0x568825(0x2f7)](_0x1ea235=>{const _0x4ea0e3=_0x568825,_0x5cdf95=ref(storage,_0x1ea235);return deleteObject(_0x5cdf95)[_0x4ea0e3(0x122)](_0x534aeb=>console[_0x4ea0e3(0x292)](_0x4ea0e3(0x298),_0x534aeb));});await Promise['all'](_0x5a63be);const _0x50b0cd=document['getElementById']('post-'+_0x22cd18);_0x50b0cd?(_0x50b0cd[_0x568825(0x251)](),console['log'](_0x568825(0x362)+_0x22cd18+'\x20from\x20DOM')):console[_0x568825(0x395)](_0x568825(0x253)+_0x22cd18+_0x568825(0x201)),postCache['delete'](_0x22cd18),loadedPostIds[_0x568825(0x255)](_0x22cd18),PaginationState['displayedPostIds']['delete'](_0x22cd18),totalYourPosts=0x0,await loadYourPosts(auth[_0x568825(0x46c)]['uid']),await loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,await loadCarouselPosts(communityId);}async function deleteCollection(_0x4e20cd,_0xff3ea7=0x1f4){const _0x407e8a=_0xb3da24,_0x2e8ee3=query(_0x4e20cd,limit(_0xff3ea7)),_0x394e84=await getDocs(_0x2e8ee3);if(_0x394e84['empty'])return;const _0x20d08c=writeBatch(db);for(const _0x1d89a1 of _0x394e84['docs']){const _0x34cb04=collection(db,_0x1d89a1[_0x407e8a(0xf8)][_0x407e8a(0x124)],'replies');await deleteCollection(_0x34cb04,_0xff3ea7),_0x20d08c[_0x407e8a(0x255)](_0x1d89a1['ref']);}await _0x20d08c[_0x407e8a(0x438)](),_0x394e84['size']===_0xff3ea7&&await deleteCollection(_0x4e20cd,_0xff3ea7);}function setupYourPostsCarousel(_0x6a2af8){const _0x43abd2=_0xb3da24,_0x2e0ffa=document[_0x43abd2(0x402)](_0x43abd2(0x25e)+_0x6a2af8+_0x43abd2(0x302)),_0x4ee3d3=_0x2e0ffa[_0x43abd2(0x228)](_0x43abd2(0x1d6)+_0x6a2af8+_0x43abd2(0x3a6)),_0x40ed23=_0x2e0ffa[_0x43abd2(0x228)](_0x43abd2(0x173)+_0x6a2af8+_0x43abd2(0x3a6)),_0xac1f23=_0x2e0ffa['querySelector'](_0x43abd2(0x2d0));let _0x3af5db=JSON[_0x43abd2(0x33a)](_0x2e0ffa[_0x43abd2(0x1e5)]['photos']||'[]');if(!_0x4ee3d3||!_0x40ed23||!_0xac1f23){console[_0x43abd2(0x292)](_0x43abd2(0x46b)+_0x6a2af8+_0x43abd2(0x1ff));return;}_0x3af5db[_0x43abd2(0x1d5)]===0x0&&(_0x3af5db=[_0x43abd2(0x184),_0x43abd2(0x184)]);_0xac1f23[_0x43abd2(0x2b3)]=_0x3af5db[0x0],_0xac1f23[_0x43abd2(0x1e5)][_0x43abd2(0x3f0)]='0';let _0x2d9452=0x0;_0x4ee3d3['removeEventListener']('click',_0x4ee3d3['_carouselHandler']),_0x40ed23[_0x43abd2(0x2be)](_0x43abd2(0x40e),_0x40ed23[_0x43abd2(0x281)]),_0x4ee3d3['_carouselHandler']=_0x148b60=>{const _0x21faac=_0x43abd2;_0x148b60[_0x21faac(0x307)](),_0x148b60[_0x21faac(0x26d)](),_0x2d9452=(_0x2d9452-0x1+_0x3af5db['length'])%_0x3af5db[_0x21faac(0x1d5)],_0xac1f23[_0x21faac(0x2b3)]=_0x3af5db[_0x2d9452],_0xac1f23[_0x21faac(0x1e5)][_0x21faac(0x3f0)]=_0x2d9452;},_0x40ed23[_0x43abd2(0x281)]=_0x18a09c=>{const _0x5a809c=_0x43abd2;_0x18a09c[_0x5a809c(0x307)](),_0x18a09c[_0x5a809c(0x26d)](),_0x2d9452=(_0x2d9452+0x1)%_0x3af5db[_0x5a809c(0x1d5)],_0xac1f23[_0x5a809c(0x2b3)]=_0x3af5db[_0x2d9452],_0xac1f23[_0x5a809c(0x1e5)][_0x5a809c(0x3f0)]=_0x2d9452;},_0x4ee3d3[_0x43abd2(0x3ed)](_0x43abd2(0x40e),_0x4ee3d3[_0x43abd2(0x281)]),_0x40ed23[_0x43abd2(0x3ed)](_0x43abd2(0x40e),_0x40ed23['_carouselHandler']);}function _0x22c1(){const _0x352ecc=['Error\x20updating\x20communityIds:','/index.html','Note\x20element\x20with\x20data-doc-id=\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20leave\x20this\x20community?','caughtUpMessage','swapDetails','<br><h3>User\x20Appeals</h3><p>No\x20appeals\x20yet.</p>','totalPosts_','You’ve\x20already\x20reported\x20this\x20post!','<p>Error\x20loading\x20your\x20reports!</p>','match','scrollTop','writeText',')</button>\x0a\x20\x20\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-','.carousel-image','viewMembersBtn','communityIds','textContent','\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22commentForm-','#seeMoreSearchMembersBtn','new_message','Skipping\x20updateProfileRequestsUI\x20due\x20to\x20undefined\x20UID','readText','\x20to\x20communityIds','<div\x20class=\x22report-warning\x22\x20id=\x22warning-','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','[DeleteCommunity]\x20Transaction\x20completed\x20in:','max','Swaps\x20field\x20undefined,\x20setting\x20to\x200','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','admins','Failed\x20to\x20copy\x20community\x20ID:','\x20found\x20in\x20cache—no\x20Firestore\x20read\x20needed.','.community-page','Miscellaneous','life-swap-6065e.firebasestorage.app','commentCount','membersList','profileRequestsBtn\x20not\x20found\x20in\x20DOM','reduce','state','\x20is\x20missing\x20user\x20data.</div>','Please\x20enter\x20a\x20username.','size','Failed\x20to\x20fetch\x20profile\x20view\x20requests:','<p>Failed\x20to\x20load\x20notifications.\x20Try\x20refreshing.</p>','unseenCount','from','targetId','closeProfileBtn','deleteCommunityBtn','Cleared\x20post\x20caches\x20for\x20community\x20','handleViewChatsClick\x20triggered\x20with\x20userId:','map','savedPosts','-community\x22]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-item\x22\x20data-appeal-id=\x22','get','toDate','requestId','/login.html','closest','Error\x20updating\x20note:','.appeal-container','-your','2064494tdPaST','Missing\x20required\x20fields','Community\x20','life-swap-6065e','preventDefault','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','.admin-report-controls','boxShadow','profilePhoto','files','Confirmed:\x20Community\x20ID\x20','Refresh','communityIds\x20is\x20not\x20an\x20array\x20or\x20undefined,\x20initializing\x20as\x20[]','\x0a\x20\x20\x20\x20\x20\x20','renderPosts','Pick\x20at\x20least\x20one\x20community\x20to\x20post!','<p>Failed\x20to\x20search\x20members.</p>','editNameBtn','An\x20administrator\x20has\x20reinstated\x20your\x20ban.\x20For\x20the\x20original\x20or\x20a\x20diffrent\x20reason.\x20Please\x20contact\x20us\x20at\x20','lon','Furniture\x20&\x20Home\x20Decor','profile_request_declined','[DeleteCommunity]\x20Executing\x20deletion\x20transaction\x20at:','setItem','Delete\x20this\x20post\x20from\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities\x20you\x20posted\x20to.','\x0a\x20\x20<span\x20class=\x22timestamp\x22>','entries','<option\x20value=\x22all\x22>All\x20Communities</option>','</a>\x0a\x20\x20\x20\x20\x20\x20','loadLessBtn','viewBannedBtn','Failed\x20to\x20fetch\x20community\x20','<p>Failed\x20to\x20load\x20members.\x20Try\x20again.</p>','<p>No\x20posts\x20yet!</p>','Error\x20fetching\x20location\x20suggestions:','postCache_','[DeleteCommunity]\x20Pre-deletion\x20check\x20-\x20Document\x20exists:','note','Post\x20Deleted','post-','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','\x22>Delete\x20Post</button>','swapPartner','.delete-saved-btn[data-doc-id=\x22','likedPrefs_','Edit\x20Note','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','#seeLessMembersBtn','Error\x20fetching\x20initial\x20members:','.\x20Check\x20the\x20console\x20for\x20details.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ban-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20are\x20banned\x20from\x20this\x20community!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Reason:</strong>\x20','</span>\x20','creatorId','#loadMoreBtn','1px\x20solid\x20#ccc','parse','Post\x20ID\x20copied!','.edit-note-btn[data-doc-id=\x22','nextSibling','-search\x22><</button>','next','email','active','all','viewRequestsBtn','Deleting...','<p>Oops,\x20something\x20broke!\x20Refresh.</p>','searchPostsById','now','tagName','<p>Post\x20ID\x20','user_','Refreshing...','Cleared\x20','Delete\x20this\x20appeal?','grantedProfileAccessList','yourPostsButtons','postSearch','\x20communit','\x0a<div\x20class=\x22notification-item\x20','20px','</p>\x0a\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','#yourPostsList\x20#post-','categories','Post\x20saved!','seeMoreYourPostsBtn','message','resetCommDataCache','saveNameBtn','-search\x22>></button>','#toggleComments-','Username\x20is\x20undefined,\x20falling\x20back\x20to\x20UID-based\x20default','appealId','currentPage','style','Removed\x20post-','<h3>Reported\x20Posts</h3>','\x22>\x0a','user-item','\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22tagSuggestions-','\x20cached\x20posts\x20for\x20','community-item','\x22>Copy\x20ID</button>','\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<form\x20id=\x22commentForm-','selectedIndex','for','Loading\x20search\x20batch:\x20startIndex=','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22banAppealForm\x22\x20class=\x22ban-appeal-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','Offline\x20persistence\x20enabled\x20successfully!','<p>No\x20notifications\x20yet.</p>','\x20already\x20seen.','stringify','refreshNotificationsBtn','visible',':</strong>\x20\x22','background','<p\x20class=\x27no-posts-message\x27>No\x20saved\x20posts\x20yet!</p>','Failed\x20to\x20copy:','status',',\x20last\x20cached\x20at:\x20','Members\x20(Total:\x20','Error\x20loading\x20appeals:','likedBy','viewSavedPostsModal','closeBannedBtn','en-US','Thanks!\x20You\x20and\x20','filter','./start.html','\x20in\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities.','\x0a\x20\x20<form\x20class=\x22ban-appeal-form\x22\x20data-id=\x22','city','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./community.html?id=','viewNotificationsBtn','<p>No\x20new\x20posts\x20to\x20show!</p>','flex','postTitle','lookingFor','\x20|\x20Offering:\x20','\x20for\x20deletion','</p>\x0a\x20\x20\x20\x20\x20\x20<p>Category:\x20','\x20|\x20Looking\x20For:\x20','closeCommunitiesBtn','display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;','clear','</p>\x0a\x20\x20\x20\x20<p>Post\x20ID:\x20','log','Verification\x20failed:\x20Community\x20ID\x20still\x20present\x20in\x20user\x27s\x20communityIds','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22','\x20documents','notificationsModal','Toys\x20&\x20Games','.save-toggle-btn[data-post-id=\x22','photoUrls',',\x20expires\x20at\x20','[DeleteCommunity]\x20Verification\x20','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','User\x20UID\x20is\x20undefined,\x20skipping\x20profile\x20requests\x20query!','savedPostsList','creatorName','opacity','hasUnread','admin-report-summary','-your\x22]','failed-precondition','oninput','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22','\x22\x20data-type=\x22','long','search-scrolldown','current','ies','seen','desc','transition','259391HrjDxO','form','\x0a\x20\x20<h4>','Clothing\x20&\x20Accessories','\x20initiated\x20at:','<i\x20class=\x22fas\x20fa-heart\x22></i>\x20Like','smooth','Post\x20','Cache\x20size\x20limit\x20hit,\x20removed\x20','<p>Failed\x20to\x20load\x20notifications\x20after\x20retries.\x20Check\x20your\x20connection!</p>','...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22not-member-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20aren\x27t\x20a\x20member\x20of\x20this\x20community.</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Copy\x20the\x20community\x20ID\x20and\x20go\x20back\x20to\x20join!\x20We\x20are\x20waiting\x20for\x20you!\x20💚</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Community\x20ID:</strong>\x20<span\x20id=\x22communityIdText\x22>','pasteSearchBtn','div','Fetching\x20user\x20data\x20for\x20UID:\x20',')\x0a</label>\x0a','border','.saved-note\x20span[data-doc-id=\x22','1:475311181000:web:32d03d80f70081bfb629fd','#seeMoreYourPostsBtn','<button\x20class=\x22delete-btn\x22\x20id=\x22deleteCommunityBtn\x22>Delete\x20(Community)</button>','Failed\x20to\x20unsave\x20post.\x20Try\x20again.','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20</div>','Unknown','count','lat','50%','<button\x20class=\x22carousel-prev\x22\x20data-post-id=\x22','postLocationSuggestions','userNameCopy','.mark-seen-btn2','savePostNote','createPostBtn','deleting','includes','Loaded\x20report\x20summary\x20from\x20cache!','slice','uid','cssText','chatIds','User\x20document\x20not\x20found\x20in\x20Firestore','\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','_debouncedInput','Swap\x20deletion\x20already\x20in\x20progress,\x20ignoring\x20click.','[DeleteCommunity]\x20Document\x20not\x20found\x20during\x20transaction\x20-\x20skipping.','\x20(ID:\x20','postReports','postList','\x20documents\x20in\x20','\x22\x20class=\x22profile-photo\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3><span\x20class=\x22username\x22\x20data-uid=\x22','<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Unsave','\x20or\x20submit\x20an\x20appeal\x20below.','Something’s\x20broken—refresh\x20the\x20page!','docId','Mark\x20as\x20Seen','toLowerCase','editSwapBtn','closeMembersBtn','addEventListener','.suggestions','appealSubmitted','index','set','details','bannedUsers','success','fetchUserData','join','swappedBtn','leaveCommunity','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','AIzaSyB5Q0kHoViWJl-t-pWCKj_AT-ClAMadfrU','padding','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-note-btn\x22\x20data-doc-id=\x22','Unnamed\x20User','expiry','Search\x20buttons:\x20totalFiltered=','\x22>Copy\x20Post\x20ID</button>\x0a','profile_request_accepted','getElementById','\x20not\x20in\x20cache—fetching\x20from\x20Firestore.','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22>\x0a\x20\x20\x20\x20\x20\x20','<p>Failed\x20to\x20load\x20communities.\x20Try\x20refreshing.</p>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20','You\x20have\x20successfully\x20left\x20the\x20community!','posts','swapSuccess','<p>Failed\x20to\x20load\x20some\x20members.</p>','[DeleteCommunity]\x20','clearNotificationsBtn','#report-content','click','\x0a\x20\x20<div\x20id=\x22searchMessage\x22\x20class=\x22search-message\x22>\x0a\x20\x20\x20\x20<p>Showing\x20post\x20with\x20ID:\x20','\x20new\x20posts\x20for\x20','No\x20valid\x20communities\x20selected!','position','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Appeal\x20to\x20admins\x20(e.g.,\x20\x27Not\x20breaking\x20rules\x20because...\x27)\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','viewProfileModal','.clear-reports-btn[data-post-id=\x22','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20','3275748PEYgzG','pending','<p\x20class=\x27error-message\x27>Error:\x20Couldn’t\x20load\x20saved\x20posts.\x20Try\x20refreshing.</p>','edit-name-form','Load\x20More','target','savePostModal','4441560iLjxHi','closeNotificationsBtn','#loadLessBtn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20-\x20Post-deletion\x20check\x20-\x20Exists:','\x22>Copy</button></p>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','\x20-\x20After\x202s\x20delay\x20-\x20Exists:','Seen','<p>No\x20reports\x20on\x20your\x20posts!</p>','\x22>\x0a\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20</form>\x0a','Community\x20deletion\x20failed.\x20Please\x20review\x20the\x20console\x20for\x20details.','display_name','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','change',')</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22save-toggle-btn\x22\x20data-post-id=\x22','User\x20is\x20away\x20from\x20screen,\x20stopping\x20updates.','No\x20note','empty','Unnamed\x20Community','Name\x20can’t\x20be\x20empty!','\x22>Report\x20Post</button>\x0a\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20','banAppeals','trim','Using\x20','className','body','commit','-your\x22\x20data-photos=\x27','\x22><i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x20Edit\x20Note</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-saved-btn\x22\x20data-doc-id=\x22','\x22\x20data-community-id=\x22','categoryFilter','Fetched\x20users:','score','onchange','viewCommunitiesBtn','<br><p>Error\x20loading\x20appeals!</p>','Total\x20members\x20from\x20memberCount:',')</button>','Post\x20not\x20found—might’ve\x20been\x20deleted!','innerWidth','offerings','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20\x22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Think\x20this\x20is\x20a\x20mistake?\x20Send\x20an\x20appeal\x20below\x20or\x20contact\x20an\x20admin\x20at:\x20','#fff','[DeleteCommunity]\x20Local\x20cache\x20cleared.','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Post\x20\x22','opacity\x200.3s\x20ease','\x0a<label\x20for=\x22comm-current\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-current\x22\x20name=\x22communities\x22\x20value=\x22current\x22\x20checked>\x20Current\x20(','modalNotificationCount','#seeLessSearchMembersBtn','\x0a\x20\x20\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','Location\x20input\x20or\x20suggestions\x20div\x20not\x20found!','</button>\x0a','<button\x20class=\x22copy-id-btn2\x22\x20data-post-id=\x22','exists','notificationList','viewMembersModal','Refresh\x20failed:','lookingForFilter','toggleSavePost\x20called\x20for\x20postId:\x20','\x22\x20name=\x22communities\x22\x20value=\x22','\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22','submit','10px','Community\x20ID\x20copied!','<div\x20class=\x22loading\x22>⏳\x20Loading...</div>','phone','members','createObjectURL','\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22','</span>','[DeleteCommunity]\x20Document\x20successfully\x20removed\x20-\x20verifying\x20persistence...','communitySearchPostsById','title','appendChild','communityId','POSTS_PER_PAGE','Your\x20Posts\x20carousel\x20setup\x20failed\x20for\x20post\x20','currentUser','Fetching\x20fresh\x20unseen\x20notification\x20count...','communities','Profile\x20Requests\x20','some','—belongs\x20to\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it\x20from\x20others—check\x20it\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','<p>No\x20reported\x20posts!</p>','carouselNextBtn','.report-warning','margin-top:\x2010px;\x20text-align:\x20center;\x20display:\x20block\x20!important;\x20visibility:\x20visible\x20!important;','-your\x22>></button>','suggestion-item','onload','onclick','<span\x20class=\x22admin-tag\x22>Admin</span>','cancelSavePostBtn','name','</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewSavedPostsBtn\x22>Saved\x20Posts</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewChatsBtn\x22><i\x20class=\x22fas\x20fa-comments\x22></i>\x20Chats</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMyFollowersBtn\x22>Followers</button>\x0a\x20\x20\x20\x20','see-less-btn','hidden','<i\x20class=\x22fas\x20fa-save\x22></i>\x20Save','postId','</p>\x0a\x20\x20\x20\x20<p>Category:\x20','Electronics\x20&\x20Gadgets','transform','notifications','Persistence\x20not\x20available:\x20Browser\x20doesn’t\x20support\x20it.','156eajseu','\x0a<details>\x0a\x20\x20<summary>','closeProfileViewRequestsBtn','saved-posts-grid','photoURL','postPhotos','.\x20<button\x20id=\x22showAllPostsBtn\x22>Click\x20here\x20to\x20see\x20all\x20posts\x20again</button></p>\x0a\x20\x20</div>\x0a\x20\x20<div\x20class=\x22post\x22\x20id=\x22post-','<p>You’re\x20not\x20in\x20any\x20communities\x20yet!</p>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20</div>','Profile\x20access\x20revoked!','Mark\x20this\x20post\x20as\x20swapped\x20with\x20','delay','ref','Skipping\x20carousel\x20post\x20','<p>No\x20active\x20communities\x20found.</p>','toISOString','postDescription','undefined','https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20community?\x20This\x20action\x20is\x20permanent\x20and\x20cannot\x20be\x20undone.','Successfully\x20left\x20community\x20','</h4>\x0a\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','Loaded\x20count:','[DeleteCommunity]\x20Community\x20reference\x20path:','toLocaleString','<p>No\x20pending\x20profile\x20view\x20requests.</p>','Missing\x20modal\x20or\x20loading\x20elements:','.username','.copy-id-btn2','User\x20or\x20partner\x20not\x20found.','Deleting\x20community\x20data...','No\x20valid\x20communities','viewProfileViewRequestsModal','Clear\x20all\x20reports\x20for\x20this\x20post?\x20It’ll\x20be\x20visible\x20again.','Close','bind','width','image/jpeg','postLocation','107655KmqujB','</p>\x0a\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22','!\x20IDs:\x20','update','Initiating\x20community\x20deletion\x20process...\x20Please\x20wait.','Search\x20error:','town','iterator','summary','add','comments','Post\x20creation\x20in\x20progress,\x20ignoring\x20extra\x20click.','Error\x20fetching\x20search\x20batch:','Initial\x20members\x20loaded:','scrollY','catch','userId','path','left','href','unknown','Current\x20communityIds\x20before\x20leaving:','#refreshNotificationsBtn','seeLessMembersBtn','seeLessYourPostsBtn','memberCount','-your\x22><</button>','-search\x22\x20data-photos=\x27','member-','Scroll\x20target\x20#search-scrolldown\x20not\x20found!','communityId\x20is\x20undefined,\x20cannot\x20initialize\x20user\x20swap\x20info','<p>Oops,\x20something\x20broke!\x20Try\x20refreshing.</p>','<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>','unshift','\x20reports\x20and\x20is\x20hidden\x20from\x20others.\x20Appeal\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','seeLessSearchMembersBtn','Error\x20leaving\x20community:','.\x20Updated\x20communityIds:','notificationCount','</p>\x0a\x20\x20<p\x20class=\x22highlight\x22>Offering:\x20','innerHTML','Failed\x20to\x20create\x20post:\x20','replace','</p>','Failed\x20to\x20fetch\x20post\x20','contains','Error\x20marking\x20notification\x20','beforeend','delete-status\x20','carouselTrack','communityFilter','currentUserData','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','closeModal','string','banReasons','\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20</div>','Sports\x20&\x20Outdoors','Created\x20new\x20user\x20in\x20DB:\x20','address','code','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Category:\x20','\x22\x20not\x20found','swapConfirmed','<div\x20class=\x22loading\x22>⏳\x20Searching...</div>','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMembersBtn\x22>Members</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewProfileViewRequestsBtn\x22>Profile\x20Requests\x20','Client:\x20Incremented\x20unseenCount\x20for\x20','open','scrollTo','toBlob','<p>Refresh\x20failed.\x20Try\x20again.</p>','refreshPostsBtn','Clear\x20notifications\x20for\x20','\x20swapped\x20this\x20item.\x20Help\x20us\x20continue\x20our\x20service\x20free.\x20Tip\x20us!','<i\x20class=\x22fas\x20fa-comments\x22></i>\x20Chats\x20','Updating\x20buttons:','docs','debouncedLoadAdminReportSummary','Baby\x20&\x20Kids','input[name=\x22communities\x22]:not([value=\x22all\x22])','Deletion\x20failed:','<i\x20class=\x22fas\x20fa-heart-broken\x22></i>\x20Unlike\x20(','Firebase\x20setup\x20issue\x20-\x20doc:','Current\x20userData\x20state:','.modal-content','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','type','Initial\x20load\x20failed:','Profile\x20view\x20request\x20accepted!','</span>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./start.html\x22\x20id=\x22copyAndJoinLink\x22>Copy\x20ID\x20and\x20Join</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','HTTP\x20error!\x20Status:\x20','ID:\x20','classList','banStatus','setAttribute','\x20notifications.','.carousel-next[data-post-id=\x22','Loaded\x20carousel\x20posts\x20for\x20community\x20',')...','block','.ban-appeal-form','.revoke-btn','See\x20Less','username','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20ID:\x20<span\x20class=\x22copyable-post-id\x20clickable\x22\x20data-post-id=\x22','.saved-post-card[data-doc-id=\x22','Unknown\x20Community','display','&format=json&limit=5&addressdetails=1','.copy-btn[data-post-id=\x22','offering','\x22><i\x20class=\x22fas\x20fa-trash\x22></i>\x20Unsave</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','marginLeft','https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430','checked','focus','reporterId','input','</span>\x0a\x20\x20\x20\x20','Loading\x20batch:','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','<h3>Your\x20Reported\x20Posts</h3>','Username\x20copied\x20to\x20clipboard!','Deletion\x20incomplete\x20-\x20Retrying\x20(','function','[DeleteCommunity]\x20Deletion\x20process\x20failed:','village','visibilitychange','prepend','documentElement','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','Persistence\x20failed:\x20Multiple\x20tabs\x20open.\x20Only\x20one\x20tab\x20can\x20enable\x20persistence.','Post\x20reported!','<p\x20class=\x22no-posts\x22>No\x20trending\x20posts\x20yet!</p>','viewChatsBtn','Someone','Persistence\x20error:','find','See\x20Reports','</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','\x20not\x20found.','\x22>Accept</button>\x0a\x20\x20\x20\x20<button\x20class=\x22decline-btn\x22\x20data-request-id=\x22','\x27>\x0a\x20\x20\x20\x20\x20\x20','then','\x22\x20style=\x22width:\x20100%;\x20margin-bottom:\x2010px;\x22>\x0a<button\x20id=\x22saveNameBtn\x22>Save</button>\x0a<button\x20id=\x22cancelNameBtn\x22>Cancel</button>\x0a','TEXTAREA','.copy-btn','concat','-community\x22\x20data-photos=\x27','followerId','[DeleteCommunity]\x20Firestore\x20instance:','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-','Error\x20loading\x20more\x20members:','swapValidationResult','No\x20message','\x0a\x20\x20<span\x20class=\x22clickable-profile\x22\x20data-uid=\x22','Fetched\x20fresh\x20community\x20data\x20for\x20','<p>Failed\x20to\x20load\x20more\x20members.</p>','Queued\x20deletion\x20of\x20member\x20','\x0a<label\x20for=\x22comm-all\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-all\x22\x20name=\x22communities\x22\x20value=\x22all\x22>\x20All\x20Communities\x0a</label>\x0a','sort','[DeleteCommunity]\x20Queued\x20','updateNotificationBadge','\x20matches\x20for\x20\x22','ban_appeal','<button\x20id=\x22viewRequestsBtn\x22>Profile\x20Requests\x20(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','\x20as\x20seen.','\x20removed\x20from\x20user\x27s\x20communityIds','</p>\x0a\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','Cached\x20','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>','cancelNameBtn','yourPostsList','\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22','\x20successfully\x20deleted.\x20Redirecting...','Notification\x20','selected\x20community','fixed','see-more-btn','Using\x20cached\x20unseen\x20count:\x20','Cache\x20expired\x20for\x20','displayedPostIds','#seeMoreMembersBtn',')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22accept-btn\x22\x20data-request-id=\x22','children','Chat\x20notification\x20clicked,\x20triggering\x20handleViewChatsClick','description','deletePostModal','insertAdjacentHTML','Hide\x20Reports','viewMyFollowersBtn','\x20comments</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-','\x0a\x20\x20<button\x20class=\x22mark-seen-btn2\x22\x20data-id=\x22','length','.carousel-prev[data-post-id=\x22','Deleted\x20Post','scroll-to-ur-posts','\x20comments</a>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-','Error\x20fetching\x20unseen\x20count:','carousel-post','timestamp','warn','createElement','values','Books,\x20Movies\x20&\x20Music','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22granted-','ceil','Create\x20Post\x20button\x20not\x20found!','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<p>Location:\x20','dataset','forEach','\x20to\x20','data','load-less-btn','Reset\x20post\x20list\x20and\x20caches\x20for\x20community\x20','toggle','clearSearchBtn','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','#showAllPostsBtn','inline','Cleared\x20community\x20data\x20cache','photos','Are\x20you\x20sure\x20you\x20want\x20to\x20unsave\x20this\x20post?','numeric','Checking...','No\x20reason\x20provided','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','\x0a\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','Failed\x20to\x20copy\x20username:',')</span></p>\x0a\x20\x20\x20\x20<p>Location:\x20','#commentForm-','isOwner','<p>No\x20members\x20yet!</p>','-community',',\x20loadedCount=',':\x20missing\x20elements','Appeal\x20sent!','\x20not\x20found\x20in\x20DOM—already\x20gone\x20or\x20never\x20rendered','reportCount','justDeleteBtn','load-more-btn','Save\x20Post','.copyable-post-id[data-post-id=\x22','life-swap-6065e.firebaseapp.com','input[value=\x22all\x22]','cacheTimestamp_','textarea','users','No\x20notifications\x20to\x20clear.','User\x20not\x20found','.accept-btn','banAppealForm','BUTTON','\x0a\x20\x20\x20\x20','Copy\x20failed:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20class=\x22appeal-form\x22\x20data-post-id=\x22','<div\x20class=\x27loading\x27>⏳\x20Searching...</div>','newCommunityName',',\x20not\x20','getCommData','.modal:not(.hidden)','isHidden','push','viewProfileViewRequestsBtn','accepted','Community\x20ID\x20','Community\x20ID\x20copied\x20to\x20clipboard!\x20Head\x20back\x20to\x20join.','See\x20More','copyCommunityIdBtn','Fill\x20out\x20all\x20fields,\x20pick\x20a\x20category,\x20and\x20select\x20what\x20you\x27re\x20looking\x20for\x20and\x20offering!','Error\x20fetching\x20user\x20data\x20for\x20members:','requesterId','\x22>Copy</button></p>\x0a\x20\x20\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','\x20contains\x20','Community\x20does\x20not\x20exist.\x20Deletion\x20unnecessary.','closeSavedPostsBtn','querySelector','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>By:\x20','\x20textarea','getTime','.remove-post-btn[data-post-id=\x22','</h3>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<h3>','Swap\x20and\x20deletion\x20failed:','</p>\x0a\x20\x20<p><i\x20class=\x22fas\x20fa-heart\x22></i>\x20Likes:\x20','profile_request','Fetched\x20','Badge\x20updated\x20to:\x20','scrollIntoView','search','No\x20admin\x20email\x20available','<span\x20class=\x22request-badge\x22>','Existing\x20user\x20data:','<button\x20id=\x22viewBannedBtn\x22>Banned\x20(Users/Appeals)</button>','\x20posts\x20for\x20','.modal:not(#viewProfileViewRequestsModal)','.username[data-uid=\x22','swaps','unseenNotifCount_','[DeleteCommunity]\x20Retry\x20','839485MXtyWR','getItem','Deletion\x20already\x20in\x20progress,\x20ignoring\x20click.','toString','Failed\x20to\x20send\x20appeal.','No\x20community\x20ID,\x20redirecting\x20to\x20index...','-search\x22]','Load\x20Less','</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22saved-note\x22>Note:\x20<span\x20data-doc-id=\x22','User\x20canceled\x20clearing\x20notifications.','Failed\x20to\x20remove\x20community\x20ID\x20',',\x20batchSize=','button','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','keys','1000','\x20has\x20no\x20userId!\x20Post\x20data:','remove','min','Post-','disabled','delete','No\x20Description','Community\x20not\x20found','isArray','insertBefore','G-CHJY2ZEYYF','display:\x20none\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20hidden\x20!important;\x20opacity:\x200\x20!important;','#post-','Error\x20submitting\x20appeal:','carousel-','</h3>\x0a\x20\x20\x20\x20<p\x20class=\x22post-description\x22>','location','Tools\x20&\x20DIY','Failed\x20to\x20update\x20note.\x20Try\x20again.','Error\x20fetching\x20all\x20members\x20for\x20search:','height','Failed\x20to\x20load\x20posts\x20for\x20','html','Untitled','<p>Error\x20loading\x20post\x20','loading','\x22>\x0a\x20\x20\x20\x20<span>','Like\x20(','removeItem','stopPropagation','posts/','</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22request-','apply','Creating...','Post\x20created\x20in\x20','Post\x20unsaved!','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Community:\x20<a\x20href=\x22./community.html?id=','<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-','Error\x20loading\x20user\x20reports:','__name__','.decline-btn','category','Failed\x20to\x20copy\x20ID.\x20Please\x20copy\x20it\x20manually:\x20','\x22>Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','\x22\x20class=\x22suggestions\x20hidden\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','<p>Something\x20went\x20wrong,\x20try\x20again!</p>','createdAt','_carouselHandler','30wpoBwu','Community\x20carousel\x20setup\x20failed\x20for\x20post\x20','comm-','N/A','No\x20valid\x20user\x20selected.','clipboard','-community\x22><</button>','profileRequests',')\x20has\x20','country','Error\x20clearing\x20notifications:','\x20not\x20found\x20in\x20user\x27s\x20communityIds\x20array','viewCommunitiesModal','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22timestamp\x22>','#deletePost-','\x20report','error','offeringFilter','floor','loadMoreBtn','has','#seeLessYourPostsBtn','Failed\x20to\x20delete\x20photo:','Paste\x20failed:','viewChats','in-progress','\x22>Copy</button></p>\x0a\x20\x20\x20\x20\x20\x20','Error\x20creating\x20post:','label','See\x20More\x20display:','.delete-appeal-btn','querySelectorAll','confirmSavePostBtn','likes','.user-item','follow','0\x200\x2010px\x20rgba(0,0,0,0.2)','top',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','communityActions','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','communityName','swapCount','18iQctgU','</span>\x20<span\x20class=\x22at-user\x22>@','Couldn’t\x20paste—check\x20clipboard\x20permissions!','db:','\x22\x20(Ban\x20Reason:\x20','src','3966184FgeOuj','value','viewSavedPostsBtn','<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22','translate(-50%,\x20-50%)','/community.html?id=','displayName','#reportPost-','\x20with\x20','Updating\x20communityIds\x20with:','removeEventListener','\x22>Decline</button>\x0a\x20\x20</div>\x0a','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','none'];_0x22c1=function(){return _0x352ecc;};return _0x22c1();}function setupCommunityCarousel(_0x1c4256){const _0x45323d=_0xb3da24,_0x1a6f1d=document['getElementById']('carousel-'+_0x1c4256+_0x45323d(0x1fd)),_0x1624c5=_0x1a6f1d[_0x45323d(0x228)](_0x45323d(0x1d6)+_0x1c4256+_0x45323d(0x2f9)),_0xd4a23f=_0x1a6f1d[_0x45323d(0x228)](_0x45323d(0x173)+_0x1c4256+_0x45323d(0x2f9)),_0x208cad=_0x1a6f1d['querySelector'](_0x45323d(0x2d0));let _0x52f69d=JSON['parse'](_0x1a6f1d[_0x45323d(0x1e5)]['photos']||'[]');if(!_0x1624c5||!_0xd4a23f||!_0x208cad){console[_0x45323d(0x292)](_0x45323d(0x283)+_0x1c4256+':\x20missing\x20elements');return;}_0x52f69d['length']===0x0&&(_0x52f69d=['https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430',_0x45323d(0x184)]);_0x208cad['src']=_0x52f69d[0x0],_0x208cad['dataset'][_0x45323d(0x3f0)]='0';let _0x513688=0x0;_0x1624c5[_0x45323d(0x2be)](_0x45323d(0x40e),_0x1624c5['_carouselHandler']),_0xd4a23f[_0x45323d(0x2be)]('click',_0xd4a23f[_0x45323d(0x281)]),_0x1624c5['_carouselHandler']=_0x14232f=>{const _0x2b2798=_0x45323d;_0x14232f[_0x2b2798(0x307)](),_0x14232f[_0x2b2798(0x26d)](),_0x513688=(_0x513688-0x1+_0x52f69d[_0x2b2798(0x1d5)])%_0x52f69d[_0x2b2798(0x1d5)],_0x208cad[_0x2b2798(0x2b3)]=_0x52f69d[_0x513688],_0x208cad['dataset']['index']=_0x513688;},_0xd4a23f[_0x45323d(0x281)]=_0x331129=>{const _0x542b10=_0x45323d;_0x331129[_0x542b10(0x307)](),_0x331129['stopPropagation'](),_0x513688=(_0x513688+0x1)%_0x52f69d[_0x542b10(0x1d5)],_0x208cad[_0x542b10(0x2b3)]=_0x52f69d[_0x513688],_0x208cad[_0x542b10(0x1e5)]['index']=_0x513688;},_0x1624c5[_0x45323d(0x3ed)](_0x45323d(0x40e),_0x1624c5[_0x45323d(0x281)]),_0xd4a23f[_0x45323d(0x3ed)]('click',_0xd4a23f[_0x45323d(0x281)]);}let lastCarouselDoc=null,firstCarouselDoc=null,totalCarouselPosts=0x0,lastFilterState={'lookingFor':'','offering':''},cachedMemberCount=null;async function getMemberCount(_0x1cb1c0){const _0xb20bb=_0xb3da24;if(cachedMemberCount!==null)return cachedMemberCount;const _0x479c2c=doc(db,_0xb20bb(0x46e),_0x1cb1c0),_0x3a7f8e=await getDoc(_0x479c2c);if(!_0x3a7f8e[_0xb20bb(0x454)]())return console[_0xb20bb(0x292)]('Community\x20not\x20found!'),0x0;return cachedMemberCount=_0x3a7f8e[_0xb20bb(0x1e8)]()[_0xb20bb(0x12c)]||0x0,cachedMemberCount;}async function loadCarouselPosts(_0x2320bd,_0x3af4c9=0x1){const _0x590639=_0xb3da24,_0x6b6c89=document['getElementById'](_0x590639(0x144)),_0x24522b=document[_0x590639(0x402)]('carouselPrevBtn'),_0x45e336=document[_0x590639(0x402)](_0x590639(0x474)),_0x187eaa=document[_0x590639(0x402)](_0x590639(0x458))?.[_0x590639(0x2b5)]||'',_0x93e0d4=document[_0x590639(0x402)](_0x590639(0x293))?.['value']||'',_0xe64f67=window['innerWidth']<0x300?0x2:0x4;_0x6b6c89['innerHTML']=_0x590639(0x45f);const _0x86138=await getMemberCount(_0x2320bd),_0x176ff5=Math[_0x590639(0x2dd)](0x5,Math[_0x590639(0x1e2)](_0x86138*0.01)),_0xf7d768={'lookingFor':_0x187eaa,'offering':_0x93e0d4};if(totalCarouselPosts===0x0||lastFilterState[_0x590639(0x38c)]!==_0xf7d768[_0x590639(0x38c)]||lastFilterState[_0x590639(0x181)]!==_0xf7d768[_0x590639(0x181)]){const _0x23921e=query(collection(db,_0x590639(0x46e),_0x2320bd,'posts'),where(_0x590639(0x2a3),'>=',_0x176ff5),..._0x187eaa?[where(_0x590639(0x38c),'==',_0x187eaa)]:[],..._0x93e0d4?[where(_0x590639(0x181),'==',_0x93e0d4)]:[]);totalCarouselPosts=(await getDocs(_0x23921e))['size'],lastFilterState=_0xf7d768,console[_0x590639(0x395)]('Total\x20trending\x20posts\x20for\x20'+_0x2320bd+':\x20'+totalCarouselPosts);}const _0x4220de=Math['max'](0x0,Math['ceil'](totalCarouselPosts/_0xe64f67)-0x1);if(carouselIndex<0x0)carouselIndex=_0x4220de;else carouselIndex>_0x4220de&&(carouselIndex=0x0);let _0x24e581=query(collection(db,_0x590639(0x46e),_0x2320bd,'posts'),where(_0x590639(0x2a3),'>=',_0x176ff5),..._0x187eaa?[where(_0x590639(0x38c),'==',_0x187eaa)]:[],..._0x93e0d4?[where('offering','==',_0x93e0d4)]:[],orderBy(_0x590639(0x2a3),_0x590639(0x3b0)));if(_0x3af4c9>0x0&&carouselIndex>0x0&&lastCarouselDoc&&carouselIndex<=_0x4220de)_0x24e581=query(_0x24e581,startAfter(lastCarouselDoc),limit(_0xe64f67));else{if(_0x3af4c9<0x0&&carouselIndex>=0x0&&firstCarouselDoc&&carouselIndex<_0x4220de)_0x24e581=query(_0x24e581,endBefore(firstCarouselDoc),limitToLast(_0xe64f67));else{if(carouselIndex===0x0||totalCarouselPosts<=_0xe64f67)_0x24e581=query(_0x24e581,limit(_0xe64f67));else carouselIndex===_0x4220de&&(_0x24e581=query(collection(db,_0x590639(0x46e),_0x2320bd,_0x590639(0x408)),where('likes','>=',_0x176ff5),..._0x187eaa?[where(_0x590639(0x38c),'==',_0x187eaa)]:[],..._0x93e0d4?[where(_0x590639(0x181),'==',_0x93e0d4)]:[],orderBy(_0x590639(0x2a3),'desc'),limitToLast(_0xe64f67)));}}const _0x1756ef=await getDocs(_0x24e581),_0x4c5cc2=_0x1756ef['docs'][_0x590639(0x2f7)](_0x12f6d6=>({'id':_0x12f6d6['id'],..._0x12f6d6['data'](),'communityId':_0x2320bd}));if(_0x1756ef['docs'][_0x590639(0x1d5)]>0x0)lastCarouselDoc=_0x1756ef[_0x590639(0x15f)][_0x1756ef[_0x590639(0x15f)]['length']-0x1],firstCarouselDoc=_0x1756ef['docs'][0x0];else{if(_0x3af4c9>0x0)carouselIndex=0x0,_0x24e581=query(collection(db,_0x590639(0x46e),_0x2320bd,'posts'),where(_0x590639(0x2a3),'>=',_0x176ff5),..._0x187eaa?[where('lookingFor','==',_0x187eaa)]:[],..._0x93e0d4?[where(_0x590639(0x181),'==',_0x93e0d4)]:[],orderBy(_0x590639(0x2a3),_0x590639(0x3b0)),limit(_0xe64f67));else _0x3af4c9<0x0&&(carouselIndex=_0x4220de,_0x24e581=query(collection(db,_0x590639(0x46e),_0x2320bd,_0x590639(0x408)),where(_0x590639(0x2a3),'>=',_0x176ff5),..._0x187eaa?[where(_0x590639(0x38c),'==',_0x187eaa)]:[],..._0x93e0d4?[where(_0x590639(0x181),'==',_0x93e0d4)]:[],orderBy(_0x590639(0x2a3),_0x590639(0x3b0)),limitToLast(_0xe64f67)));const _0x3b0212=await getDocs(_0x24e581);_0x4c5cc2[_0x590639(0x21a)](..._0x3b0212[_0x590639(0x15f)][_0x590639(0x2f7)](_0x480eb1=>({'id':_0x480eb1['id'],..._0x480eb1[_0x590639(0x1e8)](),'communityId':_0x2320bd}))),_0x3b0212[_0x590639(0x15f)][_0x590639(0x1d5)]>0x0&&(lastCarouselDoc=_0x3b0212[_0x590639(0x15f)][_0x3b0212[_0x590639(0x15f)][_0x590639(0x1d5)]-0x1],firstCarouselDoc=_0x3b0212[_0x590639(0x15f)][0x0]);}_0x4c5cc2[_0x590639(0x1e6)](_0x4334a1=>{const _0x39b1ea=_0x590639;!postCache[_0x39b1ea(0x296)](_0x4334a1['id'])&&(postCache['set'](_0x4334a1['id'],_0x4334a1),console[_0x39b1ea(0x395)]('Cached\x20carousel\x20post\x20'+_0x4334a1['id']+'\x20for\x20'+_0x2320bd));}),_0x6b6c89[_0x590639(0x13b)]=_0x4c5cc2[_0x590639(0x1d5)]===0x0?_0x590639(0x198):'';for(const _0x36bec4 of _0x4c5cc2){if(_0x36bec4[_0x590639(0x469)]!==_0x2320bd){console['log'](_0x590639(0xf9)+_0x36bec4['id']+_0x590639(0x471)+_0x36bec4[_0x590639(0x469)]+_0x590639(0x216)+_0x2320bd);continue;}const _0x541ca5=await fetchUserData(_0x36bec4[_0x590639(0x123)]),_0x24993a=document[_0x590639(0x1de)]('div');_0x24993a[_0x590639(0x436)]=_0x590639(0x1db),_0x24993a[_0x590639(0x13b)]=_0x590639(0x3b4)+(_0x36bec4[_0x590639(0x467)]||'Untitled')+_0x590639(0x101)+(_0x36bec4['lookingFor']||'N/A')+_0x590639(0x13a)+(_0x36bec4[_0x590639(0x181)]||_0x590639(0x285))+_0x590639(0x22f)+(_0x36bec4[_0x590639(0x2a3)]||0x0)+_0x590639(0x114)+_0x36bec4[_0x590639(0x123)]+'\x22>'+(_0x541ca5[_0x590639(0x47d)]||_0x590639(0x3ca))+'</span></p>\x0a\x20\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22'+_0x36bec4['id']+_0x590639(0x400),_0x6b6c89[_0x590639(0x468)](_0x24993a),_0x24993a[_0x590639(0x228)](_0x590639(0x107))[_0x590639(0x3ed)](_0x590639(0x40e),()=>viewProfile(_0x36bec4[_0x590639(0x123)])),_0x24993a[_0x590639(0x228)](_0x590639(0x1a5))[_0x590639(0x3ed)]('click',_0x6e021d=>{const _0xcadfcd=_0x590639;_0x6e021d[_0xcadfcd(0x26d)](),copyPostId(_0x36bec4['id']);});}_0x24522b['disabled']=totalCarouselPosts===0x0,_0x45e336[_0x590639(0x254)]=totalCarouselPosts===0x0,console[_0x590639(0x395)](_0x590639(0x174)+_0x2320bd+',\x20index:\x20'+carouselIndex);}function slideCarousel(_0x53a0d9){carouselIndex+=_0x53a0d9,loadCarouselPosts(communityId,_0x53a0d9);}const delay=_0x9234a2=>new Promise(_0x25f6c8=>setTimeout(_0x25f6c8,_0x9234a2)),POST_CACHE_KEY=_0xb3da24(0x326)+communityId,LIKED_PREFS_KEY=_0xb3da24(0x32f)+communityId,CACHE_TIMESTAMP_KEY=_0xb3da24(0x209)+communityId,CACHE_EXPIRY_HOURS=0x8,PaginationState={'POSTS_PER_PAGE':0xa,'currentPage':0x1,'displayedPostIds':new Set()};function isCacheExpired(){const _0x2f25b4=_0xb3da24,_0x7fbed0=sessionStorage[_0x2f25b4(0x240)](CACHE_TIMESTAMP_KEY);if(!_0x7fbed0)return!![];const _0x57f4b3=Date[_0x2f25b4(0x347)]()-parseInt(_0x7fbed0);return _0x57f4b3>CACHE_EXPIRY_HOURS*0x3c*0x3c*0x3e8;}function resetCache(){const _0x5f2281=_0xb3da24;sessionStorage['removeItem'](POST_CACHE_KEY),sessionStorage[_0x5f2281(0x26c)](LIKED_PREFS_KEY),sessionStorage[_0x5f2281(0x31a)](CACHE_TIMESTAMP_KEY,Date[_0x5f2281(0x347)]()['toString']());}function getLikedPrefs(){const _0x1ccae4=_0xb3da24;if(isCacheExpired())resetCache();const _0x5db8b5=sessionStorage['getItem'](LIKED_PREFS_KEY);if(!_0x5db8b5)return{'categories':new Set(),'offerings':new Set()};const _0x172f78=JSON[_0x1ccae4(0x33a)](_0x5db8b5);return{'categories':new Set(_0x172f78['categories']),'offerings':new Set(_0x172f78[_0x1ccae4(0x446)])};}function addLikedPref(_0x155b5e,_0x1de713){const _0x2dd292=_0xb3da24,_0x57e532=getLikedPrefs();_0x57e532['categories'][_0x2dd292(0x11c)](_0x155b5e),_0x57e532[_0x2dd292(0x446)]['add'](_0x1de713),sessionStorage[_0x2dd292(0x31a)](LIKED_PREFS_KEY,JSON[_0x2dd292(0x372)]({'categories':Array['from'](_0x57e532[_0x2dd292(0x356)]),'offerings':Array['from'](_0x57e532['offerings'])}));}function normalizePostData(_0x1f2ff7){const _0x2a3bd0=_0xb3da24;return{..._0x1f2ff7,'createdAt':_0x1f2ff7[_0x2a3bd0(0x280)]instanceof Object&&'toDate'in _0x1f2ff7[_0x2a3bd0(0x280)]?_0x1f2ff7['createdAt'][_0x2a3bd0(0x2fc)]():new Date(_0x1f2ff7[_0x2a3bd0(0x280)])};}function getCachedPosts(){const _0x4314a8=_0xb3da24;if(isCacheExpired())resetCache();const _0x5e6a6d=sessionStorage[_0x4314a8(0x240)](POST_CACHE_KEY);if(!_0x5e6a6d)return new Map();const _0x3424ab=JSON[_0x4314a8(0x33a)](_0x5e6a6d);return new Map(_0x3424ab[_0x4314a8(0x2f7)](([_0x1d6d0f,_0xf693a6])=>{const _0x2cbbd7=_0x4314a8;return _0xf693a6['data']['createdAt']=new Date(_0xf693a6['data'][_0x2cbbd7(0x280)]),[_0x1d6d0f,_0xf693a6];}));}function setCachedPosts(_0x1356c6){const _0x3ae2a6=_0xb3da24,_0x430a62=0x3e8,_0x5bc4c5=new Map(Array[_0x3ae2a6(0x2f1)](_0x1356c6[_0x3ae2a6(0x31d)]())[_0x3ae2a6(0x2f7)](([_0x29fb9d,_0x52fa22])=>{const _0x22d56b=_0x3ae2a6;return[_0x29fb9d,{..._0x52fa22,'data':{..._0x52fa22[_0x22d56b(0x1e8)],'createdAt':_0x52fa22[_0x22d56b(0x1e8)][_0x22d56b(0x280)][_0x22d56b(0xfb)]()}}];}));if(_0x5bc4c5['size']>_0x430a62){const _0x2009da=_0x5bc4c5[_0x3ae2a6(0x2ed)]-_0x430a62,_0x4d5dc7=Array[_0x3ae2a6(0x2f1)](_0x5bc4c5[_0x3ae2a6(0x24e)]())[_0x3ae2a6(0x3d7)](0x0,_0x2009da);_0x4d5dc7[_0x3ae2a6(0x1e6)](_0x10d2e5=>_0x5bc4c5[_0x3ae2a6(0x255)](_0x10d2e5)),console[_0x3ae2a6(0x395)]('Trimmed\x20'+_0x2009da+'\x20oldest\x20posts\x20from\x20cache');}sessionStorage['setItem'](POST_CACHE_KEY,JSON[_0x3ae2a6(0x372)](Array[_0x3ae2a6(0x2f1)](_0x5bc4c5[_0x3ae2a6(0x31d)]()))),!sessionStorage[_0x3ae2a6(0x240)](CACHE_TIMESTAMP_KEY)&&sessionStorage['setItem'](CACHE_TIMESTAMP_KEY,Date[_0x3ae2a6(0x347)]()[_0x3ae2a6(0x242)]());}function getPostScore(_0x126e94,_0xdc2a5c){const _0x4921b6=_0xb3da24,_0x45eab4=Date[_0x4921b6(0x347)](),_0x21d10c=(_0x45eab4-_0x126e94[_0x4921b6(0x280)][_0x4921b6(0x22b)]())/(0x3e8*0x3c*0x3c),_0x4526a4=Math[_0x4921b6(0x2dd)](0x0,0x1e-_0x21d10c/0x18)/0x1e,_0x37462d=Math[_0x4921b6(0x252)](_0x126e94[_0x4921b6(0x2a3)]||0x0,0x32)/0x32,_0x1b4e3b=Math[_0x4921b6(0x252)](_0x126e94[_0x4921b6(0x2e6)]||0x0,0x14)/0x14;let _0xbfa3d7=0.4*_0x37462d+0.4*_0x1b4e3b+0.2*_0x4526a4;const _0x2f2f50=new Set(_0xdc2a5c['categories']),_0x186a64=new Set(_0xdc2a5c[_0x4921b6(0x446)]);return(_0x2f2f50['has'](_0x126e94[_0x4921b6(0x27a)])||_0x186a64['has'](_0x126e94[_0x4921b6(0x181)]))&&(_0xbfa3d7+=0.3),_0x21d10c<0x18&&(_0xbfa3d7+=0.5),Math['min'](1.5,_0xbfa3d7);}async function loadPosts(_0x50c62e,_0x2a4953=![],_0x4010e1=PaginationState[_0xb3da24(0x360)]){const _0x3311ab=_0xb3da24;if(isFetching||isSearching)return;isFetching=!![];const _0x52bd79=document[_0x3311ab(0x402)](_0x3311ab(0x3e2)),_0x27c3a8=document['getElementById'](_0x3311ab(0x2c6)),_0x11604e={'category':document[_0x3311ab(0x402)](_0x3311ab(0x43c))?.[_0x3311ab(0x2b5)]||'','lookingFor':document['getElementById'](_0x3311ab(0x458))?.[_0x3311ab(0x2b5)]||'','offering':document[_0x3311ab(0x402)]('offeringFilter')?.[_0x3311ab(0x2b5)]||''};_0x2a4953&&(_0x52bd79[_0x3311ab(0x13b)]='',_0x27c3a8['style'][_0x3311ab(0x17e)]=_0x3311ab(0x2c1),loadedPostIds[_0x3311ab(0x393)](),PaginationState[_0x3311ab(0x1c9)][_0x3311ab(0x393)](),lastPostDoc=null,postCache['clear'](),PaginationState[_0x3311ab(0x360)]=0x1,resetCache(),console['log'](_0x3311ab(0x1ea)+_0x50c62e));PaginationState[_0x3311ab(0x360)]=_0x4010e1;const _0x3f096a=getCachedPosts(),_0x439585=getLikedPrefs(),_0xe78db0=0x19;let _0x4436e9=null;if(_0x3f096a[_0x3311ab(0x2ed)]>0x0){const _0x3ac4e4=Array[_0x3311ab(0x2f1)](_0x3f096a['values']())[_0x3311ab(0x382)](_0x4db587=>_0x4db587[_0x3311ab(0x1e8)][_0x3311ab(0x469)]===_0x50c62e)['map'](_0x19cf04=>_0x19cf04[_0x3311ab(0x1e8)][_0x3311ab(0x280)][_0x3311ab(0x22b)]());_0x4436e9=_0x3ac4e4[_0x3311ab(0x1d5)]>0x0?Math[_0x3311ab(0x2dd)](..._0x3ac4e4):null,console['log'](_0x3311ab(0x435)+_0x3ac4e4[_0x3311ab(0x1d5)]+_0x3311ab(0x367)+_0x50c62e+_0x3311ab(0x37a)+(_0x4436e9?new Date(_0x4436e9)['toLocaleString']():_0x3311ab(0x285)));}else console[_0x3311ab(0x395)]('No\x20cached\x20posts\x20found\x20for\x20'+_0x50c62e+'—fetching\x20fresh\x20batch.');const _0x166aca=(PaginationState[_0x3311ab(0x360)]-0x1)*PaginationState[_0x3311ab(0x46a)],_0x1b3c44=_0x166aca+PaginationState[_0x3311ab(0x46a)];let _0x3c4fb7=Array['from'](_0x3f096a[_0x3311ab(0x1df)]())[_0x3311ab(0x382)](_0x3a6c9f=>_0x3a6c9f[_0x3311ab(0x1e8)]['communityId']===_0x50c62e)[_0x3311ab(0x2f7)](_0x3fc1c5=>({..._0x3fc1c5,'score':getPostScore(_0x3fc1c5[_0x3311ab(0x1e8)],_0x439585)}))[_0x3311ab(0x382)](_0x5cde72=>(!_0x11604e['category']||_0x5cde72[_0x3311ab(0x1e8)]['category']===_0x11604e[_0x3311ab(0x27a)])&&(!_0x11604e[_0x3311ab(0x38c)]||_0x5cde72[_0x3311ab(0x1e8)][_0x3311ab(0x38c)]===_0x11604e[_0x3311ab(0x38c)])&&(!_0x11604e[_0x3311ab(0x181)]||_0x5cde72[_0x3311ab(0x1e8)][_0x3311ab(0x181)]===_0x11604e[_0x3311ab(0x181)]))[_0x3311ab(0x1b3)]((_0x410c9c,_0x586b15)=>_0x586b15[_0x3311ab(0x43e)]-_0x410c9c[_0x3311ab(0x43e)]);const _0x1451c8=_0x3c4fb7[_0x3311ab(0x3d7)](_0x166aca,_0x1b3c44)[_0x3311ab(0x382)](_0x3f9661=>!PaginationState['displayedPostIds'][_0x3311ab(0x296)](_0x3f9661['id'])),_0x380a8d=_0x1451c8[_0x3311ab(0x1d5)]===PaginationState[_0x3311ab(0x46a)]||_0x166aca+_0x1451c8[_0x3311ab(0x1d5)]>=_0x3c4fb7[_0x3311ab(0x1d5)];if(!_0x380a8d||_0x2a4953||_0x3f096a['size']===0x0){let _0x5d3951=query(collection(db,'communities',_0x50c62e,_0x3311ab(0x408)),..._0x11604e[_0x3311ab(0x27a)]?[where(_0x3311ab(0x27a),'==',_0x11604e[_0x3311ab(0x27a)])]:[],..._0x11604e[_0x3311ab(0x38c)]?[where(_0x3311ab(0x38c),'==',_0x11604e[_0x3311ab(0x38c)])]:[],..._0x11604e[_0x3311ab(0x181)]?[where(_0x3311ab(0x181),'==',_0x11604e['offering'])]:[],orderBy(_0x3311ab(0x280),_0x3311ab(0x3b0)),limit(_0xe78db0),...lastPostDoc&&!_0x2a4953?[startAfter(lastPostDoc)]:[],..._0x4436e9&&!_0x2a4953?[where('createdAt','>',new Date(_0x4436e9))]:[]);try{const _0x426dad=await getDocs(_0x5d3951),_0x3edff6=_0x426dad[_0x3311ab(0x15f)][_0x3311ab(0x2f7)](_0x201b17=>({'id':_0x201b17['id'],'data':{...normalizePostData(_0x201b17[_0x3311ab(0x1e8)]()),'communityId':_0x50c62e},'score':getPostScore(normalizePostData(_0x201b17['data']()),_0x439585)}));console[_0x3311ab(0x395)](_0x3311ab(0x231)+_0x3edff6[_0x3311ab(0x1d5)]+_0x3311ab(0x410)+_0x50c62e+'\x20('+_0xe78db0+'\x20reads)'),_0x3edff6[_0x3311ab(0x1e6)](_0x4dfee4=>_0x3f096a[_0x3311ab(0x3f1)](_0x4dfee4['id'],_0x4dfee4)),setCachedPosts(_0x3f096a),_0x3c4fb7=Array[_0x3311ab(0x2f1)](_0x3f096a['values']())[_0x3311ab(0x382)](_0x24aab8=>_0x24aab8[_0x3311ab(0x1e8)][_0x3311ab(0x469)]===_0x50c62e)['map'](_0x214725=>({..._0x214725,'score':getPostScore(_0x214725[_0x3311ab(0x1e8)],_0x439585)}))[_0x3311ab(0x382)](_0x5b5da7=>(!_0x11604e[_0x3311ab(0x27a)]||_0x5b5da7['data'][_0x3311ab(0x27a)]===_0x11604e[_0x3311ab(0x27a)])&&(!_0x11604e[_0x3311ab(0x38c)]||_0x5b5da7[_0x3311ab(0x1e8)][_0x3311ab(0x38c)]===_0x11604e[_0x3311ab(0x38c)])&&(!_0x11604e[_0x3311ab(0x181)]||_0x5b5da7[_0x3311ab(0x1e8)]['offering']===_0x11604e[_0x3311ab(0x181)]))['sort']((_0x3765bb,_0x5997e7)=>_0x5997e7[_0x3311ab(0x43e)]-_0x3765bb[_0x3311ab(0x43e)]);}catch(_0x4dbe9f){console[_0x3311ab(0x292)](_0x3311ab(0x265)+_0x50c62e+':',_0x4dbe9f),_0x52bd79[_0x3311ab(0x13b)]=_0x3311ab(0x345),isFetching=![];return;}}const _0x30dee2=_0x3c4fb7[_0x3311ab(0x3d7)](_0x166aca,_0x1b3c44)['filter'](_0xe6bc98=>!PaginationState[_0x3311ab(0x1c9)][_0x3311ab(0x296)](_0xe6bc98['id']));console[_0x3311ab(0x395)]('Showing\x20'+_0x30dee2[_0x3311ab(0x1d5)]+_0x3311ab(0x239)+_0x50c62e+'\x20on\x20page\x20'+PaginationState[_0x3311ab(0x360)]);if(_0x30dee2[_0x3311ab(0x1d5)]===0x0&&!initialPostsLoaded)_0x52bd79[_0x3311ab(0x13b)]=_0x3311ab(0x389),_0x27c3a8[_0x3311ab(0x361)][_0x3311ab(0x17e)]=_0x3311ab(0x2c1);else{totalPosts=totalPosts||parseInt(sessionStorage[_0x3311ab(0x240)](_0x3311ab(0x2c9)+_0x50c62e))||await getTotalPosts(_0x50c62e),sessionStorage['setItem'](_0x3311ab(0x2c9)+_0x50c62e,totalPosts),initialPostsLoaded=!![],_0x30dee2[_0x3311ab(0x1e6)](_0x1debdd=>postCache[_0x3311ab(0x3f1)](_0x1debdd['id'],{'id':_0x1debdd['id'],'data':_0x1debdd[_0x3311ab(0x1e8)]}));const _0x40d80d=query(collection(doc(db,_0x3311ab(0x20b),auth['currentUser'][_0x3311ab(0x3d8)]),'savedPosts'),where(_0x3311ab(0x469),'==',_0x50c62e)),_0x4badc9=await getDocs(_0x40d80d),_0x109b5b=new Set(_0x4badc9[_0x3311ab(0x15f)]['map'](_0x38bdf1=>_0x38bdf1['data']()[_0x3311ab(0x482)]));_0x52bd79['innerHTML']='',PaginationState[_0x3311ab(0x1c9)][_0x3311ab(0x393)](),await renderPosts({'docs':_0x30dee2['map'](_0x254b31=>({'id':_0x254b31['id'],'data':()=>_0x254b31['data']}))},_0x52bd79,_0x109b5b),addPaginationControls(_0x52bd79,_0x3c4fb7['length'],_0x50c62e),_0x27c3a8['style'][_0x3311ab(0x17e)]=PaginationState[_0x3311ab(0x360)]*PaginationState[_0x3311ab(0x46a)]>=totalPosts?_0x3311ab(0x176):'none';}isFetching=![];}document[_0xb3da24(0x402)](_0xb3da24(0x43c))?.[_0xb3da24(0x3ed)]('change',()=>loadPosts(communityId,!![])),document[_0xb3da24(0x402)](_0xb3da24(0x458))?.[_0xb3da24(0x3ed)](_0xb3da24(0x42b),()=>loadPosts(communityId,!![])),document[_0xb3da24(0x402)](_0xb3da24(0x293))?.['addEventListener'](_0xb3da24(0x42b),()=>loadPosts(communityId,!![]));async function renderPosts(_0x2b642c,_0x4059d7,_0x169c36){const _0x1d8fbd=_0xb3da24,_0x337677=await getCommData(),_0xefc237=_0x337677?.[_0x1d8fbd(0x2e0)]?.[_0x1d8fbd(0x3d5)](auth[_0x1d8fbd(0x46c)][_0x1d8fbd(0x3d8)])||_0x337677?.[_0x1d8fbd(0x337)]===auth['currentUser'][_0x1d8fbd(0x3d8)],_0x8c21b=[...new Set(_0x2b642c[_0x1d8fbd(0x15f)]['map'](_0x200fab=>_0x200fab[_0x1d8fbd(0x1e8)]()[_0x1d8fbd(0x123)])[_0x1d8fbd(0x382)](Boolean))];await fetchUserData(_0x8c21b);for(const _0x303448 of _0x2b642c[_0x1d8fbd(0x15f)]){const _0x459e27=_0x303448['id'];if(PaginationState['displayedPostIds'][_0x1d8fbd(0x296)](_0x459e27))continue;if(PaginationState['displayedPostIds']['size']>=PaginationState['POSTS_PER_PAGE'])break;const _0x4a1c9a=postCache[_0x1d8fbd(0x2fb)](_0x459e27)?.[_0x1d8fbd(0x1e8)]||_0x303448[_0x1d8fbd(0x1e8)]();if(_0x4a1c9a[_0x1d8fbd(0x469)]&&_0x4a1c9a[_0x1d8fbd(0x469)]!==communityId){console['log']('Skipping\x20post\x20'+_0x459e27+_0x1d8fbd(0x471)+_0x4a1c9a['communityId']+_0x1d8fbd(0x216)+communityId);continue;}PaginationState[_0x1d8fbd(0x1c9)][_0x1d8fbd(0x11c)](_0x459e27),loadedPostIds[_0x1d8fbd(0x11c)](_0x459e27);const _0x7df276=userDataCache[_0x4a1c9a[_0x1d8fbd(0x123)]]||{'profilePhoto':_0x1d8fbd(0xfe),'name':_0x1d8fbd(0x3ca),'username':'unknown'},_0x35c202=_0x337677?.[_0x1d8fbd(0x2e0)]?.[_0x1d8fbd(0x3d5)](_0x4a1c9a[_0x1d8fbd(0x123)])||_0x337677?.[_0x1d8fbd(0x337)]===_0x4a1c9a[_0x1d8fbd(0x123)],_0x40a094=query(collection(db,'communities',communityId,_0x1d8fbd(0x408),_0x459e27,_0x1d8fbd(0x11d)),orderBy(_0x1d8fbd(0x280),_0x1d8fbd(0x3b0))),_0x5d6145=await getDocs(_0x40a094),_0x36fdb6=_0x5d6145[_0x1d8fbd(0x2ed)],_0x1ce5f7=_0x4a1c9a[_0x1d8fbd(0x280)]?new Date(_0x4a1c9a[_0x1d8fbd(0x280)])[_0x1d8fbd(0x104)]():'N/A',_0x2f062c=_0x4a1c9a[_0x1d8fbd(0x39c)]||[],_0x1a7b96=_0x2f062c[_0x1d8fbd(0x1d5)],_0x6e9a48=await getPostReportStatus(_0x459e27),_0x33a0c4=_0x169c36[_0x1d8fbd(0x296)](_0x459e27),_0x13b61a=categoryDisplayMap[_0x4a1c9a['category']]||_0x4a1c9a['category'];if(_0x6e9a48?.[_0x1d8fbd(0x219)]){PaginationState[_0x1d8fbd(0x1c9)][_0x1d8fbd(0x255)](_0x459e27),loadedPostIds[_0x1d8fbd(0x255)](_0x459e27);continue;}const _0x3a19ba=document[_0x1d8fbd(0x1de)](_0x1d8fbd(0x3bf));_0x3a19ba[_0x1d8fbd(0x436)]='post',_0x3a19ba['id']=_0x1d8fbd(0x32a)+_0x459e27,_0x3a19ba['innerHTML']=_0x1d8fbd(0x32b)+_0x7df276['profilePhoto']+_0x1d8fbd(0x3e4)+_0x4a1c9a[_0x1d8fbd(0x123)]+'\x22>'+_0x7df276[_0x1d8fbd(0x47d)]+_0x1d8fbd(0x2af)+_0x7df276['username']+_0x1d8fbd(0x336)+(_0x35c202?_0x1d8fbd(0x47b):'')+_0x1d8fbd(0x22d)+(_0x4a1c9a[_0x1d8fbd(0x467)]||_0x1d8fbd(0x267))+'</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-description\x22>'+(_0x4a1c9a[_0x1d8fbd(0x1ce)]||'')+'</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-'+_0x459e27+_0x1d8fbd(0x1a7)+JSON[_0x1d8fbd(0x372)](_0x2f062c)+'\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1a7b96>0x1?'<button\x20class=\x22carousel-prev\x22\x20data-post-id=\x22'+_0x459e27+_0x1d8fbd(0x288):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x2f062c[0x0]||'https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430')+'\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1a7b96>0x1?_0x1d8fbd(0x2b7)+_0x459e27+'-community\x22>></button>':'')+_0x1d8fbd(0x1e4)+(_0x4a1c9a[_0x1d8fbd(0x260)]?.[_0x1d8fbd(0x47d)]||_0x1d8fbd(0x285))+_0x1d8fbd(0x38f)+_0x13b61a+_0x1d8fbd(0x39f)+(_0x4a1c9a[_0x1d8fbd(0x38c)]||'N/A')+'\x20|\x20Offering:\x20'+(_0x4a1c9a[_0x1d8fbd(0x181)]||_0x1d8fbd(0x285))+_0x1d8fbd(0x28f)+_0x1ce5f7+'</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20'+_0x459e27+_0x1d8fbd(0x463)+_0x459e27+_0x1d8fbd(0x423)+_0x459e27+'\x22>'+((_0x4a1c9a[_0x1d8fbd(0x37d)]||[])[_0x1d8fbd(0x3d5)](auth[_0x1d8fbd(0x46c)][_0x1d8fbd(0x3d8)])?'<i\x20class=\x22fas\x20fa-heart-broken\x22></i>\x20Unlike':_0x1d8fbd(0x3b7))+'\x20('+(_0x4a1c9a[_0x1d8fbd(0x2a3)]||0x0)+_0x1d8fbd(0x42c)+_0x459e27+_0x1d8fbd(0x43b)+communityId+'\x22>'+(_0x33a0c4?'<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Unsave':'<i\x20class=\x22fas\x20fa-save\x22></i>\x20Save')+_0x1d8fbd(0x26f)+_0x459e27+'\x22>Report\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20'+(_0x4a1c9a[_0x1d8fbd(0x123)]===auth[_0x1d8fbd(0x46c)][_0x1d8fbd(0x3d8)]||_0xefc237?_0x1d8fbd(0x276)+_0x459e27+_0x1d8fbd(0x32c):'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x6e9a48?.['isOwner']&&_0x6e9a48['reportCount']===0x1?_0x1d8fbd(0x147)+_0x459e27+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>':'')+_0x1d8fbd(0x310)+(_0x6e9a48?.[_0x1d8fbd(0x1fb)]&&_0x6e9a48[_0x1d8fbd(0x202)]>=0x2?_0x1d8fbd(0x147)+_0x459e27+_0x1d8fbd(0x2c0)+_0x6e9a48[_0x1d8fbd(0x202)]+_0x1d8fbd(0x27d):'')+_0x1d8fbd(0x310)+(_0xefc237&&_0x6e9a48?.['reportCount']>0x0?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-'+_0x459e27+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20'+_0x6e9a48[_0x1d8fbd(0x202)]+_0x1d8fbd(0x291)+(_0x6e9a48[_0x1d8fbd(0x202)]>0x1?'s':'')+_0x1d8fbd(0x168)+_0x459e27+_0x1d8fbd(0x1f6)+_0x459e27+_0x1d8fbd(0x331):'')+_0x1d8fbd(0x2db)+_0x459e27+'\x22>'+_0x36fdb6+_0x1d8fbd(0x1d3)+_0x459e27+_0x1d8fbd(0x2d4)+_0x459e27+_0x1d8fbd(0x366)+_0x459e27+_0x1d8fbd(0x27e),_0x4059d7[_0x1d8fbd(0x468)](_0x3a19ba);const _0x3b4a4e=_0x3a19ba[_0x1d8fbd(0x228)]('.like-btn[data-post-id=\x22'+_0x459e27+'\x22]');_0x3b4a4e[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),async()=>{const _0x48cafa=_0x1d8fbd,_0xdb09bf=doc(db,_0x48cafa(0x46e),communityId,'posts',_0x459e27),_0x1ae7c2=await getDoc(_0xdb09bf);if(!_0x1ae7c2['exists']()){alert(_0x48cafa(0x444));return;}const _0x1c52de=normalizePostData(_0x1ae7c2[_0x48cafa(0x1e8)]()),_0x2fe396=auth[_0x48cafa(0x46c)]['uid'],_0x53e4dc=_0x1c52de[_0x48cafa(0x37d)]||[];let _0xaafcac=_0x1c52de['likes']||0x0,_0x2afee0=[..._0x53e4dc];_0x53e4dc[_0x48cafa(0x3d5)](_0x2fe396)?(_0x2afee0=_0x2afee0[_0x48cafa(0x382)](_0x1c056a=>_0x1c056a!==_0x2fe396),_0xaafcac=Math[_0x48cafa(0x2dd)](0x0,_0xaafcac-0x1)):(_0x2afee0['push'](_0x2fe396),_0xaafcac+=0x1,addLikedPref(_0x1c52de[_0x48cafa(0x27a)],_0x1c52de['offering']));await updateDoc(_0xdb09bf,{'likes':_0xaafcac,'likedBy':_0x2afee0}),_0x3b4a4e['innerHTML']=(_0x53e4dc[_0x48cafa(0x3d5)](_0x2fe396)?'<i\x20class=\x22fas\x20fa-heart\x22></i>\x20Like':'<i\x20class=\x22fas\x20fa-heart-broken\x22></i>\x20Unlike')+'\x20('+_0xaafcac+')';const _0x281438=getCachedPosts();_0x281438[_0x48cafa(0x3f1)](_0x459e27,{'id':_0x459e27,'data':{..._0x1c52de,'likes':_0xaafcac,'likedBy':_0x2afee0,'communityId':communityId}}),setCachedPosts(_0x281438);});const _0x441839=_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x39b)+_0x459e27+'\x22]');let _0x1cb1d7=![];_0x441839[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),async _0x21cc10=>{const _0x40ada3=_0x1d8fbd;_0x21cc10[_0x40ada3(0x307)]();if(_0x1cb1d7)return;_0x1cb1d7=!![],await toggleSavePost(_0x459e27,communityId,_0x441839),_0x1cb1d7=![];}),_0x3a19ba[_0x1d8fbd(0x228)]('.username[data-uid=\x22'+_0x4a1c9a[_0x1d8fbd(0x123)]+'\x22]')?.[_0x1d8fbd(0x3ed)]('click',()=>viewProfile(_0x4a1c9a['userId'])),_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x35d)+_0x459e27)?.[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),_0x3430b5=>{const _0x2ebe9c=_0x1d8fbd;_0x3430b5[_0x2ebe9c(0x307)](),toggleComments(_0x459e27);}),_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x1fa)+_0x459e27)?.['addEventListener'](_0x1d8fbd(0x45c),_0x1661fe=>{const _0x71466f=_0x1d8fbd;_0x1661fe[_0x71466f(0x307)](),addComment(_0x459e27,_0x4a1c9a[_0x71466f(0x123)]);}),_0x3a19ba['querySelector']('#deletePost-'+_0x459e27)?.[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),()=>deletePost(_0x459e27)),_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x2bb)+_0x459e27)?.[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),()=>reportPost(_0x459e27)),_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x180)+_0x459e27+'\x22]')?.[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),_0x26c6fc=>{const _0x2da8dd=_0x1d8fbd;_0x26c6fc[_0x2da8dd(0x26d)](),copyPostId(_0x459e27);});_0xefc237&&(_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x22c)+_0x459e27+'\x22]')?.['addEventListener'](_0x1d8fbd(0x40e),()=>deletePost(_0x459e27)),_0x3a19ba['querySelector'](_0x1d8fbd(0x415)+_0x459e27+'\x22]')?.[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x40e),()=>clearReports(_0x459e27)));const _0x1195b2=_0x3a19ba[_0x1d8fbd(0x228)](_0x1d8fbd(0x1fa)+_0x459e27+_0x1d8fbd(0x22a));if(_0x1195b2){if(_0x1195b2['_debouncedInput'])_0x1195b2[_0x1d8fbd(0x2be)]('input',_0x1195b2[_0x1d8fbd(0x3dd)]);_0x1195b2['_debouncedInput']=debounce(_0xa48041=>showTagSuggestions(_0xa48041[_0x1d8fbd(0x41c)],_0x459e27),0x1f4),_0x1195b2[_0x1d8fbd(0x3ed)](_0x1d8fbd(0x188),_0x1195b2['_debouncedInput']);}if(_0x1a7b96>0x1)setupCommunityCarousel(_0x459e27);}}async function toggleSavePost(_0x31c7b1,_0x2cd7d7,_0x3b4381){const _0x3894f1=_0xb3da24;console[_0x3894f1(0x395)](_0x3894f1(0x459)+_0x31c7b1);const _0xaa2082=auth['currentUser'],_0x301fb6=doc(db,_0x3894f1(0x20b),_0xaa2082['uid']),_0x44122d=collection(_0x301fb6,_0x3894f1(0x2f8)),_0x144665=query(_0x44122d,where(_0x3894f1(0x482),'==',_0x31c7b1),where(_0x3894f1(0x469),'==',_0x2cd7d7)),_0x17828f=await getDocs(_0x144665);if(_0x17828f['empty']){const _0x317afd=document['getElementById'](_0x3894f1(0x41d)),_0x3d88d8=document[_0x3894f1(0x402)]('savePostNote'),_0x1fcd96=document['getElementById'](_0x3894f1(0x2a2)),_0x11a182=document[_0x3894f1(0x402)]('cancelSavePostBtn');_0x3d88d8[_0x3894f1(0x2b5)]='',_0x317afd[_0x3894f1(0x361)]['display']='flex',_0x317afd[_0x3894f1(0x16f)]['remove']('hidden'),_0x1fcd96[_0x3894f1(0x1e5)][_0x3894f1(0x482)]=_0x31c7b1,_0x1fcd96[_0x3894f1(0x1e5)][_0x3894f1(0x469)]=_0x2cd7d7,_0x1fcd96[_0x3894f1(0x47a)]=async()=>{const _0x50203b=_0x3894f1,_0x2b96e0=_0x3d88d8[_0x50203b(0x2b5)]['trim']();await addDoc(_0x44122d,{'postId':_0x31c7b1,'communityId':_0x2cd7d7,'note':_0x2b96e0||'','savedAt':new Date()}),_0x3b4381[_0x50203b(0x13b)]=_0x50203b(0x3e5),alert(_0x50203b(0x357)),closeModal(_0x50203b(0x41d));},_0x11a182['onclick']=()=>closeModal(_0x3894f1(0x41d));}else{if(confirm(_0x3894f1(0x1f2))){const _0x4d9a47=_0x17828f['docs'][0x0];await deleteDoc(doc(db,_0x3894f1(0x20b),_0xaa2082[_0x3894f1(0x3d8)],_0x3894f1(0x2f8),_0x4d9a47['id'])),_0x3b4381[_0x3894f1(0x13b)]=_0x3894f1(0x481),alert(_0x3894f1(0x274));}}}function addPaginationControls(_0x5c6c05,_0x285c5b,_0x40825c){const _0x1287b8=_0xb3da24,_0x5827c5=Math[_0x1287b8(0x1e2)](_0x285c5b/PaginationState['POSTS_PER_PAGE']),_0x1e9035=document[_0x1287b8(0x1de)]('div');_0x1e9035[_0x1287b8(0x436)]='pagination';if(PaginationState[_0x1287b8(0x360)]>0x1){const _0xd895fb=document[_0x1287b8(0x1de)]('button');_0xd895fb['textContent']='<',_0xd895fb['addEventListener'](_0x1287b8(0x40e),async()=>{const _0x3dc521=_0x1287b8;PaginationState['currentPage']>0x1&&(_0x5c6c05['innerHTML']=_0x3dc521(0x45f),await loadPosts(_0x40825c,![],PaginationState['currentPage']-0x1));}),_0x1e9035[_0x1287b8(0x468)](_0xd895fb);}const _0x5d97d5=[0x1];if(_0x5827c5<=0x5){for(let _0x401053=0x2;_0x401053<=_0x5827c5;_0x401053++)_0x5d97d5['push'](_0x401053);}else{const _0x1e79ee=[PaginationState[_0x1287b8(0x360)]-0x1,PaginationState[_0x1287b8(0x360)],PaginationState['currentPage']+0x1][_0x1287b8(0x382)](_0x3fd9d1=>_0x3fd9d1>0x1&&_0x3fd9d1<_0x5827c5);_0x5d97d5[_0x1287b8(0x21a)](..._0x1e79ee);if(!_0x5d97d5[_0x1287b8(0x3d5)](_0x5827c5))_0x5d97d5[_0x1287b8(0x21a)](_0x5827c5);if(PaginationState[_0x1287b8(0x360)]>0x3&&!_0x5d97d5[_0x1287b8(0x3d5)](0x2))_0x5d97d5['push'](0x2);if(PaginationState[_0x1287b8(0x360)]<_0x5827c5-0x2&&!_0x5d97d5['includes'](_0x5827c5-0x1))_0x5d97d5[_0x1287b8(0x21a)](_0x5827c5-0x1);_0x5d97d5[_0x1287b8(0x1b3)]((_0x1c2da2,_0x464db0)=>_0x1c2da2-_0x464db0);}_0x5d97d5[_0x1287b8(0x1e6)]((_0x543a61,_0xf89311)=>{const _0x1ede8a=_0x1287b8;if(_0xf89311>0x0&&_0x543a61-_0x5d97d5[_0xf89311-0x1]>0x1){const _0x1b126a=document['createElement']('span');_0x1b126a['textContent']=_0x1ede8a(0x3bc),_0x1e9035[_0x1ede8a(0x468)](_0x1b126a);}const _0x4a4826=document[_0x1ede8a(0x1de)]('button');_0x4a4826['textContent']=_0x543a61,_0x4a4826[_0x1ede8a(0x436)]=_0x543a61===PaginationState[_0x1ede8a(0x360)]?_0x1ede8a(0x341):'',_0x543a61===PaginationState[_0x1ede8a(0x360)]?_0x4a4826[_0x1ede8a(0x254)]=!![]:_0x4a4826[_0x1ede8a(0x3ed)]('click',async()=>{const _0x3e2568=_0x1ede8a;_0x5c6c05['innerHTML']=_0x3e2568(0x45f),await loadPosts(_0x40825c,![],_0x543a61);}),_0x1e9035[_0x1ede8a(0x468)](_0x4a4826);});if(PaginationState[_0x1287b8(0x360)]<_0x5827c5){const _0x102ce2=document['createElement'](_0x1287b8(0x24b));_0x102ce2[_0x1287b8(0x2d3)]='>',_0x102ce2[_0x1287b8(0x3ed)](_0x1287b8(0x40e),async()=>{const _0x3725a9=_0x1287b8;PaginationState[_0x3725a9(0x360)]<_0x5827c5&&(_0x5c6c05['innerHTML']=_0x3725a9(0x45f),await loadPosts(_0x40825c,![],PaginationState['currentPage']+0x1));}),_0x1e9035[_0x1287b8(0x468)](_0x102ce2);}_0x5c6c05['appendChild'](_0x1e9035);}document[_0xb3da24(0x402)](_0xb3da24(0x15a))[_0xb3da24(0x3ed)](_0xb3da24(0x40e),async()=>{await loadPosts(communityId,!![]);});function _0x54fb(_0x534d8d,_0x4f2c0a){const _0x22c119=_0x22c1();return _0x54fb=function(_0x54fb1a,_0x201d39){_0x54fb1a=_0x54fb1a-0xf5;let _0x50a159=_0x22c119[_0x54fb1a];return _0x50a159;},_0x54fb(_0x534d8d,_0x4f2c0a);}let totalYourPosts=0x0;async function loadYourPosts(_0x2ce6a6){const _0x1f005c=_0xb3da24,_0x6660b1=document[_0x1f005c(0x402)](_0x1f005c(0x1c0));_0x6660b1[_0x1f005c(0x13b)]='';let _0x4eaab6=null,_0x4b512e=null,_0x53e0d6=new Set();async function _0xdcde71(_0x2b543b=![]){const _0x2b4c3b=_0x1f005c,_0x2de758=await getCommData(),_0x15bf0f=_0x2de758['admins']?.[_0x2b4c3b(0x3d5)](auth[_0x2b4c3b(0x46c)][_0x2b4c3b(0x3d8)])||_0x2de758[_0x2b4c3b(0x337)]===auth['currentUser'][_0x2b4c3b(0x3d8)];await fetchUserData(_0x2ce6a6);const _0x30e189=_0x2b543b?0x0:window[_0x2b4c3b(0x121)]||document[_0x2b4c3b(0x194)][_0x2b4c3b(0x2cd)];if(!totalYourPosts||_0x2b543b){const _0x1bee2d=query(collection(db,_0x2b4c3b(0x46e),communityId,'posts'),where(_0x2b4c3b(0x123),'==',_0x2ce6a6));totalYourPosts=(await getDocs(_0x1bee2d))[_0x2b4c3b(0x2ed)];}let _0x4f568d=query(collection(db,_0x2b4c3b(0x46e),communityId,_0x2b4c3b(0x408)),where(_0x2b4c3b(0x123),'==',_0x2ce6a6),orderBy(_0x2b4c3b(0x280),'desc'),limit(0x2));if(_0x4eaab6&&!_0x2b543b)_0x4f568d=query(_0x4f568d,startAfter(_0x4eaab6));else{if(_0x2b543b)_0x4b512e=null;}try{const _0x3d5412=await getDocs(_0x4f568d);if(_0x3d5412[_0x2b4c3b(0x42f)]&&_0x53e0d6[_0x2b4c3b(0x2ed)]===0x0){_0x6660b1[_0x2b4c3b(0x13b)]=_0x2b4c3b(0x324),await _0x19826e();if(!_0x2b543b)window[_0x2b4c3b(0x157)](0x0,_0x30e189);else document[_0x2b4c3b(0x402)](_0x2b4c3b(0x1d8))?.['scrollIntoView']({'behavior':_0x2b4c3b(0x3b8)});return;}if(!_0x4b512e)_0x4b512e=_0x3d5412[_0x2b4c3b(0x15f)][0x0];_0x4eaab6=_0x3d5412[_0x2b4c3b(0x15f)][_0x3d5412[_0x2b4c3b(0x15f)][_0x2b4c3b(0x1d5)]-0x1];_0x2b543b&&(_0x6660b1[_0x2b4c3b(0x13b)]='',_0x53e0d6['clear']());const _0xc1a812=_0x3d5412[_0x2b4c3b(0x15f)]['map'](_0x5b480a=>_0x5b480a['id']),_0x2f5b3f=await Promise[_0x2b4c3b(0x342)](_0xc1a812[_0x2b4c3b(0x2f7)](getPostReportStatus));for(let _0x2438ea=0x0;_0x2438ea<_0x3d5412[_0x2b4c3b(0x15f)][_0x2b4c3b(0x1d5)];_0x2438ea++){const _0x5b53b5=_0x3d5412[_0x2b4c3b(0x15f)][_0x2438ea],_0x4299a0=_0x2f5b3f[_0x2438ea];if(_0x53e0d6[_0x2b4c3b(0x296)](_0x5b53b5['id']))continue;_0x53e0d6[_0x2b4c3b(0x11c)](_0x5b53b5['id']);const _0x3ef982=_0x5b53b5[_0x2b4c3b(0x1e8)]();if(!_0x3ef982['userId']){console['error']('Post\x20'+_0x5b53b5['id']+_0x2b4c3b(0x250),_0x3ef982),_0x6660b1[_0x2b4c3b(0x13b)]+='<div\x20class=\x22post-error\x22>Error:\x20Post\x20'+_0x5b53b5['id']+_0x2b4c3b(0x2eb);continue;}const _0x22e645=userDataCache[_0x3ef982[_0x2b4c3b(0x123)]],_0x570755=_0x2de758['admins']?.[_0x2b4c3b(0x3d5)](_0x3ef982[_0x2b4c3b(0x123)])||_0x2de758[_0x2b4c3b(0x337)]===_0x3ef982['userId'],_0x267cf0=new Date(_0x3ef982[_0x2b4c3b(0x280)][_0x2b4c3b(0x2fc)]())['toLocaleString'](),_0x57cb43=_0x3ef982[_0x2b4c3b(0x39c)]||[],_0x29e5da=_0x57cb43[_0x2b4c3b(0x1d5)],_0x2dee84=document[_0x2b4c3b(0x1de)](_0x2b4c3b(0x3bf));_0x2dee84['className']='post',_0x2dee84['id']='post-'+_0x5b53b5['id'],_0x2dee84[_0x2b4c3b(0x13b)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x22e645[_0x2b4c3b(0x30b)]||_0x2b4c3b(0xfe))+_0x2b4c3b(0x3e4)+_0x3ef982[_0x2b4c3b(0x123)]+'\x22>'+_0x22e645[_0x2b4c3b(0x47d)]+_0x2b4c3b(0x2af)+_0x22e645[_0x2b4c3b(0x17a)]+'</span>\x20'+(_0x570755?_0x2b4c3b(0x47b):'')+'</h3>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<h3>'+_0x3ef982['title']+'</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-description\x22>'+_0x3ef982[_0x2b4c3b(0x1ce)]+_0x2b4c3b(0x19e)+_0x5b53b5['id']+_0x2b4c3b(0x439)+JSON[_0x2b4c3b(0x372)](_0x57cb43)+_0x2b4c3b(0x42a)+(_0x29e5da>0x1?_0x2b4c3b(0x3ce)+_0x5b53b5['id']+_0x2b4c3b(0x12d):'')+_0x2b4c3b(0x1b9)+(_0x57cb43[0x0]||_0x2b4c3b(0x184))+'\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x29e5da>0x1?_0x2b4c3b(0x2b7)+_0x5b53b5['id']+_0x2b4c3b(0x477):'')+_0x2b4c3b(0x1e4)+_0x3ef982[_0x2b4c3b(0x260)][_0x2b4c3b(0x47d)]+_0x2b4c3b(0x150)+(_0x3ef982['category']||_0x2b4c3b(0x285))+_0x2b4c3b(0x390)+(_0x3ef982[_0x2b4c3b(0x38c)]||_0x2b4c3b(0x285))+_0x2b4c3b(0x38d)+(_0x3ef982[_0x2b4c3b(0x181)]||_0x2b4c3b(0x285))+_0x2b4c3b(0x28f)+_0x267cf0+_0x2b4c3b(0x416)+_0x5b53b5['id']+_0x2b4c3b(0x463)+_0x5b53b5['id']+_0x2b4c3b(0x29c)+(_0x3ef982[_0x2b4c3b(0x123)]===auth['currentUser'][_0x2b4c3b(0x3d8)]||_0x15bf0f?_0x2b4c3b(0x276)+_0x5b53b5['id']+'\x22>Delete\x20Post</button>':'')+_0x2b4c3b(0x310)+(_0x4299a0[_0x2b4c3b(0x1fb)]&&_0x4299a0[_0x2b4c3b(0x202)]===0x1?_0x2b4c3b(0x147)+_0x5b53b5['id']+_0x2b4c3b(0x3f9):'')+_0x2b4c3b(0x310)+(_0x4299a0[_0x2b4c3b(0x1fb)]&&_0x4299a0['reportCount']>=0x2?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x5b53b5['id']+_0x2b4c3b(0x2c0)+_0x4299a0[_0x2b4c3b(0x202)]+_0x2b4c3b(0x27d):'')+_0x2b4c3b(0x211),_0x6660b1[_0x2b4c3b(0x468)](_0x2dee84),_0x2dee84[_0x2b4c3b(0x228)](_0x2b4c3b(0x23b)+_0x3ef982[_0x2b4c3b(0x123)]+'\x22]')[_0x2b4c3b(0x3ed)](_0x2b4c3b(0x40e),()=>viewProfile(_0x3ef982['userId']));const _0x5a0ca2=_0x2dee84['querySelector']('#deletePost-'+_0x5b53b5['id']);if(_0x5a0ca2)_0x5a0ca2[_0x2b4c3b(0x3ed)](_0x2b4c3b(0x40e),()=>deletePost(_0x5b53b5['id']));_0x2dee84[_0x2b4c3b(0x228)](_0x2b4c3b(0x180)+_0x5b53b5['id']+'\x22]')[_0x2b4c3b(0x3ed)](_0x2b4c3b(0x40e),_0x18ee79=>{_0x18ee79['stopPropagation'](),copyPostId(_0x5b53b5['id']);});if(_0x29e5da>0x1)setupYourPostsCarousel(_0x5b53b5['id']);}await _0x19826e();if(!_0x2b543b)window['scrollTo'](0x0,_0x30e189);else document['getElementById']('scroll-to-ur-posts')?.[_0x2b4c3b(0x233)]({'behavior':_0x2b4c3b(0x3b8)});}catch(_0x25d6f1){console['error']('Failed\x20to\x20load\x20your\x20posts:',_0x25d6f1),_0x6660b1['innerHTML']=_0x2b4c3b(0x132);if(!_0x2b543b)window['scrollTo'](0x0,_0x30e189);else document[_0x2b4c3b(0x402)](_0x2b4c3b(0x1d8))?.[_0x2b4c3b(0x233)]({'behavior':'smooth'});}}async function _0x19826e(){const _0x383aa6=_0x1f005c,_0x3e678c=_0x6660b1[_0x383aa6(0x228)](_0x383aa6(0x3c5)),_0x5ed41b=_0x6660b1[_0x383aa6(0x228)](_0x383aa6(0x297));if(_0x3e678c)_0x3e678c[_0x383aa6(0x251)]();if(_0x5ed41b)_0x5ed41b[_0x383aa6(0x251)]();const _0x47b81c=document[_0x383aa6(0x1de)]('div');_0x47b81c['id']=_0x383aa6(0x34f),_0x47b81c['style'][_0x383aa6(0x3d9)]=_0x383aa6(0x476);const _0x571f2b=document['createElement'](_0x383aa6(0x24b));_0x571f2b['id']=_0x383aa6(0x358),_0x571f2b[_0x383aa6(0x2d3)]=_0x383aa6(0x21f),_0x571f2b['className']=_0x383aa6(0x1c6),_0x571f2b[_0x383aa6(0x361)][_0x383aa6(0x3d9)]=_0x383aa6(0x25b),_0x571f2b[_0x383aa6(0x3ed)](_0x383aa6(0x40e),()=>_0xdcde71());const _0x11c1eb=document['createElement']('button');_0x11c1eb['id']=_0x383aa6(0x12b),_0x11c1eb[_0x383aa6(0x2d3)]=_0x383aa6(0x179),_0x11c1eb['className']=_0x383aa6(0x47f),_0x11c1eb[_0x383aa6(0x361)][_0x383aa6(0x3d9)]='display:\x20none\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20hidden\x20!important;\x20opacity:\x200\x20!important;',_0x11c1eb['addEventListener'](_0x383aa6(0x40e),async()=>{await _0xdcde71(!![]);}),_0x47b81c[_0x383aa6(0x468)](_0x571f2b),_0x47b81c['appendChild'](_0x11c1eb),_0x6660b1[_0x383aa6(0x468)](_0x47b81c),totalYourPosts>_0x53e0d6[_0x383aa6(0x2ed)]&&totalYourPosts>0x2&&(_0x571f2b['style'][_0x383aa6(0x3d9)]='display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;'),_0x53e0d6[_0x383aa6(0x2ed)]>0x2&&(_0x11c1eb[_0x383aa6(0x361)][_0x383aa6(0x3d9)]=_0x383aa6(0x392));}await _0xdcde71();}async function viewSavedPosts(_0x42d1ef){const _0x855acb=_0xb3da24,_0x59b094=document[_0x855acb(0x402)](_0x855acb(0x37e)),_0x4c1cbe=document['getElementById']('savedPostsList'),_0x2240d8=document['getElementById'](_0x855acb(0x227));if(typeof doc!==_0x855acb(0x18f)||!db){console[_0x855acb(0x292)](_0x855acb(0x165),doc,_0x855acb(0x2b1),db),_0x4c1cbe[_0x855acb(0x13b)]=_0x855acb(0x419),_0x59b094[_0x855acb(0x361)][_0x855acb(0x17e)]=_0x855acb(0x38a),_0x59b094[_0x855acb(0x16f)][_0x855acb(0x251)](_0x855acb(0x480)),_0x2240d8[_0x855acb(0x47a)]=()=>closeModal(_0x855acb(0x37e));return;}_0x4c1cbe[_0x855acb(0x13b)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',_0x59b094[_0x855acb(0x361)][_0x855acb(0x17e)]=_0x855acb(0x38a),_0x59b094[_0x855acb(0x16f)][_0x855acb(0x251)]('hidden');try{const _0x20ede3=doc(db,_0x855acb(0x20b),_0x42d1ef),_0x21bf4e=query(collection(_0x20ede3,_0x855acb(0x2f8)),orderBy('savedAt',_0x855acb(0x3b0))),_0x44f51=await getDocs(_0x21bf4e);_0x4c1cbe[_0x855acb(0x13b)]='',_0x4c1cbe[_0x855acb(0x16f)][_0x855acb(0x11c)](_0x855acb(0x48b));if(_0x44f51[_0x855acb(0x42f)])_0x4c1cbe[_0x855acb(0x13b)]=_0x855acb(0x377);else for(const _0x3e6bfe of _0x44f51['docs']){const _0x18d55e=_0x3e6bfe[_0x855acb(0x1e8)]();let _0x97b302=null,_0x2e8a54={'name':_0x855acb(0x3ca)},_0x2815e1=_0x855acb(0x17d);try{const _0x599985=doc(db,'communities',_0x18d55e[_0x855acb(0x469)],_0x855acb(0x408),_0x18d55e[_0x855acb(0x482)]),_0x4a6d80=await getDoc(_0x599985);_0x97b302=_0x4a6d80[_0x855acb(0x454)]()?_0x4a6d80[_0x855acb(0x1e8)]():null,_0x97b302&&(_0x2e8a54=await fetchUserData(_0x97b302[_0x855acb(0x123)]||'unknown'));}catch(_0x2564db){console[_0x855acb(0x1dd)](_0x855acb(0x13f)+_0x18d55e['postId']+':',_0x2564db);}try{const _0xe6e4e3=doc(db,'communities',_0x18d55e[_0x855acb(0x469)]),_0x12b203=await getDoc(_0xe6e4e3);_0x2815e1=_0x12b203[_0x855acb(0x454)]()?_0x12b203[_0x855acb(0x1e8)]()['name']||_0x855acb(0x430):_0x855acb(0x17d);}catch(_0x1a0e62){console[_0x855acb(0x1dd)](_0x855acb(0x322)+_0x18d55e[_0x855acb(0x469)]+':',_0x1a0e62);}const _0x2cb6e6=document['createElement'](_0x855acb(0x3bf));_0x2cb6e6[_0x855acb(0x436)]='saved-post-card',_0x2cb6e6[_0x855acb(0x1e5)][_0x855acb(0x3e8)]=_0x3e6bfe['id'],_0x2cb6e6[_0x855acb(0x13b)]=_0x855acb(0x1be)+(_0x97b302?_0x97b302['title']:_0x855acb(0x329))+_0x855acb(0x229)+_0x2e8a54['name']+_0x855acb(0x17b)+_0x18d55e[_0x855acb(0x482)]+'\x22>'+_0x18d55e[_0x855acb(0x482)]+_0x855acb(0x275)+_0x18d55e[_0x855acb(0x469)]+'\x22>'+_0x2815e1+_0x855acb(0x247)+_0x3e6bfe['id']+'\x22>'+(_0x18d55e[_0x855acb(0x328)]||_0x855acb(0x42e))+_0x855acb(0x3fc)+_0x3e6bfe['id']+_0x855acb(0x43a)+_0x3e6bfe['id']+_0x855acb(0x182),_0x4c1cbe[_0x855acb(0x468)](_0x2cb6e6),_0x2cb6e6[_0x855acb(0x361)][_0x855acb(0x3a3)]='0',setTimeout(()=>{const _0x9da3f9=_0x855acb;_0x2cb6e6[_0x9da3f9(0x361)][_0x9da3f9(0x3b1)]=_0x9da3f9(0x44c),_0x2cb6e6[_0x9da3f9(0x361)][_0x9da3f9(0x3a3)]='1';},0x32),_0x2cb6e6[_0x855acb(0x228)](_0x855acb(0x206)+_0x18d55e['postId']+'\x22]')[_0x855acb(0x3ed)]('click',()=>{const _0x31821e=_0x855acb;navigator[_0x31821e(0x287)]['writeText'](_0x18d55e[_0x31821e(0x482)])[_0x31821e(0x1a2)](()=>alert(_0x31821e(0x33b)))[_0x31821e(0x122)](_0x28d745=>console[_0x31821e(0x292)](_0x31821e(0x212),_0x28d745));}),_0x2cb6e6[_0x855acb(0x228)](_0x855acb(0x33c)+_0x3e6bfe['id']+'\x22]')[_0x855acb(0x3ed)]('click',()=>editSavedNote(_0x3e6bfe['id'],_0x18d55e['note'])),_0x2cb6e6[_0x855acb(0x228)](_0x855acb(0x32e)+_0x3e6bfe['id']+'\x22]')['addEventListener']('click',()=>deleteSavedPost(_0x3e6bfe['id'],_0x42d1ef));}}catch(_0x27e52b){console[_0x855acb(0x292)]('Error\x20loading\x20saved\x20posts:',_0x27e52b),_0x4c1cbe[_0x855acb(0x13b)]='<p\x20class=\x27error-message\x27>Oops,\x20something\x20went\x20wrong.\x20Try\x20again\x20later.</p>';}_0x2240d8[_0x855acb(0x47a)]=()=>closeModal(_0x855acb(0x37e));}async function editSavedNote(_0x3bf96a,_0x15e8a9){const _0x30b43f=_0xb3da24,_0x2c1dc1=document[_0x30b43f(0x402)](_0x30b43f(0x41d)),_0x1d7451=document['getElementById'](_0x30b43f(0x3d2)),_0xee8e79=document[_0x30b43f(0x402)]('confirmSavePostBtn'),_0x407acb=document[_0x30b43f(0x402)](_0x30b43f(0x47c));_0x2c1dc1['querySelector']('h2')['textContent']=_0x30b43f(0x330),_0x1d7451[_0x30b43f(0x2b5)]=_0x15e8a9,_0x2c1dc1[_0x30b43f(0x361)][_0x30b43f(0x17e)]='flex',_0x2c1dc1[_0x30b43f(0x16f)][_0x30b43f(0x251)](_0x30b43f(0x480)),_0xee8e79['onclick']=async()=>{const _0x527178=_0x30b43f,_0x2ab1b8=_0x1d7451[_0x527178(0x2b5)][_0x527178(0x434)](),_0x5979bf=auth['currentUser'],_0x1f9b1b=doc(db,_0x527178(0x20b),_0x5979bf[_0x527178(0x3d8)],_0x527178(0x2f8),_0x3bf96a);try{await updateDoc(_0x1f9b1b,{'note':_0x2ab1b8||''});const _0x27159f=document[_0x527178(0x228)](_0x527178(0x3c3)+_0x3bf96a+'\x22]');_0x27159f?_0x27159f[_0x527178(0x2d3)]=_0x2ab1b8||'No\x20note':(console['warn'](_0x527178(0x2c4)+_0x3bf96a+_0x527178(0x151)),await viewSavedPosts(auth['currentUser'][_0x527178(0x3d8)])),closeModal('savePostModal'),_0x2c1dc1[_0x527178(0x228)]('h2')[_0x527178(0x2d3)]=_0x527178(0x205);}catch(_0x40ed39){console[_0x527178(0x292)](_0x527178(0x300),_0x40ed39),alert(_0x527178(0x262));}},_0x407acb[_0x30b43f(0x47a)]=()=>{const _0x15fad7=_0x30b43f;closeModal(_0x15fad7(0x41d)),_0x2c1dc1[_0x15fad7(0x228)]('h2')['textContent']=_0x15fad7(0x205);};}async function deleteSavedPost(_0x43de31,_0x27225d){const _0x25a061=_0xb3da24;if(confirm(_0x25a061(0x1f2))){const _0xbf1f61=auth[_0x25a061(0x46c)],_0x530fa1=doc(db,_0x25a061(0x20b),_0xbf1f61['uid'],_0x25a061(0x2f8),_0x43de31),_0x1fe2fd=document[_0x25a061(0x402)](_0x25a061(0x3a1)),_0x3aadb7=_0x1fe2fd[_0x25a061(0x228)](_0x25a061(0x17c)+_0x43de31+'\x22]');try{const _0x1f756f=await getDoc(_0x530fa1),_0x2074e8=_0x1f756f['exists']()?_0x1f756f[_0x25a061(0x1e8)]()['communityId']:null;_0x3aadb7&&(_0x3aadb7['style'][_0x25a061(0x3b1)]=_0x25a061(0x44c),_0x3aadb7['style'][_0x25a061(0x3a3)]='0',await new Promise(_0x23f9b5=>setTimeout(_0x23f9b5,0x12c)));await deleteDoc(_0x530fa1);if(_0x3aadb7)_0x3aadb7[_0x25a061(0x251)]();!_0x1fe2fd['querySelector']('.saved-post-card')&&(_0x1fe2fd[_0x25a061(0x13b)]=_0x25a061(0x377));if(_0x2074e8)await loadPosts(_0x2074e8,!![]);alert(_0x25a061(0x274));}catch(_0x50eb87){console['error']('Error\x20deleting\x20saved\x20post:',_0x50eb87);if(_0x3aadb7)_0x3aadb7[_0x25a061(0x361)]['opacity']='1';alert(_0x25a061(0x3c7));}}}async function getTotalPosts(_0x139fc9){const _0x5e10a5=_0xb3da24,_0x35b996=doc(db,_0x5e10a5(0x46e),_0x139fc9),_0x48594a=await getDoc(_0x35b996),_0x2a27ab=_0x48594a[_0x5e10a5(0x1e8)]();return _0x2a27ab['postCount']||0x0;}async function searchPostsById(_0x46284f){const _0x1ff3f6=_0xb3da24,_0x30a229=document['getElementById'](_0x1ff3f6(0x3e2)),_0x52c473=document[_0x1ff3f6(0x402)](_0x1ff3f6(0x2c6));_0x30a229[_0x1ff3f6(0x13b)]=_0x1ff3f6(0x153),_0x52c473[_0x1ff3f6(0x361)][_0x1ff3f6(0x17e)]=_0x1ff3f6(0x2c1);if(!_0x46284f||_0x46284f[_0x1ff3f6(0x434)]()===''){isSearching=![],_0x30a229['innerHTML']='',await loadPosts(communityId,!![]);return;}isSearching=!![];try{const _0x34581d=getCachedPosts(),_0x42eb32=_0x34581d['get'](_0x46284f['trim']());let _0x385e1b,_0x446b23,_0x24d5c3,_0x523813,_0x413788;if(_0x42eb32){console['log'](_0x1ff3f6(0x3b9)+_0x46284f+_0x1ff3f6(0x2e2)),_0x385e1b=_0x42eb32[_0x1ff3f6(0x1e8)],_0x446b23=_0x46284f[_0x1ff3f6(0x434)](),_0x24d5c3=await fetchUserData(_0x385e1b[_0x1ff3f6(0x123)]||'unknown'),_0x523813=await getPostReportStatus(_0x446b23);const _0x2a0c99=query(collection(db,_0x1ff3f6(0x46e),communityId,_0x1ff3f6(0x408),_0x446b23,_0x1ff3f6(0x11d))),_0x178cd3=await getDocs(_0x2a0c99);_0x413788=_0x178cd3[_0x1ff3f6(0x2ed)];}else{console['log'](_0x1ff3f6(0x3b9)+_0x46284f+_0x1ff3f6(0x403));const _0x4f891a=query(collection(db,_0x1ff3f6(0x46e),communityId,_0x1ff3f6(0x408)),where(_0x1ff3f6(0x278),'==',_0x46284f[_0x1ff3f6(0x434)]())),_0x17654a=await getDocs(_0x4f891a);_0x30a229[_0x1ff3f6(0x13b)]='';if(_0x17654a[_0x1ff3f6(0x42f)]){_0x30a229[_0x1ff3f6(0x13b)]='<p>No\x20post\x20found\x20with\x20ID:\x20'+_0x46284f+_0x1ff3f6(0x13e);return;}const _0x5269c2=_0x17654a['docs'][0x0];_0x385e1b=normalizePostData(_0x5269c2[_0x1ff3f6(0x1e8)]()),_0x446b23=_0x5269c2['id'],_0x24d5c3=await fetchUserData(_0x385e1b[_0x1ff3f6(0x123)]||_0x1ff3f6(0x127)),_0x34581d['set'](_0x446b23,{'id':_0x446b23,'data':_0x385e1b,'score':getPostScore(_0x385e1b,getLikedPrefs())}),setCachedPosts(_0x34581d),_0x523813=await getPostReportStatus(_0x446b23);const _0x3894d1=query(collection(db,'communities',communityId,_0x1ff3f6(0x408),_0x446b23,_0x1ff3f6(0x11d))),_0x3ec866=await getDocs(_0x3894d1);_0x413788=_0x3ec866[_0x1ff3f6(0x2ed)];}const _0x245d62=auth[_0x1ff3f6(0x46c)],_0x551164=await getCommData(),_0x4cb478=_0x551164?.[_0x1ff3f6(0x2e0)]?.[_0x1ff3f6(0x3d5)](_0x245d62['uid'])||_0x551164?.[_0x1ff3f6(0x337)]===_0x245d62['uid'],_0x1f0814=_0x385e1b[_0x1ff3f6(0x123)]===_0x245d62[_0x1ff3f6(0x3d8)];if(_0x523813[_0x1ff3f6(0x219)]&&!_0x4cb478&&!_0x1f0814){_0x30a229[_0x1ff3f6(0x13b)]=_0x1ff3f6(0x349)+_0x46284f+'\x20is\x20hidden\x20due\x20to\x20reports\x20(visible\x20to\x20admins/owner\x20only).</p>';return;}const _0x38d279=_0x385e1b[_0x1ff3f6(0x280)]?new Date(_0x385e1b['createdAt'])['toLocaleString']():'N/A',_0x64413d=_0x385e1b[_0x1ff3f6(0x39c)]||[],_0x219bfe=_0x64413d[_0x1ff3f6(0x1d5)];_0x30a229['innerHTML']=_0x1ff3f6(0x40f)+_0x446b23+_0x1ff3f6(0x48e)+_0x446b23+'\x22>\x0a\x20\x20\x20\x20<h3>'+(_0x385e1b[_0x1ff3f6(0x467)]||'No\x20Title')+_0x1ff3f6(0x25f)+(_0x385e1b[_0x1ff3f6(0x1ce)]||_0x1ff3f6(0x256))+_0x1ff3f6(0x354)+_0x446b23+_0x1ff3f6(0x12e)+JSON['stringify'](_0x64413d)+_0x1ff3f6(0x1a1)+(_0x219bfe>0x1?_0x1ff3f6(0x3ce)+_0x446b23+_0x1ff3f6(0x33e):'')+_0x1ff3f6(0x1f7)+(_0x64413d[0x0]||_0x1ff3f6(0x184))+_0x1ff3f6(0x404)+(_0x219bfe>0x1?_0x1ff3f6(0x2b7)+_0x446b23+_0x1ff3f6(0x35c):'')+_0x1ff3f6(0x3a9)+(_0x385e1b[_0x1ff3f6(0x123)]||'unknown')+'\x22>'+(_0x24d5c3[_0x1ff3f6(0x47d)]||_0x1ff3f6(0x3ca))+'\x20('+(_0x24d5c3[_0x1ff3f6(0x17a)]||_0x1ff3f6(0x127))+_0x1ff3f6(0x1f9)+(_0x385e1b[_0x1ff3f6(0x260)]?.['name']||_0x1ff3f6(0x285))+_0x1ff3f6(0x483)+(_0x385e1b['category']||'N/A')+_0x1ff3f6(0x1bc)+(_0x385e1b[_0x1ff3f6(0x38c)]||_0x1ff3f6(0x285))+'\x20|\x20Offering:\x20'+(_0x385e1b[_0x1ff3f6(0x181)]||'N/A')+'</p>\x0a\x20\x20\x20\x20<p>Posted:\x20'+_0x38d279+_0x1ff3f6(0x394)+_0x446b23+_0x1ff3f6(0x463)+_0x446b23+_0x1ff3f6(0x224)+_0x446b23+'\x22>'+((_0x385e1b[_0x1ff3f6(0x37d)]||[])[_0x1ff3f6(0x3d5)](_0x245d62[_0x1ff3f6(0x3d8)])?'<i\x20class=\x22fas\x20fa-heart-broken\x22></i>\x20Unlike':'<i\x20class=\x22fas\x20fa-heart\x22></i>\x20Like')+'\x20('+(_0x385e1b['likes']||0x0)+_0x1ff3f6(0x2cf)+_0x446b23+_0x1ff3f6(0x432)+(_0x1f0814||_0x4cb478?_0x1ff3f6(0x276)+_0x446b23+_0x1ff3f6(0x32c):'')+_0x1ff3f6(0x211)+(_0x523813['isOwner']&&_0x523813[_0x1ff3f6(0x202)]===0x1?_0x1ff3f6(0x195)+_0x446b23+_0x1ff3f6(0x490):'')+_0x1ff3f6(0x211)+(_0x523813[_0x1ff3f6(0x1fb)]&&_0x523813[_0x1ff3f6(0x202)]>=0x2?_0x1ff3f6(0x195)+_0x446b23+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20'+_0x523813[_0x1ff3f6(0x202)]+_0x1ff3f6(0x14b):'')+_0x1ff3f6(0x211)+(_0x4cb478&&_0x523813['reportCount']>0x0?_0x1ff3f6(0x308)+_0x446b23+_0x1ff3f6(0x406)+_0x523813[_0x1ff3f6(0x202)]+'\x20report'+(_0x523813[_0x1ff3f6(0x202)]>0x1?'s':'')+_0x1ff3f6(0x3c8)+_0x446b23+_0x1ff3f6(0x18b)+_0x446b23+_0x1ff3f6(0x3c9):'')+_0x1ff3f6(0x450)+_0x446b23+'\x22>'+_0x413788+_0x1ff3f6(0x1d9)+_0x446b23+_0x1ff3f6(0x36a)+_0x446b23+'\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a';const _0x55c9df=_0x30a229[_0x1ff3f6(0x228)](_0x1ff3f6(0x1ee));_0x55c9df&&_0x55c9df[_0x1ff3f6(0x3ed)]('click',async()=>{const _0x14bd85=_0x1ff3f6,_0x2259bc=document[_0x14bd85(0x402)]('postSearch');if(_0x2259bc)_0x2259bc[_0x14bd85(0x2b5)]='';isSearching=![],_0x30a229['innerHTML']='',await loadPosts(communityId,!![]);});const _0x3b9588=_0x30a229[_0x1ff3f6(0x228)](_0x1ff3f6(0x25c)+_0x446b23);_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x23b)+(_0x385e1b[_0x1ff3f6(0x123)]||_0x1ff3f6(0x127))+'\x22]')[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),()=>viewProfile(_0x385e1b[_0x1ff3f6(0x123)]||_0x1ff3f6(0x127))),_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x180)+_0x446b23+'\x22]')[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),_0x44bc99=>{const _0x4d7f87=_0x1ff3f6;_0x44bc99[_0x4d7f87(0x26d)](),copyPostId(_0x446b23);}),_0x3b9588['querySelector'](_0x1ff3f6(0x2bb)+_0x446b23)[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),()=>reportPost(_0x446b23));const _0x525ba6=_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x290)+_0x446b23);if(_0x525ba6)_0x525ba6[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),()=>deletePost(_0x446b23));_0x4cb478&&(_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x22c)+_0x446b23+'\x22]')?.[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),()=>deletePost(_0x446b23)),_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x415)+_0x446b23+'\x22]')?.[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),()=>clearReports(_0x446b23)));_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x35d)+_0x446b23)[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x40e),_0x371ce2=>{const _0x20c9c0=_0x1ff3f6;_0x371ce2[_0x20c9c0(0x307)](),toggleComments(_0x446b23);}),_0x3b9588[_0x1ff3f6(0x228)](_0x1ff3f6(0x1fa)+_0x446b23)[_0x1ff3f6(0x3ed)](_0x1ff3f6(0x45c),_0x350301=>{const _0x20756e=_0x1ff3f6;_0x350301['preventDefault'](),addComment(_0x446b23,_0x385e1b[_0x20756e(0x123)]);});const _0x133cf3=_0x3b9588[_0x1ff3f6(0x228)]('.like-btn[data-post-id=\x22'+_0x446b23+'\x22]');_0x133cf3[_0x1ff3f6(0x3ed)]('click',async()=>{const _0x2313cc=_0x1ff3f6,_0x28fe50=doc(db,_0x2313cc(0x46e),communityId,_0x2313cc(0x408),_0x446b23),_0x5d84b6=await getDoc(_0x28fe50);if(!_0x5d84b6['exists']()){alert('Post\x20not\x20found—might’ve\x20been\x20deleted!');return;}const _0x233838=normalizePostData(_0x5d84b6[_0x2313cc(0x1e8)]()),_0x163e52=auth[_0x2313cc(0x46c)][_0x2313cc(0x3d8)],_0x4e9be4=_0x233838[_0x2313cc(0x37d)]||[];let _0x59ebe2=_0x233838[_0x2313cc(0x2a3)]||0x0,_0x104e66=[..._0x4e9be4];_0x4e9be4[_0x2313cc(0x3d5)](_0x163e52)?(_0x104e66=_0x104e66['filter'](_0x351ba3=>_0x351ba3!==_0x163e52),_0x59ebe2=Math[_0x2313cc(0x2dd)](0x0,_0x59ebe2-0x1),await updateDoc(_0x28fe50,{'likes':_0x59ebe2,'likedBy':_0x104e66}),_0x133cf3[_0x2313cc(0x2d3)]=_0x2313cc(0x26b)+_0x59ebe2+')'):(_0x104e66[_0x2313cc(0x21a)](_0x163e52),_0x59ebe2+=0x1,await updateDoc(_0x28fe50,{'likes':_0x59ebe2,'likedBy':_0x104e66}),_0x133cf3[_0x2313cc(0x2d3)]=_0x2313cc(0x164)+_0x59ebe2+')',addLikedPref(_0x233838[_0x2313cc(0x27a)],_0x233838['offering'])),_0x34581d[_0x2313cc(0x3f1)](_0x446b23,{'id':_0x446b23,'data':{..._0x233838,'likes':_0x59ebe2,'likedBy':_0x104e66},'score':getPostScore({..._0x233838,'likes':_0x59ebe2,'likedBy':_0x104e66},getLikedPrefs())}),setCachedPosts(_0x34581d);});if(_0x219bfe>0x1)setupSearchCarousel(_0x446b23);}catch(_0x52634c){console['error'](_0x1ff3f6(0x118),_0x52634c),_0x30a229[_0x1ff3f6(0x13b)]=_0x1ff3f6(0x27f);}finally{isSearching=![];}}function setupSearchCarousel(_0x2e371c){const _0x3540fe=_0xb3da24,_0x5a7a68=document['getElementById'](_0x3540fe(0x25e)+_0x2e371c+'-search'),_0x325034=_0x5a7a68['querySelector']('.carousel-prev[data-post-id=\x22'+_0x2e371c+_0x3540fe(0x245)),_0x534255=_0x5a7a68[_0x3540fe(0x228)](_0x3540fe(0x173)+_0x2e371c+_0x3540fe(0x245)),_0x1e2bf7=_0x5a7a68[_0x3540fe(0x228)](_0x3540fe(0x2d0));let _0x55ff06=JSON[_0x3540fe(0x33a)](_0x5a7a68['dataset'][_0x3540fe(0x1f1)]||'[]'),_0x36584b=0x0;if(!_0x325034||!_0x534255||!_0x1e2bf7)return;_0x55ff06[_0x3540fe(0x1d5)]===0x0&&(_0x55ff06=[_0x3540fe(0xfe)]),_0x1e2bf7[_0x3540fe(0x2b3)]=_0x55ff06[0x0],_0x325034['addEventListener'](_0x3540fe(0x40e),_0x1d404a=>{const _0xc3daed=_0x3540fe;_0x1d404a[_0xc3daed(0x307)](),_0x36584b=(_0x36584b-0x1+_0x55ff06[_0xc3daed(0x1d5)])%_0x55ff06['length'],_0x1e2bf7[_0xc3daed(0x2b3)]=_0x55ff06[_0x36584b];}),_0x534255[_0x3540fe(0x3ed)](_0x3540fe(0x40e),_0x40b1a0=>{const _0x296b19=_0x3540fe;_0x40b1a0[_0x296b19(0x307)](),_0x36584b=(_0x36584b+0x1)%_0x55ff06[_0x296b19(0x1d5)],_0x1e2bf7[_0x296b19(0x2b3)]=_0x55ff06[_0x36584b];});}async function acceptProfileRequest(_0x2f5ec1,_0x4db780){const _0x7df632=_0xb3da24,_0x53ef39=doc(db,'users',_0x4db780,'profileRequests',_0x2f5ec1),_0x2f70a5=await getDoc(_0x53ef39),_0x3dd4b7=_0x2f70a5[_0x7df632(0x1e8)]()[_0x7df632(0x223)],_0x5261de=await fetchCurrentUserData();await updateDoc(_0x53ef39,{'status':'accepted'}),await addDoc(collection(db,_0x7df632(0x20b),_0x3dd4b7,_0x7df632(0x486)),{'type':_0x7df632(0x401),'message':(_0x5261de[_0x7df632(0x47d)]||_0x7df632(0x19a))+'\x20accepted\x20your\x20profile\x20view\x20request!','requestId':_0x2f5ec1,'timestamp':new Date(),'seen':![]});const _0x27b89c=doc(db,_0x7df632(0x20b),_0x3dd4b7);await runTransaction(db,async _0x4285be=>{const _0x79c5dc=_0x7df632,_0x384f2a=await _0x4285be[_0x79c5dc(0x2fb)](_0x27b89c),_0x17429d=_0x384f2a['exists']()?_0x384f2a['data']()[_0x79c5dc(0x2f0)]||0x0:0x0;_0x4285be[_0x79c5dc(0x3f1)](_0x27b89c,{'unseenCount':_0x17429d+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x79c5dc(0x395)](_0x79c5dc(0x155)+_0x3dd4b7+'\x20to\x20'+(_0x17429d+0x1));}),alert(_0x7df632(0x16b)),closeModal(_0x7df632(0x10c)),await updateProfileRequestsUI(_0x4db780),viewProfileViewRequests(_0x4db780),setTimeout(()=>updateNotificationBadge(_0x3dd4b7,!![]),0x3e8);}async function declineProfileRequest(_0x5a558f,_0x31bc1f){const _0x1fb8f4=_0xb3da24,_0x5e00e7=doc(db,_0x1fb8f4(0x20b),_0x31bc1f,_0x1fb8f4(0x289),_0x5a558f),_0x3bdcb6=await getDoc(_0x5e00e7),_0x203e71=_0x3bdcb6['data']()[_0x1fb8f4(0x223)],_0x5858ea=await fetchCurrentUserData();await deleteDoc(_0x5e00e7),await addDoc(collection(db,_0x1fb8f4(0x20b),_0x203e71,_0x1fb8f4(0x486)),{'type':_0x1fb8f4(0x318),'message':(_0x5858ea['name']||_0x1fb8f4(0x19a))+'\x20declined\x20your\x20profile\x20view\x20request.','requestId':_0x5a558f,'timestamp':new Date(),'seen':![]});const _0xfb3898=doc(db,_0x1fb8f4(0x20b),_0x203e71);await runTransaction(db,async _0x3b1b0f=>{const _0x20c32b=_0x1fb8f4,_0x1485a6=await _0x3b1b0f[_0x20c32b(0x2fb)](_0xfb3898),_0x3ec8d6=_0x1485a6[_0x20c32b(0x454)]()?_0x1485a6['data']()[_0x20c32b(0x2f0)]||0x0:0x0;_0x3b1b0f[_0x20c32b(0x3f1)](_0xfb3898,{'unseenCount':_0x3ec8d6+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x20c32b(0x395)]('Client:\x20Incremented\x20unseenCount\x20for\x20'+_0x203e71+_0x20c32b(0x1e7)+(_0x3ec8d6+0x1));}),alert('Profile\x20view\x20request\x20declined!'),closeModal(_0x1fb8f4(0x10c)),await updateProfileRequestsUI(_0x31bc1f),viewProfileViewRequests(_0x31bc1f),setTimeout(()=>updateNotificationBadge(_0x203e71,!![]),0x3e8);}async function revokeProfileAccess(_0x1cf4ca,_0x3447aa){const _0x14401d=_0xb3da24,_0x1d5c27=doc(db,'users',_0x1cf4ca,'profileRequests',_0x3447aa);await deleteDoc(_0x1d5c27),alert('Profile\x20access\x20revoked!'),closeModal(_0x14401d(0x414)),await viewProfile(_0x1cf4ca);}async function revokeProfileAccessFromModal(_0x572ace,_0x48a92b){const _0x1aa476=_0xb3da24,_0x5f6e56=doc(db,'users',_0x48a92b,_0x1aa476(0x289),_0x572ace);await deleteDoc(_0x5f6e56),alert(_0x1aa476(0xf5)),closeModal(_0x1aa476(0x10c)),await updateProfileRequestsUI(_0x48a92b),viewProfileViewRequests(_0x48a92b);}async function viewProfileViewRequests(_0x317198){const _0x1cc701=_0xb3da24,_0x5591d4=document['getElementById'](_0x1cc701(0x10c)),_0x5a3754=document['getElementById']('profileViewRequestsList'),_0x1bcb9f=document[_0x1cc701(0x402)](_0x1cc701(0x34e)),_0x556c3d=collection(db,'users',_0x317198,_0x1cc701(0x289)),_0x22cf43=query(_0x556c3d,where('status','==',_0x1cc701(0x418))),_0x3dc10e=await getDocs(_0x22cf43);_0x5a3754['innerHTML']=_0x3dc10e[_0x1cc701(0x42f)]?_0x1cc701(0x105):'';for(const _0x3560cb of _0x3dc10e[_0x1cc701(0x15f)]){const _0xa8c571=_0x3560cb[_0x1cc701(0x1e8)](),_0xe11102=await fetchUserData(_0xa8c571[_0x1cc701(0x223)]);_0x5a3754[_0x1cc701(0x13b)]+=_0x1cc701(0x270)+_0x3560cb['id']+_0x1cc701(0x26a)+_0xe11102[_0x1cc701(0x47d)]+'\x20('+_0xe11102['username']+_0x1cc701(0x1cb)+_0x3560cb['id']+_0x1cc701(0x1a0)+_0x3560cb['id']+_0x1cc701(0x2bf);}const _0x15ac0f=query(_0x556c3d,where('status','==',_0x1cc701(0x21c))),_0x432a47=await getDocs(_0x15ac0f);_0x1bcb9f['innerHTML']=_0x432a47[_0x1cc701(0x42f)]?'<p>No\x20granted\x20profile\x20access.</p>':'';for(const _0x5b79b9 of _0x432a47[_0x1cc701(0x15f)]){const _0x1c86d8=_0x5b79b9[_0x1cc701(0x1e8)](),_0x3b7dd1=await fetchUserData(_0x1c86d8['requesterId']);_0x1bcb9f['innerHTML']+=_0x1cc701(0x1e1)+_0x5b79b9['id']+_0x1cc701(0x26a)+_0x3b7dd1[_0x1cc701(0x47d)]+'\x20('+_0x3b7dd1[_0x1cc701(0x17a)]+')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22revoke-btn\x22\x20data-request-id=\x22'+_0x5b79b9['id']+'\x22>Revoke</button>\x0a\x20\x20</div>\x0a';}document[_0x1cc701(0x2a1)](_0x1cc701(0x23a))['forEach'](_0xb8afb2=>_0xb8afb2['style'][_0x1cc701(0x17e)]=_0x1cc701(0x2c1)),_0x5591d4[_0x1cc701(0x361)][_0x1cc701(0x17e)]=_0x1cc701(0x38a),_0x5591d4[_0x1cc701(0x16f)]['remove']('hidden'),_0x5a3754[_0x1cc701(0x2a1)](_0x1cc701(0x20e))[_0x1cc701(0x1e6)](_0x2b8efd=>{const _0x1c1398=_0x1cc701;_0x2b8efd[_0x1c1398(0x3ed)](_0x1c1398(0x40e),()=>acceptProfileRequest(_0x2b8efd[_0x1c1398(0x1e5)][_0x1c1398(0x2fd)],_0x317198));}),_0x5a3754[_0x1cc701(0x2a1)](_0x1cc701(0x279))[_0x1cc701(0x1e6)](_0x5616bd=>{const _0x447276=_0x1cc701;_0x5616bd['addEventListener'](_0x447276(0x40e),()=>declineProfileRequest(_0x5616bd[_0x447276(0x1e5)][_0x447276(0x2fd)],_0x317198));}),_0x1bcb9f[_0x1cc701(0x2a1)](_0x1cc701(0x178))['forEach'](_0x7fbbb8=>{const _0x4c7023=_0x1cc701;_0x7fbbb8['addEventListener']('click',()=>revokeProfileAccessFromModal(_0x7fbbb8[_0x4c7023(0x1e5)][_0x4c7023(0x2fd)],_0x317198));});}let currentMembers=[];async function viewMembers(_0x3f790f){const _0x57b5ec=_0xb3da24,_0x553516=document[_0x57b5ec(0x402)](_0x57b5ec(0x456)),_0xa81a8=document[_0x57b5ec(0x402)](_0x57b5ec(0x2e7)),_0x112253=document['getElementById']('memberSearch');if(!_0x553516||!_0xa81a8||!_0x112253){console[_0x57b5ec(0x292)]('Members\x20modal\x20elements\x20missing!');return;}lastMemberDoc=null,_0xa81a8[_0x57b5ec(0x13b)]=_0x57b5ec(0x45f),_0x553516[_0x57b5ec(0x361)][_0x57b5ec(0x17e)]=_0x57b5ec(0x38a),_0x553516[_0x57b5ec(0x16f)]['remove'](_0x57b5ec(0x480));const _0x51b281=await getCommData(),_0xf4fe80=_0x51b281[_0x57b5ec(0x12c)]||0x0;console[_0x57b5ec(0x395)](_0x57b5ec(0x442),_0xf4fe80);const _0x5e5247=_0x553516[_0x57b5ec(0x228)]('h2')||document['createElement']('h2');if(!_0x553516[_0x57b5ec(0x228)]('h2'))_0x553516['querySelector'](_0x57b5ec(0x167))[_0x57b5ec(0x193)](_0x5e5247);_0x5e5247[_0x57b5ec(0x2d3)]=_0x57b5ec(0x37b)+_0xf4fe80+')';const _0x4a4310=collection(db,'communities',_0x3f790f,_0x57b5ec(0x461)),_0x5b7a30=query(_0x4a4310,limit(ITEMS_PER_PAGE));let _0xc6e377;try{_0xc6e377=await getDocs(_0x5b7a30);}catch(_0x2f86bf){console[_0x57b5ec(0x292)](_0x57b5ec(0x333),_0x2f86bf),_0xa81a8['innerHTML']=_0x57b5ec(0x323);return;}currentMembers=_0xc6e377[_0x57b5ec(0x15f)][_0x57b5ec(0x2f7)](_0x45ee25=>_0x45ee25['id']),console['log'](_0x57b5ec(0x120),currentMembers['length']),await loadMembersBatch(_0xc6e377,!![],_0xf4fe80),_0x112253[_0x57b5ec(0x3a8)]=debounce(_0x5b1f71=>searchMembers(_0x3f790f,_0x5b1f71['target'][_0x57b5ec(0x2b5)]),0x12c);}async function loadMembersBatch(_0x54dc1e,_0x2e5b01=![],_0x1715a1){const _0x17f557=_0xb3da24,_0xa35613=document['getElementById'](_0x17f557(0x2e7));_0x2e5b01&&(_0xa35613[_0x17f557(0x13b)]='',lastMemberDoc=null);const _0x554328=lastMemberDoc?_0xa35613[_0x17f557(0x2a1)](_0x17f557(0x2a4))[_0x17f557(0x1d5)]:0x0;console[_0x17f557(0x395)](_0x17f557(0x18a),{'startIndex':_0x554328,'batchSize':_0x54dc1e['docs']['length']});if(_0x54dc1e[_0x17f557(0x42f)]&&_0x554328===0x0){_0xa35613['innerHTML']=_0x17f557(0x1fc),updateMembersButtons(_0x1715a1,0x0);return;}const _0x217b5a=_0x54dc1e['docs'][_0x17f557(0x2f7)](_0x14b57d=>_0x14b57d['id']);let _0x464ce5;try{const _0x1fa2d7=query(collection(db,_0x17f557(0x20b)),where(_0x17f557(0x278),'in',_0x217b5a));_0x464ce5=await getDocs(_0x1fa2d7);}catch(_0x526c3d){console['error'](_0x17f557(0x222),_0x526c3d),_0xa35613[_0x17f557(0x13b)]+='<p>Failed\x20to\x20load\x20some\x20member\x20data.</p>';return;}console['log'](_0x17f557(0x43d),_0x464ce5[_0x17f557(0x15f)][_0x17f557(0x1d5)]),_0x464ce5['docs'][_0x17f557(0x1e6)](_0x30a4f9=>{const _0x1e1480=_0x17f557,_0x587607=_0x30a4f9[_0x1e1480(0x1e8)](),_0x5cb416=_0x1e1480(0x12f)+_0x30a4f9['id'];if(!document[_0x1e1480(0x402)](_0x5cb416)){const _0x515101=document[_0x1e1480(0x1de)](_0x1e1480(0x3bf));_0x515101[_0x1e1480(0x436)]=_0x1e1480(0x365),_0x515101['id']=_0x5cb416,_0x515101['innerHTML']=_0x1e1480(0x3dc)+(_0x587607[_0x1e1480(0x30b)]||_0x1e1480(0xfe))+_0x1e1480(0x1c1)+_0x30a4f9['id']+'\x22>'+_0x587607[_0x1e1480(0x47d)]+'</span>\x0a\x20\x20',_0xa35613[_0x1e1480(0x468)](_0x515101),_0x515101[_0x1e1480(0x228)](_0x1e1480(0x23b)+_0x30a4f9['id']+'\x22]')['addEventListener'](_0x1e1480(0x40e),()=>viewProfile(_0x30a4f9['id']));}}),lastMemberDoc=_0x54dc1e['docs'][_0x17f557(0x1d5)]===ITEMS_PER_PAGE?_0x54dc1e[_0x17f557(0x15f)][_0x54dc1e[_0x17f557(0x15f)][_0x17f557(0x1d5)]-0x1]:null;const _0x59338e=_0xa35613['querySelectorAll'](_0x17f557(0x2a4))[_0x17f557(0x1d5)];console[_0x17f557(0x395)](_0x17f557(0x102),_0x59338e),updateMembersButtons(_0x1715a1,_0x59338e);}function updateMembersButtons(_0x356215,_0x208b16){const _0x3990d4=_0xb3da24,_0xbab66e=document['getElementById'](_0x3990d4(0x2e7)),_0x259ca8=_0xbab66e[_0x3990d4(0x228)](_0x3990d4(0x1ca)),_0x3e74eb=_0xbab66e[_0x3990d4(0x228)](_0x3990d4(0x332));if(_0x259ca8)_0x259ca8[_0x3990d4(0x251)]();if(_0x3e74eb)_0x3e74eb['remove']();console[_0x3990d4(0x395)](_0x3990d4(0x15e),{'totalMembers':_0x356215,'loadedCount':_0x208b16});if(_0x356215>0x0){const _0x1d74e1=document[_0x3990d4(0x1de)](_0x3990d4(0x24b));_0x1d74e1['id']='seeMoreMembersBtn',_0x1d74e1[_0x3990d4(0x2d3)]=_0x3990d4(0x21f),_0x1d74e1[_0x3990d4(0x436)]='see-more-btn',_0x1d74e1['style'][_0x3990d4(0x17e)]=_0x356215>_0x208b16?_0x3990d4(0x176):_0x3990d4(0x2c1),_0x1d74e1['onclick']=async()=>{const _0x9b6e5f=_0x3990d4,_0x5275d7=collection(db,'communities',communityId,_0x9b6e5f(0x461));try{const _0x5e4c2e=query(_0x5275d7,startAfter(lastMemberDoc),limit(ITEMS_PER_PAGE)),_0x540d03=await getDocs(_0x5e4c2e);currentMembers=currentMembers['concat'](_0x540d03[_0x9b6e5f(0x15f)][_0x9b6e5f(0x2f7)](_0x5cef60=>_0x5cef60['id'])),await loadMembersBatch(_0x540d03,![],_0x356215);}catch(_0x408be0){console[_0x9b6e5f(0x292)](_0x9b6e5f(0x1ab),_0x408be0),_0xbab66e['innerHTML']+=_0x9b6e5f(0x1b0);}};const _0x179b66=document[_0x3990d4(0x1de)]('button');_0x179b66['id']=_0x3990d4(0x12a),_0x179b66[_0x3990d4(0x2d3)]=_0x3990d4(0x179),_0x179b66[_0x3990d4(0x436)]=_0x3990d4(0x47f),_0x179b66[_0x3990d4(0x361)][_0x3990d4(0x17e)]=_0x208b16>ITEMS_PER_PAGE?_0x3990d4(0x176):_0x3990d4(0x2c1),_0x179b66['onclick']=()=>loadMembersBatch([],!![],_0x356215),_0xbab66e[_0x3990d4(0x468)](_0x1d74e1),_0xbab66e[_0x3990d4(0x468)](_0x179b66),console[_0x3990d4(0x395)](_0x3990d4(0x29f),_0x1d74e1[_0x3990d4(0x361)][_0x3990d4(0x17e)]);}}async function searchMembers(_0x72b331,_0x3eaec3){const _0x1ba4b5=_0xb3da24,_0x3ca6b8=document['getElementById'](_0x1ba4b5(0x2e7));let _0x1d4f7e=0x0;_0x3ca6b8[_0x1ba4b5(0x13b)]=_0x1ba4b5(0x153);if(!_0x3eaec3)return lastMemberDoc=null,viewMembers(_0x72b331);const _0x4cbf34=collection(db,_0x1ba4b5(0x46e),_0x72b331,_0x1ba4b5(0x461));let _0xf8bc8b;try{_0xf8bc8b=await getDocs(_0x4cbf34);}catch(_0x291e1d){console['error'](_0x1ba4b5(0x263),_0x291e1d),_0x3ca6b8[_0x1ba4b5(0x13b)]=_0x1ba4b5(0x313);return;}const _0x29b3dd=_0xf8bc8b['docs']['map'](_0x402436=>_0x402436['id']),_0x23bb4a=[];for(const _0x4eb773 of _0x29b3dd){const _0x322ec2=userDataCache[_0x4eb773]||await fetchUserData(_0x4eb773);_0x322ec2&&(_0x322ec2['name'][_0x1ba4b5(0x3ea)]()[_0x1ba4b5(0x3d5)](_0x3eaec3[_0x1ba4b5(0x3ea)]())||_0x322ec2[_0x1ba4b5(0x17a)][_0x1ba4b5(0x3ea)]()[_0x1ba4b5(0x3d5)](_0x3eaec3[_0x1ba4b5(0x3ea)]()))&&_0x23bb4a[_0x1ba4b5(0x21a)](_0x4eb773);}console[_0x1ba4b5(0x395)]('Search\x20filtered\x20members:\x20'+_0x23bb4a[_0x1ba4b5(0x1d5)]+_0x1ba4b5(0x1b6)+_0x3eaec3+'\x22');async function _0x543a40(_0x41371a=![]){const _0x15c028=_0x1ba4b5;_0x41371a&&(_0x1d4f7e=0x0,_0x3ca6b8[_0x15c028(0x13b)]='');const _0x780847=_0x23bb4a[_0x15c028(0x3d7)](_0x1d4f7e,_0x1d4f7e+ITEMS_PER_PAGE);console['log'](_0x15c028(0x36d)+_0x1d4f7e+_0x15c028(0x24a)+_0x780847['length']);if(_0x780847[_0x15c028(0x1d5)]===0x0){_0x1d4f7e===0x0&&(_0x3ca6b8[_0x15c028(0x13b)]='<p>No\x20matching\x20members\x20found.</p>');_0x457c42(_0x23bb4a['length'],_0x1d4f7e);return;}let _0xc311f1;try{const _0x231c93=query(collection(db,'users'),where(_0x15c028(0x278),'in',_0x780847));_0xc311f1=await getDocs(_0x231c93);}catch(_0x2a9ef1){console[_0x15c028(0x292)](_0x15c028(0x11f),_0x2a9ef1),_0x3ca6b8[_0x15c028(0x13b)]+=_0x15c028(0x40a);return;}if(_0x1d4f7e===0x0)_0x3ca6b8[_0x15c028(0x13b)]='';_0xc311f1[_0x15c028(0x15f)][_0x15c028(0x1e6)](_0x2be137=>{const _0x57a59d=_0x15c028,_0x17e5f6=_0x2be137[_0x57a59d(0x1e8)](),_0x41f522=_0x57a59d(0x12f)+_0x2be137['id'];if(!document[_0x57a59d(0x402)](_0x41f522)){const _0x57edea=document['createElement'](_0x57a59d(0x3bf));_0x57edea[_0x57a59d(0x436)]='user-item',_0x57edea['id']=_0x41f522,_0x57edea[_0x57a59d(0x13b)]=_0x57a59d(0x1f7)+(_0x17e5f6[_0x57a59d(0x30b)]||_0x57a59d(0xfe))+_0x57a59d(0x45b)+_0x2be137['id']+'\x22>'+_0x17e5f6['name']+_0x57a59d(0x189),_0x3ca6b8['appendChild'](_0x57edea),_0x57edea[_0x57a59d(0x228)](_0x57a59d(0x23b)+_0x2be137['id']+'\x22]')[_0x57a59d(0x3ed)]('click',()=>viewProfile(_0x2be137['id']));}});const _0x2d2a35=_0x3ca6b8[_0x15c028(0x2a1)](_0x15c028(0x2a4))[_0x15c028(0x1d5)];_0x457c42(_0x23bb4a[_0x15c028(0x1d5)],_0x2d2a35);}function _0x457c42(_0x2159cf,_0x10b577){const _0x1d4ac2=_0x1ba4b5,_0x26ca2e=_0x3ca6b8[_0x1d4ac2(0x228)](_0x1d4ac2(0x2d5)),_0x5c0b86=_0x3ca6b8['querySelector'](_0x1d4ac2(0x44f));if(_0x26ca2e)_0x26ca2e[_0x1d4ac2(0x251)]();if(_0x5c0b86)_0x5c0b86[_0x1d4ac2(0x251)]();console[_0x1d4ac2(0x395)](_0x1d4ac2(0x3ff)+_0x2159cf+_0x1d4ac2(0x1fe)+_0x10b577);if(_0x2159cf>0x0){const _0x1ac9b6=document[_0x1d4ac2(0x1de)]('button');_0x1ac9b6['id']='seeMoreSearchMembersBtn',_0x1ac9b6[_0x1d4ac2(0x2d3)]='See\x20More',_0x1ac9b6[_0x1d4ac2(0x436)]=_0x1d4ac2(0x1c6),_0x1ac9b6[_0x1d4ac2(0x361)][_0x1d4ac2(0x17e)]=_0x2159cf>_0x10b577?_0x1d4ac2(0x176):_0x1d4ac2(0x2c1),_0x1ac9b6[_0x1d4ac2(0x47a)]=()=>{_0x1d4f7e+=ITEMS_PER_PAGE,_0x543a40();};const _0x40cd60=document[_0x1d4ac2(0x1de)](_0x1d4ac2(0x24b));_0x40cd60['id']=_0x1d4ac2(0x136),_0x40cd60['textContent']=_0x1d4ac2(0x179),_0x40cd60[_0x1d4ac2(0x436)]='see-less-btn',_0x40cd60[_0x1d4ac2(0x361)]['display']=_0x10b577>ITEMS_PER_PAGE?_0x1d4ac2(0x176):_0x1d4ac2(0x2c1),_0x40cd60['onclick']=()=>_0x543a40(!![]),_0x3ca6b8[_0x1d4ac2(0x468)](_0x1ac9b6),_0x3ca6b8[_0x1d4ac2(0x468)](_0x40cd60);}}await _0x543a40(!![]);}async function viewCommunities(_0x2d67a0){const _0x435038=_0xb3da24,_0x4f3ee1=document[_0x435038(0x402)](_0x435038(0x28e)),_0x31b517=document[_0x435038(0x402)]('communitiesList'),_0x1b5e15=document[_0x435038(0x402)](_0x435038(0x391));_0x31b517[_0x435038(0x13b)]=_0x435038(0x45f),_0x4f3ee1[_0x435038(0x361)][_0x435038(0x17e)]='flex',_0x4f3ee1['classList']['remove'](_0x435038(0x480));const _0x516478=doc(db,_0x435038(0x20b),_0x2d67a0),_0x501756=await getDoc(_0x516478),_0x37cc41=_0x501756[_0x435038(0x1e8)]()['communityIds']||[];if(_0x37cc41[_0x435038(0x1d5)]===0x0)_0x31b517[_0x435038(0x13b)]=_0x435038(0x48f);else{_0x31b517['innerHTML']='';const _0x251736=_0x37cc41[_0x435038(0x2f7)](_0xa35fa3=>getDoc(doc(db,_0x435038(0x46e),_0xa35fa3))),_0x4070cb=await Promise['all'](_0x251736);_0x4070cb[_0x435038(0x1e6)](_0x539fa2=>{const _0x4ee4e4=_0x435038;if(_0x539fa2[_0x4ee4e4(0x454)]()){const _0x552fb2=_0x539fa2[_0x4ee4e4(0x1e8)](),_0x48f85b=(_0x552fb2[_0x4ee4e4(0x3f3)]||[])[_0x4ee4e4(0x3d5)](_0x2d67a0);if(!_0x48f85b){const _0x4b1a1e=document[_0x4ee4e4(0x1de)](_0x4ee4e4(0x3bf));_0x4b1a1e[_0x4ee4e4(0x436)]=_0x4ee4e4(0x368),_0x4b1a1e[_0x4ee4e4(0x13b)]=_0x4ee4e4(0x387)+_0x539fa2['id']+'\x22>'+(_0x552fb2['name']||'Unnamed')+_0x4ee4e4(0x31f),_0x31b517[_0x4ee4e4(0x468)](_0x4b1a1e);}}}),!_0x31b517[_0x435038(0x1cc)]['length']&&(_0x31b517[_0x435038(0x13b)]=_0x435038(0xfa));}_0x1b5e15['onclick']=()=>{const _0x31b00e=_0x435038;_0x4f3ee1[_0x31b00e(0x361)][_0x31b00e(0x17e)]=_0x31b00e(0x2c1),_0x4f3ee1[_0x31b00e(0x16f)][_0x31b00e(0x11c)](_0x31b00e(0x480));};}async function getUnseenNotificationCount(_0xbf717d,_0x3c98b6=![]){const _0xe06ac8=_0xb3da24,_0x1bff01=Date[_0xe06ac8(0x347)](),_0x353866=_0xe06ac8(0x23d)+_0xbf717d,_0x366973=0x3c*0x3c*0x3e8,_0x4777fc=JSON['parse'](localStorage[_0xe06ac8(0x240)](_0x353866))||{'count':0x0,'timestamp':0x0};if(!_0x3c98b6&&_0x4777fc[_0xe06ac8(0x1dc)]&&_0x1bff01-_0x4777fc['timestamp']<_0x366973)return console[_0xe06ac8(0x395)](_0xe06ac8(0x1c7)+_0x4777fc[_0xe06ac8(0x3cb)]+'\x20(age:\x20'+Math['round']((_0x1bff01-_0x4777fc[_0xe06ac8(0x1dc)])/0x3e8)+'s)'),_0x4777fc[_0xe06ac8(0x3cb)];console[_0xe06ac8(0x395)](_0xe06ac8(0x46d));const _0x42a7c6=doc(db,_0xe06ac8(0x20b),_0xbf717d);try{const _0x4e0315=await getDoc(_0x42a7c6);if(!_0x4e0315[_0xe06ac8(0x454)]())throw new Error(_0xe06ac8(0x20d));const _0x3ff855=_0x4e0315[_0xe06ac8(0x1e8)]()[_0xe06ac8(0x2f0)]||0x0;return localStorage[_0xe06ac8(0x31a)](_0x353866,JSON[_0xe06ac8(0x372)]({'count':_0x3ff855,'timestamp':_0x1bff01})),console[_0xe06ac8(0x395)]('Fetched\x20unseen\x20count:\x20'+_0x3ff855),_0x3ff855;}catch(_0x26cdcd){return console[_0xe06ac8(0x292)](_0xe06ac8(0x1da),_0x26cdcd),_0x4777fc[_0xe06ac8(0x3cb)];}}window[_0xb3da24(0x1b5)]=updateNotificationBadge;async function updateNotificationBadge(_0x5e143b,_0x582a8b=!![]){const _0x1ab1a4=_0xb3da24,_0x461eca=await getUnseenNotificationCount(_0x5e143b,_0x582a8b),_0x4e200e=document['getElementById'](_0x1ab1a4(0x139));return _0x4e200e&&(_0x4e200e[_0x1ab1a4(0x2d3)]=_0x461eca>0x0?'('+_0x461eca+')':'',_0x4e200e[_0x1ab1a4(0x361)][_0x1ab1a4(0x17e)]=_0x461eca>0x0?_0x1ab1a4(0x1ef):_0x1ab1a4(0x2c1),console[_0x1ab1a4(0x395)](_0x1ab1a4(0x232)+_0x461eca)),_0x461eca;}document[_0xb3da24(0x3ed)]('DOMContentLoaded',async()=>{const _0x20a80a=_0xb3da24,_0x24662a=auth[_0x20a80a(0x46c)];_0x24662a&&await updateNotificationBadge(_0x24662a[_0x20a80a(0x3d8)],!![]);});async function openNotificationsModal(_0x13951b){const _0x51e45c=_0xb3da24,_0x5d79a5=document['getElementById'](_0x51e45c(0x399)),_0x1932d5=document['getElementById'](_0x51e45c(0x455)),_0x1fbaf0=document[_0x51e45c(0x402)](_0x51e45c(0x44e)),_0x2c4168=document[_0x51e45c(0x402)]('communityFilter');if(!_0x5d79a5||!_0x1932d5||!_0x1fbaf0||!_0x2c4168){console[_0x51e45c(0x292)]('Notifications\x20modal\x20elements\x20missing\x20from\x20DOM!'),alert(_0x51e45c(0x3e7));return;}let _0x24013e=_0x5d79a5[_0x51e45c(0x228)](_0x51e45c(0x129));!_0x24013e&&(_0x24013e=document[_0x51e45c(0x1de)]('button'),_0x24013e['id']=_0x51e45c(0x373),_0x24013e[_0x51e45c(0x2d3)]=_0x51e45c(0x30e),_0x24013e[_0x51e45c(0x361)][_0x51e45c(0x183)]=_0x51e45c(0x45d),_0x5d79a5['querySelector']('.modal-content')[_0x51e45c(0x259)](_0x24013e,document[_0x51e45c(0x402)](_0x51e45c(0x40c))));_0x1932d5[_0x51e45c(0x13b)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',_0x5d79a5[_0x51e45c(0x361)][_0x51e45c(0x17e)]=_0x51e45c(0x38a),_0x5d79a5[_0x51e45c(0x16f)][_0x51e45c(0x251)](_0x51e45c(0x480));const _0x2df5a6=doc(db,_0x51e45c(0x20b),_0x13951b);let _0x40afbd=[];try{const _0x4a48e8=await getDoc(_0x2df5a6);if(!_0x4a48e8[_0x51e45c(0x454)]())throw new Error(_0x51e45c(0x20d));const _0xbfff40=_0x4a48e8[_0x51e45c(0x1e8)]()[_0x51e45c(0x2d2)]||[],_0x1208c1=await Promise['all'](_0xbfff40[_0x51e45c(0x2f7)](_0x10a783=>getDoc(doc(db,_0x51e45c(0x46e),_0x10a783))));_0x40afbd=_0x1208c1[_0x51e45c(0x382)](_0x4917b3=>_0x4917b3[_0x51e45c(0x454)]())[_0x51e45c(0x2f7)](_0x2c625d=>({'id':_0x2c625d['id'],'name':_0x2c625d['data']()[_0x51e45c(0x47d)]||_0x51e45c(0x430)}));}catch(_0x192077){console[_0x51e45c(0x292)]('Error\x20fetching\x20communities:',_0x192077),_0x1932d5['innerHTML']=_0x51e45c(0x405);return;}_0x2c4168['innerHTML']=_0x51e45c(0x31e),_0x40afbd['forEach'](_0x16b437=>{const _0x582ee5=_0x51e45c,_0x715e8=document[_0x582ee5(0x1de)]('option');_0x715e8[_0x582ee5(0x2b5)]=_0x16b437['id'],_0x715e8['textContent']=_0x16b437['name'],_0x2c4168[_0x582ee5(0x468)](_0x715e8);});const _0x13a673=0xa,_0x4cf153=await updateNotificationBadge(_0x13951b,![]);_0x1fbaf0[_0x51e45c(0x2d3)]=_0x4cf153;async function _0x21ffd5(){const _0x46fc74=_0x51e45c;console[_0x46fc74(0x395)](_0x46fc74(0x2f6),_0x13951b,'communityId:',communityId),await updateChatBadge(_0x13951b,!![]),await window[_0x46fc74(0x29a)](communityId),await updateChatBadge(_0x13951b);}async function _0x120b48(_0x19e268=![],_0x36821f=![]){const _0x4b4e94=_0x51e45c,_0x251d22=_0x2c4168[_0x4b4e94(0x2b5)];_0x19e268&&(lastDoc=null,displayedCount=0x0,allNotifications=[],_0x1932d5[_0x4b4e94(0x13b)]=_0x4b4e94(0x45f));let _0x297745=0x3;while(_0x297745>0x0){try{const _0xb62fd=collection(db,_0x4b4e94(0x20b),_0x13951b,_0x4b4e94(0x486));let _0x5f5bb6;_0x251d22===_0x4b4e94(0x342)?_0x5f5bb6=query(_0xb62fd,orderBy('timestamp',_0x4b4e94(0x3b0)),...lastDoc&&!_0x19e268?[startAfter(lastDoc)]:[],limit(_0x13a673)):_0x5f5bb6=query(_0xb62fd,where('communityId','==',_0x251d22),orderBy('timestamp',_0x4b4e94(0x3b0)),...lastDoc&&!_0x19e268?[startAfter(lastDoc)]:[],limit(_0x13a673));const _0x6e2000=await getDocs(_0x5f5bb6),_0x528192=_0x6e2000[_0x4b4e94(0x15f)][_0x4b4e94(0x2f7)](_0x1be9f2=>({'id':_0x1be9f2['id'],'data':_0x1be9f2[_0x4b4e94(0x1e8)]()}));_0x36821f?_0x528192[_0x4b4e94(0x1e6)](_0x2ea90c=>{const _0x436f8e=_0x4b4e94;!allNotifications[_0x436f8e(0x470)](_0x53e629=>_0x53e629['id']===_0x2ea90c['id'])&&allNotifications[_0x436f8e(0x134)](_0x2ea90c);}):(_0x528192[_0x4b4e94(0x1e6)](_0x1ade4a=>{const _0x39b2f3=_0x4b4e94;!allNotifications[_0x39b2f3(0x470)](_0x40169b=>_0x40169b['id']===_0x1ade4a['id'])&&allNotifications['push'](_0x1ade4a);}),lastDoc=_0x6e2000[_0x4b4e94(0x15f)]['length']===_0x13a673?_0x6e2000[_0x4b4e94(0x15f)][_0x6e2000['docs'][_0x4b4e94(0x1d5)]-0x1]:null);allNotifications['sort']((_0x1efab3,_0xe00ad4)=>_0xe00ad4[_0x4b4e94(0x1e8)][_0x4b4e94(0x1dc)][_0x4b4e94(0x2fc)]()-_0x1efab3[_0x4b4e94(0x1e8)][_0x4b4e94(0x1dc)][_0x4b4e94(0x2fc)]());if(allNotifications[_0x4b4e94(0x1d5)]===0x0)_0x1932d5[_0x4b4e94(0x13b)]=_0x4b4e94(0x370);else{const _0x4a49e6=_0x19e268?0x0:displayedCount,_0x528c5c=Math['min'](_0x4a49e6+_0x13a673,allNotifications[_0x4b4e94(0x1d5)]),_0x35e95b=allNotifications['slice'](0x0,_0x528c5c)['map'](_0x7db8a5=>_0x949db3({'id':_0x7db8a5['id'],'data':()=>_0x7db8a5[_0x4b4e94(0x1e8)]},_0x40afbd))['join']('');_0x1932d5[_0x4b4e94(0x13b)]=_0x35e95b,displayedCount=_0x528c5c;}const _0x2bd266=await getUnseenNotificationCount(_0x13951b,_0x36821f);_0x1fbaf0['textContent']=_0x2bd266,_0x3aa006(),_0x3e43b8();break;}catch(_0xbe033f){console['error']('Error\x20fetching\x20notifications:',_0xbe033f),_0x297745--;if(_0x297745===0x0){_0x1932d5[_0x4b4e94(0x13b)]=_0x4b4e94(0x3bb),_0x3aa006();break;}await new Promise(_0x2acbd2=>setTimeout(_0x2acbd2,0x3e8));}}}function _0x949db3(_0x293b3f,_0x2333ef){const _0x589ca9=_0x51e45c,_0x3fd944=_0x293b3f[_0x589ca9(0x1e8)](),_0xdab1f1=new Date(_0x3fd944[_0x589ca9(0x1dc)][_0x589ca9(0x2fc)]())[_0x589ca9(0x104)]();let _0x31214b=_0x3fd944['message']||_0x589ca9(0x1ad);if(_0x3fd944[_0x589ca9(0x469)]&&_0x3fd944[_0x589ca9(0x169)]!==_0x589ca9(0x1b7)){const _0x3f2502=_0x2333ef['find'](_0x4b6868=>_0x4b6868['id']===_0x3fd944[_0x589ca9(0x469)])?.[_0x589ca9(0x47d)]||_0x589ca9(0x17d);_0x31214b+='\x20('+_0x3f2502+')';}let _0x3459d3=_0x589ca9(0x352)+(_0x3fd944[_0x589ca9(0x3af)]?_0x589ca9(0x3af):'')+'\x22\x20data-id=\x22'+_0x293b3f['id']+_0x589ca9(0x3aa)+_0x3fd944[_0x589ca9(0x169)]+_0x589ca9(0x364);return _0x3fd944['type']===_0x589ca9(0x2a5)&&_0x3fd944['followerId']?_0x3459d3+=_0x589ca9(0x1ae)+_0x3fd944[_0x589ca9(0x1a8)]+'\x22>'+_0x31214b+'</span>\x0a':_0x3459d3+='<span>'+_0x31214b+'</span>',_0x3459d3+=_0x589ca9(0x31c)+_0xdab1f1+'</span>\x0a\x20\x20'+(_0x3fd944[_0x589ca9(0x482)]?_0x589ca9(0x453)+_0x3fd944[_0x589ca9(0x482)]+_0x589ca9(0x369):'')+_0x589ca9(0x1d4)+_0x293b3f['id']+'\x22\x20'+(_0x3fd944[_0x589ca9(0x3af)]?_0x589ca9(0x254):'')+'>'+(_0x3fd944[_0x589ca9(0x3af)]?_0x589ca9(0x425):_0x589ca9(0x3e9))+_0x589ca9(0x452),_0x3fd944[_0x589ca9(0x169)]===_0x589ca9(0x1b7)&&!_0x3fd944[_0x589ca9(0x3ef)]&&(_0x3459d3+=_0x589ca9(0x385)+_0x293b3f['id']+_0x589ca9(0x427)),_0x3459d3+='</div>',_0x3459d3;}function _0x3e43b8(){const _0x57aff2=_0x51e45c;_0x1932d5[_0x57aff2(0x2a1)](_0x57aff2(0x108))['forEach'](_0x430d66=>{const _0x5e0272=_0x57aff2;_0x430d66[_0x5e0272(0x3ed)]('click',_0xb716d4=>{const _0x4cb70f=_0x5e0272;_0xb716d4['stopPropagation'](),copyPostId(_0x430d66[_0x4cb70f(0x1e5)]['postId']);});}),_0x1932d5[_0x57aff2(0x2a1)](_0x57aff2(0x3d1))[_0x57aff2(0x1e6)](_0x4ef7bd=>{const _0x3c3eef=_0x57aff2;!_0x4ef7bd['disabled']&&_0x4ef7bd[_0x3c3eef(0x3ed)](_0x3c3eef(0x40e),_0x29e8f2=>{const _0x514f42=_0x3c3eef;_0x29e8f2[_0x514f42(0x26d)](),markNotificationSeen(_0x4ef7bd['dataset']['id']);});}),_0x1932d5[_0x57aff2(0x2a1)](_0x57aff2(0x177))[_0x57aff2(0x1e6)](_0x48ea21=>{const _0x22c8be=_0x57aff2;_0x48ea21[_0x22c8be(0x3ed)]('submit',async _0x3991b5=>{const _0x5114b3=_0x22c8be;_0x3991b5['preventDefault']();const _0x41791f=_0x48ea21[_0x5114b3(0x228)](_0x5114b3(0x20a))[_0x5114b3(0x2b5)][_0x5114b3(0x434)]();if(_0x41791f){const _0x455f60=_0x48ea21[_0x5114b3(0x1e5)]['id'],_0x56d020=allNotifications['find'](_0xc3b351=>_0xc3b351['id']===_0x455f60)[_0x5114b3(0x1e8)];try{const _0x5f5bc8=await getDoc(doc(db,_0x5114b3(0x20b),_0x13951b)),_0x18ea49=_0x5f5bc8['exists']()?_0x5f5bc8[_0x5114b3(0x1e8)]():{'username':_0x5114b3(0x34a)+_0x13951b[_0x5114b3(0x3d7)](0x0,0x8)};await addDoc(collection(db,_0x5114b3(0x46e),_0x56d020[_0x5114b3(0x469)],'banAppeals'),{'userId':_0x13951b,'username':_0x18ea49[_0x5114b3(0x17a)],'message':_0x41791f,'timestamp':new Date(),'notificationId':_0x455f60}),await updateDoc(doc(db,_0x5114b3(0x20b),_0x13951b,_0x5114b3(0x486),_0x455f60),{'appealSubmitted':!![]}),alert(_0x5114b3(0x200)),await _0x120b48(!![]);}catch(_0x167f2f){console[_0x5114b3(0x292)](_0x5114b3(0x25d),_0x167f2f),alert(_0x5114b3(0x243));}}});}),_0x1932d5['querySelectorAll']('.notification-item')[_0x57aff2(0x1e6)](_0x41f399=>{const _0x239f8e=_0x57aff2;_0x41f399[_0x239f8e(0x3ed)]('click',async _0x1df114=>{const _0x5dfa24=_0x239f8e;if(_0x1df114[_0x5dfa24(0x41c)][_0x5dfa24(0x348)]===_0x5dfa24(0x210)||_0x1df114['target'][_0x5dfa24(0x348)]===_0x5dfa24(0x1a4)||_0x1df114[_0x5dfa24(0x41c)][_0x5dfa24(0x2ff)](_0x5dfa24(0x3b3)))return;const _0x51daed=allNotifications[_0x5dfa24(0x19c)](_0x4d4ca0=>_0x4d4ca0['id']===_0x41f399[_0x5dfa24(0x1e5)]['id'])[_0x5dfa24(0x1e8)],_0x3f981b=_0x41f399[_0x5dfa24(0x1e5)][_0x5dfa24(0x169)];if(_0x3f981b===_0x5dfa24(0x2a5)&&_0x51daed[_0x5dfa24(0x1a8)])closeModal(_0x5dfa24(0x399)),await viewProfile(_0x51daed[_0x5dfa24(0x1a8)]);else{if(_0x3f981b===_0x5dfa24(0x230)||_0x3f981b===_0x5dfa24(0x401)||_0x3f981b===_0x5dfa24(0x318))closeModal(_0x5dfa24(0x399)),await viewProfileViewRequests(_0x13951b);else{if(_0x3f981b===_0x5dfa24(0x2d6)||_0x3f981b==='chat')console[_0x5dfa24(0x395)](_0x5dfa24(0x1cd)),closeModal('notificationsModal'),await _0x21ffd5();else{if(_0x51daed[_0x5dfa24(0x482)]&&_0x51daed[_0x5dfa24(0x469)]){if(_0x51daed[_0x5dfa24(0x469)]!==communityId)window[_0x5dfa24(0x260)][_0x5dfa24(0x126)]=_0x5dfa24(0x2b9)+_0x51daed[_0x5dfa24(0x469)]+_0x5dfa24(0x25c)+_0x51daed[_0x5dfa24(0x482)];else{closeModal(_0x5dfa24(0x399)),await searchPostsById(_0x51daed[_0x5dfa24(0x482)]);const _0x33c2e5=document['getElementById'](_0x5dfa24(0x3ac));_0x33c2e5?_0x33c2e5[_0x5dfa24(0x233)]({'behavior':'smooth'}):console[_0x5dfa24(0x1dd)](_0x5dfa24(0x130));}}}}}});}),_0x1932d5[_0x57aff2(0x2a1)]('.clickable-profile')[_0x57aff2(0x1e6)](_0x517d0f=>{const _0x2616b4=_0x57aff2;_0x517d0f[_0x2616b4(0x3ed)](_0x2616b4(0x40e),async _0x54af94=>{const _0x404a7b=_0x2616b4;_0x54af94[_0x404a7b(0x26d)]();const _0x59ba8f=_0x517d0f[_0x404a7b(0x1e5)][_0x404a7b(0x3d8)];closeModal(_0x404a7b(0x399)),await viewProfile(_0x59ba8f);});});}function _0x3aa006(){const _0x43ab4b=_0x51e45c;let _0x45fe4c=_0x1932d5[_0x43ab4b(0x228)](_0x43ab4b(0x338)),_0x57d536=_0x1932d5[_0x43ab4b(0x228)](_0x43ab4b(0x420));if(_0x45fe4c)_0x45fe4c['remove']();if(_0x57d536)_0x57d536[_0x43ab4b(0x251)]();const _0x1b7a5f=allNotifications[_0x43ab4b(0x1d5)],_0x3a4e2e=lastDoc&&displayedCount<_0x1b7a5f;_0x3a4e2e&&(_0x45fe4c=document['createElement'](_0x43ab4b(0x24b)),_0x45fe4c['id']=_0x43ab4b(0x295),_0x45fe4c[_0x43ab4b(0x2d3)]=_0x43ab4b(0x41b),_0x45fe4c['className']=_0x43ab4b(0x204),_0x45fe4c[_0x43ab4b(0x47a)]=()=>_0x120b48(![],![]),_0x1932d5[_0x43ab4b(0x468)](_0x45fe4c)),displayedCount>_0x13a673&&(_0x57d536=document[_0x43ab4b(0x1de)](_0x43ab4b(0x24b)),_0x57d536['id']=_0x43ab4b(0x320),_0x57d536[_0x43ab4b(0x2d3)]=_0x43ab4b(0x246),_0x57d536[_0x43ab4b(0x436)]=_0x43ab4b(0x1e9),_0x57d536['onclick']=()=>{const _0x487b11=_0x43ab4b;displayedCount=_0x13a673,_0x1932d5[_0x487b11(0x13b)]=allNotifications[_0x487b11(0x3d7)](0x0,_0x13a673)['map'](_0x13f4b5=>_0x949db3({'id':_0x13f4b5['id'],'data':()=>_0x13f4b5[_0x487b11(0x1e8)]},_0x40afbd))[_0x487b11(0x3f6)](''),_0x3aa006(),_0x3e43b8();},_0x1932d5[_0x43ab4b(0x468)](_0x57d536));}try{await _0x120b48(!![]);}catch(_0x1a3221){console['error'](_0x51e45c(0x16a),_0x1a3221),_0x1932d5['innerHTML']=_0x51e45c(0x2ef);}_0x24013e[_0x51e45c(0x47a)]=async()=>{const _0x2dfeca=_0x51e45c;_0x24013e[_0x2dfeca(0x254)]=!![],_0x24013e['textContent']=_0x2dfeca(0x34b);try{await _0x120b48(![],!![]),await updateNotificationBadge(_0x13951b,!![]);}catch(_0x3169d0){console[_0x2dfeca(0x292)](_0x2dfeca(0x457),_0x3169d0),_0x1932d5['innerHTML']=_0x2dfeca(0x159);}_0x24013e[_0x2dfeca(0x254)]=![],_0x24013e['textContent']=_0x2dfeca(0x30e);},_0x2c4168[_0x51e45c(0x43f)]=()=>_0x120b48(!![]);}async function markNotificationSeen(_0x125c38){const _0x2b69be=_0xb3da24,_0x3f4c9e=auth[_0x2b69be(0x46c)]?.['uid'];if(!_0x3f4c9e){console[_0x2b69be(0x292)]('No\x20authenticated\x20user\x20found.');return;}const _0x2de6c8=doc(db,'users',_0x3f4c9e,'notifications',_0x125c38),_0x41205f=doc(db,_0x2b69be(0x20b),_0x3f4c9e);try{const _0x46e184=await getDoc(_0x2de6c8);if(!_0x46e184[_0x2b69be(0x454)]()){console[_0x2b69be(0x1dd)]('Notification\x20'+_0x125c38+_0x2b69be(0x19f));return;}const _0x3ccf2b=_0x46e184[_0x2b69be(0x1e8)]();if(_0x3ccf2b[_0x2b69be(0x3af)]){console[_0x2b69be(0x395)](_0x2b69be(0x1c3)+_0x125c38+_0x2b69be(0x371));return;}await runTransaction(db,async _0x10c8f8=>{const _0x2ddbb3=_0x2b69be,_0x5118b9=await _0x10c8f8[_0x2ddbb3(0x2fb)](_0x41205f);if(!_0x5118b9[_0x2ddbb3(0x454)]())throw new Error('User\x20not\x20found');const _0x531f67=_0x5118b9[_0x2ddbb3(0x1e8)]()[_0x2ddbb3(0x2f0)]||0x0;_0x10c8f8[_0x2ddbb3(0x116)](_0x2de6c8,{'seen':!![]}),_0x531f67>0x0&&_0x10c8f8['update'](_0x41205f,{'unseenCount':_0x531f67-0x1,'lastUpdated':new Date()});}),console['log']('Marked\x20notification\x20'+_0x125c38+_0x2b69be(0x1ba));const _0x1a0943=document[_0x2b69be(0x228)]('.mark-seen-btn2[data-id=\x22'+_0x125c38+'\x22]');_0x1a0943&&(_0x1a0943[_0x2b69be(0x254)]=!![],_0x1a0943[_0x2b69be(0x2d3)]='Seen',_0x1a0943[_0x2b69be(0x16f)][_0x2b69be(0x11c)](_0x2b69be(0x254))),await updateNotificationBadge(_0x3f4c9e),!document[_0x2b69be(0x402)](_0x2b69be(0x399))[_0x2b69be(0x16f)][_0x2b69be(0x140)](_0x2b69be(0x480))&&await openNotificationsModal(_0x3f4c9e);}catch(_0x24c9cb){console['error'](_0x2b69be(0x141)+_0x125c38+'\x20as\x20seen:',_0x24c9cb);}}async function clearNotifications(){const _0x5123b6=_0xb3da24,_0x36bcab=auth[_0x5123b6(0x46c)]?.[_0x5123b6(0x3d8)];if(!_0x36bcab){console[_0x5123b6(0x292)]('No\x20authenticated\x20user\x20found.');return;}const _0x52cbd5=document[_0x5123b6(0x402)](_0x5123b6(0x145));if(!_0x52cbd5){console[_0x5123b6(0x292)]('Community\x20filter\x20not\x20found.');return;}const _0x1fb11c=_0x52cbd5[_0x5123b6(0x2b5)],_0x3af3d6=_0x1fb11c===_0x5123b6(0x342)?'Clear\x20all\x20notifications?':_0x5123b6(0x15b)+(_0x52cbd5['options'][_0x52cbd5[_0x5123b6(0x36b)]]?.['text']||_0x5123b6(0x1c4))+'\x20only?';if(!confirm(_0x3af3d6)){console[_0x5123b6(0x395)](_0x5123b6(0x248));return;}try{const _0x983451=collection(db,_0x5123b6(0x20b),_0x36bcab,'notifications');let _0x18313b;_0x1fb11c===_0x5123b6(0x342)?_0x18313b=query(_0x983451):_0x18313b=query(_0x983451,where('communityId','==',_0x1fb11c));const _0x4825ce=await getDocs(_0x18313b);if(_0x4825ce[_0x5123b6(0x42f)]){console[_0x5123b6(0x395)](_0x5123b6(0x20c)),await updateNotificationBadge(_0x36bcab),await openNotificationsModal(_0x36bcab);return;}const _0x18f22b=doc(db,_0x5123b6(0x20b),_0x36bcab);await runTransaction(db,async _0x13d6c2=>{const _0x12a73d=_0x5123b6,_0x524981=await _0x13d6c2[_0x12a73d(0x2fb)](_0x18f22b);if(!_0x524981[_0x12a73d(0x454)]())throw new Error(_0x12a73d(0x20d));const _0x21ffea=_0x524981['data']()[_0x12a73d(0x2f0)]||0x0,_0xa80833=_0x4825ce[_0x12a73d(0x15f)][_0x12a73d(0x382)](_0x257922=>!_0x257922['data']()['seen'])[_0x12a73d(0x1d5)],_0x5ddcb0=Math[_0x12a73d(0x2dd)](0x0,_0x21ffea-_0xa80833);_0x13d6c2[_0x12a73d(0x116)](_0x18f22b,{'unseenCount':_0x5ddcb0,'lastUpdated':new Date()}),_0x4825ce['docs'][_0x12a73d(0x1e6)](_0x28479d=>_0x13d6c2[_0x12a73d(0x255)](_0x28479d['ref']));}),console['log'](_0x5123b6(0x34c)+_0x4825ce[_0x5123b6(0x2ed)]+_0x5123b6(0x172)),await updateNotificationBadge(_0x36bcab),await openNotificationsModal(_0x36bcab);}catch(_0x4c04cf){console[_0x5123b6(0x292)](_0x5123b6(0x28c),_0x4c04cf);}}let commDataCache=null,lastFetchTime=0x0;const CACHE_TTL=0x1e*0x3c*0x3e8,ITEMS_PER_PAGE=0x64;async function getCommData(_0x14e445=![]){const _0x4a0df6=_0xb3da24,_0x458d77=Date[_0x4a0df6(0x347)]();if(commDataCache&&_0x458d77-lastFetchTime<CACHE_TTL&&!_0x14e445)return commDataCache;const _0x184452=doc(db,_0x4a0df6(0x46e),communityId);try{const _0x2dc27b=await getDoc(_0x184452);if(!_0x2dc27b[_0x4a0df6(0x454)]())throw new Error(_0x4a0df6(0x257));const _0x2f1064=_0x2dc27b[_0x4a0df6(0x1e8)](),_0x4fa7e0=await getDocs(collection(db,_0x4a0df6(0x46e),communityId,_0x4a0df6(0x461))),_0x2c6ab8=_0x4fa7e0[_0x4a0df6(0x15f)][_0x4a0df6(0x2f7)](_0x56b2d0=>_0x56b2d0['id']),_0x5f272a=new Proxy(_0x2c6ab8,{'get'(_0x115d34,_0x6408f1){const _0x104af0=_0x4a0df6;if(typeof _0x6408f1===_0x104af0(0x149)&&!isNaN(_0x6408f1)){const _0x57e5ab=parseInt(_0x6408f1),_0xae407c=Math['floor'](_0x57e5ab/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x115d34['slice'](_0xae407c,_0xae407c+ITEMS_PER_PAGE)[_0x57e5ab%ITEMS_PER_PAGE];}if(_0x6408f1===_0x104af0(0x1d5))return _0x115d34[_0x104af0(0x1d5)];if(_0x6408f1===_0x104af0(0x3d5))return _0x3cda40=>_0x115d34['includes'](_0x3cda40);if(_0x6408f1===Symbol[_0x104af0(0x11a)])return _0x115d34[Symbol[_0x104af0(0x11a)]][_0x104af0(0x10f)](_0x115d34);if(_0x6408f1===_0x104af0(0x3d7))return _0x115d34[_0x104af0(0x3d7)][_0x104af0(0x10f)](_0x115d34);if(_0x6408f1===_0x104af0(0x382))return _0x115d34[_0x104af0(0x382)][_0x104af0(0x10f)](_0x115d34);if(_0x6408f1===_0x104af0(0x1a6))return _0x115d34['concat']['bind'](_0x115d34);return _0x115d34[_0x6408f1];}}),_0x14a150=new Proxy(_0x2f1064[_0x4a0df6(0x3f3)]||[],{'get'(_0x13b393,_0x5480a8){const _0x5c1073=_0x4a0df6;if(typeof _0x5480a8===_0x5c1073(0x149)&&!isNaN(_0x5480a8)){const _0x2c741a=parseInt(_0x5480a8),_0x28c173=Math[_0x5c1073(0x294)](_0x2c741a/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x13b393[_0x5c1073(0x3d7)](_0x28c173,_0x28c173+ITEMS_PER_PAGE)[_0x2c741a%ITEMS_PER_PAGE];}if(_0x5480a8===_0x5c1073(0x1d5))return _0x13b393[_0x5c1073(0x1d5)];if(_0x5480a8===_0x5c1073(0x3d5))return _0x4e0833=>_0x13b393[_0x5c1073(0x3d5)](_0x4e0833);if(_0x5480a8===Symbol[_0x5c1073(0x11a)])return _0x13b393[Symbol[_0x5c1073(0x11a)]][_0x5c1073(0x10f)](_0x13b393);return _0x13b393[_0x5480a8];}}),_0x2c064f=new Proxy(_0x2f1064[_0x4a0df6(0x2e0)]||[],{'get'(_0x46a023,_0x29120a){const _0x4e1fa5=_0x4a0df6;if(typeof _0x29120a===_0x4e1fa5(0x149)&&!isNaN(_0x29120a)){const _0xe839e5=parseInt(_0x29120a),_0x4e5cfe=Math[_0x4e1fa5(0x294)](_0xe839e5/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x46a023[_0x4e1fa5(0x3d7)](_0x4e5cfe,_0x4e5cfe+ITEMS_PER_PAGE)[_0xe839e5%ITEMS_PER_PAGE];}if(_0x29120a===_0x4e1fa5(0x1d5))return _0x46a023[_0x4e1fa5(0x1d5)];if(_0x29120a===_0x4e1fa5(0x3d5))return _0x12830f=>_0x46a023[_0x4e1fa5(0x3d5)](_0x12830f);if(_0x29120a===Symbol[_0x4e1fa5(0x11a)])return _0x46a023[Symbol[_0x4e1fa5(0x11a)]][_0x4e1fa5(0x10f)](_0x46a023);return _0x46a023[_0x29120a];}});return commDataCache={..._0x2f1064,'members':_0x5f272a,'bannedUsers':_0x14a150,'admins':_0x2c064f},lastFetchTime=_0x458d77,console[_0x4a0df6(0x395)](_0x4a0df6(0x1af)+communityId+_0x4a0df6(0x2bc)+_0x2c6ab8['length']+'\x20members\x20from\x20subcollection'),commDataCache;}catch(_0x50a429){console[_0x4a0df6(0x292)]('Error\x20fetching\x20community\x20data:',_0x50a429);if(commDataCache)return commDataCache;return{'members':[],'bannedUsers':[],'admins':[],'creatorId':'','name':'Unknown','banReasons':{}};}}function resetCommDataCache(){const _0x576ccc=_0xb3da24;commDataCache=null,lastFetchTime=0x0,console[_0x576ccc(0x395)](_0x576ccc(0x1f0));}function debounce(_0x44fcc4,_0x301453){let _0x584851;return function(..._0xee5403){const _0x4f2a00=_0x54fb;clearTimeout(_0x584851),_0x584851=setTimeout(()=>_0x44fcc4[_0x4f2a00(0x271)](this,_0xee5403),_0x301453);};}window[_0xb3da24(0x217)]=getCommData,window[_0xb3da24(0x148)]=closeModal,window['debounce']=debounce,window[_0xb3da24(0x466)]=searchPostsById,window[_0xb3da24(0x311)]=renderPosts,window[_0xb3da24(0x346)]=searchPostsById,window[_0xb3da24(0x3f5)]=fetchUserData,window['getCachedUser']=getCachedUser,window['setCachedUser']=setCachedUser,window['fetchCurrentUserData']=fetchCurrentUserData,window[_0xb3da24(0x3f8)]=leaveCommunity,window[_0xb3da24(0x160)]=debouncedLoadAdminReportSummary,window[_0xb3da24(0xf7)]=delay,window[_0xb3da24(0x35a)]=resetCommDataCache;
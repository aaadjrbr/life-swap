const _0x13cbff=_0x25ba;(function(_0x397b7f,_0xbe028){const _0x1f285e=_0x25ba,_0xc5d525=_0x397b7f();while(!![]){try{const _0x1375cb=-parseInt(_0x1f285e(0x421))/0x1+-parseInt(_0x1f285e(0x14b))/0x2+parseInt(_0x1f285e(0x333))/0x3+-parseInt(_0x1f285e(0x310))/0x4+-parseInt(_0x1f285e(0x41e))/0x5+parseInt(_0x1f285e(0x94))/0x6+parseInt(_0x1f285e(0x1f3))/0x7;if(_0x1375cb===_0xbe028)break;else _0xc5d525['push'](_0xc5d525['shift']());}catch(_0x1d02c4){_0xc5d525['push'](_0xc5d525['shift']());}}}(_0x1ecb,0x96782));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';import{getFirestore,setDoc,doc,getDoc,updateDoc,addDoc,collection,query,where,getDocs,limit,deleteDoc,limitToLast,startAfter,endBefore,orderBy,enableIndexedDbPersistence,runTransaction,writeBatch,deleteField}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL,deleteObject}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';import{toggleComments}from'./commentsReplies.js';const firebaseConfig={'apiKey':_0x13cbff(0x38a),'authDomain':'life-swap-6065e.firebaseapp.com','projectId':_0x13cbff(0x23f),'storageBucket':'life-swap-6065e.firebasestorage.app','messagingSenderId':_0x13cbff(0xcb),'appId':_0x13cbff(0x31b),'measurementId':_0x13cbff(0x2a7)},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),storage=getStorage(app);enableIndexedDbPersistence(db)[_0x13cbff(0x261)](()=>{const _0x5659c0=_0x13cbff;console[_0x5659c0(0x1c9)](_0x5659c0(0x1d8));})[_0x13cbff(0xa9)](_0x3737cd=>{const _0x22e17f=_0x13cbff;if(_0x3737cd['code']===_0x22e17f(0x208))console['warn'](_0x22e17f(0x2ab));else _0x3737cd[_0x22e17f(0x24e)]===_0x22e17f(0x1c0)?console['warn'](_0x22e17f(0xb6)):console[_0x22e17f(0x40a)]('Persistence\x20error:',_0x3737cd);});export let communityId;export let userDataCache={};const USER_CACHE_TTL=0x3c*0x3c*0x3e8,USER_CACHE_MAX_SIZE=0x64;function getCachedUser(_0x504e9a){const _0x53564e=_0x13cbff,_0x221586=userDataCache[_0x504e9a];if(!_0x221586)return null;if(Date[_0x53564e(0x334)]()>_0x221586[_0x53564e(0xda)])return delete userDataCache[_0x504e9a],console[_0x53564e(0x1c9)](_0x53564e(0x1fe)+_0x504e9a),null;return _0x221586[_0x53564e(0x3e2)];}function setCachedUser(_0x2b59a5,_0x3fc1e6){const _0x233ccd=_0x13cbff;if(Object[_0x233ccd(0x1cc)](userDataCache)[_0x233ccd(0x1b1)]>=USER_CACHE_MAX_SIZE){const _0xaa0f70=Object[_0x233ccd(0x1cc)](userDataCache)[0x0];delete userDataCache[_0xaa0f70],console[_0x233ccd(0x1c9)](_0x233ccd(0x400)+_0xaa0f70);}userDataCache[_0x2b59a5]={'value':_0x3fc1e6,'expiry':Date[_0x233ccd(0x334)]()+USER_CACHE_TTL},console['log'](_0x233ccd(0x2cf)+_0x2b59a5+_0x233ccd(0x2bb)+new Date(Date[_0x233ccd(0x334)]()+USER_CACHE_TTL));}let currentPage=0x1;export const postsPerPage=0xa;let lastMemberDoc=null;function _0x1ecb(){const _0x28764d=['Seen','closest','.community-page','proceedSwapBtn','G-CHJY2ZEYYF','innerHTML','See\x20More','Error\x20fetching\x20initial\x20members:','Persistence\x20failed:\x20Multiple\x20tabs\x20open.\x20Only\x20one\x20tab\x20can\x20enable\x20persistence.','</h3>\x0a\x20\x20<p\x20class=\x22post-description\x22>','#toggleComments-','<p>No\x20notifications\x20yet.</p>','.notification-item','Thanks!\x20You\x20and\x20','\x20-\x20Post-deletion\x20check\x20-\x20Exists:','Error\x20fetching\x20user\x20data\x20for\x20members:','transform','[DeleteCommunity]\x20Retry\x20','inline','bannedUsers','https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430','You\x20have\x20successfully\x20left\x20the\x20community!','<p>Error\x20loading\x20your\x20reports!</p>','reportCount',',\x20expires\x20at\x20','current','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it\x20from\x20others—check\x20it\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','<p>No\x20new\x20posts\x20to\x20show!</p>','Community\x20','<p>No\x20pending\x20profile\x20view\x20requests.</p>','Community\x20ID\x20','\x0a\x20\x20</div>\x0a\x20\x20<p>Location:\x20','Post\x20not\x20found!','</p>\x0a\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','position','scrollTop','banReasons','-your\x22><</button>','</span>\x20','Badge\x20updated\x20to:\x20','creatorId','.saved-post-card','No\x20userId\x20provided\x20to\x20loadAdminReportSummary','add','Cached\x20','disabled','\x20-\x20After\x202s\x20delay\x20-\x20Exists:','onclick','\x22\x20class=\x22profile-photo\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3><span\x20class=\x22username\x22\x20data-uid=\x22','swapDetails','\x20from\x20DOM','seen','Unsave','<p>Error\x20loading\x20post\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ban-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20are\x20banned\x20from\x20this\x20community!</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Reason:</strong>\x20','\x22>Accept</button>\x0a\x20\x20\x20\x20<button\x20class=\x22decline-btn\x22\x20data-request-id=\x22',')</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','.copy-btn[data-post-id=\x22','index','postSearch','state','currentPage','postDescription','Community\x20name\x20updated!','#commentForm-','unknown','<span\x20class=\x22admin-tag\x22>Admin</span>','[DeleteCommunity]\x20Document\x20not\x20found\x20during\x20transaction\x20-\x20skipping.','.remove-post-btn','<p>Failed\x20to\x20load\x20some\x20member\x20data.</p>','-search\x22\x20data-photos=\x27','LifeSwap/1.0\x20(your-email@example.com)','note','\x20members\x20from\x20subcollection','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20</div>','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','appealId','delete','community-item','.\x20Check\x20the\x20console\x20for\x20details.','viewNotificationsBtn','score','\x20on\x20page\x20','\x0a\x20\x20','.user-item','.carousel-next[data-post-id=\x22','loading','offering','#seeMoreYourPostsBtn',',\x20last\x20cached\x20at:\x20','removeItem','none','next','\x20already\x20seen.','\x22\x20class=\x22suggestions\x20hidden\x22></div>\x0a\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20</form>\x0a\x20\x20</div>\x0a','photoUrls','\x0a\x20\x20\x20\x20','viewChats','modalNotificationCount','refreshNotificationsBtn','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20post?','Deleting...','followerId','suggestion-item','_debouncedInput','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20ID:\x20<span\x20class=\x22copyable-post-id\x20clickable\x22\x20data-post-id=\x22','Missing\x20required\x20fields','Mark\x20as\x20Seen','\x20not\x20found\x20in\x20user\x27s\x20communityIds\x20array','1791372HJWCQh',':</strong>\x20\x22','#seeMoreSearchMembersBtn','.clear-reports-btn[data-post-id=\x22','.delete-saved-btn[data-doc-id=\x22','Delete\x20this\x20appeal?','toISOString','chatIds','\x0a<label\x20for=\x22comm-current\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-current\x22\x20name=\x22communities\x22\x20value=\x22current\x22\x20checked>\x20Current\x20(','User\x20authenticated:','style','1:475311181000:web:32d03d80f70081bfb629fd','<p\x20style=\x22color:\x20red;\x22>Hidden\x20from\x20others!</p>','</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22saved-note\x22>Note:\x20<span\x20data-doc-id=\x22','Community\x20carousel\x20setup\x20failed\x20for\x20post\x20','Created\x20new\x20user\x20in\x20DB:\x20','postTitle','#seeLessSearchMembersBtn','category','Failed\x20to\x20copy\x20username:','membersList','[DeleteCommunity]\x20Executing\x20deletion\x20transaction\x20at:','data','Error\x20submitting\x20appeal:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22banAppealForm\x22\x20class=\x22ban-appeal-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','\x20|\x20Offering:\x20','requesterId','No\x20message','reset','\x20|\x20Looking\x20For:\x20','<p>Failed\x20to\x20load\x20more\x20members.</p>','Failed\x20to\x20delete\x20photo:','viewProfileViewRequestsBtn','\x22\x20class=\x22profile-photo\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20<h3><span\x20class=\x22username\x22\x20data-uid=\x22','</h4>\x0a\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','3561783kesZXg','now','Reset\x20post\x20list\x20and\x20caches\x20for\x20community\x20','Using\x20cached\x20unseen\x20count:\x20','Current\x20communityIds\x20before\x20leaving:','</span>\x0a\x20\x20','\x22>Copy</button></p>\x0a\x20\x20\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20</div>','\x20only?','Clear\x20all\x20notifications?','No\x20admin\x20email\x20available','min','viewRequestsBtn','\x22>Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Refresh','</p>\x0a\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','Profile\x20Requests\x20','flex','Post\x20already\x20unsaved!','\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMembersBtn\x22>Members</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewProfileViewRequestsBtn\x22>Profile\x20Requests\x20','notificationsModal','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','admin-report-summary','Skipping\x20updateProfileRequestsUI\x20due\x20to\x20undefined\x20UID','<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22','.username','.carousel-image','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Appeal\x20to\x20admins\x20(e.g.,\x20\x27Not\x20breaking\x20rules\x20because...\x27)\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Paste\x20failed:','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>','[DeleteCommunity]\x20Processing\x20subcollection:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Post\x20\x22','Failed\x20to\x20update\x20note.\x20Try\x20again.','Untitled','Load\x20Less','</h3>\x0a\x20\x20</div>\x0a\x20\x20<h3>','postCache_','Error\x20loading\x20user\x20reports:','closeBannedBtn','tagName','\x0a\x20\x20<span\x20class=\x22clickable-profile\x22\x20data-uid=\x22','.carousel-prev[data-post-id=\x22','searchPostsById','postId','\x20oldest\x20posts\x20from\x20cache','Failed\x20to\x20load\x20posts\x20for\x20','totalUsers','innerWidth','Queued\x20deletion\x20of\x20member\x20','-your','readText','sort','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','filter','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.report-warning','insertAdjacentHTML','Total\x20members\x20from\x20memberCount:','0\x200\x2010px\x20rgba(0,0,0,0.2)','</p>\x0a\x20\x20\x20\x20<p>Posted:\x20','.admin-report-controls','json','\x22\x20by\x20','\x20not\x20found\x20in\x20savedPosts','src','<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>','clearNotificationsBtn','<button\x20class=\x22copy-id-btn2\x22\x20data-post-id=\x22','[DeleteCommunity]\x20Document\x20reappeared\x20with\x20data:','stopPropagation','db:','Post\x20','cssText','textContent','seconds','Client:\x20Incremented\x20unseenCount\x20for\x20','Loading\x20batch:','<br><h3>User\x20Appeals</h3><p>No\x20appeals\x20yet.</p>','\x20in\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities.','BUTTON','#report-content','smooth','carouselTrack','Fetched\x20','💬\x20Chats\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','AIzaSyB5Q0kHoViWJl-t-pWCKj_AT-ClAMadfrU','\x22\x20data-community-id=\x22','savePost\x20called\x20for\x20postId:\x20','submit','viewSavedPostsBtn','\x20(ID:\x20','\x20cached\x20posts\x20for\x20','\x22>✏️\x20Edit\x20Note</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-saved-btn\x22\x20data-doc-id=\x22','setItem','Post\x20created\x20in\x20','height','comments','\x20new\x20posts\x20for\x20','border','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Post\x20\x22','search-scrolldown','<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-','userNameCopy','-search\x22]','displayName','#seeLessYourPostsBtn','city','cacheTimestamp_','profileViewRequestsList','<span\x20class=\x22chat-badge\x22>(new)</span>','cloneNode','profileRequestsBtn','<h3>Your\x20Reported\x20Posts</h3>','status','carousel-','message','\x22\x20style=\x22width:\x20100%;\x20margin-bottom:\x2010px;\x22>\x0a<button\x20id=\x22saveNameBtn\x22>Save</button>\x0a<button\x20id=\x22cancelNameBtn\x22>Cancel</button>\x0a','swapConfirmed','targetId','path','appealSubmitted','No\x20communities\x20selected','Post\x20ID\x20copied!','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','User\x20is\x20away\x20from\x20screen,\x20stopping\x20updates.','Fill\x20out\x20all\x20fields,\x20pick\x20a\x20category,\x20and\x20select\x20what\x20you\x27re\x20looking\x20for\x20and\x20offering!','left','warn','<br><h3>User\x20Appeals\x20(Bans/Posts)</h3>','.modal:not(.hidden)','bind','userId','\x0a\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','closeDeleteModalBtn','justDeleteBtn','from','Post\x20saved!','https://nominatim.openstreetmap.org/search?q=','refreshPostsBtn','-community\x22><</button>','<p>Post\x20ID\x20','Failed\x20to\x20fetch\x20community\x20','<p>No\x20matching\x20members\x20found.</p>','users','...','includes','Loaded\x20report\x20summary\x20from\x20cache!','User\x20or\x20partner\x20not\x20found.','label','Clothing\x20&\x20Accessories','comm-','iterator','\x20documents','/community.html?id=','drawImage','communityFilter','posts/','communityId\x20is\x20undefined,\x20cannot\x20initialize\x20user\x20swap\x20info','[DeleteCommunity]\x20Firestore\x20instance:','postReports','edit-name-form',',\x20not\x20','opacity','Failed\x20to\x20load\x20your\x20posts:','-search','createElement','\x20not\x20found—assuming\x20deleted.','\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','</div>','\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20<form\x20id=\x22commentForm-','.modal:not(#viewProfileViewRequestsModal)','floor','caughtUpMessage','value','No\x20user\x20detected,\x20redirecting\x20to\x20login...','nextSibling','address','Like\x20(','Search\x20buttons:\x20totalFiltered=','Appeal\x20sent!','checked','slice','viewSavedPostsModal','banAppealForm','toLowerCase','ref','transition','</p>\x0a\x20\x20<p\x20class=\x22highlight\x22>Offering:\x20','User\x20UID\x20is\x20undefined,\x20skipping\x20profile\x20requests\x20query!','\x20not\x20in\x20cache—fetching\x20from\x20Firestore.','set','Refreshing...','margin-top:\x2010px;\x20text-align:\x20center;\x20display:\x20block\x20!important;\x20visibility:\x20visible\x20!important;',',\x20index:\x20','Fetched\x20unseen\x20count:\x20','Electronics\x20&\x20Gadgets','entries','description','\x20communit','\x20textarea','swapCount','[DeleteCommunity]\x20Main\x20community\x20document\x20queued\x20for\x20deletion','\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22','Cache\x20size\x20limit\x20hit,\x20removed\x20','No\x20note','\x20from\x20community\x20','likedPrefs_','Error\x20fetching\x20search\x20batch:','Are\x20you\x20sure\x20you\x20want\x20to\x20unsave\x20this\x20post?','\x20reads)','\x20comments</a>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-','count','seeLessYourPostsBtn','error','en-US','parse','clear','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>','<p>No\x20reports\x20on\x20your\x20posts!</p>',')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22revoke-btn\x22\x20data-request-id=\x22','undefined','cancelSavePostBtn','</span>\x20<span\x20class=\x22at-user\x22>@','createPostBtn','Unnamed','[DeleteCommunity]\x20Pre-deletion\x20document\x20data:','</span>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./start.html\x22\x20id=\x22copyAndJoinLink\x22>Copy\x20ID\x20and\x20Join</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22./start.html\x22>Go\x20back</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','\x22>\x0a','lon','Failed\x20to\x20fetch\x20post\x20','username:','fixed','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22','518905QIrzdo','No\x20notifications\x20to\x20clear.','href','929076HXhImI','\x22\x20alt=\x22Profile\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22username\x22\x20data-uid=\x22','Unnamed\x20User','uid','appendChild','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20','viewMyFollowersBtn','Please\x20enter\x20a\x20username.','name','.\x20Updated\x20communityIds:','&format=json&limit=5&addressdetails=1','\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22tagSuggestions-','find','</p>\x0a\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Looking\x20For:\x20','\x22\x20class=\x22comment-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20placeholder=\x22Add\x20a\x20comment...\x22\x20required></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Comment</button>\x0a\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a','loadMoreBtn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','❤️\x20Like','oninput','viewProfileModal','getCommData','Error\x20creating\x20post:','26550YuOTdK','Error\x20marking\x20notification\x20','Deletion\x20failed:','classList','Failed\x20to\x20copy\x20ID.\x20Please\x20copy\x20it\x20manually:\x20','Your\x20Posts\x20carousel\x20setup\x20failed\x20for\x20post\x20','Post-','debounce','</p>\x0a\x20\x20<p>Category:\x20','<p>No\x20posts\x20yet!</p>','Post\x20unsaved!','\x22>\x0a\x20\x20\x20\x20<span>','option','see-more-btn','debouncedLoadAdminReportSummary','saved-post-card','town','dataset','profile_request_accepted','\x22\x20data-id=\x22','yourPostsList','catch','.modal-content','</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-description\x22>','Unknown\x20Community','<p>No\x20active\x20communities\x20found.</p>','1000','addEventListener','-your\x22\x20data-photos=\x27','currentUser','./start.html','profilePhoto','getContext','Firebase\x20setup\x20issue\x20-\x20doc:','Persistence\x20not\x20available:\x20Browser\x20doesn’t\x20support\x20it.','carousel-post','click','ceil','viewMembersModal','<div\x20class=\x22report-warning\x22\x20id=\x22warning-','Community\x20filter\x20not\x20found.','docId',')</button>','padding','fetchUserData','editSwapBtn','\x22>Report\x20Post</button>\x0a\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20','selectedIndex','\x22>Copy\x20Post\x20ID</button>\x0a','No\x20reason\x20provided',')\x20has\x20','.like-btn[data-post-id=\x22','marginLeft','reduce','copyAndJoinLink','475311181000','[DeleteCommunity]\x20Document\x20successfully\x20removed\x20-\x20verifying\x20persistence...','<button\x20class=\x22leave-btn\x22\x20id=\x22leaveCommunityBtn\x22>Leave\x20Community</button>','Someone','Location\x20input\x20or\x20suggestions\x20div\x20not\x20found!','\x20declined\x20your\x20profile\x20view\x20request.','<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','Health\x20&\x20Beauty','User\x20not\x20found','\x22>\x0a\x20\x20\x20\x20<textarea\x20placeholder=\x22Explain\x20why\x20this\x20ban\x20might\x20be\x20an\x20error...\x22\x20required></textarea>\x0a\x20\x20\x20\x20<button\x20type=\x22submit\x22>Send\x20Appeal</button>\x0a\x20\x20</form>\x0a','body','Error\x20fetching\x20communities:','💔\x20Unlike','No\x20authenticated\x20user\x20found.','-community\x22\x20data-photos=\x27','expiry','writeText','Failed\x20to\x20send\x20appeal.','Failed\x20to\x20fetch\x20profile\x20view\x20requests:','chat','type',',\x20loadedCount=','<button\x20id=\x22viewBannedBtn\x22>Banned\x20(Users/Appeals)</button>','.copy-id-btn2','Deleted\x20Post','change','Confirmed:\x20Community\x20ID\x20','\x20not\x20found.','getElementById','Failed\x20to\x20unsave\x20post.\x20Try\x20again.','Couldn’t\x20paste—check\x20clipboard\x20permissions!','\x20successfully\x20deleted.\x20Redirecting...','.edit-note-btn[data-doc-id=\x22','categories','visibilitychange','Swap\x20and\x20deletion\x20failed:','html','removeEventListener','querySelectorAll','Cleared\x20community\x20data\x20cache','<button\x20class=\x22delete-btn\x22\x20id=\x22deleteCommunityBtn\x22>Delete\x20(Community)</button>','createDocumentFragment','handleViewChatsClick\x20triggered\x20with\x20userId:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-item\x22\x20data-appeal-id=\x22','</span>\x0a\x20\x20\x20\x20','<p>You’re\x20not\x20in\x20any\x20communities\x20yet!</p>','translate(-50%,\x20-50%)','\x20is\x20missing\x20user\x20data.</div>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','pending','Load\x20More','\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22','<button\x20class=\x22carousel-prev\x22\x20data-post-id=\x22','#deletePost-','No\x20valid\x20communities','insertBefore','documentElement',')...','country','communityName','timestamp','<span\x20class=\x22request-badge\x22>','map','</p>\x0a\x20\x20\x20\x20<p>Post\x20ID:\x20','requestId','No\x20user\x20doc\x20found\x20for\x20current\x20uid\x20','children','display','photos','.suggestions','Error\x20loading\x20post\x20','\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22request-','loadLessBtn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','Miscellaneous','\x0a\x20\x20<span\x20class=\x22timestamp\x22>','Failed\x20to\x20copy:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20received\x20','canvas','hasUnread','size','closeModal','Community\x20not\x20found','background','Missing','trim','see-less-btn','setCachedUser','className','\x20as\x20seen.','[DeleteCommunity]\x20Transaction\x20completed\x20in:','\x0a\x20\x20\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','__name__','\x0a<h3>Edit\x20Community\x20Name</h3>\x0a<input\x20type=\x22text\x22\x20id=\x22newCommunityName\x22\x20value=\x22','admins','.username[data-uid=\x22','zIndex','title','communityId','_carouselHandler','\x0a<details>\x0a\x20\x20<summary>','#loadMoreBtn','lookingFor','#post-','Clear\x20all\x20reports\x20for\x20this\x20post?\x20It’ll\x20be\x20visible\x20again.','#reportPost-','block','Save','onchange','seeLessSearchMembersBtn','</span></p>\x0a\x20\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22','display_name','push','Members\x20modal\x20elements\x20missing!','preventDefault','Updating\x20buttons:','</a>\x0a\x20\x20\x20\x20\x20\x20','Cleared\x20','deletePostModal','\x27>\x0a\x20\x20\x20\x20\x20\x20','.top-bar','savedPosts','beforeend','Refresh\x20failed:','toLocaleString','creatorName','526308oYbTEL','displayedPostIds','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','\x0a\x20\x20<div\x20class=\x22post-header\x22>\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22','POSTS_PER_PAGE','\x22>Copy\x20ID</button>','offeringFilter','\x0a\x20\x20<h4>','Search\x20error:','You\x20can’t\x20delete\x20this\x20post!','in-progress','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22appeal-container\x22\x20data-post-id=\x22','</span>\x0a','opacity\x200.3s\x20ease','scrollIntoView','Error\x20updating\x20communityIds:','See\x20Less','\x22>🗑️\x20Unsave</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','No\x20valid\x20user\x20selected.','postCount','deleteCommunityBtn','\x20initiated\x20at:','unshift','communities','</p>\x0a\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20class=\x22appeal-form\x22\x20data-post-id=\x22','commit','photoURL','isHidden','-community\x22]','round','toggle','<div\x20class=\x22loading\x22>⏳\x20Searching...</div>','[DeleteCommunity]\x20Local\x20cache\x20cleared.','prepend','scrollTo','Something’s\x20broken—refresh\x20the\x20page!',')\x0a</label>\x0a','swapUsername','[DeleteCommunity]\x20','toDate','\x22>Clear\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','post-','docs','[DeleteCommunity]\x20Pre-deletion\x20check\x20-\x20Document\x20exists:','Failed\x20to\x20copy\x20community\x20ID:','form','image/jpeg','confirmSavePostBtn','HTTP\x20error!\x20Status:\x20','closeCommunitiesBtn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-appeal-btn\x22\x20data-appeal-id=\x22','\x20swapped\x20this\x20item.\x20Help\x20us\x20continue\x20our\x20service\x20free.\x20Tip\x20us!','createdAt','Error\x20fetching\x20all\x20members\x20for\x20search:','seeMoreYourPostsBtn','desc','-your\x22]','remove','\x20documents\x20in\x20','div','.save-toggle-btn[data-post-id=\x22',':\x20missing\x20elements','Edit\x20Note','ban_appeal','has','display:\x20none\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20hidden\x20!important;\x20opacity:\x200\x20!important;','Error\x20loading\x20saved\x20posts:',',\x20batchSize=','text','See\x20More\x20display:','savePostNote','getItem','</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22post-card-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-note-btn\x22\x20data-doc-id=\x22','likes','\x22\x20data-type=\x22','\x20matches\x20for\x20\x22','Delete\x20this\x20post\x20from\x20this\x20community?\x20It\x20may\x20still\x20exist\x20in\x20other\x20communities\x20you\x20posted\x20to.','seeMoreMembersBtn','Unknown','.copy-btn','input','swapSuccess','Notification\x20','Something\x20went\x20wrong\x20during\x20the\x20swap.\x20Please\x20try\x20again.','closeMembersBtn','max','<button\x20id=\x22editNameBtn\x22>Edit\x20Name\x20(Community)</button>','50%','\x20to\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22./community.html?id=','Tools\x20&\x20DIY','success','\x0a\x20\x20<div\x20id=\x22searchMessage\x22\x20class=\x22search-message\x22>\x0a\x20\x20\x20\x20<p>Showing\x20post\x20with\x20ID:\x20','phone','Failed\x20to\x20remove\x20community\x20ID\x20','profileRequests','width','\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20</div>','No\x20authenticated\x20user!','#yourPostsList\x20#post-','Removed\x20post-','length','<p>Failed\x20to\x20load\x20communities.\x20Try\x20refreshing.</p>','getCachedUser','Error\x20fetching\x20notifications:','savedPostsList','button','swaps','communityActions','communityIds','An\x20administrator\x20has\x20reinstated\x20your\x20ban.\x20For\x20the\x20original\x20or\x20a\x20diffrent\x20reason.\x20Please\x20contact\x20us\x20at\x20','all','.remove-post-btn[data-post-id=\x22','communityIds\x20is\x20not\x20an\x20array\x20or\x20undefined,\x20initializing\x20as\x20[]','isOwner','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22\x20data-index=\x220\x22>\x0a\x20\x20\x20\x20','unimplemented','\x0a\x20\x20\x20\x20<div\x20class=\x22admin-menu\x22>\x0a\x20\x20\x20\x20\x20\x20','Post\x20creation\x20in\x20progress,\x20ignoring\x20extra\x20click.','memberCount','delay','village','banAppeals','\x22\x20alt=\x22Post\x20photo\x22\x20class=\x22carousel-image\x22>\x0a\x20\x20\x20\x20\x20\x20','viewCommunitiesBtn','log','</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewSavedPostsBtn\x22>Saved\x20Posts</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewChatsBtn\x22>💬\x20Chats</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20id=\x22viewMyFollowersBtn\x22>Followers</button>\x0a\x20\x20\x20\x20','No\x20community\x20ID,\x20redirecting\x20to\x20index...','keys','Skipping\x20carousel\x20post\x20','\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22','https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y','Deleting\x20community\x20data...','span','\x22>\x0a\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','</p>','profile_request_declined','You\x20must\x20be\x20logged\x20in\x20to\x20leave\x20a\x20community.','currentUserData','viewProfileViewRequestsModal','Offline\x20persistence\x20enabled\x20successfully!','clipboard','Creating\x20new\x20user\x20with\x20data:','\x22>\x0a\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20hides\x20it—check\x20summary!\x0a\x20\x20\x20\x20</div>','new_message','N/A','posts','hidden','\x22\x20name=\x22communities\x22\x20value=\x22','\x20reports\x20and\x20is\x20hidden\x20from\x20others.\x20Appeal\x20in\x20the\x20summary\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','/index.html','toString','visibilityState','Community\x20ID\x20copied!','Pet\x20Supplies','Books,\x20Movies\x20&\x20Music','.appeal-container','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22timestamp\x22>','member-','[DeleteCommunity]\x20Document\x20still\x20present:','function','</p>\x0a\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','user_','Initial\x20members\x20loaded:','1px\x20solid\x20#ccc','username','newCommunityName','8179430EgZTri','Arts\x20&\x20Crafts','\x0a\x20\x20\x20\x20\x20\x20','notifications','\x20from\x20user\x27s\x20communityIds','\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','<p>Oops,\x20something\x20broke!\x20Refresh.</p>','\x22>Copy</button></p>\x0a\x20\x20<button\x20class=\x22like-btn\x22\x20data-post-id=\x22','-community','Using\x20','createObjectURL','Cache\x20expired\x20for\x20','load-less-btn','/login.html','communitiesList','user-item','.delete-appeal-btn','update','textarea','Save\x20Post','\x0a<label\x20for=\x22comm-all\x22>\x0a\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-all\x22\x20name=\x22communities\x22\x20value=\x22all\x22>\x20All\x20Communities\x0a</label>\x0a','failed-precondition','location','\x20to\x20communityIds','\x22>Delete\x20Post</button>','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','No\x20cached\x20posts\x20found\x20for\x20','Fetching\x20fresh\x20unseen\x20notification\x20count...','members','\x0a\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-','#fff','details','Notifications\x20modal\x20elements\x20missing\x20from\x20DOM!','<div\x20class=\x22loading\x22>⏳\x20Loading...</div>','top','No\x20valid\x20communities\x20selected!','ID:\x20','Creating...','onload','.saved-note[data-doc-id=\x22','join','active','User\x20not\x20found.','lat','querySelector','</span>','follow','Verified\x20communityIds\x20in\x20Firestore\x20after\x20update:','\x22>Decline</button>\x0a\x20\x20</div>\x0a','<p>Failed\x20to\x20search\x20members.</p>','\x0a\x20\x20\x20\x20<div\x20class=\x22admin-report-controls\x22\x20id=\x22admin-controls-','<p>No\x20granted\x20profile\x20access.</p>','\x20removed\x20from\x20user\x27s\x20communityIds','Community\x20does\x20not\x20exist.\x20Deletion\x20unnecessary.','stringify','cancelNameBtn','selected\x20community','delete-status','.mark-seen-btn2[data-id=\x22','Updating\x20communityIds\x20with:','get','viewChatsBtn','leaveCommunity','summary','See\x20Reports','\x22\x20(Ban\x20Reason:\x20','forEach','Mark\x20this\x20post\x20as\x20swapped\x20with\x20','—belongs\x20to\x20','No\x20Description','</h3>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<h3>','deleting','\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22comm-','concat','focus','Post\x20not\x20found—might’ve\x20been\x20deleted!','life-swap-6065e','[DeleteCommunity]\x20Deletion\x20confirmed\x20-\x20Document\x20permanently\x20removed.','That’s\x20already\x20the\x20name!','Error\x20loading\x20more\x20members:','\x20report','-community\x22>></button>','Unable\x20to\x20delete\x20community\x20-\x20Document\x20persists\x20after\x20maximum\x20retries.','Unnamed\x20Community','input[name=\x22communities\x22]:not([value=\x22all\x22])','<option\x20value=\x22all\x22>All\x20Communities</option>','Community\x20deletion\x20failed.\x20Please\x20review\x20the\x20console\x20for\x20details.','.decline-btn','scroll-to-ur-posts','Furniture\x20&\x20Home\x20Decor','unseenCount','code','TEXTAREA','fetchCurrentUserData','Appeal\x20Sent','\x0a\x20\x20<div\x20class=\x22comments-section\x22>\x0a\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22comment-count\x22\x20id=\x22toggleComments-','—fetching\x20fresh\x20batch.','</p>\x0a\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','boxShadow','\x0a\x20\x20<form\x20class=\x22ban-appeal-form\x22\x20data-id=\x22','postList','Checking...','likedBy','toBlob','lookingForFilter','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20community?\x20This\x20action\x20is\x20permanent\x20and\x20cannot\x20be\x20undone.','Profile\x20access\x20revoked!','</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22highlight\x22>Category:\x20','string','post','then','User\x20canceled\x20clearing\x20notifications.','Existing\x20user\x20data:','\x22>Revoke</button>\x0a\x20\x20</div>\x0a','Toys\x20&\x20Games','Name\x20can’t\x20be\x20empty!','You’ve\x20already\x20saved\x20this\x20post!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20','<p>Failed\x20to\x20load\x20some\x20members.</p>','#seeLessMembersBtn','newPostForm','.appeal-form','savePostModal','.mark-seen-btn2','categoryFilter','notificationList','isArray','</p>\x0a\x20\x20<p\x20class=\x22timestamp\x22>','empty','Total\x20trending\x20posts\x20for\x20','target','Fetching\x20user\x20data\x20for\x20UID:\x20','\x20for\x20','<div\x20class=\x27loading\x27>⏳\x20Searching...</div>','email','files','Initial\x20load\x20failed:','</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22photo-carousel\x22\x20id=\x22carousel-','deleteSavedPostFromPost\x20called\x20for\x20postId:\x20','options','offerings','Scroll\x20target\x20#search-scrolldown\x20not\x20found!','\x20not\x20found\x20in\x20DOM—already\x20gone\x20or\x20never\x20rendered','values','Adding\x20communityId\x20','-your\x22>></button>','postLocation','\x20found\x20in\x20cache—no\x20Firestore\x20read\x20needed.','Loading\x20search\x20batch:\x20startIndex=','Successfully\x20left\x20community\x20','commentCount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22not-member-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>You\x20aren\x27t\x20a\x20member\x20of\x20this\x20community.</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Copy\x20the\x20community\x20ID\x20and\x20go\x20back\x20to\x20join!\x20We\x20are\x20waiting\x20for\x20you!\x20💚</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Community\x20ID:</strong>\x20<span\x20id=\x22communityIdText\x22>','\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','some','<p>No\x20post\x20found\x20with\x20ID:\x20','replaceWith','exists','Clear\x20notifications\x20for\x20','Error:\x20Modal\x20setup\x20incomplete.\x20Please\x20refresh\x20the\x20page.','Hide\x20Reports','swapSuccessMessage','Verification\x20failed:\x20Community\x20ID\x20still\x20present\x20in\x20user\x27s\x20communityIds','getTime','[DeleteCommunity]\x20Verification\x20','replies','setAttribute','closeProfileBtn','removeChild','Swap\x20deletion\x20already\x20in\x20progress,\x20ignoring\x20click.','💾\x20Save','Username\x20is\x20undefined,\x20falling\x20back\x20to\x20UID-based\x20default','profile_request','\x0a<div\x20class=\x22notification-item\x20','communityId:','DOMContentLoaded','Username\x20copied\x20to\x20clipboard!'];_0x1ecb=function(){return _0x28764d;};return _0x1ecb();}export let carouselPostIds=[];let carouselIndex=0x0;export const postsPerCarousel=window[_0x13cbff(0x363)]<0x300?0x2:0x4;export let isLoading=![];let lastPostDoc=null,totalPosts=0x0;export const postsPerLoad=0xa;let loadedPostIds=new Set(),initialPostsLoaded=![],isSearching=![],postCache=new Map();export const POSTS_PER_LOAD=0x14;function _0x25ba(_0x163ff5,_0x462da8){const _0x1ecbb5=_0x1ecb();return _0x25ba=function(_0x25ba2b,_0x3069c1){_0x25ba2b=_0x25ba2b-0x83;let _0x4f3b2f=_0x1ecbb5[_0x25ba2b];return _0x4f3b2f;},_0x25ba(_0x163ff5,_0x462da8);}let isFetching=![],allNotifications=[],lastDoc=null,displayedCount=0x0;const categoryDisplayMap={'clothing_accessories':_0x13cbff(0x3ca),'electronics':_0x13cbff(0x3f8),'furniture_decor':_0x13cbff(0x24c),'kitchen_dining':'Kitchen\x20&\x20Dining','tools_diy':_0x13cbff(0x1a6),'books_media':_0x13cbff(0x1e7),'arts_crafts':_0x13cbff(0x1f4),'toys_games':_0x13cbff(0x265),'sports_outdoors':'Sports\x20&\x20Outdoors','health_beauty':_0x13cbff(0xd2),'baby_kids':'Baby\x20&\x20Kids','pet_supplies':_0x13cbff(0x1e6),'misc':_0x13cbff(0x117)};document['addEventListener'](_0x13cbff(0x2a1),()=>{onAuthStateChanged(auth,async _0x25018d=>{const _0x31888c=_0x25ba;if(!_0x25018d){console['log'](_0x31888c(0x3e3)),window[_0x31888c(0x209)]['href']=_0x31888c(0x200);return;}console[_0x31888c(0x1c9)](_0x31888c(0x319),_0x25018d['uid']);const _0x51a7c8=new URLSearchParams(window['location']['search']);communityId=_0x51a7c8[_0x31888c(0x22f)]('id'),window[_0x31888c(0x12f)]=communityId;if(!communityId){console[_0x31888c(0x1c9)](_0x31888c(0x1cb)),window[_0x31888c(0x209)][_0x31888c(0x420)]=_0x31888c(0x1e2);return;}postCache['clear'](),loadedPostIds['clear'](),console['log']('Cleared\x20post\x20caches\x20for\x20community\x20'+communityId),await initializeUserSwapInfo();const _0x58d1ef=await getCommData();if(!_0x58d1ef){alert('Community\x20not\x20found!'),window['location'][_0x31888c(0x420)]='/index.html';return;}const _0x149bc2=_0x58d1ef[_0x31888c(0x20f)][_0x31888c(0x3c6)](_0x25018d[_0x31888c(0x424)]),_0x275416=_0x58d1ef[_0x31888c(0x2b6)]||[],_0x258644=_0x58d1ef['banStatus']||{},_0x49ff51=_0x275416[_0x31888c(0x3c6)](_0x25018d['uid'])&&(_0x258644[_0x25018d['uid']]===_0x31888c(0x21c)||!_0x258644[_0x25018d[_0x31888c(0x424)]]);if(_0x49ff51){let _0x3833a7=_0x31888c(0x33d),_0x1845e5=_0x58d1ef['banReasons']?.[_0x25018d[_0x31888c(0x424)]]||_0x31888c(0xc5);if(_0x58d1ef[_0x31888c(0x2cb)]){const _0x3f9d3c=await getDoc(doc(db,_0x31888c(0x3c4),_0x58d1ef[_0x31888c(0x2cb)]));_0x3f9d3c[_0x31888c(0x28f)]()&&_0x3f9d3c[_0x31888c(0x326)]()[_0x31888c(0x279)]&&(_0x3833a7=_0x3f9d3c[_0x31888c(0x326)]()[_0x31888c(0x279)]);}if(_0x3833a7==='No\x20admin\x20email\x20available'&&_0x58d1ef[_0x31888c(0x12b)]?.[_0x31888c(0x1b1)]>0x0){const _0x612adf=await getDoc(doc(db,'users',_0x58d1ef[_0x31888c(0x12b)][0x0]));_0x612adf['exists']()&&_0x612adf[_0x31888c(0x326)]()[_0x31888c(0x279)]&&(_0x3833a7=_0x612adf[_0x31888c(0x326)]()[_0x31888c(0x279)]);}_0x258644[_0x25018d[_0x31888c(0x424)]]===_0x31888c(0x21c)&&!_0x58d1ef[_0x31888c(0x2c7)]?.[_0x25018d[_0x31888c(0x424)]]&&(_0x1845e5=_0x31888c(0x1ba)+_0x3833a7+'\x20or\x20submit\x20an\x20appeal\x20below.');document[_0x31888c(0x21f)]('.community-page')[_0x31888c(0x2a8)]=_0x31888c(0x2d9)+_0x1845e5+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Think\x20this\x20is\x20a\x20mistake?\x20Send\x20an\x20appeal\x20below\x20or\x20contact\x20an\x20admin\x20at:\x20'+_0x3833a7+_0x31888c(0x328);const _0x430a63=document[_0x31888c(0xe7)](_0x31888c(0x3ec));_0x430a63['addEventListener'](_0x31888c(0x38d),async _0xbdef94=>{const _0x45a1a1=_0x31888c;_0xbdef94[_0x45a1a1(0x13f)]();const _0x2ce792=_0x430a63[_0x45a1a1(0x21f)](_0x45a1a1(0x205))['value'][_0x45a1a1(0x122)]();if(_0x2ce792){const _0xfac618=await getDoc(doc(db,_0x45a1a1(0x3c4),_0x25018d['uid'])),_0x2281fc=_0xfac618[_0x45a1a1(0x28f)]()?_0xfac618['data']():{'username':_0x45a1a1(0x1ee)+_0x25018d[_0x45a1a1(0x424)][_0x45a1a1(0x3ea)](0x0,0x8)};await addDoc(collection(db,_0x45a1a1(0x162),communityId,_0x45a1a1(0x1c6)),{'userId':_0x25018d[_0x45a1a1(0x424)],'username':_0x2281fc[_0x45a1a1(0x1f1)],'message':_0x2ce792,'timestamp':new Date()}),alert(_0x45a1a1(0x3e8)),_0x430a63[_0x45a1a1(0x21f)](_0x45a1a1(0x205))[_0x45a1a1(0x2d0)]=!![],_0x430a63[_0x45a1a1(0x21f)](_0x45a1a1(0x1b6))[_0x45a1a1(0x2d0)]=!![],_0x430a63[_0x45a1a1(0x21f)](_0x45a1a1(0x1b6))[_0x45a1a1(0x37d)]=_0x45a1a1(0x251);}});return;}else{if(!_0x149bc2){document[_0x31888c(0x21f)]('.community-page')[_0x31888c(0x2a8)]=_0x31888c(0x28a)+communityId+_0x31888c(0x417),document['getElementById'](_0x31888c(0xca))[_0x31888c(0xaf)](_0x31888c(0xb8),_0x2eb83e=>{const _0x446221=_0x31888c;_0x2eb83e[_0x446221(0x13f)](),navigator['clipboard'][_0x446221(0xdb)](communityId)[_0x446221(0x261)](()=>{alert('Community\x20ID\x20copied\x20to\x20clipboard!\x20Head\x20back\x20to\x20join.'),setTimeout(()=>{const _0x3e7f2c=_0x25ba;window[_0x3e7f2c(0x209)][_0x3e7f2c(0x420)]=_0x3e7f2c(0xb2);},0x1f4);})[_0x446221(0xa9)](_0x254edd=>{const _0x1e760b=_0x446221;console['error'](_0x1e760b(0x178),_0x254edd),alert(_0x1e760b(0x98)+communityId);});});return;}}document[_0x31888c(0xaf)](_0x31888c(0xed),()=>{const _0x11985b=_0x31888c;document[_0x11985b(0x1e4)]==='visible'?(console[_0x11985b(0x1c9)]('User\x20is\x20back\x20on\x20screen,\x20resuming\x20checks.'),updateNotificationBadge(_0x25018d[_0x11985b(0x424)]),updateChatBadge(_0x25018d[_0x11985b(0x424)])):console[_0x11985b(0x1c9)](_0x11985b(0x3b1));}),document[_0x31888c(0xe7)](_0x31888c(0x107))[_0x31888c(0x37d)]=_0x58d1ef[_0x31888c(0x86)];const _0x3cc614=_0x58d1ef['createdAt']?new Date(_0x58d1ef[_0x31888c(0x180)]['toDate']())['toLocaleString'](_0x31888c(0x40b),{'month':'long','day':'numeric','year':'numeric'}):_0x31888c(0x1dd);document['getElementById'](_0x31888c(0x180))['textContent']=_0x3cc614;const _0x4d6405=await fetchUserData(_0x58d1ef['creatorId']);document[_0x31888c(0xe7)](_0x31888c(0x14a))[_0x31888c(0x37d)]=_0x4d6405[_0x31888c(0x86)]||_0x31888c(0x19a),document[_0x31888c(0xe7)](_0x31888c(0x14a))[_0x31888c(0xaf)]('click',()=>viewProfile(_0x58d1ef['creatorId'])),document[_0x31888c(0xe7)](_0x31888c(0x12f))[_0x31888c(0x37d)]=_0x31888c(0x217)+communityId,document[_0x31888c(0xe7)](_0x31888c(0x362))[_0x31888c(0x37d)]=_0x58d1ef[_0x31888c(0x1c3)]||_0x58d1ef[_0x31888c(0x20f)][_0x31888c(0x1b1)],document[_0x31888c(0xe7)](_0x31888c(0x2b6))[_0x31888c(0x37d)]=(_0x58d1ef[_0x31888c(0x2b6)]||[])[_0x31888c(0x1b1)];const _0x3ab009=document['getElementById']('communityActions');let _0x5b1fc7=0x0;if(_0x25018d[_0x31888c(0x424)]){const _0x5cb84f=query(collection(db,_0x31888c(0x1ab)),where(_0x31888c(0x3ab),'==',_0x25018d['uid']),where('status','==',_0x31888c(0xfd)));try{const _0x2080e6=await getDocs(_0x5cb84f);_0x5b1fc7=_0x2080e6[_0x31888c(0x11d)];}catch(_0x3c7133){console[_0x31888c(0x40a)](_0x31888c(0xdd),_0x3c7133);}}else console[_0x31888c(0x40a)](_0x31888c(0x3f1));_0x3ab009[_0x31888c(0x2a8)]=_0x31888c(0x1c1)+(_0x58d1ef[_0x31888c(0x12b)]&&_0x58d1ef[_0x31888c(0x12b)][_0x31888c(0x3c6)](_0x25018d[_0x31888c(0x424)])||_0x58d1ef[_0x31888c(0x2cb)]===_0x25018d[_0x31888c(0x424)]?'<h3>Admin:</h3>':'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x58d1ef[_0x31888c(0x2cb)]===_0x25018d[_0x31888c(0x424)]?_0x31888c(0xf3):'')+_0x31888c(0x1f5)+(_0x58d1ef[_0x31888c(0x20f)][_0x31888c(0x3c6)](_0x25018d[_0x31888c(0x424)])&&_0x58d1ef[_0x31888c(0x2cb)]!==_0x25018d[_0x31888c(0x424)]?_0x31888c(0xcd):'')+_0x31888c(0x1f5)+(_0x58d1ef[_0x31888c(0x12b)]&&_0x58d1ef['admins']['includes'](_0x25018d['uid'])||_0x58d1ef[_0x31888c(0x2cb)]===_0x25018d[_0x31888c(0x424)]?_0x31888c(0xe1):'')+'\x0a\x20\x20\x20\x20\x20\x20'+(_0x58d1ef[_0x31888c(0x12b)]&&_0x58d1ef[_0x31888c(0x12b)][_0x31888c(0x3c6)](_0x25018d['uid'])||_0x58d1ef['creatorId']===_0x25018d[_0x31888c(0x424)]?_0x31888c(0x1a2):'')+_0x31888c(0x347)+(_0x5b1fc7>0x0?_0x31888c(0x109)+_0x5b1fc7+_0x31888c(0x220):'')+_0x31888c(0x1ca),await new Promise(_0x3dbf5f=>setTimeout(_0x3dbf5f,0x0));_0x25018d[_0x31888c(0x424)]?await updateProfileRequestsUI(_0x25018d[_0x31888c(0x424)]):console[_0x31888c(0x40a)](_0x31888c(0x34b));const _0x18bf1b=document[_0x31888c(0xe7)](_0x31888c(0x2de)),_0x39c38e=document[_0x31888c(0xe7)](_0x31888c(0x26f)),_0x2e4ecb=document[_0x31888c(0xe7)](_0x31888c(0x25b)),_0x3b906a=document[_0x31888c(0xe7)](_0x31888c(0x151)),_0x79c267=document[_0x31888c(0xe7)]('carouselPrevBtn'),_0x5551f=document[_0x31888c(0xe7)]('carouselNextBtn'),_0x536d2f=document[_0x31888c(0xe7)]('copyCommunityIdBtn'),_0x5556e0=document['getElementById']('createPostBtn'),_0x409bc0=document[_0x31888c(0xe7)]('viewMembersBtn'),_0x4743db=document['getElementById']('viewBannedBtn'),_0x1d1e7e=document[_0x31888c(0xe7)](_0x31888c(0x15f)),_0x6ef38c=document[_0x31888c(0xe7)]('leaveCommunityBtn'),_0x1a8e44=document['getElementById'](_0x31888c(0x330)),_0x580989=document[_0x31888c(0xe7)](_0x31888c(0x299)),_0x290667=document['getElementById'](_0x31888c(0x1a0)),_0x1d7e63=document[_0x31888c(0xe7)](_0x31888c(0x35a)),_0x446e26=document['getElementById']('closeProfileViewRequestsBtn'),_0x562faf=document['getElementById'](_0x31888c(0x2f3)),_0x89f3ec=document[_0x31888c(0xe7)]('closeNotificationsBtn'),_0x5b3fa6=document['getElementById'](_0x31888c(0x376)),_0x55a70c=document['getElementById'](_0x31888c(0x3bf)),_0x105bcc=document[_0x31888c(0xe7)]('editNameBtn'),_0x3b6275=document[_0x31888c(0xe7)](_0x31888c(0x1c8)),_0x2fba41=document[_0x31888c(0xe7)](_0x31888c(0x38e)),_0x9d2c4c=document['getElementById']('viewChatsBtn'),_0x1837cf=document['getElementById'](_0x31888c(0x2de)),_0x17c3a1=document['getElementById']('pasteSearchBtn'),_0x128104=document[_0x31888c(0xe7)]('clearSearchBtn'),_0x38c72f=document['getElementById'](_0x31888c(0x84));_0x18bf1b&&_0x18bf1b[_0x31888c(0xaf)](_0x31888c(0x19c),debounce(_0x40bac9=>{const _0x3ad37b=_0x31888c;searchPostsById(_0x40bac9[_0x3ad37b(0x275)][_0x3ad37b(0x3e2)]);},0x12c));_0x17c3a1[_0x31888c(0xaf)](_0x31888c(0xb8),async()=>{const _0x3c9548=_0x31888c;try{const _0x42bbd0=await navigator[_0x3c9548(0x1d9)][_0x3c9548(0x366)]();_0x1837cf[_0x3c9548(0x3e2)]=_0x42bbd0,searchPostsById(_0x42bbd0);}catch(_0x528725){console[_0x3c9548(0x40a)](_0x3c9548(0x350),_0x528725),alert(_0x3c9548(0xe9));}}),_0x128104['addEventListener'](_0x31888c(0xb8),()=>{const _0x107e1a=_0x31888c;_0x1837cf[_0x107e1a(0x3e2)]='',searchPostsById('');});_0x39c38e&&_0x39c38e[_0x31888c(0xaf)](_0x31888c(0xe4),()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x2e4ecb&&_0x2e4ecb[_0x31888c(0xaf)](_0x31888c(0xe4),()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});_0x3b906a&&_0x3b906a[_0x31888c(0xaf)]('change',()=>{loadPosts(communityId,!![]),carouselIndex=0x0,loadCarouselPosts(communityId);});if(_0x79c267)_0x79c267[_0x31888c(0xaf)](_0x31888c(0xb8),()=>slideCarousel(-0x1));if(_0x5551f)_0x5551f[_0x31888c(0xaf)](_0x31888c(0xb8),()=>slideCarousel(0x1));if(_0x536d2f)_0x536d2f[_0x31888c(0xaf)]('click',copyCommunityId);if(_0x5556e0)_0x5556e0[_0x31888c(0xaf)](_0x31888c(0xb8),createPost);if(_0x409bc0)_0x409bc0['addEventListener'](_0x31888c(0xb8),()=>viewMembers(communityId));if(_0x4743db)_0x4743db['addEventListener']('click',()=>viewBannedUsers(communityId));if(_0x1d1e7e)_0x1d1e7e[_0x31888c(0xaf)](_0x31888c(0xb8),()=>deleteCommunity(communityId));if(_0x6ef38c)_0x6ef38c[_0x31888c(0xaf)](_0x31888c(0xb8),()=>leaveCommunity(communityId));if(_0x1a8e44)_0x1a8e44[_0x31888c(0xaf)](_0x31888c(0xb8),()=>viewProfileViewRequests(_0x25018d[_0x31888c(0x424)]));if(_0x580989)_0x580989['addEventListener'](_0x31888c(0xb8),()=>closeModal(_0x31888c(0x91)));if(_0x290667)_0x290667['addEventListener']('click',()=>closeModal(_0x31888c(0xba)));if(_0x1d7e63)_0x1d7e63['addEventListener']('click',()=>closeModal('viewBannedModal'));if(_0x446e26)_0x446e26[_0x31888c(0xaf)](_0x31888c(0xb8),()=>closeModal(_0x31888c(0x1d7)));if(_0x562faf)_0x562faf[_0x31888c(0xaf)](_0x31888c(0xb8),()=>openNotificationsModal(_0x25018d[_0x31888c(0x424)]));if(_0x89f3ec)_0x89f3ec[_0x31888c(0xaf)](_0x31888c(0xb8),()=>closeModal('notificationsModal'));if(_0x5b3fa6)_0x5b3fa6['addEventListener'](_0x31888c(0xb8),clearNotifications);if(_0x55a70c)_0x55a70c[_0x31888c(0xaf)](_0x31888c(0xb8),()=>loadPosts(communityId,!![]));if(_0x105bcc)_0x105bcc['addEventListener'](_0x31888c(0xb8),()=>editCommunityName(communityId));if(_0x3b6275)_0x3b6275[_0x31888c(0xaf)](_0x31888c(0xb8),()=>viewCommunities(_0x25018d['uid']));if(_0x2fba41)_0x2fba41[_0x31888c(0xaf)](_0x31888c(0xb8),()=>viewSavedPosts(_0x25018d['uid']));_0x9d2c4c&&(_0x9d2c4c[_0x31888c(0xf0)](_0x31888c(0xb8),_0x218f2e),_0x9d2c4c['addEventListener'](_0x31888c(0xb8),_0x218f2e));_0x38c72f&&_0x38c72f[_0x31888c(0xaf)]('click',()=>viewFollowers(_0x25018d[_0x31888c(0x424)]));async function _0x218f2e(){const _0x15bfe5=_0x31888c;await updateChatBadge(_0x25018d[_0x15bfe5(0x424)],!![]),await window[_0x15bfe5(0x304)](communityId),await updateChatBadge(_0x25018d[_0x15bfe5(0x424)]);}setupLocationAutocomplete(),setupCommunitySelection(),loadYourPosts(_0x25018d[_0x31888c(0x424)]),loadPosts(communityId,![]),loadCarouselPosts(communityId),updateNotificationBadge(_0x25018d[_0x31888c(0x424)]),await updateChatBadge(_0x25018d['uid']),await loadAdminReportSummary(_0x25018d[_0x31888c(0x424)]);});});async function initializeUserSwapInfo(){const _0x4f2b05=_0x13cbff,_0x421411=auth[_0x4f2b05(0xb1)];if(!_0x421411)return;if(!communityId){console[_0x4f2b05(0x40a)](_0x4f2b05(0x3d2));return;}const _0x38cfa6=doc(db,'users',_0x421411[_0x4f2b05(0x424)]);let _0x266f87=await getDoc(_0x38cfa6),_0x3cd142;console[_0x4f2b05(0x1c9)](_0x4f2b05(0x276)+_0x421411[_0x4f2b05(0x424)]);if(!_0x266f87['exists']())_0x3cd142={'name':_0x421411[_0x4f2b05(0x39d)]||_0x4f2b05(0x423),'username':'user_'+_0x421411['uid']['slice'](0x0,0x8),'profilePhoto':_0x421411[_0x4f2b05(0x166)]||null,'email':_0x421411['email']||null,'city':null,'phone':null,'communityIds':[communityId],'swaps':0x0,'createdAt':new Date()},console[_0x4f2b05(0x1c9)](_0x4f2b05(0x1da),_0x3cd142),await setDoc(_0x38cfa6,_0x3cd142),console[_0x4f2b05(0x1c9)](_0x4f2b05(0x31f)+_0x3cd142[_0x4f2b05(0x1f1)]);else{_0x3cd142=_0x266f87['data'](),console[_0x4f2b05(0x1c9)](_0x4f2b05(0x263),_0x3cd142);typeof _0x3cd142[_0x4f2b05(0x1b7)]===_0x4f2b05(0x411)&&(console[_0x4f2b05(0x1c9)]('Swaps\x20field\x20undefined,\x20setting\x20to\x200'),await updateDoc(_0x38cfa6,{'swaps':0x0}),_0x3cd142[_0x4f2b05(0x1b7)]=0x0);!Array[_0x4f2b05(0x271)](_0x3cd142[_0x4f2b05(0x1b9)])&&(console[_0x4f2b05(0x1c9)](_0x4f2b05(0x1bd)),_0x3cd142[_0x4f2b05(0x1b9)]=[],await updateDoc(_0x38cfa6,{'communityIds':_0x3cd142[_0x4f2b05(0x1b9)]}));if(!_0x3cd142[_0x4f2b05(0x1b9)][_0x4f2b05(0x3c6)](communityId)){console[_0x4f2b05(0x1c9)](_0x4f2b05(0x283)+communityId+_0x4f2b05(0x20a)),_0x3cd142['communityIds'][_0x4f2b05(0x13d)](communityId);try{console[_0x4f2b05(0x1c9)](_0x4f2b05(0x22e),_0x3cd142[_0x4f2b05(0x1b9)]),await updateDoc(_0x38cfa6,{'communityIds':_0x3cd142[_0x4f2b05(0x1b9)]});}catch(_0x4f6e49){console['error'](_0x4f2b05(0x15a),_0x4f6e49),console[_0x4f2b05(0x1c9)]('Current\x20userData\x20state:',_0x3cd142);throw _0x4f6e49;}}}const _0x3c26f9=document[_0x4f2b05(0xe7)](_0x4f2b05(0x39b)),_0x36233f=document[_0x4f2b05(0xe7)](_0x4f2b05(0x3fd));!_0x3cd142['username']&&(console[_0x4f2b05(0x40a)](_0x4f2b05(0x29d)),_0x3cd142[_0x4f2b05(0x1f1)]=_0x4f2b05(0x1ee)+_0x421411[_0x4f2b05(0x424)][_0x4f2b05(0x3ea)](0x0,0x8),await updateDoc(_0x38cfa6,{'username':_0x3cd142[_0x4f2b05(0x1f1)]})),_0x3c26f9['textContent']=_0x3cd142[_0x4f2b05(0x1f1)],_0x36233f[_0x4f2b05(0x37d)]=_0x3cd142[_0x4f2b05(0x1b7)],_0x3c26f9['addEventListener']('click',()=>{const _0x45c635=_0x4f2b05;navigator[_0x45c635(0x1d9)][_0x45c635(0xdb)](_0x3cd142[_0x45c635(0x1f1)])[_0x45c635(0x261)](()=>alert(_0x45c635(0x2a2)))[_0x45c635(0xa9)](_0x4cda7b=>console[_0x45c635(0x40a)](_0x45c635(0x323),_0x4cda7b));});}async function updateChatBadge(_0x24435d,_0x27e854=![]){const _0x35d512=_0x13cbff,_0x3bb698=query(collection(db,_0x35d512(0x3c4),_0x24435d,_0x35d512(0x317)),where(_0x35d512(0x11c),'==',!![])),_0x2d964e=await getDocs(_0x3bb698),_0x551985=document[_0x35d512(0xe7)](_0x35d512(0x230));if(_0x27e854&&_0x2d964e[_0x35d512(0x11d)]>0x0){const _0x3f25a1=writeBatch(db);_0x2d964e['docs']['forEach'](_0x52dca0=>{const _0x59ca97=_0x35d512;_0x3f25a1[_0x59ca97(0x204)](_0x52dca0[_0x59ca97(0x3ee)],{'hasUnread':![]});}),await _0x3f25a1['commit'](),console[_0x35d512(0x1c9)]('Cleared\x20unread\x20flags\x20for\x20chats:',_0x2d964e[_0x35d512(0x11d)]);}const _0x2691c3=_0x27e854?![]:_0x2d964e[_0x35d512(0x11d)]>0x0;_0x551985&&(_0x551985[_0x35d512(0x2a8)]=_0x35d512(0x388)+(_0x2691c3?_0x35d512(0x3a2):''));}async function updateProfileRequestsUI(_0x5cb665){const _0x1dfeb7=_0x13cbff,_0x5030eb=collection(db,'users',_0x5cb665,_0x1dfeb7(0x1ab)),_0x77a45d=query(_0x5030eb,where(_0x1dfeb7(0x3a6),'==',_0x1dfeb7(0xfd))),_0x55f74c=await getDocs(_0x77a45d),_0x45f649=_0x55f74c['size'],_0x36baf8=document[_0x1dfeb7(0xe7)](_0x1dfeb7(0x3a4));_0x36baf8?_0x36baf8[_0x1dfeb7(0x2a8)]=_0x45f649>0x0?'<button\x20id=\x22viewRequestsBtn\x22>Profile\x20Requests\x20('+_0x45f649+_0x1dfeb7(0xbe):'':console[_0x1dfeb7(0x40a)]('profileRequestsBtn\x20not\x20found\x20in\x20DOM');document[_0x1dfeb7(0xe7)](_0x1dfeb7(0x33f))&&document[_0x1dfeb7(0xe7)](_0x1dfeb7(0x33f))[_0x1dfeb7(0xaf)](_0x1dfeb7(0xb8),()=>viewProfileViewRequests(_0x5cb665));const _0x5534b1=document[_0x1dfeb7(0xe7)](_0x1dfeb7(0x1b8));if(_0x5534b1){const _0x5ac295=query(_0x5030eb,where(_0x1dfeb7(0x3a6),'==',_0x1dfeb7(0xfd))),_0x1ca5fc=await getDocs(_0x5ac295),_0x3f9a1e=_0x1ca5fc['size'],_0x22d1db=_0x5534b1[_0x1dfeb7(0x21f)]('#viewProfileViewRequestsBtn');_0x22d1db&&(_0x22d1db['innerHTML']=_0x1dfeb7(0x344)+(_0x3f9a1e>0x0?_0x1dfeb7(0x109)+_0x3f9a1e+_0x1dfeb7(0x220):''));}}function closeModal(_0x34075b){const _0x2a32cd=_0x13cbff,_0x2e594e=document[_0x2a32cd(0xe7)](_0x34075b);_0x2e594e['classList'][_0x2a32cd(0x2ce)](_0x2a32cd(0x1df)),_0x2e594e[_0x2a32cd(0x31a)][_0x2a32cd(0x10f)]=_0x2a32cd(0x2fe);const _0x4a6cbe=Array[_0x2a32cd(0x3bc)](document[_0x2a32cd(0xf1)](_0x2a32cd(0x3b6)));if(_0x4a6cbe[_0x2a32cd(0x1b1)]>0x0)_0x4a6cbe[_0x4a6cbe[_0x2a32cd(0x1b1)]-0x1][_0x2a32cd(0x31a)][_0x2a32cd(0x10f)]=_0x2a32cd(0x345);document[_0x2a32cd(0xf1)](_0x2a32cd(0x111))[_0x2a32cd(0x235)](_0x201548=>_0x201548['classList'][_0x2a32cd(0x2ce)](_0x2a32cd(0x1df)));}function copyCommunityId(){const _0x30d20b=_0x13cbff;navigator[_0x30d20b(0x1d9)][_0x30d20b(0xdb)](communityId)[_0x30d20b(0x261)](()=>alert(_0x30d20b(0x1e5)))[_0x30d20b(0xa9)](_0x3ed9b6=>console[_0x30d20b(0x40a)]('Failed\x20to\x20copy:',_0x3ed9b6));}function copyPostId(_0x2cd8e9){const _0x2ae229=_0x13cbff;navigator['clipboard'][_0x2ae229(0xdb)](_0x2cd8e9)['then'](()=>alert(_0x2ae229(0x3af)))['catch'](_0x396db4=>console[_0x2ae229(0x40a)](_0x2ae229(0x119),_0x396db4));}async function deleteCommunity(_0x1c607f){const _0x36a1ae=_0x13cbff;if(!confirm(_0x36a1ae(0x25c)))return;const _0x3c759f=doc(db,_0x36a1ae(0x162),_0x1c607f),_0x5f3566=[_0x36a1ae(0x20f),'posts','banAppeals',_0x36a1ae(0x3d4)],_0x3563b0=document['getElementById'](_0x36a1ae(0x22c)),_0x450b53=document[_0x36a1ae(0xd5)],_0x411230=0x5;let _0x12d0ed=0x0;function _0x28671b(_0x2871f1,_0x3b8fd9=_0x36a1ae(0x155)){const _0x2fed70=_0x36a1ae;_0x3563b0&&(_0x3563b0['textContent']=_0x2871f1,_0x3563b0[_0x2fed70(0x125)]='delete-status\x20'+(_0x3b8fd9==='in-progress'?_0x2fed70(0x23a):_0x3b8fd9),_0x3563b0[_0x2fed70(0x31a)][_0x2fed70(0x10f)]=_0x2fed70(0x137)),_0x3b8fd9===_0x2fed70(0x155)?_0x450b53[_0x2fed70(0x97)][_0x2fed70(0x2ce)](_0x2fed70(0x23a)):_0x450b53[_0x2fed70(0x97)][_0x2fed70(0x185)]('deleting'),console[_0x2fed70(0x1c9)](_0x2fed70(0x172)+_0x2871f1);}_0x28671b('Initiating\x20community\x20deletion\x20process...\x20Please\x20wait.',_0x36a1ae(0x155));try{console[_0x36a1ae(0x1c9)](_0x36a1ae(0x3d3),db[_0x36a1ae(0x1e3)]()),console[_0x36a1ae(0x1c9)]('[DeleteCommunity]\x20Community\x20reference\x20path:',_0x3c759f[_0x36a1ae(0x3ac)]);const _0x27fb5a=await getDoc(_0x3c759f);console['log'](_0x36a1ae(0x177),_0x27fb5a[_0x36a1ae(0x28f)]());if(_0x27fb5a['exists']())console[_0x36a1ae(0x1c9)](_0x36a1ae(0x416),_0x27fb5a[_0x36a1ae(0x326)]());else{_0x28671b(_0x36a1ae(0x228),_0x36a1ae(0x1a7));return;}async function _0x3502b5(){const _0xae587b=_0x36a1ae,_0x9ece3f=Date[_0xae587b(0x334)]();console['log'](_0xae587b(0x325),new Date()['toISOString']()),await runTransaction(db,async _0x1a1a1e=>{const _0x2bc614=_0xae587b,_0x3042b8=await _0x1a1a1e['get'](_0x3c759f);if(!_0x3042b8[_0x2bc614(0x28f)]()){console[_0x2bc614(0x1c9)](_0x2bc614(0x2e6));return;}for(const _0x479541 of _0x5f3566){console[_0x2bc614(0x1c9)](_0x2bc614(0x352)+_0x479541);const _0x3502d3=collection(_0x3c759f,_0x479541),_0x21d8d2=await getDocs(_0x3502d3);console[_0x2bc614(0x1c9)]('[DeleteCommunity]\x20'+_0x479541+'\x20contains\x20'+_0x21d8d2['size']+_0x2bc614(0x3cd)),_0x21d8d2[_0x2bc614(0x235)](_0x531b38=>{const _0x3ba809=_0x2bc614;_0x1a1a1e[_0x3ba809(0x2f0)](_0x531b38['ref']);}),console[_0x2bc614(0x1c9)]('[DeleteCommunity]\x20Queued\x20'+_0x21d8d2[_0x2bc614(0x11d)]+_0x2bc614(0x186)+_0x479541+'\x20for\x20deletion');}_0x1a1a1e['delete'](_0x3c759f),console[_0x2bc614(0x1c9)](_0x2bc614(0x3fe));}),console['log'](_0xae587b(0x127),(Date[_0xae587b(0x334)]()-_0x9ece3f)/0x3e8,_0xae587b(0x37e));}_0x28671b(_0x36a1ae(0x1d0)),await _0x3502b5();while(_0x12d0ed<_0x411230){const _0x4221bb=await getDoc(_0x3c759f);console['log'](_0x36a1ae(0x296)+(_0x12d0ed+0x1)+_0x36a1ae(0x2b1),_0x4221bb[_0x36a1ae(0x28f)]());!_0x4221bb[_0x36a1ae(0x28f)]()?console['log'](_0x36a1ae(0xcc)):console[_0x36a1ae(0x1c9)](_0x36a1ae(0x1eb),_0x4221bb[_0x36a1ae(0x326)]());await new Promise(_0x328bc5=>setTimeout(_0x328bc5,0x7d0));const _0x46208d=await getDoc(_0x3c759f);console['log'](_0x36a1ae(0x296)+(_0x12d0ed+0x1)+_0x36a1ae(0x2d1),_0x46208d['exists']());if(!_0x46208d[_0x36a1ae(0x28f)]()){console['log'](_0x36a1ae(0x240));break;}else console[_0x36a1ae(0x40a)](_0x36a1ae(0x378),_0x46208d[_0x36a1ae(0x326)]()),_0x12d0ed++,_0x28671b('Deletion\x20incomplete\x20-\x20Retrying\x20('+_0x12d0ed+'/'+_0x411230+_0x36a1ae(0x105)),console[_0x36a1ae(0x1c9)](_0x36a1ae(0x2b4)+_0x12d0ed+_0x36a1ae(0x160),new Date()[_0x36a1ae(0x316)]()),await _0x3502b5();}if(_0x12d0ed>=_0x411230)throw new Error(_0x36a1ae(0x245));resetCommDataCache(),console['log'](_0x36a1ae(0x16c)),_0x28671b(_0x36a1ae(0x2bf)+_0x1c607f+_0x36a1ae(0xea),_0x36a1ae(0x1a7)),setTimeout(()=>{const _0x3f0c8e=_0x36a1ae;window[_0x3f0c8e(0x209)][_0x3f0c8e(0x420)]='./start.html';},0x7d0);}catch(_0x3629a3){console['error']('[DeleteCommunity]\x20Deletion\x20process\x20failed:',_0x3629a3),_0x28671b('Error:\x20'+_0x3629a3[_0x36a1ae(0x3a8)],'error'),alert(_0x36a1ae(0x249));}}async function leaveCommunity(_0x16a881){const _0xbed9b1=_0x13cbff;if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20leave\x20this\x20community?'))return;const _0x5d67ec=auth['currentUser'];if(!_0x5d67ec){console[_0xbed9b1(0x40a)](_0xbed9b1(0x1ae)),alert(_0xbed9b1(0x1d5));return;}const _0x29af19=doc(db,_0xbed9b1(0x3c4),_0x5d67ec[_0xbed9b1(0x424)]),_0xc194f6=doc(db,_0xbed9b1(0x162),_0x16a881,_0xbed9b1(0x20f),_0x5d67ec[_0xbed9b1(0x424)]);try{const _0x21019c=writeBatch(db);_0x21019c['delete'](_0xc194f6),console[_0xbed9b1(0x1c9)](_0xbed9b1(0x364)+_0x5d67ec[_0xbed9b1(0x424)]+_0xbed9b1(0x402)+_0x16a881);const _0x268079=await getDoc(_0x29af19);if(!_0x268079[_0xbed9b1(0x28f)]())throw new Error('User\x20document\x20not\x20found\x20in\x20Firestore');const _0x1367f3=_0x268079['data']();let _0x2c1594=_0x1367f3[_0xbed9b1(0x1b9)]||[];console[_0xbed9b1(0x1c9)](_0xbed9b1(0x337),_0x2c1594);const _0x508cdc=_0x2c1594[_0xbed9b1(0x369)](_0x5ab660=>_0x5ab660!==_0x16a881);_0x2c1594[_0xbed9b1(0x1b1)]===_0x508cdc[_0xbed9b1(0x1b1)]?console[_0xbed9b1(0x3b4)](_0xbed9b1(0x2c1)+_0x16a881+_0xbed9b1(0x30f)):(console[_0xbed9b1(0x1c9)]('Updated\x20communityIds\x20after\x20leaving:',_0x508cdc),_0x21019c[_0xbed9b1(0x204)](_0x29af19,{'communityIds':_0x508cdc}));await _0x21019c[_0xbed9b1(0x165)](),console[_0xbed9b1(0x1c9)](_0xbed9b1(0x288)+_0x16a881+_0xbed9b1(0x87),_0x508cdc);const _0xceff9b=await getDoc(_0x29af19),_0xb696a2=_0xceff9b[_0xbed9b1(0x326)]()['communityIds']||[];console[_0xbed9b1(0x1c9)](_0xbed9b1(0x222),_0xb696a2);if(!_0xb696a2[_0xbed9b1(0x3c6)](_0x16a881))console[_0xbed9b1(0x1c9)](_0xbed9b1(0xe5)+_0x16a881+_0xbed9b1(0x227));else{console[_0xbed9b1(0x40a)](_0xbed9b1(0x1aa)+_0x16a881+_0xbed9b1(0x1f7));throw new Error(_0xbed9b1(0x294));}resetCommDataCache(),alert(_0xbed9b1(0x2b8)),window[_0xbed9b1(0x209)][_0xbed9b1(0x420)]=_0xbed9b1(0xb2);}catch(_0xe96e7d){console[_0xbed9b1(0x40a)]('Error\x20leaving\x20community:',_0xe96e7d),alert('Failed\x20to\x20leave\x20the\x20community:\x20'+_0xe96e7d[_0xbed9b1(0x3a8)]+_0xbed9b1(0x2f2));}}async function fetchCurrentUserData(){const _0x1a68f3=_0x13cbff,_0x314b41=auth[_0x1a68f3(0xb1)],_0x10cb96=_0x1a68f3(0x1d6);let _0x52db87=JSON['parse'](sessionStorage['getItem'](_0x10cb96));if(_0x52db87&&_0x52db87[_0x1a68f3(0x424)]===_0x314b41[_0x1a68f3(0x424)])return _0x52db87;const _0x1eef49=doc(db,'users',_0x314b41['uid']),_0x99cbb0=await getDoc(_0x1eef49);if(!_0x99cbb0[_0x1a68f3(0x28f)]()){console['log'](_0x1a68f3(0x10d)+_0x314b41[_0x1a68f3(0x424)]);const _0x38c401={'name':'Unknown','username':_0x1a68f3(0x2e4),'profilePhoto':null,'email':null,'city':null,'phone':null,'uid':_0x314b41[_0x1a68f3(0x424)]};return sessionStorage[_0x1a68f3(0x392)](_0x10cb96,JSON['stringify'](_0x38c401)),_0x38c401;}const _0x5f094d=_0x99cbb0['data'](),_0x4279ce={'name':_0x5f094d[_0x1a68f3(0x86)]||'Unknown','username':_0x5f094d['username']||'unknown','profilePhoto':_0x5f094d[_0x1a68f3(0xb3)]||null,'email':_0x5f094d[_0x1a68f3(0x279)]||null,'city':_0x5f094d[_0x1a68f3(0x39f)]||null,'phone':_0x5f094d[_0x1a68f3(0x1a9)]||null,'uid':_0x314b41[_0x1a68f3(0x424)]};return sessionStorage['setItem'](_0x10cb96,JSON[_0x1a68f3(0x229)](_0x4279ce)),_0x4279ce;}async function fetchUserData(_0x4c0ef4){const _0x47a45a=_0x13cbff;if(!_0x4c0ef4)return{'name':'Unknown','username':_0x47a45a(0x2e4),'profilePhoto':_0x47a45a(0x1cf),'uid':_0x47a45a(0x2e4)};const _0x74fb66=Array['isArray'](_0x4c0ef4)?_0x4c0ef4:[_0x4c0ef4],_0x498929=_0x74fb66[_0x47a45a(0x369)](_0x184f8c=>!userDataCache[_0x184f8c]||userDataCache[_0x184f8c]['name']===_0x47a45a(0x19a));if(_0x498929['length']>0x0){const _0x595a27=[];for(let _0x4afc60=0x0;_0x4afc60<_0x498929[_0x47a45a(0x1b1)];_0x4afc60+=0xa){_0x595a27['push'](_0x498929[_0x47a45a(0x3ea)](_0x4afc60,_0x4afc60+0xa));}for(const _0x469ace of _0x595a27){const _0x3cb52d=query(collection(db,'users'),where(_0x47a45a(0x129),'in',_0x469ace)),_0x5cb74b=await getDocs(_0x3cb52d);_0x5cb74b[_0x47a45a(0x235)](_0x12eddb=>{const _0x283f20=_0x47a45a,_0x11fac2=_0x12eddb['data']();userDataCache[_0x12eddb['id']]={'name':_0x11fac2[_0x283f20(0x86)]||_0x283f20(0x19a),'username':_0x11fac2[_0x283f20(0x1f1)]||_0x283f20(0x2e4),'profilePhoto':_0x11fac2[_0x283f20(0xb3)]||_0x283f20(0x1cf),'email':_0x11fac2[_0x283f20(0x279)]||null,'city':_0x11fac2['city']||null,'phone':_0x11fac2[_0x283f20(0x1a9)]||null,'uid':_0x12eddb['id'],'swaps':_0x11fac2['swaps']||0x0},userDataCache[_0x283f20(0x41b)+_0x11fac2[_0x283f20(0x1f1)]]=userDataCache[_0x12eddb['id']];}),_0x469ace[_0x47a45a(0x235)](_0x40ec05=>{const _0x2f73ce=_0x47a45a;!userDataCache[_0x40ec05]&&(userDataCache[_0x40ec05]={'name':_0x2f73ce(0x19a),'username':_0x2f73ce(0x2e4),'profilePhoto':_0x2f73ce(0x1cf),'uid':_0x40ec05});});}}return _0x74fb66['length']===0x1?userDataCache[_0x74fb66[0x0]]:_0x74fb66[_0x47a45a(0x10a)](_0xe6eba1=>userDataCache[_0xe6eba1]);}async function getPostReportStatus(_0x5bbebb){const _0x5c3500=_0x13cbff,_0x4ed012=collection(db,_0x5c3500(0x162),communityId,'postReports'),_0x336887=query(_0x4ed012,where(_0x5c3500(0x35f),'==',_0x5bbebb)),_0x15f12f=await getDocs(_0x336887),_0x11d7b3=_0x15f12f[_0x5c3500(0x11d)],_0x3b6b66=await getCommData(),_0x451dcb=auth['currentUser'],_0x567edb=_0x3b6b66[_0x5c3500(0x12b)]?.['includes'](_0x451dcb[_0x5c3500(0x424)])||_0x3b6b66['creatorId']===_0x451dcb['uid'],_0x55c337=doc(db,_0x5c3500(0x162),communityId,_0x5c3500(0x1de),_0x5bbebb),_0x5a023a=await getDoc(_0x55c337);if(!_0x5a023a[_0x5c3500(0x28f)]())return console[_0x5c3500(0x1c9)](_0x5c3500(0x37b)+_0x5bbebb+_0x5c3500(0x3db)),{'reportCount':_0x11d7b3,'isHidden':_0x11d7b3>=0x2&&!_0x567edb,'isAdmin':_0x567edb,'isOwner':![]};const _0x3754bb=_0x5a023a[_0x5c3500(0x326)](),_0x52b823=_0x3754bb[_0x5c3500(0x3b8)]===_0x451dcb[_0x5c3500(0x424)];return{'reportCount':_0x11d7b3,'isHidden':_0x11d7b3>=0x2&&!_0x567edb&&!_0x52b823,'isAdmin':_0x567edb,'isOwner':_0x52b823};}async function reportPost(_0x2455dd){const _0x5747ba=_0x13cbff,_0x28fc0a=auth[_0x5747ba(0xb1)],_0x1a288f=collection(db,'communities',communityId,_0x5747ba(0x3d4)),_0x39a35c=query(_0x1a288f,where('postId','==',_0x2455dd),where('reporterId','==',_0x28fc0a[_0x5747ba(0x424)])),_0x2941f9=await getDocs(_0x39a35c);if(!_0x2941f9['empty']){alert('You’ve\x20already\x20reported\x20this\x20post!');return;}if(!confirm(_0x5747ba(0x307)))return;await addDoc(_0x1a288f,{'postId':_0x2455dd,'reporterId':_0x28fc0a[_0x5747ba(0x424)],'communityId':communityId,'timestamp':new Date()}),alert('Post\x20reported!'),refreshReportSummary(_0x28fc0a['uid']);const _0x45ff01=document[_0x5747ba(0xe7)](_0x5747ba(0x175)+_0x2455dd),_0x3d8b0d=await getPostReportStatus(_0x2455dd),_0xa13ee5=await getCommData(),_0x3ff6cf=_0xa13ee5[_0x5747ba(0x12b)]?.['includes'](_0x28fc0a[_0x5747ba(0x424)])||_0xa13ee5[_0x5747ba(0x2cb)]===_0x28fc0a['uid'];if(_0x45ff01){const _0x568e38=_0x45ff01[_0x5747ba(0x21f)](_0x5747ba(0x36b)),_0x3382bf=_0x45ff01[_0x5747ba(0x21f)](_0x5747ba(0x370));if(_0x568e38)_0x568e38['remove']();if(_0x3382bf)_0x3382bf[_0x5747ba(0x185)]();if(_0x3d8b0d[_0x5747ba(0x167)]){_0x45ff01[_0x5747ba(0x185)]();return;}if(_0x3d8b0d[_0x5747ba(0x1be)]){if(_0x3d8b0d[_0x5747ba(0x2ba)]===0x1)_0x45ff01['insertAdjacentHTML']('beforeend',_0x5747ba(0xbb)+_0x2455dd+_0x5747ba(0x2bd));else _0x3d8b0d['reportCount']>=0x2&&_0x45ff01[_0x5747ba(0x36c)]('beforeend','<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x2455dd+_0x5747ba(0x116)+_0x3d8b0d[_0x5747ba(0x2ba)]+_0x5747ba(0x1e1));}_0x3ff6cf&&_0x3d8b0d[_0x5747ba(0x2ba)]>0x0&&(_0x45ff01[_0x5747ba(0x36c)](_0x5747ba(0x147),_0x5747ba(0xd1)+_0x2455dd+_0x5747ba(0x11a)+_0x3d8b0d[_0x5747ba(0x2ba)]+_0x5747ba(0x243)+(_0x3d8b0d[_0x5747ba(0x2ba)]>0x1?'s':'')+_0x5747ba(0x2ee)+_0x2455dd+'\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22'+_0x2455dd+_0x5747ba(0xfc)),_0x45ff01[_0x5747ba(0x21f)](_0x5747ba(0x1bc)+_0x2455dd+'\x22]')[_0x5747ba(0xaf)](_0x5747ba(0xb8),()=>deletePost(_0x2455dd)),_0x45ff01['querySelector'](_0x5747ba(0x313)+_0x2455dd+'\x22]')['addEventListener'](_0x5747ba(0xb8),()=>clearReports(_0x2455dd)));}const _0x235c03=document['querySelector'](_0x5747ba(0x1af)+_0x2455dd);if(_0x235c03){const _0x313d8f=_0x235c03[_0x5747ba(0x21f)]('.report-warning');if(_0x313d8f)_0x313d8f[_0x5747ba(0x185)]();if(_0x3d8b0d[_0x5747ba(0x1be)]){if(_0x3d8b0d[_0x5747ba(0x2ba)]===0x1)_0x235c03['insertAdjacentHTML'](_0x5747ba(0x147),_0x5747ba(0xbb)+_0x2455dd+_0x5747ba(0x2bd));else _0x3d8b0d[_0x5747ba(0x2ba)]>=0x2&&_0x235c03['insertAdjacentHTML'](_0x5747ba(0x147),_0x5747ba(0xbb)+_0x2455dd+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x20'+_0x3d8b0d['reportCount']+_0x5747ba(0x1e1));}}await loadAdminReportSummary(_0x28fc0a[_0x5747ba(0x424)]);}async function clearReports(_0xeff3ca){const _0x245be4=_0x13cbff;if(confirm(_0x245be4(0x135))){const _0xa28e2f=auth['currentUser'],_0x47a54a=collection(db,_0x245be4(0x162),communityId,_0x245be4(0x3d4)),_0x2a9940=query(_0x47a54a,where(_0x245be4(0x35f),'==',_0xeff3ca)),_0x540360=await getDocs(_0x2a9940),_0xbbda30=_0x540360['docs']['map'](_0x20d2c8=>deleteDoc(_0x20d2c8[_0x245be4(0x3ee)]));await Promise['all'](_0xbbda30),loadPosts(communityId,currentPage),loadCarouselPosts(communityId),refreshReportSummary(_0xa28e2f[_0x245be4(0x424)]);}}async function compressImage(_0x2c4c9c){return new Promise(_0x31dd8b=>{const _0x349793=_0x25ba,_0x432c39=new Image(),_0x400664=document['createElement'](_0x349793(0x11b)),_0x88b55f=_0x400664[_0x349793(0xb4)]('2d');_0x432c39[_0x349793(0x219)]=()=>{const _0x47aede=_0x349793,_0xf4dcf0=0x320,_0x64c060=0x320;let _0x326622=_0x432c39[_0x47aede(0x1ac)],_0x2a06da=_0x432c39[_0x47aede(0x394)];_0x326622>_0x2a06da?_0x326622>_0xf4dcf0&&(_0x2a06da*=_0xf4dcf0/_0x326622,_0x326622=_0xf4dcf0):_0x2a06da>_0x64c060&&(_0x326622*=_0x64c060/_0x2a06da,_0x2a06da=_0x64c060),_0x400664[_0x47aede(0x1ac)]=_0x326622,_0x400664['height']=_0x2a06da,_0x88b55f[_0x47aede(0x3cf)](_0x432c39,0x0,0x0,_0x326622,_0x2a06da),_0x400664[_0x47aede(0x25a)](_0x405a69=>_0x31dd8b(_0x405a69),_0x47aede(0x17a),0.7);},_0x432c39[_0x349793(0x374)]=URL[_0x349793(0x1fd)](_0x2c4c9c);});}function setupLocationAutocomplete(){const _0x101c00=_0x13cbff,_0x16f88a=document['getElementById'](_0x101c00(0x285)),_0x15659f=document[_0x101c00(0xe7)]('postLocationSuggestions');if(!_0x16f88a||!_0x15659f){console[_0x101c00(0x40a)](_0x101c00(0xcf));return;}const _0x15bf56=0xa*0x3c*0x3e8,_0x299f8f=0x32,_0x5a0d64=new Map();function _0x3e0cfc(_0x4ab08f,_0x5f4246){const _0x4ccd9b=_0x101c00;if(_0x5a0d64['size']>=_0x299f8f){const _0x4df2c8=_0x5a0d64[_0x4ccd9b(0x1cc)]()[_0x4ccd9b(0x2ff)]()[_0x4ccd9b(0x3e2)];_0x5a0d64[_0x4ccd9b(0x2f0)](_0x4df2c8);}_0x5a0d64[_0x4ccd9b(0x3f3)](_0x4ab08f,{'value':_0x5f4246,'expiry':Date[_0x4ccd9b(0x334)]()+_0x15bf56});}function _0x67b403(_0x32fd93){const _0x3b0a81=_0x101c00,_0x30cdca=_0x5a0d64[_0x3b0a81(0x22f)](_0x32fd93);if(!_0x30cdca)return null;if(Date[_0x3b0a81(0x334)]()>_0x30cdca['expiry'])return _0x5a0d64['delete'](_0x32fd93),null;return _0x30cdca[_0x3b0a81(0x3e2)];}async function _0x2cceda(_0x194a1d){const _0x576861=_0x101c00,_0xcf070f=_0x67b403(_0x194a1d);if(_0xcf070f)return _0xcf070f;const _0x4e42ca=_0x576861(0x3be)+encodeURIComponent(_0x194a1d)+_0x576861(0x88);try{const _0x343d51=await fetch(_0x4e42ca,{'headers':{'User-Agent':_0x576861(0x2ea)}});if(!_0x343d51['ok'])throw new Error(_0x576861(0x17c)+_0x343d51['status']);const _0x9c6cfe=await _0x343d51[_0x576861(0x371)]();return _0x3e0cfc(_0x194a1d,_0x9c6cfe),_0x9c6cfe;}catch(_0x4df74e){return console['error']('Error\x20fetching\x20location\x20suggestions:',_0x4df74e),[];}}async function _0x1bb2f9(){const _0x5e7948=_0x101c00,_0x25a8eb=_0x16f88a[_0x5e7948(0x3e2)][_0x5e7948(0x122)]();if(_0x25a8eb[_0x5e7948(0x1b1)]<0x2){_0x15659f[_0x5e7948(0x2a8)]='',_0x15659f['classList'][_0x5e7948(0x2ce)](_0x5e7948(0x1df));return;}_0x15659f['innerHTML']=_0x5e7948(0x278);const _0x18b57c=await _0x2cceda(_0x25a8eb);_0x477950(_0x18b57c);}function _0x477950(_0x4167ce){const _0x4d8ca4=_0x101c00;_0x15659f[_0x4d8ca4(0x2a8)]='';if(_0x4167ce['length']===0x0){_0x15659f[_0x4d8ca4(0x97)][_0x4d8ca4(0x2ce)](_0x4d8ca4(0x1df));return;}_0x15659f[_0x4d8ca4(0x97)][_0x4d8ca4(0x185)](_0x4d8ca4(0x1df));const _0x3ac932=document[_0x4d8ca4(0xf4)]();_0x4167ce[_0x4d8ca4(0x235)](_0x5e68df=>{const _0x10956b=_0x4d8ca4,_0x177e18=_0x5e68df[_0x10956b(0x3e5)]['city']||_0x5e68df[_0x10956b(0x3e5)][_0x10956b(0xa4)]||_0x5e68df['address'][_0x10956b(0x1c5)]||'',_0x478b12=_0x5e68df['address'][_0x10956b(0x2df)]||'',_0x39cff7=_0x5e68df[_0x10956b(0x3e5)][_0x10956b(0x106)]||'',_0x1ec7ed=_0x177e18&&_0x478b12?_0x177e18+',\x20'+_0x478b12:_0x5e68df[_0x10956b(0x13c)],_0xe40778=document[_0x10956b(0x3da)]('div');_0xe40778[_0x10956b(0x97)][_0x10956b(0x2ce)](_0x10956b(0x30a)),_0xe40778[_0x10956b(0x37d)]=_0x1ec7ed,_0xe40778[_0x10956b(0x2d2)]=()=>{const _0x5bef66=_0x10956b;_0x16f88a[_0x5bef66(0x3e2)]=_0x1ec7ed,_0x16f88a[_0x5bef66(0xa5)]['lat']=_0x5e68df[_0x5bef66(0x21e)],_0x16f88a[_0x5bef66(0xa5)][_0x5bef66(0x419)]=_0x5e68df['lon'],_0x15659f[_0x5bef66(0x2a8)]='',_0x15659f[_0x5bef66(0x97)][_0x5bef66(0x2ce)](_0x5bef66(0x1df));},_0x3ac932[_0x10956b(0x425)](_0xe40778);}),_0x15659f[_0x4d8ca4(0x425)](_0x3ac932);}_0x16f88a[_0x101c00(0x90)]=debounce(_0x1bb2f9,0x1f4);}async function editCommunityName(_0x33772e){const _0x520873=_0x13cbff,_0x5ac734=doc(db,_0x520873(0x162),_0x33772e),_0x2439fb=await getDoc(_0x5ac734),_0x4de5d4=_0x2439fb[_0x520873(0x326)](),_0x151c6c=_0x4de5d4[_0x520873(0x86)],_0x538af3=document[_0x520873(0x3da)](_0x520873(0x187));_0x538af3['id']=_0x520873(0x3d5),_0x538af3['style'][_0x520873(0x2c5)]=_0x520873(0x41c),_0x538af3[_0x520873(0x31a)][_0x520873(0x215)]=_0x520873(0x1a3),_0x538af3[_0x520873(0x31a)][_0x520873(0x3b3)]=_0x520873(0x1a3),_0x538af3['style'][_0x520873(0x2b3)]=_0x520873(0xf9),_0x538af3['style'][_0x520873(0x120)]=_0x520873(0x211),_0x538af3[_0x520873(0x31a)][_0x520873(0xbf)]='20px',_0x538af3[_0x520873(0x31a)][_0x520873(0x397)]=_0x520873(0x1f0),_0x538af3[_0x520873(0x31a)][_0x520873(0x255)]=_0x520873(0x36e),_0x538af3['style'][_0x520873(0x12d)]=_0x520873(0xae),_0x538af3[_0x520873(0x2a8)]=_0x520873(0x12a)+_0x151c6c+_0x520873(0x3a9),document[_0x520873(0xd5)][_0x520873(0x425)](_0x538af3),document[_0x520873(0xe7)]('saveNameBtn')['addEventListener'](_0x520873(0xb8),async()=>{const _0x5c7a0b=_0x520873,_0x2d1913=document[_0x5c7a0b(0xe7)](_0x5c7a0b(0x1f2))[_0x5c7a0b(0x3e2)]['trim']();if(!_0x2d1913){alert(_0x5c7a0b(0x266));return;}if(_0x2d1913===_0x151c6c){alert(_0x5c7a0b(0x241)),document[_0x5c7a0b(0xd5)]['removeChild'](_0x538af3);return;}await updateDoc(_0x5ac734,{'name':_0x2d1913}),document['getElementById']('communityName')[_0x5c7a0b(0x37d)]=_0x2d1913,document[_0x5c7a0b(0xd5)][_0x5c7a0b(0x29a)](_0x538af3),alert(_0x5c7a0b(0x2e2));}),document[_0x520873(0xe7)](_0x520873(0x22a))[_0x520873(0xaf)](_0x520873(0xb8),()=>{const _0x49417f=_0x520873;document['body'][_0x49417f(0x29a)](_0x538af3);});}let reportSummaryCache=null;async function loadAdminReportSummary(_0x3f75d0){const _0x44bc00=_0x13cbff;if(!_0x3f75d0){console[_0x44bc00(0x40a)](_0x44bc00(0x2cd));return;}const _0xbff83d=await getCommData(),_0x2c10e6=_0xbff83d[_0x44bc00(0x12b)]?.[_0x44bc00(0x3c6)](_0x3f75d0)||_0xbff83d[_0x44bc00(0x2cb)]===_0x3f75d0;let _0x19fc3e=document[_0x44bc00(0xe7)](_0x44bc00(0x34a));!_0x19fc3e&&(_0x19fc3e=document[_0x44bc00(0x3da)](_0x44bc00(0x187)),_0x19fc3e['id']=_0x44bc00(0x34a),_0x19fc3e[_0x44bc00(0x125)]=_0x44bc00(0x34a),document['querySelector'](_0x44bc00(0x2a5))['insertBefore'](_0x19fc3e,document['querySelector'](_0x44bc00(0x145))[_0x44bc00(0x3e4)]));if(reportSummaryCache){_0x19fc3e[_0x44bc00(0x2a8)]=reportSummaryCache['html'],attachSummaryListeners(_0x19fc3e,_0x2c10e6,_0x3f75d0),console[_0x44bc00(0x1c9)](_0x44bc00(0x3c7));return;}await updateReportSummaryUI(_0x19fc3e,_0x3f75d0,_0x2c10e6);}async function updateReportSummaryUI(_0x1e003e,_0x21f56d,_0x26b7c4){const _0x400b03=_0x13cbff,_0x8cb772=collection(db,_0x400b03(0x162),communityId,_0x400b03(0x3d4)),_0x4e2d60=query(_0x8cb772),_0x1de328=await getDocs(_0x4e2d60),_0xad2ebc=Object[_0x400b03(0x1cc)](_0x1de328[_0x400b03(0x176)][_0x400b03(0xc9)]((_0x5fccaf,_0x1cfe74)=>{const _0x37c7ba=_0x400b03;return _0x5fccaf[_0x1cfe74[_0x37c7ba(0x326)]()[_0x37c7ba(0x35f)]]=!![],_0x5fccaf;},{}))[_0x400b03(0x1b1)];let _0x6e05bd=0x0,_0x4d8d92=0x0;if(_0x26b7c4){const _0x121ea1=query(collection(db,_0x400b03(0x162),communityId,_0x400b03(0x1c6))),_0x486801=await getDocs(_0x121ea1);_0x4d8d92=_0x486801[_0x400b03(0x11d)];}else{const _0x448bb7=query(collection(db,'communities',communityId,_0x400b03(0x1de)),where(_0x400b03(0x3b8),'==',_0x21f56d)),_0x553beb=await getDocs(_0x448bb7),_0x45b02c=[];for(const _0x46ce21 of _0x553beb[_0x400b03(0x176)]){const _0xfba373=_0x46ce21['id'],_0x4120e2=query(_0x8cb772,where('postId','==',_0xfba373)),_0x541e96=await getDocs(_0x4120e2);if(!_0x541e96[_0x400b03(0x273)])_0x45b02c['push'](_0xfba373);}_0x6e05bd=_0x45b02c['length'];}const _0x4a9ad5=_0x26b7c4?_0xad2ebc+_0x4d8d92:_0x6e05bd;_0x1e003e[_0x400b03(0x2a8)]=_0x400b03(0x131)+(_0x4a9ad5>0x0?'('+_0x4a9ad5+')\x20':'')+'See\x20Reports</summary>\x0a\x20\x20<div\x20id=\x22report-content\x22\x20class=\x22report-content\x22></div>\x0a</details>\x0a',reportSummaryCache={'html':_0x1e003e[_0x400b03(0x2a8)]},attachSummaryListeners(_0x1e003e,_0x26b7c4,_0x21f56d);}function attachSummaryListeners(_0x3aa736,_0x1a9730,_0x58c214){const _0x2cc001=_0x13cbff,_0x156b76=_0x3aa736['querySelector'](_0x2cc001(0x212));_0x156b76[_0x2cc001(0xaf)](_0x2cc001(0x16a),async()=>{const _0x55e9ae=_0x2cc001,_0x91c75f=_0x3aa736['querySelector'](_0x55e9ae(0x384));if(_0x156b76['open']){_0x91c75f[_0x55e9ae(0x2a8)]=_0x55e9ae(0x214),_0x156b76['querySelector']('summary')[_0x55e9ae(0x37d)]=(reportSummaryCache[_0x55e9ae(0xef)]['match'](/\(\d+\)/)||'')+_0x55e9ae(0x292);if(_0x1a9730){let _0x38056e='';const _0x6edd64=collection(db,_0x55e9ae(0x162),communityId,_0x55e9ae(0x3d4)),_0x46b87d=await getDocs(query(_0x6edd64));if(_0x46b87d['empty'])_0x38056e+='<p>No\x20reported\x20posts!</p>';else{_0x38056e+='<h3>Reported\x20Posts</h3>';const _0x340250={};_0x46b87d[_0x55e9ae(0x235)](_0x47dc56=>{const _0x4b974e=_0x55e9ae,_0x45f5b0=_0x47dc56['data']()[_0x4b974e(0x35f)];_0x340250[_0x45f5b0]=(_0x340250[_0x45f5b0]||0x0)+0x1;});for(const [_0x7700af,_0x34879d]of Object[_0x55e9ae(0x3f9)](_0x340250)){try{const _0x2cd24b=await getDoc(doc(db,_0x55e9ae(0x162),communityId,'posts',_0x7700af)),_0x52ca7f=_0x2cd24b['exists']()?_0x2cd24b[_0x55e9ae(0x326)]():null,_0x52faf7=_0x52ca7f?_0x52ca7f['title']:_0x55e9ae(0xe3),_0x21c11a=_0x52ca7f?await fetchUserData(_0x52ca7f['userId']):{'name':'Unknown'};_0x38056e+=_0x55e9ae(0x115)+_0x7700af+_0x55e9ae(0x353)+_0x52faf7+_0x55e9ae(0x372)+_0x21c11a[_0x55e9ae(0x86)]+_0x55e9ae(0x38f)+_0x7700af+')\x20-\x20'+_0x34879d+_0x55e9ae(0x243)+(_0x34879d>0x1?'s':'')+_0x55e9ae(0x343)+_0x7700af+'\x22>Remove\x20Post</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22clear-reports-btn\x22\x20data-post-id=\x22'+_0x7700af+_0x55e9ae(0x174);}catch(_0x10cf44){console[_0x55e9ae(0x40a)](_0x55e9ae(0x112)+_0x7700af+':',_0x10cf44),_0x38056e+=_0x55e9ae(0x2d8)+_0x7700af+'</p>';}}}try{const _0x297cc=await getDocs(collection(db,_0x55e9ae(0x162),communityId,_0x55e9ae(0x1c6))),_0x1d2bd1=(await getDoc(doc(db,_0x55e9ae(0x162),communityId)))[_0x55e9ae(0x326)]()||{'banReasons':{}};if(!_0x297cc[_0x55e9ae(0x273)]){_0x38056e+=_0x55e9ae(0x3b5);for(const _0x1bfe25 of _0x297cc[_0x55e9ae(0x176)]){const _0x5b1d26=_0x1bfe25[_0x55e9ae(0x326)](),_0x178609=await fetchUserData(_0x5b1d26['userId']),_0x177081=(_0x178609[_0x55e9ae(0x86)]||_0x55e9ae(0x19a))+'\x20('+(_0x5b1d26['username']||_0x55e9ae(0x2e4))+')',_0x1bfed1=_0x1d2bd1['banReasons']?.[_0x5b1d26[_0x55e9ae(0x3b8)]]||'No\x20reason\x20provided';_0x38056e+=_0x55e9ae(0xf6)+_0x1bfe25['id']+_0x55e9ae(0x40e)+_0x177081+_0x55e9ae(0x311)+_0x5b1d26[_0x55e9ae(0x3a8)]+_0x55e9ae(0x234)+_0x1bfed1+_0x55e9ae(0x2db)+new Date(_0x5b1d26['timestamp'][_0x55e9ae(0x173)]())[_0x55e9ae(0x149)]()+_0x55e9ae(0x17e)+_0x1bfe25['id']+_0x55e9ae(0x340);}}else _0x38056e+=_0x55e9ae(0x381);}catch(_0x19be11){console[_0x55e9ae(0x40a)]('Error\x20loading\x20appeals:',_0x19be11),_0x38056e+='<br><p>Error\x20loading\x20appeals!</p>';}_0x91c75f[_0x55e9ae(0x2a8)]=_0x38056e,_0x91c75f[_0x55e9ae(0xf1)](_0x55e9ae(0x2e7))[_0x55e9ae(0x235)](_0x64da75=>{const _0x3619f8=_0x55e9ae;_0x64da75[_0x3619f8(0xaf)]('click',()=>deletePost(_0x64da75[_0x3619f8(0xa5)][_0x3619f8(0x35f)]));}),_0x91c75f[_0x55e9ae(0xf1)]('.clear-reports-btn')['forEach'](_0x213a84=>{const _0x4d7444=_0x55e9ae;_0x213a84[_0x4d7444(0xaf)](_0x4d7444(0xb8),()=>clearReports(_0x213a84['dataset'][_0x4d7444(0x35f)]));}),_0x91c75f['querySelectorAll'](_0x55e9ae(0x203))[_0x55e9ae(0x235)](_0x229709=>{const _0x4fac88=_0x55e9ae;_0x229709[_0x4fac88(0xaf)]('click',async()=>{const _0x5e8480=_0x4fac88;confirm(_0x5e8480(0x315))&&(await deleteDoc(doc(db,'communities',communityId,'banAppeals',_0x229709[_0x5e8480(0xa5)][_0x5e8480(0x2ef)])),refreshReportSummary(_0x58c214));});});}else{let _0x22abe0='';const _0x1f8798=collection(db,'communities',communityId,_0x55e9ae(0x3d4)),_0x13579e=query(collection(db,_0x55e9ae(0x162),communityId,_0x55e9ae(0x1de)),where(_0x55e9ae(0x3b8),'==',_0x58c214));try{const _0x111628=await getDocs(_0x13579e),_0x5b7130=[];for(const _0x2e5d54 of _0x111628['docs']){const _0x1af52a=_0x2e5d54['id'],_0x25179c=query(_0x1f8798,where('postId','==',_0x1af52a)),_0xb8fb4f=await getDocs(_0x25179c);!_0xb8fb4f['empty']&&_0x5b7130[_0x55e9ae(0x13d)]({'postId':_0x1af52a,'title':_0x2e5d54['data']()[_0x55e9ae(0x12e)],'count':_0xb8fb4f[_0x55e9ae(0x11d)]});}if(_0x5b7130['length']===0x0)_0x22abe0=_0x55e9ae(0x40f);else{_0x22abe0=_0x55e9ae(0x3a5);for(const _0x3927ca of _0x5b7130){const _0x407095=query(collection(db,_0x55e9ae(0x162),communityId,_0x55e9ae(0x1c6)),where(_0x55e9ae(0x3b8),'==',_0x58c214),where(_0x55e9ae(0x35f),'==',_0x3927ca[_0x55e9ae(0x35f)])),_0x1e9f5f=await getDocs(_0x407095),_0x81a676=!_0x1e9f5f['empty'];_0x22abe0+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-item\x22\x20data-post-id=\x22'+_0x3927ca[_0x55e9ae(0x35f)]+_0x55e9ae(0x398)+_0x3927ca['title']+'\x22\x20(ID:\x20'+_0x3927ca['postId']+_0x55e9ae(0xc6)+_0x3927ca[_0x55e9ae(0x408)]+'\x20report'+(_0x3927ca[_0x55e9ae(0x408)]>0x1?'s':'')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3927ca[_0x55e9ae(0x408)]>=0x2?_0x55e9ae(0x31c):'')+_0x55e9ae(0x156)+_0x3927ca[_0x55e9ae(0x35f)]+_0x55e9ae(0x36a)+(!_0x81a676?_0x55e9ae(0x164)+_0x3927ca[_0x55e9ae(0x35f)]+_0x55e9ae(0x34f):_0x55e9ae(0x375))+_0x55e9ae(0xfb);}}}catch(_0x58cee1){console[_0x55e9ae(0x40a)](_0x55e9ae(0x359),_0x58cee1),_0x22abe0=_0x55e9ae(0x2b9);}_0x91c75f[_0x55e9ae(0x2a8)]=_0x22abe0,_0x91c75f[_0x55e9ae(0xf1)](_0x55e9ae(0x26c))[_0x55e9ae(0x235)](_0x4c62e5=>{const _0x5277bb=_0x55e9ae;_0x4c62e5[_0x5277bb(0xaf)]('submit',async _0x4269b8=>{const _0x343d09=_0x5277bb;_0x4269b8['preventDefault']();const _0xddb303=_0x4c62e5[_0x343d09(0xa5)][_0x343d09(0x35f)],_0x30d66d=_0x4c62e5[_0x343d09(0x21f)](_0x343d09(0x205))[_0x343d09(0x3e2)][_0x343d09(0x122)]();if(_0x30d66d){const _0x58d4ce=await getDoc(doc(db,'users',_0x58c214)),_0x2dafa3=_0x58d4ce[_0x343d09(0x28f)]()?_0x58d4ce[_0x343d09(0x326)]():{'username':_0x343d09(0x1ee)+_0x58c214['slice'](0x0,0x8)};await addDoc(collection(db,_0x343d09(0x162),communityId,_0x343d09(0x1c6)),{'userId':_0x58c214,'username':_0x2dafa3[_0x343d09(0x1f1)],'postId':_0xddb303,'message':_0x30d66d,'timestamp':new Date()}),alert(_0x343d09(0x3e8)),_0x4c62e5['closest'](_0x343d09(0x1e8))[_0x343d09(0x2a8)]='<p>Appeal\x20sent,\x20waiting\x20on\x20admins.</p>',refreshReportSummary(_0x58c214);}});});}}else _0x156b76['querySelector'](_0x55e9ae(0x232))[_0x55e9ae(0x37d)]=(reportSummaryCache[_0x55e9ae(0xef)]['match'](/\(\d+\)/)||'')+_0x55e9ae(0x233),_0x91c75f[_0x55e9ae(0x2a8)]='';});}function refreshReportSummary(_0xc4f887){reportSummaryCache=null,loadAdminReportSummary(_0xc4f887);}const debouncedLoadAdminReportSummary=debounce(_0xa767dc=>loadAdminReportSummary(_0xa767dc),0x1f4);async function createPost(){const _0x142b09=_0x13cbff,_0x4bb4f1=document[_0x142b09(0xe7)](_0x142b09(0x414));if(!_0x4bb4f1){console[_0x142b09(0x40a)]('Create\x20Post\x20button\x20not\x20found!');return;}if(_0x4bb4f1[_0x142b09(0x2d0)]){console[_0x142b09(0x1c9)](_0x142b09(0x1c2));return;}_0x4bb4f1[_0x142b09(0x2d0)]=!![];const _0x87d2ab=_0x4bb4f1[_0x142b09(0x37d)];_0x4bb4f1[_0x142b09(0x37d)]=_0x142b09(0x218),_0x4bb4f1[_0x142b09(0x97)]['add'](_0x142b09(0x2f9));try{const _0x80e4e1=auth['currentUser'],_0x5f2078=document[_0x142b09(0xe7)](_0x142b09(0x320))[_0x142b09(0x3e2)][_0x142b09(0x122)](),_0x303822=document[_0x142b09(0xe7)](_0x142b09(0x2e1))[_0x142b09(0x3e2)][_0x142b09(0x122)](),_0x5e1cba=document[_0x142b09(0xe7)]('postPhotos')[_0x142b09(0x27a)],_0x2adc1e=document[_0x142b09(0xe7)]('postLocation')[_0x142b09(0x3e2)][_0x142b09(0x122)](),_0x279fc5=document[_0x142b09(0xe7)](_0x142b09(0x285))[_0x142b09(0xa5)][_0x142b09(0x21e)],_0x1fe148=document[_0x142b09(0xe7)](_0x142b09(0x285))[_0x142b09(0xa5)]['lon'],_0x29f625=document['querySelectorAll']('#communityCheckboxes\x20input[name=\x27communities\x27]:checked'),_0x3bde2a=document[_0x142b09(0xe7)](_0x142b09(0x322))[_0x142b09(0x3e2)],_0x566801=document[_0x142b09(0xe7)]('lookingFor')[_0x142b09(0x3e2)],_0x4ffc64=document['getElementById'](_0x142b09(0x2fa))[_0x142b09(0x3e2)];if(!_0x5f2078||!_0x303822||!_0x2adc1e||!_0x279fc5||!_0x1fe148||!_0x3bde2a||!_0x566801||!_0x4ffc64){alert(_0x142b09(0x3b2));throw new Error(_0x142b09(0x30d));}if(_0x29f625[_0x142b09(0x1b1)]===0x0){alert('Pick\x20at\x20least\x20one\x20community\x20to\x20post!');throw new Error(_0x142b09(0x3ae));}let _0x2fffde=Array['from'](_0x29f625)[_0x142b09(0x10a)](_0x28c952=>_0x28c952['value']);if(_0x2fffde[_0x142b09(0x1b1)]===0x1&&_0x2fffde[0x0]===_0x142b09(0x1bb)){const _0x5cc3d0=doc(db,'users',_0x80e4e1[_0x142b09(0x424)]),_0x262b0a=await getDoc(_0x5cc3d0);_0x2fffde=_0x262b0a[_0x142b09(0x326)]()[_0x142b09(0x1b9)]||[];const _0x3cd1c6=[];for(const _0x49dfc4 of _0x2fffde){const _0x317e08=doc(db,_0x142b09(0x162),_0x49dfc4),_0x232612=await getDoc(_0x317e08),_0x47c505=_0x232612['data']();_0x47c505['members'][_0x142b09(0x3c6)](_0x80e4e1[_0x142b09(0x424)])&&!(_0x47c505[_0x142b09(0x2b6)]||[])[_0x142b09(0x3c6)](_0x80e4e1[_0x142b09(0x424)])&&_0x3cd1c6['push'](_0x49dfc4);}_0x2fffde=_0x3cd1c6;}else _0x2fffde=_0x2fffde[_0x142b09(0x10a)](_0x583f13=>_0x583f13===_0x142b09(0x2bc)?communityId:_0x583f13);if(_0x2fffde[_0x142b09(0x1b1)]===0x0){alert(_0x142b09(0x216));throw new Error(_0x142b09(0x102));}const _0x142d3e={};for(const _0x4af3ef of _0x2fffde){_0x142d3e[_0x4af3ef]=[];for(let _0x19486c=0x0;_0x19486c<Math['min'](_0x5e1cba['length'],0x5);_0x19486c++){const _0x442429=await compressImage(_0x5e1cba[_0x19486c]),_0x11a6c8=ref(storage,_0x142b09(0x3d1)+_0x4af3ef+'/'+_0x80e4e1[_0x142b09(0x424)]+'/'+Date[_0x142b09(0x334)]()+'_'+_0x19486c);await uploadBytes(_0x11a6c8,_0x442429);const _0x53b6ec=await getDownloadURL(_0x11a6c8);_0x142d3e[_0x4af3ef]['push'](_0x53b6ec);}}const _0x3ff5d6=_0x2fffde[_0x142b09(0x10a)](_0xf9c3b5=>{const _0x19fc3d=_0x142b09,_0x37c795={'title':_0x5f2078,'description':_0x303822,'photoUrls':_0x142d3e[_0xf9c3b5],'location':{'latitude':parseFloat(_0x279fc5),'longitude':parseFloat(_0x1fe148),'name':_0x2adc1e},'userId':_0x80e4e1[_0x19fc3d(0x424)],'createdAt':new Date(),'category':_0x3bde2a,'lookingFor':_0x566801,'offering':_0x4ffc64,'communityId':_0xf9c3b5,'likes':0x0,'likedBy':[],'commentCount':0x0};return addDoc(collection(db,_0x19fc3d(0x162),_0xf9c3b5,_0x19fc3d(0x1de)),_0x37c795);}),_0x143342=await Promise[_0x142b09(0x1bb)](_0x3ff5d6);alert(_0x142b09(0x393)+_0x2fffde[_0x142b09(0x1b1)]+_0x142b09(0x3fb)+(_0x2fffde[_0x142b09(0x1b1)]>0x1?'ies':'y')+'!\x20IDs:\x20'+_0x143342[_0x142b09(0x10a)](_0x35a3df=>_0x35a3df['id'])['join'](',\x20')),document['getElementById'](_0x142b09(0x26b))[_0x142b09(0x32c)](),totalYourPosts=0x0,loadYourPosts(_0x80e4e1[_0x142b09(0x424)]),loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,loadCarouselPosts(communityId);}catch(_0x46f113){console[_0x142b09(0x40a)](_0x142b09(0x93),_0x46f113),!_0x46f113['message'][_0x142b09(0x3c6)](_0x142b09(0x121))&&!_0x46f113[_0x142b09(0x3a8)][_0x142b09(0x3c6)](_0x142b09(0x162))&&alert('Failed\x20to\x20create\x20post:\x20'+_0x46f113[_0x142b09(0x3a8)]);}finally{_0x4bb4f1['disabled']=![],_0x4bb4f1[_0x142b09(0x37d)]=_0x87d2ab,_0x4bb4f1[_0x142b09(0x97)][_0x142b09(0x185)](_0x142b09(0x2f9));}}async function setupCommunitySelection(){const _0x8da82c=_0x13cbff,_0x3422ed=auth[_0x8da82c(0xb1)];if(!_0x3422ed){console[_0x8da82c(0x40a)]('No\x20authenticated\x20user\x20found\x20for\x20setupCommunitySelection!');return;}const _0x9f7c2d=doc(db,_0x8da82c(0x3c4),_0x3422ed[_0x8da82c(0x424)]),_0x4f6305=await getDoc(_0x9f7c2d),_0x2e8170=_0x4f6305[_0x8da82c(0x326)]()[_0x8da82c(0x1b9)]||[],_0x1dd39f=document[_0x8da82c(0xe7)]('communityCheckboxes');if(!_0x1dd39f){console[_0x8da82c(0x40a)]('communityCheckboxes\x20div\x20not\x20found\x20in\x20DOM\x20yet!');return;}_0x1dd39f[_0x8da82c(0x2a8)]='';const _0x1d1d86=doc(db,_0x8da82c(0x162),communityId),_0x21e068=await getDoc(_0x1d1d86),_0x158361=_0x21e068[_0x8da82c(0x326)]()[_0x8da82c(0x86)];_0x1dd39f[_0x8da82c(0x2a8)]+=_0x8da82c(0x318)+_0x158361+_0x8da82c(0x170),_0x1dd39f[_0x8da82c(0x2a8)]+=_0x8da82c(0x207);const _0x4e668c=_0x2e8170[_0x8da82c(0x369)](_0x420141=>_0x420141!==communityId)[_0x8da82c(0x10a)](_0x38b5ab=>getDoc(doc(db,_0x8da82c(0x162),_0x38b5ab))),_0x29a1a7=await Promise[_0x8da82c(0x1bb)](_0x4e668c);for(const _0xa72e39 of _0x29a1a7){if(_0xa72e39[_0x8da82c(0x28f)]()){const _0x1230a4=_0xa72e39['data'](),_0x53257c=doc(db,_0x8da82c(0x162),_0xa72e39['id'],_0x8da82c(0x20f),_0x3422ed[_0x8da82c(0x424)]),_0x297ae1=await getDoc(_0x53257c),_0x559157=_0x297ae1[_0x8da82c(0x28f)](),_0x59129a=(_0x1230a4[_0x8da82c(0x2b6)]||[])[_0x8da82c(0x3c6)](_0x3422ed[_0x8da82c(0x424)]);if(_0x559157&&!_0x59129a){const _0x659138=document[_0x8da82c(0x3da)](_0x8da82c(0x3c9));_0x659138[_0x8da82c(0x298)]('for',_0x8da82c(0x3cb)+_0xa72e39['id']),_0x659138[_0x8da82c(0x2a8)]=_0x8da82c(0x23b)+_0xa72e39['id']+_0x8da82c(0x1e0)+_0xa72e39['id']+'\x22>\x20'+_0x1230a4[_0x8da82c(0x86)]+_0x8da82c(0x303),_0x1dd39f[_0x8da82c(0x425)](_0x659138);}}}const _0x4dca67=_0x1dd39f[_0x8da82c(0x21f)]('input[value=\x22all\x22]');_0x4dca67[_0x8da82c(0xaf)](_0x8da82c(0xe4),_0xa5ee83=>{const _0x507e58=_0x8da82c,_0x1a0bf0=_0x1dd39f[_0x507e58(0xf1)]('input[name=\x22communities\x22]:not([value=\x22all\x22])');_0xa5ee83[_0x507e58(0x275)][_0x507e58(0x3e9)]&&_0x1a0bf0[_0x507e58(0x235)](_0x471cda=>_0x471cda['checked']=![]);});const _0x37c159=_0x1dd39f[_0x8da82c(0xf1)](_0x8da82c(0x247));_0x37c159[_0x8da82c(0x235)](_0x4f26cc=>{_0x4f26cc['addEventListener']('change',()=>{_0x4f26cc['checked']&&(_0x4dca67['checked']=![]);});});}async function deletePost(_0x4f0ed7){const _0x13ac4f=_0x13cbff,_0x2577f3=auth[_0x13ac4f(0xb1)],_0x41e1ea=await getCommData(),_0x1cac49=_0x41e1ea[_0x13ac4f(0x12b)]?.['includes'](_0x2577f3[_0x13ac4f(0x424)])||_0x41e1ea[_0x13ac4f(0x2cb)]===_0x2577f3['uid'],_0x144234=doc(db,'communities',communityId,_0x13ac4f(0x1de),_0x4f0ed7),_0x44884a=await getDoc(_0x144234);if(!_0x44884a[_0x13ac4f(0x28f)]()){alert(_0x13ac4f(0x2c3));return;}const _0x514160=_0x44884a['data']();if(!_0x1cac49&&_0x514160[_0x13ac4f(0x3b8)]!==_0x2577f3[_0x13ac4f(0x424)]){alert(_0x13ac4f(0x154));return;}const _0x34b2cf=document['getElementById']('deletePostModal'),_0x167ce7=document[_0x13ac4f(0xe7)]('swappedBtn'),_0x32a26a=document[_0x13ac4f(0xe7)](_0x13ac4f(0x3bb)),_0x37e3d7=document['getElementById'](_0x13ac4f(0x2d4)),_0x4cb46c=document[_0x13ac4f(0xe7)](_0x13ac4f(0x171)),_0x27340d=document[_0x13ac4f(0xe7)]('validateSwapBtn'),_0x14a1a3=document[_0x13ac4f(0xe7)]('swapValidationResult'),_0x1dbc5e=document[_0x13ac4f(0xe7)](_0x13ac4f(0x3aa)),_0x13a78b=document[_0x13ac4f(0xe7)]('swapPartner'),_0x138289=document[_0x13ac4f(0xe7)](_0x13ac4f(0xc1)),_0x47b581=document[_0x13ac4f(0xe7)](_0x13ac4f(0x2a6)),_0x42189d=document['getElementById'](_0x13ac4f(0x19d)),_0x54d4dd=document['getElementById'](_0x13ac4f(0x293)),_0x5c6511=document[_0x13ac4f(0xe7)](_0x13ac4f(0x3ba)),_0x16c830=document['getElementById']('loadingOverlay');if(!_0x34b2cf||!_0x16c830||!_0x167ce7||!_0x32a26a||!_0x37e3d7||!_0x4cb46c||!_0x27340d||!_0x14a1a3||!_0x1dbc5e||!_0x13a78b||!_0x138289||!_0x47b581||!_0x42189d||!_0x54d4dd||!_0x5c6511){console[_0x13ac4f(0x40a)]('Missing\x20modal\x20or\x20loading\x20elements:',{'modal':_0x34b2cf,'loadingOverlay':_0x16c830,'swappedBtn':_0x167ce7,'justDeleteBtn':_0x32a26a,'swapDetails':_0x37e3d7,'swapUsername':_0x4cb46c,'validateSwapBtn':_0x27340d,'swapValidationResult':_0x14a1a3,'swapConfirmed':_0x1dbc5e,'swapPartner':_0x13a78b,'editSwapBtn':_0x138289,'proceedSwapBtn':_0x47b581,'swapSuccess':_0x42189d,'swapSuccessMessage':_0x54d4dd,'closeDeleteModalBtn':_0x5c6511}),alert(_0x13ac4f(0x291));return;}let _0x1b5c64=null;_0x34b2cf['style']['display']=_0x13ac4f(0x345),_0x34b2cf[_0x13ac4f(0x97)][_0x13ac4f(0x185)](_0x13ac4f(0x1df)),_0x37e3d7[_0x13ac4f(0x97)][_0x13ac4f(0x2ce)](_0x13ac4f(0x1df)),_0x42189d[_0x13ac4f(0x97)][_0x13ac4f(0x2ce)](_0x13ac4f(0x1df)),_0x14a1a3[_0x13ac4f(0x37d)]='',_0x1dbc5e[_0x13ac4f(0x97)][_0x13ac4f(0x2ce)](_0x13ac4f(0x1df)),_0x47b581[_0x13ac4f(0x97)]['add'](_0x13ac4f(0x1df)),_0x32a26a['onclick']=async()=>{const _0x2eaccf=_0x13ac4f;if(_0x32a26a[_0x2eaccf(0x2d0)]){console[_0x2eaccf(0x1c9)]('Deletion\x20already\x20in\x20progress,\x20ignoring\x20click.');return;}if(confirm(_0x2eaccf(0x198))){_0x32a26a[_0x2eaccf(0x2d0)]=!![];const _0x458dc6=_0x32a26a['textContent'];_0x32a26a['textContent']='Deleting...',_0x32a26a[_0x2eaccf(0x97)]['add'](_0x2eaccf(0x2f9)),_0x16c830[_0x2eaccf(0x97)][_0x2eaccf(0x185)](_0x2eaccf(0x1df));try{await deletePostAndCleanup(_0x4f0ed7,_0x514160[_0x2eaccf(0x302)],![],null),closeModal(_0x2eaccf(0x143)),refreshReportSummary(_0x2577f3['uid']);}catch(_0x1b965e){console[_0x2eaccf(0x40a)](_0x2eaccf(0x96),_0x1b965e),alert('Something\x20went\x20wrong.\x20Please\x20try\x20again.');}finally{_0x16c830[_0x2eaccf(0x97)][_0x2eaccf(0x2ce)](_0x2eaccf(0x1df)),_0x32a26a[_0x2eaccf(0x2d0)]=![],_0x32a26a[_0x2eaccf(0x37d)]=_0x458dc6,_0x32a26a[_0x2eaccf(0x97)][_0x2eaccf(0x185)](_0x2eaccf(0x2f9));}}},_0x167ce7[_0x13ac4f(0x2d2)]=()=>{const _0x50dffc=_0x13ac4f;_0x37e3d7[_0x50dffc(0x97)][_0x50dffc(0x185)](_0x50dffc(0x1df)),_0x32a26a['style'][_0x50dffc(0x10f)]=_0x50dffc(0x2fe),_0x167ce7[_0x50dffc(0x31a)][_0x50dffc(0x10f)]=_0x50dffc(0x2fe),_0x4cb46c[_0x50dffc(0x23d)]();},_0x27340d[_0x13ac4f(0x2d2)]=async()=>{const _0x1387bb=_0x13ac4f,_0x13a447=_0x4cb46c[_0x1387bb(0x3e2)]['trim']();if(!_0x13a447){_0x14a1a3[_0x1387bb(0x37d)]=_0x1387bb(0x85);return;}_0x14a1a3['textContent']=_0x1387bb(0x258);const _0x39915d=await getUserByUsername(_0x13a447);_0x39915d?(_0x1b5c64=_0x39915d[_0x1387bb(0x424)],_0x13a78b[_0x1387bb(0x37d)]=_0x13a447,_0x14a1a3[_0x1387bb(0x37d)]='',_0x1dbc5e[_0x1387bb(0x97)][_0x1387bb(0x185)]('hidden'),_0x47b581[_0x1387bb(0x97)]['remove'](_0x1387bb(0x1df)),_0x4cb46c[_0x1387bb(0x2d0)]=!![],_0x27340d[_0x1387bb(0x2d0)]=!![]):(_0x14a1a3[_0x1387bb(0x37d)]=_0x1387bb(0x21d),_0x1b5c64=null);},_0x138289['onclick']=()=>{const _0x4c1cd6=_0x13ac4f;_0x1dbc5e[_0x4c1cd6(0x97)][_0x4c1cd6(0x2ce)](_0x4c1cd6(0x1df)),_0x47b581[_0x4c1cd6(0x97)][_0x4c1cd6(0x2ce)](_0x4c1cd6(0x1df)),_0x4cb46c[_0x4c1cd6(0x2d0)]=![],_0x27340d[_0x4c1cd6(0x2d0)]=![],_0x4cb46c[_0x4c1cd6(0x3e2)]='',_0x14a1a3[_0x4c1cd6(0x37d)]='',_0x4cb46c['focus']();},_0x47b581[_0x13ac4f(0x2d2)]=async()=>{const _0x4ecd4e=_0x13ac4f;if(_0x47b581[_0x4ecd4e(0x2d0)]){console[_0x4ecd4e(0x1c9)](_0x4ecd4e(0x29b));return;}if(!_0x1b5c64){_0x14a1a3[_0x4ecd4e(0x37d)]=_0x4ecd4e(0x15d);return;}const _0x676e11=_0x13a78b['textContent'];if(confirm(_0x4ecd4e(0x236)+_0x676e11+_0x4ecd4e(0x382))){_0x47b581[_0x4ecd4e(0x2d0)]=!![];const _0xe9a7dd=_0x47b581[_0x4ecd4e(0x37d)];_0x47b581['textContent']=_0x4ecd4e(0x308),_0x47b581[_0x4ecd4e(0x97)]['add'](_0x4ecd4e(0x2f9)),_0x16c830['classList']['remove'](_0x4ecd4e(0x1df));try{await deletePostAndCleanup(_0x4f0ed7,_0x514160[_0x4ecd4e(0x302)],!![],_0x1b5c64),_0x37e3d7[_0x4ecd4e(0x97)]['add'](_0x4ecd4e(0x1df)),_0x42189d[_0x4ecd4e(0x97)]['remove'](_0x4ecd4e(0x1df)),_0x54d4dd[_0x4ecd4e(0x37d)]=_0x4ecd4e(0x2b0)+_0x676e11+_0x4ecd4e(0x17f),_0x5c6511[_0x4ecd4e(0x37d)]='Close',refreshReportSummary(_0x2577f3[_0x4ecd4e(0x424)]);}catch(_0x1f79a0){console[_0x4ecd4e(0x40a)](_0x4ecd4e(0xee),_0x1f79a0),alert(_0x4ecd4e(0x19f));}finally{_0x16c830[_0x4ecd4e(0x97)][_0x4ecd4e(0x2ce)](_0x4ecd4e(0x1df)),_0x47b581[_0x4ecd4e(0x2d0)]=![],_0x47b581[_0x4ecd4e(0x37d)]=_0xe9a7dd,_0x47b581['classList']['remove']('loading');}}},_0x5c6511[_0x13ac4f(0x2d2)]=()=>closeModal('deletePostModal');}async function deletePostAndCleanup(_0x343104,_0x83f81c,_0x47e523,_0x574278){const _0x17bdff=_0x13cbff,_0x1a3ecd=doc(db,'communities',communityId,_0x17bdff(0x1de),_0x343104),_0x563202=collection(db,'communities',communityId,_0x17bdff(0x1de),_0x343104,_0x17bdff(0x395));await runTransaction(db,async _0x2c0cbe=>{const _0x24997a=_0x17bdff;if(_0x47e523&&_0x574278){const _0x4cefda=doc(db,_0x24997a(0x3c4),auth['currentUser']['uid']),_0x565ec0=doc(db,_0x24997a(0x3c4),_0x574278),_0x24d0a4=await _0x2c0cbe[_0x24997a(0x22f)](_0x4cefda),_0x3cea97=await _0x2c0cbe[_0x24997a(0x22f)](_0x565ec0);if(!_0x24d0a4[_0x24997a(0x28f)]()||!_0x3cea97[_0x24997a(0x28f)]())throw new Error(_0x24997a(0x3c8));const _0x4c6352=(_0x24d0a4[_0x24997a(0x326)]()[_0x24997a(0x1b7)]||0x0)+0x1,_0x460faf=(_0x3cea97[_0x24997a(0x326)]()['swaps']||0x0)+0x1;_0x2c0cbe[_0x24997a(0x204)](_0x4cefda,{'swaps':_0x4c6352}),_0x2c0cbe[_0x24997a(0x204)](_0x565ec0,{'swaps':_0x460faf});}_0x2c0cbe[_0x24997a(0x2f0)](_0x1a3ecd);}),await deleteCollection(_0x563202);const _0xea07fa=_0x83f81c['map'](_0x147324=>{const _0x4cc118=_0x17bdff,_0x25c5a9=ref(storage,_0x147324);return deleteObject(_0x25c5a9)['catch'](_0x19879c=>console[_0x4cc118(0x40a)](_0x4cc118(0x32f),_0x19879c));});await Promise[_0x17bdff(0x1bb)](_0xea07fa);const _0x19131e=document['getElementById'](_0x17bdff(0x175)+_0x343104);_0x19131e?(_0x19131e['remove'](),console[_0x17bdff(0x1c9)](_0x17bdff(0x1b0)+_0x343104+_0x17bdff(0x2d5))):console[_0x17bdff(0x1c9)](_0x17bdff(0x9a)+_0x343104+_0x17bdff(0x281)),postCache[_0x17bdff(0x2f0)](_0x343104),loadedPostIds[_0x17bdff(0x2f0)](_0x343104),PaginationState[_0x17bdff(0x14c)]['delete'](_0x343104),totalYourPosts=0x0,await loadYourPosts(auth['currentUser'][_0x17bdff(0x424)]),await loadPosts(communityId,!![]),totalCarouselPosts=0x0,carouselIndex=0x0,await loadCarouselPosts(communityId);}async function deleteCollection(_0x3389a8,_0x5222aa=0x1f4){const _0x34a9ac=_0x13cbff,_0x255d93=query(_0x3389a8,limit(_0x5222aa)),_0x8282c7=await getDocs(_0x255d93);if(_0x8282c7[_0x34a9ac(0x273)])return;const _0x52f6ca=writeBatch(db);for(const _0x4b7a32 of _0x8282c7['docs']){const _0xcc721e=collection(db,_0x4b7a32[_0x34a9ac(0x3ee)][_0x34a9ac(0x3ac)],_0x34a9ac(0x297));await deleteCollection(_0xcc721e,_0x5222aa),_0x52f6ca['delete'](_0x4b7a32[_0x34a9ac(0x3ee)]);}await _0x52f6ca[_0x34a9ac(0x165)](),_0x8282c7[_0x34a9ac(0x11d)]===_0x5222aa&&await deleteCollection(_0x3389a8,_0x5222aa);}function setupYourPostsCarousel(_0x268ffd){const _0x28c9fc=_0x13cbff,_0x710fc1=document[_0x28c9fc(0xe7)]('carousel-'+_0x268ffd+_0x28c9fc(0x365)),_0x453efe=_0x710fc1[_0x28c9fc(0x21f)]('.carousel-prev[data-post-id=\x22'+_0x268ffd+_0x28c9fc(0x184)),_0x53b0c6=_0x710fc1[_0x28c9fc(0x21f)](_0x28c9fc(0x2f8)+_0x268ffd+'-your\x22]'),_0x14c152=_0x710fc1[_0x28c9fc(0x21f)](_0x28c9fc(0x34e));let _0x1235f9=JSON[_0x28c9fc(0x40c)](_0x710fc1[_0x28c9fc(0xa5)][_0x28c9fc(0x110)]||'[]');if(!_0x453efe||!_0x53b0c6||!_0x14c152){console['error'](_0x28c9fc(0x99)+_0x268ffd+_0x28c9fc(0x189));return;}_0x1235f9['length']===0x0&&(_0x1235f9=[_0x28c9fc(0x2b7),_0x28c9fc(0x2b7)]);_0x14c152[_0x28c9fc(0x374)]=_0x1235f9[0x0],_0x14c152[_0x28c9fc(0xa5)][_0x28c9fc(0x2dd)]='0';let _0x11c9c1=0x0;_0x453efe[_0x28c9fc(0xf0)]('click',_0x453efe['_carouselHandler']),_0x53b0c6[_0x28c9fc(0xf0)](_0x28c9fc(0xb8),_0x53b0c6[_0x28c9fc(0x130)]),_0x453efe['_carouselHandler']=_0x8a8b73=>{const _0x5a1512=_0x28c9fc;_0x8a8b73[_0x5a1512(0x13f)](),_0x8a8b73[_0x5a1512(0x379)](),_0x11c9c1=(_0x11c9c1-0x1+_0x1235f9[_0x5a1512(0x1b1)])%_0x1235f9[_0x5a1512(0x1b1)],_0x14c152['src']=_0x1235f9[_0x11c9c1],_0x14c152[_0x5a1512(0xa5)]['index']=_0x11c9c1;},_0x53b0c6[_0x28c9fc(0x130)]=_0x4d62fd=>{const _0x55ad90=_0x28c9fc;_0x4d62fd[_0x55ad90(0x13f)](),_0x4d62fd[_0x55ad90(0x379)](),_0x11c9c1=(_0x11c9c1+0x1)%_0x1235f9['length'],_0x14c152[_0x55ad90(0x374)]=_0x1235f9[_0x11c9c1],_0x14c152[_0x55ad90(0xa5)][_0x55ad90(0x2dd)]=_0x11c9c1;},_0x453efe[_0x28c9fc(0xaf)](_0x28c9fc(0xb8),_0x453efe[_0x28c9fc(0x130)]),_0x53b0c6['addEventListener'](_0x28c9fc(0xb8),_0x53b0c6[_0x28c9fc(0x130)]);}function setupCommunityCarousel(_0x13f60f){const _0x5975a1=_0x13cbff,_0x3d44d4=document[_0x5975a1(0xe7)](_0x5975a1(0x3a7)+_0x13f60f+_0x5975a1(0x1fb)),_0x3883fd=_0x3d44d4[_0x5975a1(0x21f)](_0x5975a1(0x35d)+_0x13f60f+_0x5975a1(0x168)),_0x25a92e=_0x3d44d4[_0x5975a1(0x21f)]('.carousel-next[data-post-id=\x22'+_0x13f60f+_0x5975a1(0x168)),_0x32b30a=_0x3d44d4[_0x5975a1(0x21f)]('.carousel-image');let _0x13367c=JSON[_0x5975a1(0x40c)](_0x3d44d4[_0x5975a1(0xa5)][_0x5975a1(0x110)]||'[]');if(!_0x3883fd||!_0x25a92e||!_0x32b30a){console[_0x5975a1(0x40a)](_0x5975a1(0x31e)+_0x13f60f+_0x5975a1(0x189));return;}_0x13367c[_0x5975a1(0x1b1)]===0x0&&(_0x13367c=[_0x5975a1(0x2b7),_0x5975a1(0x2b7)]);_0x32b30a[_0x5975a1(0x374)]=_0x13367c[0x0],_0x32b30a['dataset'][_0x5975a1(0x2dd)]='0';let _0x46dad1=0x0;_0x3883fd[_0x5975a1(0xf0)](_0x5975a1(0xb8),_0x3883fd[_0x5975a1(0x130)]),_0x25a92e[_0x5975a1(0xf0)]('click',_0x25a92e[_0x5975a1(0x130)]),_0x3883fd['_carouselHandler']=_0x59d81a=>{const _0x1eeeec=_0x5975a1;_0x59d81a[_0x1eeeec(0x13f)](),_0x59d81a['stopPropagation'](),_0x46dad1=(_0x46dad1-0x1+_0x13367c[_0x1eeeec(0x1b1)])%_0x13367c[_0x1eeeec(0x1b1)],_0x32b30a['src']=_0x13367c[_0x46dad1],_0x32b30a[_0x1eeeec(0xa5)][_0x1eeeec(0x2dd)]=_0x46dad1;},_0x25a92e[_0x5975a1(0x130)]=_0x5833bb=>{const _0x3a4e0b=_0x5975a1;_0x5833bb['preventDefault'](),_0x5833bb[_0x3a4e0b(0x379)](),_0x46dad1=(_0x46dad1+0x1)%_0x13367c['length'],_0x32b30a[_0x3a4e0b(0x374)]=_0x13367c[_0x46dad1],_0x32b30a[_0x3a4e0b(0xa5)]['index']=_0x46dad1;},_0x3883fd[_0x5975a1(0xaf)](_0x5975a1(0xb8),_0x3883fd[_0x5975a1(0x130)]),_0x25a92e['addEventListener']('click',_0x25a92e[_0x5975a1(0x130)]);}let lastCarouselDoc=null,firstCarouselDoc=null,totalCarouselPosts=0x0,lastFilterState={'lookingFor':'','offering':''},cachedMemberCount=null;async function getMemberCount(_0x31228a){const _0x246d00=_0x13cbff;if(cachedMemberCount!==null)return cachedMemberCount;const _0x38e366=doc(db,'communities',_0x31228a),_0x1fa93a=await getDoc(_0x38e366);if(!_0x1fa93a['exists']())return console[_0x246d00(0x40a)]('Community\x20not\x20found!'),0x0;return cachedMemberCount=_0x1fa93a[_0x246d00(0x326)]()['memberCount']||0x0,cachedMemberCount;}async function loadCarouselPosts(_0x1698d2,_0x23def4=0x1){const _0x253409=_0x13cbff,_0x958192=document[_0x253409(0xe7)](_0x253409(0x386)),_0x416f4e=document[_0x253409(0xe7)]('carouselPrevBtn'),_0x167cce=document[_0x253409(0xe7)]('carouselNextBtn'),_0x523207=document['getElementById'](_0x253409(0x25b))?.[_0x253409(0x3e2)]||'',_0x5ee4ba=document[_0x253409(0xe7)](_0x253409(0x151))?.['value']||'',_0x53c762=window[_0x253409(0x363)]<0x300?0x2:0x4;_0x958192[_0x253409(0x2a8)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>';const _0x2db882=await getMemberCount(_0x1698d2),_0xc2edd=Math[_0x253409(0x1a1)](0x5,Math[_0x253409(0xb9)](_0x2db882*0.01)),_0x338472={'lookingFor':_0x523207,'offering':_0x5ee4ba};if(totalCarouselPosts===0x0||lastFilterState[_0x253409(0x133)]!==_0x338472['lookingFor']||lastFilterState[_0x253409(0x2fa)]!==_0x338472[_0x253409(0x2fa)]){const _0x4a1138=query(collection(db,_0x253409(0x162),_0x1698d2,'posts'),where(_0x253409(0x195),'>=',_0xc2edd),..._0x523207?[where(_0x253409(0x133),'==',_0x523207)]:[],..._0x5ee4ba?[where(_0x253409(0x2fa),'==',_0x5ee4ba)]:[]);totalCarouselPosts=(await getDocs(_0x4a1138))[_0x253409(0x11d)],lastFilterState=_0x338472,console[_0x253409(0x1c9)](_0x253409(0x274)+_0x1698d2+':\x20'+totalCarouselPosts);}const _0x54d972=Math[_0x253409(0x1a1)](0x0,Math[_0x253409(0xb9)](totalCarouselPosts/_0x53c762)-0x1);if(carouselIndex<0x0)carouselIndex=_0x54d972;else carouselIndex>_0x54d972&&(carouselIndex=0x0);let _0x4ee46=query(collection(db,'communities',_0x1698d2,_0x253409(0x1de)),where(_0x253409(0x195),'>=',_0xc2edd),..._0x523207?[where('lookingFor','==',_0x523207)]:[],..._0x5ee4ba?[where(_0x253409(0x2fa),'==',_0x5ee4ba)]:[],orderBy(_0x253409(0x195),_0x253409(0x183)));if(_0x23def4>0x0&&carouselIndex>0x0&&lastCarouselDoc&&carouselIndex<=_0x54d972)_0x4ee46=query(_0x4ee46,startAfter(lastCarouselDoc),limit(_0x53c762));else{if(_0x23def4<0x0&&carouselIndex>=0x0&&firstCarouselDoc&&carouselIndex<_0x54d972)_0x4ee46=query(_0x4ee46,endBefore(firstCarouselDoc),limitToLast(_0x53c762));else{if(carouselIndex===0x0||totalCarouselPosts<=_0x53c762)_0x4ee46=query(_0x4ee46,limit(_0x53c762));else carouselIndex===_0x54d972&&(_0x4ee46=query(collection(db,_0x253409(0x162),_0x1698d2,_0x253409(0x1de)),where(_0x253409(0x195),'>=',_0xc2edd),..._0x523207?[where(_0x253409(0x133),'==',_0x523207)]:[],..._0x5ee4ba?[where(_0x253409(0x2fa),'==',_0x5ee4ba)]:[],orderBy(_0x253409(0x195),_0x253409(0x183)),limitToLast(_0x53c762)));}}const _0x35428c=await getDocs(_0x4ee46),_0x4cb35a=_0x35428c[_0x253409(0x176)]['map'](_0x306744=>({'id':_0x306744['id'],..._0x306744['data'](),'communityId':_0x1698d2}));if(_0x35428c['docs']['length']>0x0)lastCarouselDoc=_0x35428c['docs'][_0x35428c['docs']['length']-0x1],firstCarouselDoc=_0x35428c[_0x253409(0x176)][0x0];else{if(_0x23def4>0x0)carouselIndex=0x0,_0x4ee46=query(collection(db,_0x253409(0x162),_0x1698d2,_0x253409(0x1de)),where(_0x253409(0x195),'>=',_0xc2edd),..._0x523207?[where('lookingFor','==',_0x523207)]:[],..._0x5ee4ba?[where(_0x253409(0x2fa),'==',_0x5ee4ba)]:[],orderBy('likes',_0x253409(0x183)),limit(_0x53c762));else _0x23def4<0x0&&(carouselIndex=_0x54d972,_0x4ee46=query(collection(db,_0x253409(0x162),_0x1698d2,'posts'),where('likes','>=',_0xc2edd),..._0x523207?[where('lookingFor','==',_0x523207)]:[],..._0x5ee4ba?[where('offering','==',_0x5ee4ba)]:[],orderBy(_0x253409(0x195),_0x253409(0x183)),limitToLast(_0x53c762)));const _0xc3054d=await getDocs(_0x4ee46);_0x4cb35a[_0x253409(0x13d)](..._0xc3054d[_0x253409(0x176)][_0x253409(0x10a)](_0x56b3fa=>({'id':_0x56b3fa['id'],..._0x56b3fa['data'](),'communityId':_0x1698d2}))),_0xc3054d[_0x253409(0x176)]['length']>0x0&&(lastCarouselDoc=_0xc3054d['docs'][_0xc3054d['docs'][_0x253409(0x1b1)]-0x1],firstCarouselDoc=_0xc3054d[_0x253409(0x176)][0x0]);}_0x4cb35a[_0x253409(0x235)](_0x5140d0=>{const _0x1ae4ac=_0x253409;!postCache[_0x1ae4ac(0x18c)](_0x5140d0['id'])&&(postCache[_0x1ae4ac(0x3f3)](_0x5140d0['id'],_0x5140d0),console[_0x1ae4ac(0x1c9)]('Cached\x20carousel\x20post\x20'+_0x5140d0['id']+_0x1ae4ac(0x277)+_0x1698d2));}),_0x958192['innerHTML']=_0x4cb35a[_0x253409(0x1b1)]===0x0?'<p\x20class=\x22no-posts\x22>No\x20trending\x20posts\x20yet!</p>':'';for(const _0x28e89d of _0x4cb35a){if(_0x28e89d[_0x253409(0x12f)]!==_0x1698d2){console['log'](_0x253409(0x1cd)+_0x28e89d['id']+'—belongs\x20to\x20'+_0x28e89d[_0x253409(0x12f)]+_0x253409(0x3d6)+_0x1698d2);continue;}const _0x50f90a=await fetchUserData(_0x28e89d['userId']),_0x152482=document[_0x253409(0x3da)](_0x253409(0x187));_0x152482[_0x253409(0x125)]=_0x253409(0xb7),_0x152482[_0x253409(0x2a8)]=_0x253409(0x152)+(_0x28e89d[_0x253409(0x12e)]||_0x253409(0x355))+_0x253409(0x332)+(_0x28e89d['lookingFor']||_0x253409(0x1dd))+_0x253409(0x3f0)+(_0x28e89d[_0x253409(0x2fa)]||_0x253409(0x1dd))+'</p>\x0a\x20\x20<p>❤️\x20Likes:\x20'+(_0x28e89d[_0x253409(0x195)]||0x0)+_0x253409(0x163)+_0x28e89d[_0x253409(0x3b8)]+'\x22>'+(_0x50f90a[_0x253409(0x86)]||'Unknown')+_0x253409(0x13b)+_0x28e89d['id']+_0x253409(0xc4),_0x958192['appendChild'](_0x152482),_0x152482[_0x253409(0x21f)](_0x253409(0x34d))['addEventListener'](_0x253409(0xb8),()=>viewProfile(_0x28e89d['userId'])),_0x152482[_0x253409(0x21f)](_0x253409(0x19b))['addEventListener']('click',_0x48a773=>{const _0xcdc987=_0x253409;_0x48a773[_0xcdc987(0x379)](),copyPostId(_0x28e89d['id']);});}_0x416f4e[_0x253409(0x2d0)]=totalCarouselPosts===0x0,_0x167cce[_0x253409(0x2d0)]=totalCarouselPosts===0x0,console['log']('Loaded\x20carousel\x20posts\x20for\x20community\x20'+_0x1698d2+_0x253409(0x3f6)+carouselIndex);}function slideCarousel(_0x4d6e20){carouselIndex+=_0x4d6e20,loadCarouselPosts(communityId,_0x4d6e20);}const delay=_0x4c4343=>new Promise(_0x5ab532=>setTimeout(_0x5ab532,_0x4c4343)),POST_CACHE_KEY=_0x13cbff(0x358)+communityId,LIKED_PREFS_KEY=_0x13cbff(0x403)+communityId,CACHE_TIMESTAMP_KEY=_0x13cbff(0x3a0)+communityId,CACHE_EXPIRY_HOURS=0x8,PaginationState={'POSTS_PER_PAGE':0xa,'currentPage':0x1,'displayedPostIds':new Set()};function isCacheExpired(){const _0x530a71=_0x13cbff,_0x168d5e=sessionStorage[_0x530a71(0x193)](CACHE_TIMESTAMP_KEY);if(!_0x168d5e)return!![];const _0x5b4bea=Date[_0x530a71(0x334)]()-parseInt(_0x168d5e);return _0x5b4bea>CACHE_EXPIRY_HOURS*0x3c*0x3c*0x3e8;}function resetCache(){const _0x911124=_0x13cbff;sessionStorage[_0x911124(0x2fd)](POST_CACHE_KEY),sessionStorage[_0x911124(0x2fd)](LIKED_PREFS_KEY),sessionStorage[_0x911124(0x392)](CACHE_TIMESTAMP_KEY,Date[_0x911124(0x334)]()[_0x911124(0x1e3)]());}function getLikedPrefs(){const _0x2ca2de=_0x13cbff;if(isCacheExpired())resetCache();const _0x562c0c=sessionStorage[_0x2ca2de(0x193)](LIKED_PREFS_KEY);if(!_0x562c0c)return{'categories':new Set(),'offerings':new Set()};const _0x5d2d94=JSON['parse'](_0x562c0c);return{'categories':new Set(_0x5d2d94[_0x2ca2de(0xec)]),'offerings':new Set(_0x5d2d94[_0x2ca2de(0x27f)])};}function addLikedPref(_0x1ed385,_0x98c043){const _0x43c624=_0x13cbff,_0x296abc=getLikedPrefs();_0x296abc['categories']['add'](_0x1ed385),_0x296abc[_0x43c624(0x27f)][_0x43c624(0x2ce)](_0x98c043),sessionStorage[_0x43c624(0x392)](LIKED_PREFS_KEY,JSON['stringify']({'categories':Array[_0x43c624(0x3bc)](_0x296abc['categories']),'offerings':Array[_0x43c624(0x3bc)](_0x296abc[_0x43c624(0x27f)])}));}function normalizePostData(_0x17bdc3){const _0xd504ff=_0x13cbff;return{..._0x17bdc3,'createdAt':_0x17bdc3[_0xd504ff(0x180)]instanceof Object&&_0xd504ff(0x173)in _0x17bdc3[_0xd504ff(0x180)]?_0x17bdc3[_0xd504ff(0x180)]['toDate']():new Date(_0x17bdc3[_0xd504ff(0x180)])};}function getCachedPosts(){const _0x3b1bbd=_0x13cbff;if(isCacheExpired())resetCache();const _0x33faf9=sessionStorage['getItem'](POST_CACHE_KEY);if(!_0x33faf9)return new Map();const _0x207427=JSON[_0x3b1bbd(0x40c)](_0x33faf9);return new Map(_0x207427['map'](([_0x55d3f3,_0x29952a])=>{const _0x249ca7=_0x3b1bbd;return _0x29952a[_0x249ca7(0x326)]['createdAt']=new Date(_0x29952a[_0x249ca7(0x326)][_0x249ca7(0x180)]),[_0x55d3f3,_0x29952a];}));}function setCachedPosts(_0x2a4a42){const _0x2a1a28=_0x13cbff,_0x4295d4=0x3e8,_0x201009=new Map(Array[_0x2a1a28(0x3bc)](_0x2a4a42[_0x2a1a28(0x3f9)]())['map'](([_0x42074d,_0x384fb0])=>{const _0x1fd8f2=_0x2a1a28;return[_0x42074d,{..._0x384fb0,'data':{..._0x384fb0[_0x1fd8f2(0x326)],'createdAt':_0x384fb0[_0x1fd8f2(0x326)][_0x1fd8f2(0x180)][_0x1fd8f2(0x316)]()}}];}));if(_0x201009['size']>_0x4295d4){const _0x560a2e=_0x201009['size']-_0x4295d4,_0x4d958c=Array[_0x2a1a28(0x3bc)](_0x201009['keys']())['slice'](0x0,_0x560a2e);_0x4d958c[_0x2a1a28(0x235)](_0xe3226f=>_0x201009[_0x2a1a28(0x2f0)](_0xe3226f)),console['log']('Trimmed\x20'+_0x560a2e+_0x2a1a28(0x360));}sessionStorage[_0x2a1a28(0x392)](POST_CACHE_KEY,JSON[_0x2a1a28(0x229)](Array['from'](_0x201009[_0x2a1a28(0x3f9)]()))),!sessionStorage['getItem'](CACHE_TIMESTAMP_KEY)&&sessionStorage[_0x2a1a28(0x392)](CACHE_TIMESTAMP_KEY,Date[_0x2a1a28(0x334)]()[_0x2a1a28(0x1e3)]());}function getPostScore(_0x46a149,_0x3ae75e){const _0x5de1cd=_0x13cbff,_0x222221=Date['now'](),_0x2a8d23=(_0x222221-_0x46a149[_0x5de1cd(0x180)]['getTime']())/(0x3e8*0x3c*0x3c),_0x59db22=Math[_0x5de1cd(0x1a1)](0x0,0x1e-_0x2a8d23/0x18)/0x1e,_0x507c7f=Math[_0x5de1cd(0x33e)](_0x46a149[_0x5de1cd(0x195)]||0x0,0x32)/0x32,_0x1721d9=Math['min'](_0x46a149[_0x5de1cd(0x289)]||0x0,0x14)/0x14;let _0x4672ad=0.4*_0x507c7f+0.4*_0x1721d9+0.2*_0x59db22;const _0x575a07=new Set(_0x3ae75e['categories']),_0x50d393=new Set(_0x3ae75e[_0x5de1cd(0x27f)]);return(_0x575a07[_0x5de1cd(0x18c)](_0x46a149['category'])||_0x50d393['has'](_0x46a149['offering']))&&(_0x4672ad+=0.3),_0x2a8d23<0x18&&(_0x4672ad+=0.5),Math[_0x5de1cd(0x33e)](1.5,_0x4672ad);}async function loadPosts(_0x1132df,_0x4a2730=![],_0x544dac=PaginationState[_0x13cbff(0x2e0)]){const _0x4d8198=_0x13cbff;if(isFetching||isSearching)return;isFetching=!![];const _0x59bf95=document[_0x4d8198(0xe7)](_0x4d8198(0x257)),_0xa6c3d=document[_0x4d8198(0xe7)](_0x4d8198(0x3e1)),_0x4e5f6b={'category':document['getElementById'](_0x4d8198(0x26f))?.[_0x4d8198(0x3e2)]||'','lookingFor':document[_0x4d8198(0xe7)](_0x4d8198(0x25b))?.[_0x4d8198(0x3e2)]||'','offering':document[_0x4d8198(0xe7)]('offeringFilter')?.['value']||''};_0x4a2730&&(_0x59bf95[_0x4d8198(0x2a8)]='',_0xa6c3d[_0x4d8198(0x31a)][_0x4d8198(0x10f)]='none',loadedPostIds['clear'](),PaginationState[_0x4d8198(0x14c)][_0x4d8198(0x40d)](),lastPostDoc=null,postCache['clear'](),PaginationState[_0x4d8198(0x2e0)]=0x1,resetCache(),console['log'](_0x4d8198(0x335)+_0x1132df));PaginationState['currentPage']=_0x544dac;const _0x5712ca=getCachedPosts(),_0x13844d=getLikedPrefs(),_0x5a1d82=0x19;let _0x1fa6b3=null;if(_0x5712ca['size']>0x0){const _0x2bea8c=Array[_0x4d8198(0x3bc)](_0x5712ca[_0x4d8198(0x282)]())[_0x4d8198(0x369)](_0x559482=>_0x559482[_0x4d8198(0x326)]['communityId']===_0x1132df)[_0x4d8198(0x10a)](_0x41a869=>_0x41a869[_0x4d8198(0x326)][_0x4d8198(0x180)][_0x4d8198(0x295)]());_0x1fa6b3=_0x2bea8c[_0x4d8198(0x1b1)]>0x0?Math['max'](..._0x2bea8c):null,console[_0x4d8198(0x1c9)](_0x4d8198(0x1fc)+_0x2bea8c[_0x4d8198(0x1b1)]+_0x4d8198(0x390)+_0x1132df+_0x4d8198(0x2fc)+(_0x1fa6b3?new Date(_0x1fa6b3)[_0x4d8198(0x149)]():_0x4d8198(0x1dd)));}else console['log'](_0x4d8198(0x20d)+_0x1132df+_0x4d8198(0x253));const _0x366c95=(PaginationState[_0x4d8198(0x2e0)]-0x1)*PaginationState[_0x4d8198(0x14f)],_0xa1bd33=_0x366c95+PaginationState['POSTS_PER_PAGE'];let _0x7172cf=Array[_0x4d8198(0x3bc)](_0x5712ca[_0x4d8198(0x282)]())[_0x4d8198(0x369)](_0x18cb9f=>_0x18cb9f[_0x4d8198(0x326)][_0x4d8198(0x12f)]===_0x1132df)[_0x4d8198(0x10a)](_0x171e27=>({..._0x171e27,'score':getPostScore(_0x171e27[_0x4d8198(0x326)],_0x13844d)}))['filter'](_0x1cdadb=>(!_0x4e5f6b[_0x4d8198(0x322)]||_0x1cdadb[_0x4d8198(0x326)][_0x4d8198(0x322)]===_0x4e5f6b[_0x4d8198(0x322)])&&(!_0x4e5f6b[_0x4d8198(0x133)]||_0x1cdadb[_0x4d8198(0x326)][_0x4d8198(0x133)]===_0x4e5f6b['lookingFor'])&&(!_0x4e5f6b[_0x4d8198(0x2fa)]||_0x1cdadb[_0x4d8198(0x326)][_0x4d8198(0x2fa)]===_0x4e5f6b[_0x4d8198(0x2fa)]))[_0x4d8198(0x367)]((_0x350827,_0x497471)=>_0x497471[_0x4d8198(0x2f4)]-_0x350827[_0x4d8198(0x2f4)]);const _0x5af9a5=_0x7172cf[_0x4d8198(0x3ea)](_0x366c95,_0xa1bd33)[_0x4d8198(0x369)](_0x3f9cac=>!PaginationState[_0x4d8198(0x14c)][_0x4d8198(0x18c)](_0x3f9cac['id'])),_0x5d3d68=_0x5af9a5[_0x4d8198(0x1b1)]===PaginationState[_0x4d8198(0x14f)]||_0x366c95+_0x5af9a5['length']>=_0x7172cf['length'];if(!_0x5d3d68||_0x4a2730||_0x5712ca['size']===0x0){let _0x1c7fac=query(collection(db,_0x4d8198(0x162),_0x1132df,_0x4d8198(0x1de)),..._0x4e5f6b[_0x4d8198(0x322)]?[where('category','==',_0x4e5f6b[_0x4d8198(0x322)])]:[],..._0x4e5f6b[_0x4d8198(0x133)]?[where(_0x4d8198(0x133),'==',_0x4e5f6b[_0x4d8198(0x133)])]:[],..._0x4e5f6b[_0x4d8198(0x2fa)]?[where(_0x4d8198(0x2fa),'==',_0x4e5f6b[_0x4d8198(0x2fa)])]:[],orderBy(_0x4d8198(0x180),_0x4d8198(0x183)),limit(_0x5a1d82),...lastPostDoc&&!_0x4a2730?[startAfter(lastPostDoc)]:[],..._0x1fa6b3&&!_0x4a2730?[where(_0x4d8198(0x180),'>',new Date(_0x1fa6b3))]:[]);try{const _0x5a82ce=await getDocs(_0x1c7fac),_0x447fca=_0x5a82ce[_0x4d8198(0x176)][_0x4d8198(0x10a)](_0x30f47f=>({'id':_0x30f47f['id'],'data':{...normalizePostData(_0x30f47f[_0x4d8198(0x326)]()),'communityId':_0x1132df},'score':getPostScore(normalizePostData(_0x30f47f[_0x4d8198(0x326)]()),_0x13844d)}));console['log'](_0x4d8198(0x387)+_0x447fca['length']+_0x4d8198(0x396)+_0x1132df+'\x20('+_0x5a1d82+_0x4d8198(0x406)),_0x447fca['forEach'](_0x41c815=>_0x5712ca[_0x4d8198(0x3f3)](_0x41c815['id'],_0x41c815)),setCachedPosts(_0x5712ca),_0x7172cf=Array['from'](_0x5712ca[_0x4d8198(0x282)]())[_0x4d8198(0x369)](_0x4be863=>_0x4be863['data'][_0x4d8198(0x12f)]===_0x1132df)[_0x4d8198(0x10a)](_0x4e8a12=>({..._0x4e8a12,'score':getPostScore(_0x4e8a12[_0x4d8198(0x326)],_0x13844d)}))[_0x4d8198(0x369)](_0xaef107=>(!_0x4e5f6b[_0x4d8198(0x322)]||_0xaef107[_0x4d8198(0x326)][_0x4d8198(0x322)]===_0x4e5f6b[_0x4d8198(0x322)])&&(!_0x4e5f6b['lookingFor']||_0xaef107[_0x4d8198(0x326)][_0x4d8198(0x133)]===_0x4e5f6b[_0x4d8198(0x133)])&&(!_0x4e5f6b[_0x4d8198(0x2fa)]||_0xaef107[_0x4d8198(0x326)][_0x4d8198(0x2fa)]===_0x4e5f6b[_0x4d8198(0x2fa)]))[_0x4d8198(0x367)]((_0x579ed9,_0x122af4)=>_0x122af4[_0x4d8198(0x2f4)]-_0x579ed9[_0x4d8198(0x2f4)]);}catch(_0x24bbcc){console[_0x4d8198(0x40a)](_0x4d8198(0x361)+_0x1132df+':',_0x24bbcc),_0x59bf95[_0x4d8198(0x2a8)]=_0x4d8198(0x1f9),isFetching=![];return;}}const _0x3d5e27=_0x7172cf[_0x4d8198(0x3ea)](_0x366c95,_0xa1bd33)[_0x4d8198(0x369)](_0x2d0c0f=>!PaginationState[_0x4d8198(0x14c)][_0x4d8198(0x18c)](_0x2d0c0f['id']));console[_0x4d8198(0x1c9)]('Showing\x20'+_0x3d5e27[_0x4d8198(0x1b1)]+'\x20posts\x20for\x20'+_0x1132df+_0x4d8198(0x2f5)+PaginationState[_0x4d8198(0x2e0)]);if(_0x3d5e27[_0x4d8198(0x1b1)]===0x0&&!initialPostsLoaded)_0x59bf95[_0x4d8198(0x2a8)]=_0x4d8198(0x2be),_0xa6c3d[_0x4d8198(0x31a)][_0x4d8198(0x10f)]=_0x4d8198(0x2fe);else{totalPosts=totalPosts||parseInt(sessionStorage['getItem']('totalPosts_'+_0x1132df))||await getTotalPosts(_0x1132df),sessionStorage[_0x4d8198(0x392)]('totalPosts_'+_0x1132df,totalPosts),initialPostsLoaded=!![],_0x3d5e27[_0x4d8198(0x235)](_0x106b1e=>postCache['set'](_0x106b1e['id'],{'id':_0x106b1e['id'],'data':_0x106b1e[_0x4d8198(0x326)]}));const _0x575744=query(collection(doc(db,'users',auth[_0x4d8198(0xb1)]['uid']),_0x4d8198(0x146)),where(_0x4d8198(0x12f),'==',_0x1132df)),_0x2fa288=await getDocs(_0x575744),_0x7b4780=new Set(_0x2fa288['docs'][_0x4d8198(0x10a)](_0xe52acc=>_0xe52acc[_0x4d8198(0x326)]()['postId']));_0x59bf95['innerHTML']='',PaginationState[_0x4d8198(0x14c)][_0x4d8198(0x40d)](),await renderPosts({'docs':_0x3d5e27[_0x4d8198(0x10a)](_0x49604e=>({'id':_0x49604e['id'],'data':()=>_0x49604e[_0x4d8198(0x326)]}))},_0x59bf95,_0x7b4780),addPaginationControls(_0x59bf95,_0x7172cf[_0x4d8198(0x1b1)],_0x1132df),_0xa6c3d[_0x4d8198(0x31a)][_0x4d8198(0x10f)]=PaginationState[_0x4d8198(0x2e0)]*PaginationState[_0x4d8198(0x14f)]>=totalPosts?'block':_0x4d8198(0x2fe);}isFetching=![];}document['getElementById'](_0x13cbff(0x26f))?.[_0x13cbff(0xaf)](_0x13cbff(0xe4),()=>loadPosts(communityId,!![])),document[_0x13cbff(0xe7)](_0x13cbff(0x25b))?.[_0x13cbff(0xaf)](_0x13cbff(0xe4),()=>loadPosts(communityId,!![])),document[_0x13cbff(0xe7)](_0x13cbff(0x151))?.[_0x13cbff(0xaf)]('change',()=>loadPosts(communityId,!![]));async function renderPosts(_0x4d5b76,_0x1832f5,_0x597162){const _0x53f3e1=_0x13cbff,_0x51250a=await getCommData(),_0x90b118=_0x51250a?.[_0x53f3e1(0x12b)]?.[_0x53f3e1(0x3c6)](auth[_0x53f3e1(0xb1)][_0x53f3e1(0x424)])||_0x51250a?.[_0x53f3e1(0x2cb)]===auth['currentUser'][_0x53f3e1(0x424)],_0x355606=[...new Set(_0x4d5b76['docs'][_0x53f3e1(0x10a)](_0x44079c=>_0x44079c[_0x53f3e1(0x326)]()[_0x53f3e1(0x3b8)])['filter'](Boolean))];await fetchUserData(_0x355606);for(const _0x49f456 of _0x4d5b76[_0x53f3e1(0x176)]){const _0x162907=_0x49f456['id'];if(PaginationState[_0x53f3e1(0x14c)][_0x53f3e1(0x18c)](_0x162907))continue;if(PaginationState[_0x53f3e1(0x14c)][_0x53f3e1(0x11d)]>=PaginationState['POSTS_PER_PAGE'])break;const _0x3d3816=postCache[_0x53f3e1(0x22f)](_0x162907)?.['data']||_0x49f456[_0x53f3e1(0x326)]();if(_0x3d3816['communityId']&&_0x3d3816[_0x53f3e1(0x12f)]!==communityId){console[_0x53f3e1(0x1c9)]('Skipping\x20post\x20'+_0x162907+_0x53f3e1(0x237)+_0x3d3816[_0x53f3e1(0x12f)]+_0x53f3e1(0x3d6)+communityId);continue;}PaginationState[_0x53f3e1(0x14c)][_0x53f3e1(0x2ce)](_0x162907),loadedPostIds[_0x53f3e1(0x2ce)](_0x162907);const _0x52e2d5=userDataCache[_0x3d3816[_0x53f3e1(0x3b8)]]||{'profilePhoto':_0x53f3e1(0x1cf),'name':_0x53f3e1(0x19a),'username':'unknown'},_0x4976dc=_0x51250a?.['admins']?.['includes'](_0x3d3816[_0x53f3e1(0x3b8)])||_0x51250a?.[_0x53f3e1(0x2cb)]===_0x3d3816[_0x53f3e1(0x3b8)],_0x110b71=query(collection(db,'communities',communityId,_0x53f3e1(0x1de),_0x162907,_0x53f3e1(0x395)),orderBy(_0x53f3e1(0x180),'desc')),_0x4ae93f=await getDocs(_0x110b71),_0x4bd5d7=_0x4ae93f[_0x53f3e1(0x11d)],_0x3df00c=_0x3d3816[_0x53f3e1(0x180)]?new Date(_0x3d3816[_0x53f3e1(0x180)])['toLocaleString']():'N/A',_0x3a4a34=_0x3d3816[_0x53f3e1(0x302)]||[],_0x19a23f=_0x3a4a34['length'],_0x460dca=await getPostReportStatus(_0x162907),_0x4d66a2=_0x597162['has'](_0x162907),_0x2e0ccc=categoryDisplayMap[_0x3d3816['category']]||_0x3d3816[_0x53f3e1(0x322)];if(_0x460dca?.[_0x53f3e1(0x167)]){PaginationState['displayedPostIds'][_0x53f3e1(0x2f0)](_0x162907),loadedPostIds[_0x53f3e1(0x2f0)](_0x162907);continue;}const _0x526824=document['createElement'](_0x53f3e1(0x187));_0x526824['className']='post',_0x526824['id']=_0x53f3e1(0x175)+_0x162907,_0x526824[_0x53f3e1(0x2a8)]=_0x53f3e1(0x14e)+_0x52e2d5['profilePhoto']+_0x53f3e1(0x331)+_0x3d3816[_0x53f3e1(0x3b8)]+'\x22>'+_0x52e2d5[_0x53f3e1(0x86)]+'</span>\x20<span\x20class=\x22at-user\x22>@'+_0x52e2d5[_0x53f3e1(0x1f1)]+_0x53f3e1(0x2c9)+(_0x4976dc?_0x53f3e1(0x2e5):'')+_0x53f3e1(0x357)+(_0x3d3816[_0x53f3e1(0x12e)]||_0x53f3e1(0x355))+_0x53f3e1(0x2ac)+(_0x3d3816[_0x53f3e1(0x3fa)]||'')+_0x53f3e1(0x254)+_0x162907+_0x53f3e1(0xd9)+JSON[_0x53f3e1(0x229)](_0x3a4a34)+'\x27>\x0a\x20\x20\x20\x20'+(_0x19a23f>0x1?_0x53f3e1(0x100)+_0x162907+_0x53f3e1(0x3c0):'')+_0x53f3e1(0x3dc)+(_0x3a4a34[0x0]||_0x53f3e1(0x2b7))+_0x53f3e1(0x1bf)+(_0x19a23f>0x1?'<button\x20class=\x22carousel-next\x22\x20data-post-id=\x22'+_0x162907+_0x53f3e1(0x244):'')+_0x53f3e1(0x2c2)+(_0x3d3816[_0x53f3e1(0x209)]?.[_0x53f3e1(0x86)]||'N/A')+_0x53f3e1(0x9c)+_0x2e0ccc+_0x53f3e1(0x2c4)+(_0x3d3816[_0x53f3e1(0x133)]||_0x53f3e1(0x1dd))+_0x53f3e1(0x329)+(_0x3d3816[_0x53f3e1(0x2fa)]||_0x53f3e1(0x1dd))+_0x53f3e1(0x272)+_0x3df00c+_0x53f3e1(0x342)+_0x162907+_0x53f3e1(0xff)+_0x162907+_0x53f3e1(0x1fa)+_0x162907+'\x22>'+((_0x3d3816[_0x53f3e1(0x259)]||[])[_0x53f3e1(0x3c6)](auth[_0x53f3e1(0xb1)][_0x53f3e1(0x424)])?_0x53f3e1(0xd7):_0x53f3e1(0x8f))+'\x20('+(_0x3d3816[_0x53f3e1(0x195)]||0x0)+')</button>\x0a\x20\x20<button\x20class=\x22save-toggle-btn\x22\x20data-post-id=\x22'+_0x162907+_0x53f3e1(0x38b)+communityId+'\x22>'+(_0x4d66a2?'🗑️\x20Unsave':_0x53f3e1(0x29c))+'</button>\x0a\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-'+_0x162907+'\x22>Report\x20Post</button>\x0a\x20\x20<br><br>\x0a\x20\x20'+(_0x3d3816[_0x53f3e1(0x3b8)]===auth[_0x53f3e1(0xb1)][_0x53f3e1(0x424)]||_0x90b118?_0x53f3e1(0x39a)+_0x162907+_0x53f3e1(0x20b):'')+_0x53f3e1(0x2f6)+(_0x460dca?.[_0x53f3e1(0x1be)]&&_0x460dca[_0x53f3e1(0x2ba)]===0x1?_0x53f3e1(0x210)+_0x162907+_0x53f3e1(0x1db):'')+_0x53f3e1(0x2f6)+(_0x460dca?.[_0x53f3e1(0x1be)]&&_0x460dca['reportCount']>=0x2?_0x53f3e1(0x210)+_0x162907+_0x53f3e1(0x1d2)+_0x460dca[_0x53f3e1(0x2ba)]+_0x53f3e1(0x1ad):'')+_0x53f3e1(0x2f6)+(_0x90b118&&_0x460dca?.['reportCount']>0x0?_0x53f3e1(0x225)+_0x162907+_0x53f3e1(0x1d2)+_0x460dca[_0x53f3e1(0x2ba)]+_0x53f3e1(0x243)+(_0x460dca[_0x53f3e1(0x2ba)]>0x1?'s':'')+'.\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-post-btn\x22\x20data-post-id=\x22'+_0x162907+_0x53f3e1(0x14d)+_0x162907+_0x53f3e1(0x33a):'')+_0x53f3e1(0x252)+_0x162907+'\x22>'+_0x4bd5d7+'\x20comments</a>\x0a\x20\x20\x20\x20<div\x20class=\x22comments-thread\x22\x20id=\x22comments-'+_0x162907+_0x53f3e1(0x3de)+_0x162907+_0x53f3e1(0x89)+_0x162907+_0x53f3e1(0x301),_0x1832f5[_0x53f3e1(0x425)](_0x526824);const _0x594989=_0x526824[_0x53f3e1(0x21f)]('.like-btn[data-post-id=\x22'+_0x162907+'\x22]');_0x594989['addEventListener'](_0x53f3e1(0xb8),async()=>{const _0x4cc14c=_0x53f3e1,_0x37c098=doc(db,_0x4cc14c(0x162),communityId,_0x4cc14c(0x1de),_0x162907),_0x5ccdb6=await getDoc(_0x37c098);if(!_0x5ccdb6[_0x4cc14c(0x28f)]()){alert(_0x4cc14c(0x23e));return;}const _0x446452=normalizePostData(_0x5ccdb6[_0x4cc14c(0x326)]()),_0x4d4354=auth[_0x4cc14c(0xb1)][_0x4cc14c(0x424)],_0x1a5c32=_0x446452['likedBy']||[];let _0x4f7938=_0x446452[_0x4cc14c(0x195)]||0x0,_0xbfa640=[..._0x1a5c32];_0x1a5c32['includes'](_0x4d4354)?(_0xbfa640=_0xbfa640['filter'](_0x22ee27=>_0x22ee27!==_0x4d4354),_0x4f7938=Math['max'](0x0,_0x4f7938-0x1)):(_0xbfa640[_0x4cc14c(0x13d)](_0x4d4354),_0x4f7938+=0x1,addLikedPref(_0x446452['category'],_0x446452[_0x4cc14c(0x2fa)]));await updateDoc(_0x37c098,{'likes':_0x4f7938,'likedBy':_0xbfa640}),_0x594989[_0x4cc14c(0x37d)]=(_0x1a5c32[_0x4cc14c(0x3c6)](_0x4d4354)?_0x4cc14c(0x8f):'💔\x20Unlike')+'\x20('+_0x4f7938+')';const _0x443613=getCachedPosts();_0x443613['set'](_0x162907,{'id':_0x162907,'data':{..._0x446452,'likes':_0x4f7938,'likedBy':_0xbfa640,'communityId':communityId}}),setCachedPosts(_0x443613);});const _0x29107=_0x526824['querySelector'](_0x53f3e1(0x188)+_0x162907+'\x22]');_0x29107[_0x53f3e1(0x28e)](_0x29107[_0x53f3e1(0x3a3)](!![]));const _0x17845c=_0x526824[_0x53f3e1(0x21f)](_0x53f3e1(0x188)+_0x162907+'\x22]');let _0x9d92c4=![];_0x17845c[_0x53f3e1(0xaf)](_0x53f3e1(0xb8),_0x3613ad=>{const _0x1ae021=_0x53f3e1;_0x3613ad[_0x1ae021(0x13f)]();if(_0x9d92c4)return;_0x9d92c4=!![],_0x17845c[_0x1ae021(0x37d)]===_0x1ae021(0x2d7)?deleteSavedPostFromPost(_0x162907,communityId,_0x17845c)[_0x1ae021(0x261)](()=>_0x9d92c4=![])[_0x1ae021(0xa9)](()=>_0x9d92c4=![]):savePost(_0x162907,communityId,_0x17845c)[_0x1ae021(0x261)](()=>_0x9d92c4=![])[_0x1ae021(0xa9)](()=>_0x9d92c4=![]);}),_0x526824[_0x53f3e1(0x21f)](_0x53f3e1(0x12c)+_0x3d3816[_0x53f3e1(0x3b8)]+'\x22]')?.[_0x53f3e1(0xaf)](_0x53f3e1(0xb8),()=>viewProfile(_0x3d3816[_0x53f3e1(0x3b8)])),_0x526824[_0x53f3e1(0x21f)]('#toggleComments-'+_0x162907)?.[_0x53f3e1(0xaf)](_0x53f3e1(0xb8),_0x5260fe=>{const _0x25d8d0=_0x53f3e1;_0x5260fe[_0x25d8d0(0x13f)](),toggleComments(_0x162907);}),_0x526824[_0x53f3e1(0x21f)](_0x53f3e1(0x2e3)+_0x162907)?.[_0x53f3e1(0xaf)](_0x53f3e1(0x38d),_0x245cef=>{const _0x2b006f=_0x53f3e1;_0x245cef[_0x2b006f(0x13f)](),addComment(_0x162907,_0x3d3816[_0x2b006f(0x3b8)]);}),_0x526824[_0x53f3e1(0x21f)]('#deletePost-'+_0x162907)?.['addEventListener'](_0x53f3e1(0xb8),()=>deletePost(_0x162907)),_0x526824['querySelector'](_0x53f3e1(0x136)+_0x162907)?.[_0x53f3e1(0xaf)]('click',()=>reportPost(_0x162907)),_0x526824[_0x53f3e1(0x21f)](_0x53f3e1(0x2dc)+_0x162907+'\x22]')?.[_0x53f3e1(0xaf)](_0x53f3e1(0xb8),_0x8a737d=>{_0x8a737d['stopPropagation'](),copyPostId(_0x162907);});_0x90b118&&(_0x526824[_0x53f3e1(0x21f)](_0x53f3e1(0x1bc)+_0x162907+'\x22]')?.[_0x53f3e1(0xaf)]('click',()=>deletePost(_0x162907)),_0x526824[_0x53f3e1(0x21f)](_0x53f3e1(0x313)+_0x162907+'\x22]')?.[_0x53f3e1(0xaf)]('click',()=>clearReports(_0x162907)));const _0x5e6f13=_0x526824['querySelector'](_0x53f3e1(0x2e3)+_0x162907+_0x53f3e1(0x3fc));if(_0x5e6f13){if(_0x5e6f13[_0x53f3e1(0x30b)])_0x5e6f13[_0x53f3e1(0xf0)](_0x53f3e1(0x19c),_0x5e6f13[_0x53f3e1(0x30b)]);_0x5e6f13[_0x53f3e1(0x30b)]=debounce(_0x2aee63=>showTagSuggestions(_0x2aee63[_0x53f3e1(0x275)],_0x162907),0x1f4),_0x5e6f13[_0x53f3e1(0xaf)](_0x53f3e1(0x19c),_0x5e6f13[_0x53f3e1(0x30b)]);}if(_0x19a23f>0x1)setupCommunityCarousel(_0x162907);}}function addPaginationControls(_0x1c59be,_0x3b3a8b,_0x3bfcd3){const _0x3c26f6=_0x13cbff,_0x194ac0=Math[_0x3c26f6(0xb9)](_0x3b3a8b/PaginationState[_0x3c26f6(0x14f)]),_0x1d1870=document[_0x3c26f6(0x3da)]('div');_0x1d1870[_0x3c26f6(0x125)]='pagination';if(PaginationState[_0x3c26f6(0x2e0)]>0x1){const _0x3c43f0=document['createElement'](_0x3c26f6(0x1b6));_0x3c43f0[_0x3c26f6(0x37d)]='<',_0x3c43f0[_0x3c26f6(0xaf)]('click',async()=>{const _0x1d6188=_0x3c26f6;PaginationState['currentPage']>0x1&&(_0x1c59be[_0x1d6188(0x2a8)]=_0x1d6188(0x214),await loadPosts(_0x3bfcd3,![],PaginationState[_0x1d6188(0x2e0)]-0x1));}),_0x1d1870[_0x3c26f6(0x425)](_0x3c43f0);}const _0x373bca=[0x1];if(_0x194ac0<=0x5){for(let _0x8a91ba=0x2;_0x8a91ba<=_0x194ac0;_0x8a91ba++)_0x373bca[_0x3c26f6(0x13d)](_0x8a91ba);}else{const _0x494e59=[PaginationState[_0x3c26f6(0x2e0)]-0x1,PaginationState[_0x3c26f6(0x2e0)],PaginationState[_0x3c26f6(0x2e0)]+0x1][_0x3c26f6(0x369)](_0xc93d5a=>_0xc93d5a>0x1&&_0xc93d5a<_0x194ac0);_0x373bca[_0x3c26f6(0x13d)](..._0x494e59);if(!_0x373bca[_0x3c26f6(0x3c6)](_0x194ac0))_0x373bca[_0x3c26f6(0x13d)](_0x194ac0);if(PaginationState[_0x3c26f6(0x2e0)]>0x3&&!_0x373bca[_0x3c26f6(0x3c6)](0x2))_0x373bca[_0x3c26f6(0x13d)](0x2);if(PaginationState[_0x3c26f6(0x2e0)]<_0x194ac0-0x2&&!_0x373bca[_0x3c26f6(0x3c6)](_0x194ac0-0x1))_0x373bca[_0x3c26f6(0x13d)](_0x194ac0-0x1);_0x373bca[_0x3c26f6(0x367)]((_0x18bf73,_0x22de3a)=>_0x18bf73-_0x22de3a);}_0x373bca[_0x3c26f6(0x235)]((_0x4ce5ca,_0x5ebf10)=>{const _0x1cc30a=_0x3c26f6;if(_0x5ebf10>0x0&&_0x4ce5ca-_0x373bca[_0x5ebf10-0x1]>0x1){const _0x21ef19=document['createElement'](_0x1cc30a(0x1d1));_0x21ef19[_0x1cc30a(0x37d)]=_0x1cc30a(0x3c5),_0x1d1870[_0x1cc30a(0x425)](_0x21ef19);}const _0x20b49a=document['createElement'](_0x1cc30a(0x1b6));_0x20b49a['textContent']=_0x4ce5ca,_0x20b49a['className']=_0x4ce5ca===PaginationState[_0x1cc30a(0x2e0)]?_0x1cc30a(0x21c):'',_0x4ce5ca===PaginationState[_0x1cc30a(0x2e0)]?_0x20b49a[_0x1cc30a(0x2d0)]=!![]:_0x20b49a[_0x1cc30a(0xaf)]('click',async()=>{const _0x3a1c0d=_0x1cc30a;_0x1c59be[_0x3a1c0d(0x2a8)]=_0x3a1c0d(0x214),await loadPosts(_0x3bfcd3,![],_0x4ce5ca);}),_0x1d1870['appendChild'](_0x20b49a);});if(PaginationState[_0x3c26f6(0x2e0)]<_0x194ac0){const _0x6a707=document['createElement'](_0x3c26f6(0x1b6));_0x6a707[_0x3c26f6(0x37d)]='>',_0x6a707['addEventListener'](_0x3c26f6(0xb8),async()=>{const _0x2e3079=_0x3c26f6;PaginationState[_0x2e3079(0x2e0)]<_0x194ac0&&(_0x1c59be[_0x2e3079(0x2a8)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',await loadPosts(_0x3bfcd3,![],PaginationState[_0x2e3079(0x2e0)]+0x1));}),_0x1d1870[_0x3c26f6(0x425)](_0x6a707);}_0x1c59be[_0x3c26f6(0x425)](_0x1d1870);}document[_0x13cbff(0xe7)](_0x13cbff(0x3bf))[_0x13cbff(0xaf)](_0x13cbff(0xb8),async()=>{await loadPosts(communityId,!![]);});let totalYourPosts=0x0;async function loadYourPosts(_0x6813f){const _0x5c1ec9=_0x13cbff,_0x4ad6f4=document['getElementById'](_0x5c1ec9(0xa8));_0x4ad6f4['innerHTML']='';let _0x329d1c=null,_0x4af5f5=null,_0x28fe6d=new Set();async function _0x41d9d9(_0x539ca8=![]){const _0x4cee99=_0x5c1ec9,_0x4ab88b=await getCommData(),_0x5f2dac=_0x4ab88b[_0x4cee99(0x12b)]?.[_0x4cee99(0x3c6)](auth['currentUser'][_0x4cee99(0x424)])||_0x4ab88b[_0x4cee99(0x2cb)]===auth['currentUser']['uid'];await fetchUserData(_0x6813f);const _0x1c8a93=_0x539ca8?0x0:window['scrollY']||document[_0x4cee99(0x104)][_0x4cee99(0x2c6)];if(!totalYourPosts||_0x539ca8){const _0x4efc34=query(collection(db,_0x4cee99(0x162),communityId,_0x4cee99(0x1de)),where(_0x4cee99(0x3b8),'==',_0x6813f));totalYourPosts=(await getDocs(_0x4efc34))[_0x4cee99(0x11d)];}let _0x2ca287=query(collection(db,_0x4cee99(0x162),communityId,'posts'),where(_0x4cee99(0x3b8),'==',_0x6813f),orderBy('createdAt','desc'),limit(0x2));if(_0x329d1c&&!_0x539ca8)_0x2ca287=query(_0x2ca287,startAfter(_0x329d1c));else{if(_0x539ca8)_0x4af5f5=null;}try{const _0x524ba3=await getDocs(_0x2ca287);if(_0x524ba3[_0x4cee99(0x273)]&&_0x28fe6d[_0x4cee99(0x11d)]===0x0){_0x4ad6f4['innerHTML']=_0x4cee99(0x9d),await _0x37d17b();if(!_0x539ca8)window[_0x4cee99(0x16e)](0x0,_0x1c8a93);else document[_0x4cee99(0xe7)](_0x4cee99(0x24b))?.[_0x4cee99(0x159)]({'behavior':_0x4cee99(0x385)});return;}if(!_0x4af5f5)_0x4af5f5=_0x524ba3['docs'][0x0];_0x329d1c=_0x524ba3[_0x4cee99(0x176)][_0x524ba3['docs'][_0x4cee99(0x1b1)]-0x1];_0x539ca8&&(_0x4ad6f4[_0x4cee99(0x2a8)]='',_0x28fe6d[_0x4cee99(0x40d)]());const _0xbd1431=_0x524ba3[_0x4cee99(0x176)][_0x4cee99(0x10a)](_0x371ef5=>_0x371ef5['id']),_0x58231a=await Promise['all'](_0xbd1431[_0x4cee99(0x10a)](getPostReportStatus));for(let _0x2e7ab9=0x0;_0x2e7ab9<_0x524ba3[_0x4cee99(0x176)][_0x4cee99(0x1b1)];_0x2e7ab9++){const _0x52d1ab=_0x524ba3[_0x4cee99(0x176)][_0x2e7ab9],_0x2c2817=_0x58231a[_0x2e7ab9];if(_0x28fe6d[_0x4cee99(0x18c)](_0x52d1ab['id']))continue;_0x28fe6d[_0x4cee99(0x2ce)](_0x52d1ab['id']);const _0x178982=_0x52d1ab[_0x4cee99(0x326)]();if(!_0x178982['userId']){console['error'](_0x4cee99(0x37b)+_0x52d1ab['id']+'\x20has\x20no\x20userId!\x20Post\x20data:',_0x178982),_0x4ad6f4[_0x4cee99(0x2a8)]+='<div\x20class=\x22post-error\x22>Error:\x20Post\x20'+_0x52d1ab['id']+_0x4cee99(0xfa);continue;}const _0x4c8903=userDataCache[_0x178982[_0x4cee99(0x3b8)]],_0x59c657=_0x4ab88b[_0x4cee99(0x12b)]?.[_0x4cee99(0x3c6)](_0x178982['userId'])||_0x4ab88b[_0x4cee99(0x2cb)]===_0x178982[_0x4cee99(0x3b8)],_0x27411e=new Date(_0x178982[_0x4cee99(0x180)][_0x4cee99(0x173)]())[_0x4cee99(0x149)](),_0x1a112a=_0x178982['photoUrls']||[],_0x87b816=_0x1a112a['length'],_0x1bc256=document[_0x4cee99(0x3da)](_0x4cee99(0x187));_0x1bc256[_0x4cee99(0x125)]=_0x4cee99(0x260),_0x1bc256['id']=_0x4cee99(0x175)+_0x52d1ab['id'],_0x1bc256[_0x4cee99(0x2a8)]=_0x4cee99(0x368)+(_0x4c8903[_0x4cee99(0xb3)]||_0x4cee99(0x1cf))+_0x4cee99(0x2d3)+_0x178982[_0x4cee99(0x3b8)]+'\x22>'+_0x4c8903[_0x4cee99(0x86)]+_0x4cee99(0x413)+_0x4c8903[_0x4cee99(0x1f1)]+_0x4cee99(0x2c9)+(_0x59c657?_0x4cee99(0x2e5):'')+_0x4cee99(0x239)+_0x178982[_0x4cee99(0x12e)]+_0x4cee99(0xab)+_0x178982[_0x4cee99(0x3fa)]+_0x4cee99(0x27c)+_0x52d1ab['id']+_0x4cee99(0xb0)+JSON[_0x4cee99(0x229)](_0x1a112a)+_0x4cee99(0x28b)+(_0x87b816>0x1?_0x4cee99(0x100)+_0x52d1ab['id']+_0x4cee99(0x2c8):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x1a112a[0x0]||_0x4cee99(0x2b7))+_0x4cee99(0x3b0)+(_0x87b816>0x1?_0x4cee99(0x34c)+_0x52d1ab['id']+_0x4cee99(0x284):'')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<p>Location:\x20'+_0x178982[_0x4cee99(0x209)][_0x4cee99(0x86)]+_0x4cee99(0x25e)+(_0x178982[_0x4cee99(0x322)]||_0x4cee99(0x1dd))+_0x4cee99(0x32d)+(_0x178982[_0x4cee99(0x133)]||_0x4cee99(0x1dd))+_0x4cee99(0x329)+(_0x178982[_0x4cee99(0x2fa)]||'N/A')+_0x4cee99(0x1e9)+_0x27411e+'</p>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22post-id\x22>Post\x20ID:\x20'+_0x52d1ab['id']+'\x20<button\x20class=\x22copy-btn\x22\x20data-post-id=\x22'+_0x52d1ab['id']+'\x22>Copy</button></p>\x0a\x20\x20\x20\x20\x20\x20'+(_0x178982['userId']===auth['currentUser'][_0x4cee99(0x424)]||_0x5f2dac?_0x4cee99(0x39a)+_0x52d1ab['id']+_0x4cee99(0x20b):'')+_0x4cee99(0x1f5)+(_0x2c2817['isOwner']&&_0x2c2817[_0x4cee99(0x2ba)]===0x1?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x52d1ab['id']+_0x4cee99(0x349):'')+_0x4cee99(0x1f5)+(_0x2c2817['isOwner']&&_0x2c2817['reportCount']>=0x2?_0x4cee99(0x389)+_0x52d1ab['id']+_0x4cee99(0x268)+_0x2c2817[_0x4cee99(0x2ba)]+_0x4cee99(0x1f8):'')+_0x4cee99(0x303),_0x4ad6f4[_0x4cee99(0x425)](_0x1bc256),_0x1bc256[_0x4cee99(0x21f)](_0x4cee99(0x12c)+_0x178982[_0x4cee99(0x3b8)]+'\x22]')[_0x4cee99(0xaf)](_0x4cee99(0xb8),()=>viewProfile(_0x178982[_0x4cee99(0x3b8)]));const _0x4b93d4=_0x1bc256[_0x4cee99(0x21f)](_0x4cee99(0x101)+_0x52d1ab['id']);if(_0x4b93d4)_0x4b93d4['addEventListener']('click',()=>deletePost(_0x52d1ab['id']));_0x1bc256[_0x4cee99(0x21f)](_0x4cee99(0x2dc)+_0x52d1ab['id']+'\x22]')[_0x4cee99(0xaf)](_0x4cee99(0xb8),_0x2b8298=>{const _0xb1ceb5=_0x4cee99;_0x2b8298[_0xb1ceb5(0x379)](),copyPostId(_0x52d1ab['id']);});if(_0x87b816>0x1)setupYourPostsCarousel(_0x52d1ab['id']);}await _0x37d17b();if(!_0x539ca8)window[_0x4cee99(0x16e)](0x0,_0x1c8a93);else document[_0x4cee99(0xe7)](_0x4cee99(0x24b))?.[_0x4cee99(0x159)]({'behavior':_0x4cee99(0x385)});}catch(_0x49fba0){console[_0x4cee99(0x40a)](_0x4cee99(0x3d8),_0x49fba0),_0x4ad6f4[_0x4cee99(0x2a8)]='<p>Oops,\x20something\x20broke!\x20Try\x20refreshing.</p>';if(!_0x539ca8)window[_0x4cee99(0x16e)](0x0,_0x1c8a93);else document['getElementById'](_0x4cee99(0x24b))?.[_0x4cee99(0x159)]({'behavior':_0x4cee99(0x385)});}}async function _0x37d17b(){const _0xc405b2=_0x5c1ec9,_0x326953=_0x4ad6f4[_0xc405b2(0x21f)](_0xc405b2(0x2fb)),_0x20df96=_0x4ad6f4[_0xc405b2(0x21f)](_0xc405b2(0x39e));if(_0x326953)_0x326953[_0xc405b2(0x185)]();if(_0x20df96)_0x20df96[_0xc405b2(0x185)]();const _0x533d22=document[_0xc405b2(0x3da)]('div');_0x533d22['id']='yourPostsButtons',_0x533d22[_0xc405b2(0x31a)][_0xc405b2(0x37c)]=_0xc405b2(0x3f5);const _0x13fa53=document[_0xc405b2(0x3da)](_0xc405b2(0x1b6));_0x13fa53['id']=_0xc405b2(0x182),_0x13fa53[_0xc405b2(0x37d)]=_0xc405b2(0x2a9),_0x13fa53[_0xc405b2(0x125)]=_0xc405b2(0xa1),_0x13fa53[_0xc405b2(0x31a)][_0xc405b2(0x37c)]=_0xc405b2(0x18d),_0x13fa53[_0xc405b2(0xaf)](_0xc405b2(0xb8),()=>_0x41d9d9());const _0x4e981a=document['createElement'](_0xc405b2(0x1b6));_0x4e981a['id']=_0xc405b2(0x409),_0x4e981a[_0xc405b2(0x37d)]=_0xc405b2(0x15b),_0x4e981a[_0xc405b2(0x125)]=_0xc405b2(0x123),_0x4e981a[_0xc405b2(0x31a)][_0xc405b2(0x37c)]=_0xc405b2(0x18d),_0x4e981a[_0xc405b2(0xaf)](_0xc405b2(0xb8),async()=>{await _0x41d9d9(!![]);}),_0x533d22['appendChild'](_0x13fa53),_0x533d22[_0xc405b2(0x425)](_0x4e981a),_0x4ad6f4['appendChild'](_0x533d22),totalYourPosts>_0x28fe6d['size']&&totalYourPosts>0x2&&(_0x13fa53[_0xc405b2(0x31a)][_0xc405b2(0x37c)]='display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;'),_0x28fe6d[_0xc405b2(0x11d)]>0x2&&(_0x4e981a['style']['cssText']='display:\x20block\x20!important;\x20margin:\x205px\x20auto;\x20padding:\x205px\x2010px;\x20visibility:\x20visible\x20!important;\x20opacity:\x201\x20!important;\x20position:\x20relative\x20!important;');}await _0x41d9d9();}async function savePost(_0x3e0e77,_0x326ac6,_0x113b0e){const _0x2d7d94=_0x13cbff;console[_0x2d7d94(0x1c9)](_0x2d7d94(0x38c)+_0x3e0e77);const _0x1ead83=document[_0x2d7d94(0xe7)](_0x2d7d94(0x26d)),_0x3dec1b=document[_0x2d7d94(0xe7)]('savePostNote'),_0x1785bb=document[_0x2d7d94(0xe7)](_0x2d7d94(0x17b)),_0x266633=document[_0x2d7d94(0xe7)](_0x2d7d94(0x412)),_0x758f57=auth[_0x2d7d94(0xb1)];_0x3dec1b['value']='',_0x1ead83[_0x2d7d94(0x31a)][_0x2d7d94(0x10f)]='flex',_0x1ead83[_0x2d7d94(0x97)][_0x2d7d94(0x185)](_0x2d7d94(0x1df)),_0x1785bb['dataset'][_0x2d7d94(0x35f)]=_0x3e0e77,_0x1785bb[_0x2d7d94(0xa5)][_0x2d7d94(0x12f)]=_0x326ac6,_0x1785bb[_0x2d7d94(0x2d2)]=async()=>{const _0x18bed4=_0x2d7d94,_0x85022=_0x3dec1b[_0x18bed4(0x3e2)]['trim'](),_0x22b97d=doc(db,_0x18bed4(0x3c4),_0x758f57['uid']),_0x37cd76=collection(_0x22b97d,_0x18bed4(0x146)),_0x1d8e54=query(_0x37cd76,where(_0x18bed4(0x35f),'==',_0x3e0e77),where(_0x18bed4(0x12f),'==',_0x326ac6)),_0x5eb1e7=await getDocs(_0x1d8e54);if(!_0x5eb1e7['empty']){alert(_0x18bed4(0x267)),closeModal('savePostModal');return;}await addDoc(_0x37cd76,{'postId':_0x3e0e77,'communityId':_0x326ac6,'note':_0x85022||'','savedAt':new Date()});if(_0x113b0e)_0x113b0e['textContent']='Unsave';alert(_0x18bed4(0x3bd)),closeModal(_0x18bed4(0x26d));},_0x266633['onclick']=()=>closeModal(_0x2d7d94(0x26d));}async function deleteSavedPostFromPost(_0xfd91c6,_0xd0dda3,_0x358078){const _0x18425b=_0x13cbff;console[_0x18425b(0x1c9)](_0x18425b(0x27d)+_0xfd91c6);const _0x4198f6=auth[_0x18425b(0xb1)],_0x10b561=doc(db,_0x18425b(0x3c4),_0x4198f6[_0x18425b(0x424)]),_0xc2a27a=query(collection(_0x10b561,_0x18425b(0x146)),where(_0x18425b(0x35f),'==',_0xfd91c6),where(_0x18425b(0x12f),'==',_0xd0dda3)),_0x4f8baa=await getDocs(_0xc2a27a);if(_0x4f8baa[_0x18425b(0x273)]){console[_0x18425b(0x1c9)]('Post\x20'+_0xfd91c6+_0x18425b(0x373)),alert(_0x18425b(0x346));if(_0x358078)_0x358078['textContent']=_0x18425b(0x138);return;}if(confirm(_0x18425b(0x405))){const _0x47f13d=_0x4f8baa[_0x18425b(0x176)][0x0];await deleteDoc(doc(db,_0x18425b(0x3c4),_0x4198f6[_0x18425b(0x424)],_0x18425b(0x146),_0x47f13d['id']));if(_0x358078)_0x358078[_0x18425b(0x37d)]=_0x18425b(0x138);alert(_0x18425b(0x9e));}}async function viewSavedPosts(_0x4f5265){const _0x57316c=_0x13cbff,_0xed8b52=document['getElementById'](_0x57316c(0x3eb)),_0x2de441=document[_0x57316c(0xe7)](_0x57316c(0x1b5)),_0x4a3f37=document[_0x57316c(0xe7)]('closeSavedPostsBtn');if(typeof doc!==_0x57316c(0x1ec)||!db){console[_0x57316c(0x40a)](_0x57316c(0xb5),doc,_0x57316c(0x37a),db),_0x2de441[_0x57316c(0x2a8)]='<p\x20class=\x27error-message\x27>Error:\x20Couldn’t\x20load\x20saved\x20posts.\x20Try\x20refreshing.</p>',_0xed8b52[_0x57316c(0x31a)][_0x57316c(0x10f)]=_0x57316c(0x345),_0xed8b52[_0x57316c(0x97)][_0x57316c(0x185)](_0x57316c(0x1df)),_0x4a3f37[_0x57316c(0x2d2)]=()=>closeModal(_0x57316c(0x3eb));return;}_0x2de441['innerHTML']=_0x57316c(0x214),_0xed8b52[_0x57316c(0x31a)][_0x57316c(0x10f)]=_0x57316c(0x345),_0xed8b52[_0x57316c(0x97)][_0x57316c(0x185)](_0x57316c(0x1df));try{const _0x55c4d1=doc(db,_0x57316c(0x3c4),_0x4f5265),_0x4594d4=query(collection(_0x55c4d1,_0x57316c(0x146)),orderBy('savedAt',_0x57316c(0x183))),_0x1e9938=await getDocs(_0x4594d4);_0x2de441[_0x57316c(0x2a8)]='',_0x2de441[_0x57316c(0x97)][_0x57316c(0x2ce)]('saved-posts-grid');if(_0x1e9938['empty'])_0x2de441['innerHTML']='<p\x20class=\x27no-posts-message\x27>No\x20saved\x20posts\x20yet!</p>';else for(const _0x50770d of _0x1e9938[_0x57316c(0x176)]){const _0x2853c5=_0x50770d[_0x57316c(0x326)]();let _0x1697c8=null,_0x1922c2={'name':_0x57316c(0x19a)},_0x318f2b='Unknown\x20Community';try{const _0x1137f=doc(db,'communities',_0x2853c5[_0x57316c(0x12f)],_0x57316c(0x1de),_0x2853c5[_0x57316c(0x35f)]),_0x460db4=await getDoc(_0x1137f);_0x1697c8=_0x460db4['exists']()?_0x460db4[_0x57316c(0x326)]():null,_0x1697c8&&(_0x1922c2=await fetchUserData(_0x1697c8[_0x57316c(0x3b8)]||'unknown'));}catch(_0x3300e8){console[_0x57316c(0x3b4)](_0x57316c(0x41a)+_0x2853c5['postId']+':',_0x3300e8);}try{const _0x511785=doc(db,_0x57316c(0x162),_0x2853c5[_0x57316c(0x12f)]),_0x15c15e=await getDoc(_0x511785);_0x318f2b=_0x15c15e[_0x57316c(0x28f)]()?_0x15c15e[_0x57316c(0x326)]()[_0x57316c(0x86)]||_0x57316c(0x246):_0x57316c(0xac);}catch(_0x6e9796){console[_0x57316c(0x3b4)](_0x57316c(0x3c2)+_0x2853c5[_0x57316c(0x12f)]+':',_0x6e9796);}const _0x35d1aa=document['createElement']('div');_0x35d1aa[_0x57316c(0x125)]=_0x57316c(0xa3),_0x35d1aa[_0x57316c(0xa5)][_0x57316c(0xbd)]=_0x50770d['id'],_0x35d1aa[_0x57316c(0x2a8)]=_0x57316c(0x351)+(_0x1697c8?_0x1697c8[_0x57316c(0x12e)]:'Post\x20Deleted')+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>By:\x20'+_0x1922c2[_0x57316c(0x86)]+_0x57316c(0x30c)+_0x2853c5[_0x57316c(0x35f)]+'\x22>'+_0x2853c5[_0x57316c(0x35f)]+'</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Community:\x20<a\x20href=\x22./community.html?id='+_0x2853c5[_0x57316c(0x12f)]+'\x22>'+_0x318f2b+_0x57316c(0x31d)+_0x50770d['id']+'\x22>'+(_0x2853c5['note']||'No\x20note')+_0x57316c(0x194)+_0x50770d['id']+_0x57316c(0x391)+_0x50770d['id']+_0x57316c(0x15c),_0x2de441[_0x57316c(0x425)](_0x35d1aa),_0x35d1aa['style'][_0x57316c(0x3d7)]='0',setTimeout(()=>{const _0xe6fec1=_0x57316c;_0x35d1aa['style'][_0xe6fec1(0x3ef)]=_0xe6fec1(0x158),_0x35d1aa[_0xe6fec1(0x31a)][_0xe6fec1(0x3d7)]='1';},0x32),_0x35d1aa[_0x57316c(0x21f)]('.copyable-post-id[data-post-id=\x22'+_0x2853c5[_0x57316c(0x35f)]+'\x22]')['addEventListener'](_0x57316c(0xb8),()=>{const _0x52b016=_0x57316c;navigator[_0x52b016(0x1d9)]['writeText'](_0x2853c5['postId'])['then'](()=>alert(_0x52b016(0x3af)))[_0x52b016(0xa9)](_0x244ab6=>console['error']('Copy\x20failed:',_0x244ab6));}),_0x35d1aa[_0x57316c(0x21f)](_0x57316c(0xeb)+_0x50770d['id']+'\x22]')[_0x57316c(0xaf)](_0x57316c(0xb8),()=>editSavedNote(_0x50770d['id'],_0x2853c5[_0x57316c(0x2eb)])),_0x35d1aa['querySelector'](_0x57316c(0x314)+_0x50770d['id']+'\x22]')[_0x57316c(0xaf)]('click',()=>deleteSavedPost(_0x50770d['id'],_0x4f5265));}}catch(_0x47a788){console[_0x57316c(0x40a)](_0x57316c(0x18e),_0x47a788),_0x2de441['innerHTML']='<p\x20class=\x27error-message\x27>Oops,\x20something\x20went\x20wrong.\x20Try\x20again\x20later.</p>';}_0x4a3f37[_0x57316c(0x2d2)]=()=>closeModal(_0x57316c(0x3eb));}async function editSavedNote(_0x150fbe,_0x3362ed){const _0x377817=_0x13cbff,_0x279327=document[_0x377817(0xe7)](_0x377817(0x26d)),_0x25dbca=document[_0x377817(0xe7)](_0x377817(0x192)),_0x559bb4=document[_0x377817(0xe7)](_0x377817(0x17b)),_0x30d8c0=document[_0x377817(0xe7)](_0x377817(0x412));_0x279327[_0x377817(0x21f)]('h2')[_0x377817(0x37d)]=_0x377817(0x18a),_0x25dbca[_0x377817(0x3e2)]=_0x3362ed,_0x279327[_0x377817(0x31a)][_0x377817(0x10f)]=_0x377817(0x345),_0x279327[_0x377817(0x97)][_0x377817(0x185)]('hidden'),_0x559bb4[_0x377817(0x2d2)]=async()=>{const _0x1f1919=_0x377817,_0x2349e4=_0x25dbca[_0x1f1919(0x3e2)][_0x1f1919(0x122)](),_0x1a2a67=auth[_0x1f1919(0xb1)],_0x52846c=doc(db,_0x1f1919(0x3c4),_0x1a2a67['uid'],_0x1f1919(0x146),_0x150fbe);try{await updateDoc(_0x52846c,{'note':_0x2349e4||''}),document[_0x1f1919(0x21f)](_0x1f1919(0x21a)+_0x150fbe+'\x22]')['textContent']=_0x2349e4||_0x1f1919(0x401),closeModal('savePostModal'),_0x279327['querySelector']('h2')['textContent']=_0x1f1919(0x206);}catch(_0x34ccf5){console[_0x1f1919(0x40a)]('Error\x20updating\x20note:',_0x34ccf5),alert(_0x1f1919(0x354));}},_0x30d8c0[_0x377817(0x2d2)]=()=>{const _0x1c3466=_0x377817;closeModal(_0x1c3466(0x26d)),_0x279327[_0x1c3466(0x21f)]('h2')['textContent']=_0x1c3466(0x206);};}async function deleteSavedPost(_0x2afeb4,_0x4b5958){const _0x5197a7=_0x13cbff;if(confirm(_0x5197a7(0x405))){const _0x2d2e27=auth[_0x5197a7(0xb1)],_0x3e9f6d=doc(db,_0x5197a7(0x3c4),_0x2d2e27['uid'],_0x5197a7(0x146),_0x2afeb4),_0x22e0f1=document[_0x5197a7(0xe7)](_0x5197a7(0x1b5)),_0x4f2cdc=_0x22e0f1[_0x5197a7(0x21f)]('.saved-post-card[data-doc-id=\x22'+_0x2afeb4+'\x22]');try{_0x4f2cdc&&(_0x4f2cdc[_0x5197a7(0x31a)]['transition']='opacity\x200.3s\x20ease',_0x4f2cdc[_0x5197a7(0x31a)]['opacity']='0',await new Promise(_0x33569c=>setTimeout(_0x33569c,0x12c)));await deleteDoc(_0x3e9f6d);if(_0x4f2cdc)_0x4f2cdc[_0x5197a7(0x185)]();!_0x22e0f1[_0x5197a7(0x21f)](_0x5197a7(0x2cc))&&(_0x22e0f1[_0x5197a7(0x2a8)]='<p\x20class=\x27no-posts-message\x27>No\x20saved\x20posts\x20yet!</p>'),alert(_0x5197a7(0x9e));}catch(_0x21083e){console[_0x5197a7(0x40a)]('Error\x20deleting\x20saved\x20post:',_0x21083e);if(_0x4f2cdc)_0x4f2cdc['style'][_0x5197a7(0x3d7)]='1';alert(_0x5197a7(0xe8));}}}async function getTotalPosts(_0x2318ce){const _0x49392d=_0x13cbff,_0x181bb2=doc(db,_0x49392d(0x162),_0x2318ce),_0x526a5d=await getDoc(_0x181bb2),_0x253159=_0x526a5d['data']();return _0x253159[_0x49392d(0x15e)]||0x0;}async function searchPostsById(_0x3d1be1){const _0x53bc0e=_0x13cbff,_0x174d4f=document['getElementById'](_0x53bc0e(0x257)),_0xa36f49=document[_0x53bc0e(0xe7)](_0x53bc0e(0x3e1));_0x174d4f[_0x53bc0e(0x2a8)]='<div\x20class=\x22loading\x22>⏳\x20Searching...</div>',_0xa36f49[_0x53bc0e(0x31a)][_0x53bc0e(0x10f)]=_0x53bc0e(0x2fe);if(!_0x3d1be1||_0x3d1be1['trim']()===''){isSearching=![],_0x174d4f[_0x53bc0e(0x2a8)]='',await loadPosts(communityId,!![]);return;}isSearching=!![];try{const _0x4b24c8=getCachedPosts(),_0x59820e=_0x4b24c8[_0x53bc0e(0x22f)](_0x3d1be1[_0x53bc0e(0x122)]());let _0x5f56d6,_0x41c495,_0x35fe3b,_0x36fdb0,_0x44f9c7;if(_0x59820e){console[_0x53bc0e(0x1c9)]('Post\x20'+_0x3d1be1+_0x53bc0e(0x286)),_0x5f56d6=_0x59820e['data'],_0x41c495=_0x3d1be1['trim'](),_0x35fe3b=await fetchUserData(_0x5f56d6[_0x53bc0e(0x3b8)]||_0x53bc0e(0x2e4)),_0x36fdb0=await getPostReportStatus(_0x41c495);const _0x1fbc5c=query(collection(db,'communities',communityId,_0x53bc0e(0x1de),_0x41c495,_0x53bc0e(0x395))),_0x387c9e=await getDocs(_0x1fbc5c);_0x44f9c7=_0x387c9e['size'];}else{console['log'](_0x53bc0e(0x37b)+_0x3d1be1+_0x53bc0e(0x3f2));const _0xd5a077=query(collection(db,_0x53bc0e(0x162),communityId,_0x53bc0e(0x1de)),where(_0x53bc0e(0x129),'==',_0x3d1be1[_0x53bc0e(0x122)]())),_0x122435=await getDocs(_0xd5a077);_0x174d4f['innerHTML']='';if(_0x122435['empty']){_0x174d4f['innerHTML']=_0x53bc0e(0x28d)+_0x3d1be1+_0x53bc0e(0x1d3);return;}const _0x1671ca=_0x122435[_0x53bc0e(0x176)][0x0];_0x5f56d6=normalizePostData(_0x1671ca['data']()),_0x41c495=_0x1671ca['id'],_0x35fe3b=await fetchUserData(_0x5f56d6['userId']||'unknown'),_0x4b24c8[_0x53bc0e(0x3f3)](_0x41c495,{'id':_0x41c495,'data':_0x5f56d6,'score':getPostScore(_0x5f56d6,getLikedPrefs())}),setCachedPosts(_0x4b24c8),_0x36fdb0=await getPostReportStatus(_0x41c495);const _0x564af9=query(collection(db,_0x53bc0e(0x162),communityId,_0x53bc0e(0x1de),_0x41c495,_0x53bc0e(0x395))),_0x37f32f=await getDocs(_0x564af9);_0x44f9c7=_0x37f32f[_0x53bc0e(0x11d)];}const _0x2fffad=auth['currentUser'],_0x474e1c=await getCommData(),_0x1026f7=_0x474e1c?.[_0x53bc0e(0x12b)]?.['includes'](_0x2fffad[_0x53bc0e(0x424)])||_0x474e1c?.[_0x53bc0e(0x2cb)]===_0x2fffad[_0x53bc0e(0x424)],_0x10b1fe=_0x5f56d6['userId']===_0x2fffad[_0x53bc0e(0x424)];if(_0x36fdb0['isHidden']&&!_0x1026f7&&!_0x10b1fe){_0x174d4f[_0x53bc0e(0x2a8)]=_0x53bc0e(0x3c1)+_0x3d1be1+'\x20is\x20hidden\x20due\x20to\x20reports\x20(visible\x20to\x20admins/owner\x20only).</p>';return;}const _0x3f1389=_0x5f56d6['createdAt']?new Date(_0x5f56d6[_0x53bc0e(0x180)])['toLocaleString']():_0x53bc0e(0x1dd),_0x1cca22=_0x5f56d6['photoUrls']||[],_0x474d1b=_0x1cca22[_0x53bc0e(0x1b1)];_0x174d4f[_0x53bc0e(0x2a8)]=_0x53bc0e(0x1a8)+_0x41c495+'.\x20<button\x20id=\x22showAllPostsBtn\x22>Click\x20here\x20to\x20see\x20all\x20posts\x20again</button></p>\x0a\x20\x20</div>\x0a\x20\x20<div\x20class=\x22post\x22\x20id=\x22post-'+_0x41c495+'\x22>\x0a\x20\x20\x20\x20<h3>'+(_0x5f56d6[_0x53bc0e(0x12e)]||'No\x20Title')+'</h3>\x0a\x20\x20\x20\x20<p\x20class=\x22post-description\x22>'+(_0x5f56d6['description']||_0x53bc0e(0x238))+_0x53bc0e(0x1ed)+_0x41c495+_0x53bc0e(0x2e9)+JSON[_0x53bc0e(0x229)](_0x1cca22)+_0x53bc0e(0x144)+(_0x474d1b>0x1?_0x53bc0e(0x100)+_0x41c495+'-search\x22><</button>':'')+_0x53bc0e(0x3b9)+(_0x1cca22[0x0]||'https://firebasestorage.googleapis.com/v0/b/life-swap-6065e.firebasestorage.app/o/static%2Fno-image.webp?alt=media&token=6a974dce-aa63-4d94-b889-a86f626fb430')+_0x53bc0e(0x1c7)+(_0x474d1b>0x1?_0x53bc0e(0x34c)+_0x41c495+'-search\x22>></button>':'')+'\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<p>By:\x20<span\x20class=\x22username\x22\x20data-uid=\x22'+(_0x5f56d6['userId']||'unknown')+'\x22>'+(_0x35fe3b[_0x53bc0e(0x86)]||_0x53bc0e(0x19a))+'\x20('+(_0x35fe3b['username']||'unknown')+')</span></p>\x0a\x20\x20\x20\x20<p>Location:\x20'+(_0x5f56d6['location']?.[_0x53bc0e(0x86)]||_0x53bc0e(0x1dd))+'</p>\x0a\x20\x20\x20\x20<p>Category:\x20'+(_0x5f56d6[_0x53bc0e(0x322)]||_0x53bc0e(0x1dd))+_0x53bc0e(0x8b)+(_0x5f56d6[_0x53bc0e(0x133)]||_0x53bc0e(0x1dd))+_0x53bc0e(0x329)+(_0x5f56d6['offering']||'N/A')+_0x53bc0e(0x36f)+_0x3f1389+_0x53bc0e(0x10b)+_0x41c495+_0x53bc0e(0xff)+_0x41c495+_0x53bc0e(0x339)+_0x41c495+'\x22>'+((_0x5f56d6[_0x53bc0e(0x259)]||[])['includes'](_0x2fffad[_0x53bc0e(0x424)])?_0x53bc0e(0xd7):_0x53bc0e(0x8f))+'\x20('+(_0x5f56d6['likes']||0x0)+')</button>\x0a\x20\x20\x20\x20<button\x20class=\x22report-btn\x22\x20id=\x22reportPost-'+_0x41c495+_0x53bc0e(0xc2)+(_0x10b1fe||_0x1026f7?'<button\x20class=\x22delete-btn\x22\x20id=\x22deletePost-'+_0x41c495+_0x53bc0e(0x20b):'')+_0x53bc0e(0x303)+(_0x36fdb0['isOwner']&&_0x36fdb0['reportCount']===0x1?'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x41c495+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20This\x20post\x20has\x201\x20report.\x20One\x20more\x20will\x20hide\x20it—check\x20summary!\x0a\x20\x20\x20\x20\x20\x20</div>':'')+_0x53bc0e(0x303)+(_0x36fdb0[_0x53bc0e(0x1be)]&&_0x36fdb0[_0x53bc0e(0x2ba)]>=0x2?'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22report-warning\x22\x20id=\x22warning-'+_0x41c495+_0x53bc0e(0x8e)+_0x36fdb0[_0x53bc0e(0x2ba)]+'\x20reports\x20and\x20is\x20hidden.\x20Appeal\x20above!\x0a\x20\x20\x20\x20\x20\x20</div>':'')+_0x53bc0e(0x303)+(_0x1026f7&&_0x36fdb0[_0x53bc0e(0x2ba)]>0x0?_0x53bc0e(0x20c)+_0x41c495+_0x53bc0e(0x83)+_0x36fdb0[_0x53bc0e(0x2ba)]+_0x53bc0e(0x243)+(_0x36fdb0[_0x53bc0e(0x2ba)]>0x1?'s':'')+_0x53bc0e(0x41d)+_0x41c495+_0x53bc0e(0x1ce)+_0x41c495+_0x53bc0e(0x2ed):'')+_0x53bc0e(0x128)+_0x41c495+'\x22>'+_0x44f9c7+_0x53bc0e(0x407)+_0x41c495+'\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<form\x20id=\x22commentForm-'+_0x41c495+_0x53bc0e(0x8c);const _0x26d3dc=_0x174d4f[_0x53bc0e(0x21f)]('#showAllPostsBtn');_0x26d3dc&&_0x26d3dc[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),async()=>{const _0x3e959e=_0x53bc0e,_0x83a380=document[_0x3e959e(0xe7)]('postSearch');if(_0x83a380)_0x83a380[_0x3e959e(0x3e2)]='';isSearching=![],_0x174d4f[_0x3e959e(0x2a8)]='',await loadPosts(communityId,!![]);});const _0x5cfc8c=_0x174d4f[_0x53bc0e(0x21f)](_0x53bc0e(0x134)+_0x41c495);_0x5cfc8c['querySelector'](_0x53bc0e(0x12c)+(_0x5f56d6['userId']||_0x53bc0e(0x2e4))+'\x22]')[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),()=>viewProfile(_0x5f56d6[_0x53bc0e(0x3b8)]||_0x53bc0e(0x2e4))),_0x5cfc8c[_0x53bc0e(0x21f)](_0x53bc0e(0x2dc)+_0x41c495+'\x22]')[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),_0x47d8c8=>{_0x47d8c8['stopPropagation'](),copyPostId(_0x41c495);}),_0x5cfc8c[_0x53bc0e(0x21f)](_0x53bc0e(0x136)+_0x41c495)['addEventListener'](_0x53bc0e(0xb8),()=>reportPost(_0x41c495));const _0x1fee8a=_0x5cfc8c['querySelector'](_0x53bc0e(0x101)+_0x41c495);if(_0x1fee8a)_0x1fee8a[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),()=>deletePost(_0x41c495));_0x1026f7&&(_0x5cfc8c['querySelector'](_0x53bc0e(0x1bc)+_0x41c495+'\x22]')?.[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),()=>deletePost(_0x41c495)),_0x5cfc8c[_0x53bc0e(0x21f)](_0x53bc0e(0x313)+_0x41c495+'\x22]')?.[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),()=>clearReports(_0x41c495)));_0x5cfc8c[_0x53bc0e(0x21f)](_0x53bc0e(0x2ad)+_0x41c495)['addEventListener'](_0x53bc0e(0xb8),_0x162e98=>{const _0x1dd15a=_0x53bc0e;_0x162e98[_0x1dd15a(0x13f)](),toggleComments(_0x41c495);}),_0x5cfc8c['querySelector']('#commentForm-'+_0x41c495)[_0x53bc0e(0xaf)](_0x53bc0e(0x38d),_0xeff76e=>{const _0x522065=_0x53bc0e;_0xeff76e['preventDefault'](),addComment(_0x41c495,_0x5f56d6[_0x522065(0x3b8)]);});const _0xfad963=_0x5cfc8c[_0x53bc0e(0x21f)](_0x53bc0e(0xc7)+_0x41c495+'\x22]');_0xfad963[_0x53bc0e(0xaf)](_0x53bc0e(0xb8),async()=>{const _0x3f03b8=_0x53bc0e,_0x2d9482=doc(db,_0x3f03b8(0x162),communityId,'posts',_0x41c495),_0x2c8a31=await getDoc(_0x2d9482);if(!_0x2c8a31[_0x3f03b8(0x28f)]()){alert(_0x3f03b8(0x23e));return;}const _0x5cd827=normalizePostData(_0x2c8a31['data']()),_0x4bce94=auth[_0x3f03b8(0xb1)][_0x3f03b8(0x424)],_0xcc0d4f=_0x5cd827['likedBy']||[];let _0x540459=_0x5cd827[_0x3f03b8(0x195)]||0x0,_0xe37370=[..._0xcc0d4f];_0xcc0d4f['includes'](_0x4bce94)?(_0xe37370=_0xe37370[_0x3f03b8(0x369)](_0x1df019=>_0x1df019!==_0x4bce94),_0x540459=Math[_0x3f03b8(0x1a1)](0x0,_0x540459-0x1),await updateDoc(_0x2d9482,{'likes':_0x540459,'likedBy':_0xe37370}),_0xfad963['textContent']=_0x3f03b8(0x3e6)+_0x540459+')'):(_0xe37370['push'](_0x4bce94),_0x540459+=0x1,await updateDoc(_0x2d9482,{'likes':_0x540459,'likedBy':_0xe37370}),_0xfad963[_0x3f03b8(0x37d)]='💔\x20Unlike\x20('+_0x540459+')',addLikedPref(_0x5cd827[_0x3f03b8(0x322)],_0x5cd827['offering'])),_0x4b24c8[_0x3f03b8(0x3f3)](_0x41c495,{'id':_0x41c495,'data':{..._0x5cd827,'likes':_0x540459,'likedBy':_0xe37370},'score':getPostScore({..._0x5cd827,'likes':_0x540459,'likedBy':_0xe37370},getLikedPrefs())}),setCachedPosts(_0x4b24c8);});if(_0x474d1b>0x1)setupSearchCarousel(_0x41c495);}catch(_0x15062c){console[_0x53bc0e(0x40a)](_0x53bc0e(0x153),_0x15062c),_0x174d4f['innerHTML']='<p>Something\x20went\x20wrong,\x20try\x20again!</p>';}finally{isSearching=![];}}function setupSearchCarousel(_0x35c5e6){const _0x47a55c=_0x13cbff,_0x50140e=document[_0x47a55c(0xe7)]('carousel-'+_0x35c5e6+_0x47a55c(0x3d9)),_0x143dd1=_0x50140e['querySelector'](_0x47a55c(0x35d)+_0x35c5e6+_0x47a55c(0x39c)),_0x23f6d6=_0x50140e['querySelector'](_0x47a55c(0x2f8)+_0x35c5e6+_0x47a55c(0x39c)),_0x4841c8=_0x50140e[_0x47a55c(0x21f)]('.carousel-image');let _0x51c2f0=JSON[_0x47a55c(0x40c)](_0x50140e[_0x47a55c(0xa5)]['photos']||'[]'),_0x35c1d0=0x0;if(!_0x143dd1||!_0x23f6d6||!_0x4841c8)return;_0x51c2f0[_0x47a55c(0x1b1)]===0x0&&(_0x51c2f0=['https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y']),_0x4841c8[_0x47a55c(0x374)]=_0x51c2f0[0x0],_0x143dd1[_0x47a55c(0xaf)](_0x47a55c(0xb8),_0x102c7b=>{const _0x28779c=_0x47a55c;_0x102c7b[_0x28779c(0x13f)](),_0x35c1d0=(_0x35c1d0-0x1+_0x51c2f0[_0x28779c(0x1b1)])%_0x51c2f0['length'],_0x4841c8[_0x28779c(0x374)]=_0x51c2f0[_0x35c1d0];}),_0x23f6d6[_0x47a55c(0xaf)](_0x47a55c(0xb8),_0x94ca98=>{const _0x3e3754=_0x47a55c;_0x94ca98['preventDefault'](),_0x35c1d0=(_0x35c1d0+0x1)%_0x51c2f0[_0x3e3754(0x1b1)],_0x4841c8[_0x3e3754(0x374)]=_0x51c2f0[_0x35c1d0];});}async function acceptProfileRequest(_0xb5cbec,_0x27da72){const _0x1b5a36=_0x13cbff,_0x243248=doc(db,'users',_0x27da72,_0x1b5a36(0x1ab),_0xb5cbec),_0x38c235=await getDoc(_0x243248),_0x3fa15e=_0x38c235[_0x1b5a36(0x326)]()[_0x1b5a36(0x32a)],_0x3a79cb=await fetchCurrentUserData();await updateDoc(_0x243248,{'status':'accepted'}),await addDoc(collection(db,_0x1b5a36(0x3c4),_0x3fa15e,'notifications'),{'type':_0x1b5a36(0xa6),'message':(_0x3a79cb[_0x1b5a36(0x86)]||_0x1b5a36(0xce))+'\x20accepted\x20your\x20profile\x20view\x20request!','requestId':_0xb5cbec,'timestamp':new Date(),'seen':![]});const _0x554719=doc(db,_0x1b5a36(0x3c4),_0x3fa15e);await runTransaction(db,async _0x40358e=>{const _0x1ab6d4=_0x1b5a36,_0x1464bd=await _0x40358e[_0x1ab6d4(0x22f)](_0x554719),_0x321b26=_0x1464bd['exists']()?_0x1464bd[_0x1ab6d4(0x326)]()[_0x1ab6d4(0x24d)]||0x0:0x0;_0x40358e[_0x1ab6d4(0x3f3)](_0x554719,{'unseenCount':_0x321b26+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x1ab6d4(0x1c9)](_0x1ab6d4(0x37f)+_0x3fa15e+_0x1ab6d4(0x1a4)+(_0x321b26+0x1));}),alert('Profile\x20view\x20request\x20accepted!'),closeModal(_0x1b5a36(0x1d7)),await updateProfileRequestsUI(_0x27da72),viewProfileViewRequests(_0x27da72),setTimeout(()=>updateNotificationBadge(_0x3fa15e,!![]),0x3e8);}async function declineProfileRequest(_0x5b2803,_0x254c21){const _0x99c785=_0x13cbff,_0xc118a8=doc(db,'users',_0x254c21,_0x99c785(0x1ab),_0x5b2803),_0x5ea64e=await getDoc(_0xc118a8),_0x495513=_0x5ea64e[_0x99c785(0x326)]()[_0x99c785(0x32a)],_0x1c4e1b=await fetchCurrentUserData();await deleteDoc(_0xc118a8),await addDoc(collection(db,'users',_0x495513,_0x99c785(0x1f6)),{'type':_0x99c785(0x1d4),'message':(_0x1c4e1b[_0x99c785(0x86)]||_0x99c785(0xce))+_0x99c785(0xd0),'requestId':_0x5b2803,'timestamp':new Date(),'seen':![]});const _0x2cba3b=doc(db,'users',_0x495513);await runTransaction(db,async _0x41f844=>{const _0x13ac96=_0x99c785,_0x4a28a1=await _0x41f844['get'](_0x2cba3b),_0x53abe4=_0x4a28a1[_0x13ac96(0x28f)]()?_0x4a28a1[_0x13ac96(0x326)]()['unseenCount']||0x0:0x0;_0x41f844[_0x13ac96(0x3f3)](_0x2cba3b,{'unseenCount':_0x53abe4+0x1,'lastUpdated':new Date()},{'merge':!![]}),console[_0x13ac96(0x1c9)](_0x13ac96(0x37f)+_0x495513+_0x13ac96(0x1a4)+(_0x53abe4+0x1));}),alert('Profile\x20view\x20request\x20declined!'),closeModal('viewProfileViewRequestsModal'),await updateProfileRequestsUI(_0x254c21),viewProfileViewRequests(_0x254c21),setTimeout(()=>updateNotificationBadge(_0x495513,!![]),0x3e8);}async function revokeProfileAccess(_0x2f3372,_0x27f99b){const _0x1621b2=_0x13cbff,_0x3e87e4=doc(db,'users',_0x2f3372,'profileRequests',_0x27f99b);await deleteDoc(_0x3e87e4),alert(_0x1621b2(0x25d)),closeModal('viewProfileModal'),await viewProfile(_0x2f3372);}async function revokeProfileAccessFromModal(_0x302c84,_0x3430ec){const _0x4bec4b=_0x13cbff,_0x4e6330=doc(db,_0x4bec4b(0x3c4),_0x3430ec,_0x4bec4b(0x1ab),_0x302c84);await deleteDoc(_0x4e6330),alert(_0x4bec4b(0x25d)),closeModal(_0x4bec4b(0x1d7)),await updateProfileRequestsUI(_0x3430ec),viewProfileViewRequests(_0x3430ec);}async function viewProfileViewRequests(_0x217925){const _0x4e7b3f=_0x13cbff,_0x2a70d7=document['getElementById']('viewProfileViewRequestsModal'),_0x2aaa91=document[_0x4e7b3f(0xe7)](_0x4e7b3f(0x3a1)),_0x5aa025=document[_0x4e7b3f(0xe7)]('grantedProfileAccessList'),_0x155324=collection(db,'users',_0x217925,_0x4e7b3f(0x1ab)),_0x91c7bd=query(_0x155324,where('status','==','pending')),_0xc4cf39=await getDocs(_0x91c7bd);_0x2aaa91[_0x4e7b3f(0x2a8)]=_0xc4cf39[_0x4e7b3f(0x273)]?_0x4e7b3f(0x2c0):'';for(const _0x27429c of _0xc4cf39[_0x4e7b3f(0x176)]){const _0x3fcaf0=_0x27429c[_0x4e7b3f(0x326)](),_0x1012eb=await fetchUserData(_0x3fcaf0[_0x4e7b3f(0x32a)]);_0x2aaa91[_0x4e7b3f(0x2a8)]+=_0x4e7b3f(0x113)+_0x27429c['id']+_0x4e7b3f(0x9f)+_0x1012eb['name']+'\x20('+_0x1012eb[_0x4e7b3f(0x1f1)]+')</span>\x0a\x20\x20\x20\x20<button\x20class=\x22accept-btn\x22\x20data-request-id=\x22'+_0x27429c['id']+_0x4e7b3f(0x2da)+_0x27429c['id']+_0x4e7b3f(0x223);}const _0x3bd968=query(_0x155324,where(_0x4e7b3f(0x3a6),'==','accepted')),_0x11cf28=await getDocs(_0x3bd968);_0x5aa025[_0x4e7b3f(0x2a8)]=_0x11cf28[_0x4e7b3f(0x273)]?_0x4e7b3f(0x226):'';for(const _0x3e9349 of _0x11cf28['docs']){const _0x555978=_0x3e9349[_0x4e7b3f(0x326)](),_0x2ccc2a=await fetchUserData(_0x555978[_0x4e7b3f(0x32a)]);_0x5aa025[_0x4e7b3f(0x2a8)]+='\x0a\x20\x20<div\x20class=\x22request-item\x22\x20id=\x22granted-'+_0x3e9349['id']+'\x22>\x0a\x20\x20\x20\x20<span>'+_0x2ccc2a[_0x4e7b3f(0x86)]+'\x20('+_0x2ccc2a['username']+_0x4e7b3f(0x410)+_0x3e9349['id']+_0x4e7b3f(0x264);}document[_0x4e7b3f(0xf1)](_0x4e7b3f(0x3df))[_0x4e7b3f(0x235)](_0x14da8b=>_0x14da8b[_0x4e7b3f(0x31a)][_0x4e7b3f(0x10f)]=_0x4e7b3f(0x2fe)),_0x2a70d7[_0x4e7b3f(0x31a)][_0x4e7b3f(0x10f)]='flex',_0x2a70d7['classList'][_0x4e7b3f(0x185)](_0x4e7b3f(0x1df)),_0x2aaa91[_0x4e7b3f(0xf1)]('.accept-btn')[_0x4e7b3f(0x235)](_0x17e7d5=>{const _0x251836=_0x4e7b3f;_0x17e7d5[_0x251836(0xaf)]('click',()=>acceptProfileRequest(_0x17e7d5[_0x251836(0xa5)][_0x251836(0x10c)],_0x217925));}),_0x2aaa91['querySelectorAll'](_0x4e7b3f(0x24a))[_0x4e7b3f(0x235)](_0x5db3cd=>{const _0x3d5cd2=_0x4e7b3f;_0x5db3cd[_0x3d5cd2(0xaf)](_0x3d5cd2(0xb8),()=>declineProfileRequest(_0x5db3cd[_0x3d5cd2(0xa5)]['requestId'],_0x217925));}),_0x5aa025[_0x4e7b3f(0xf1)]('.revoke-btn')[_0x4e7b3f(0x235)](_0x5bbc36=>{const _0x5dc21e=_0x4e7b3f;_0x5bbc36['addEventListener'](_0x5dc21e(0xb8),()=>revokeProfileAccessFromModal(_0x5bbc36[_0x5dc21e(0xa5)]['requestId'],_0x217925));});}let currentMembers=[];async function viewMembers(_0xee135f){const _0x40f1bf=_0x13cbff,_0x455dc5=document[_0x40f1bf(0xe7)](_0x40f1bf(0xba)),_0x4b5dae=document['getElementById'](_0x40f1bf(0x324)),_0x5c4394=document[_0x40f1bf(0xe7)]('memberSearch');if(!_0x455dc5||!_0x4b5dae||!_0x5c4394){console[_0x40f1bf(0x40a)](_0x40f1bf(0x13e));return;}lastMemberDoc=null,_0x4b5dae[_0x40f1bf(0x2a8)]=_0x40f1bf(0x214),_0x455dc5[_0x40f1bf(0x31a)][_0x40f1bf(0x10f)]='flex',_0x455dc5[_0x40f1bf(0x97)][_0x40f1bf(0x185)](_0x40f1bf(0x1df));const _0x3d3703=await getCommData(),_0x565fd2=_0x3d3703[_0x40f1bf(0x1c3)]||0x0;console[_0x40f1bf(0x1c9)](_0x40f1bf(0x36d),_0x565fd2);const _0x5129c5=_0x455dc5[_0x40f1bf(0x21f)]('h2')||document[_0x40f1bf(0x3da)]('h2');if(!_0x455dc5['querySelector']('h2'))_0x455dc5['querySelector'](_0x40f1bf(0xaa))[_0x40f1bf(0x16d)](_0x5129c5);_0x5129c5[_0x40f1bf(0x37d)]='Members\x20(Total:\x20'+_0x565fd2+')';const _0x3bcfd1=collection(db,_0x40f1bf(0x162),_0xee135f,_0x40f1bf(0x20f)),_0x53919d=query(_0x3bcfd1,limit(ITEMS_PER_PAGE));let _0x9d9f28;try{_0x9d9f28=await getDocs(_0x53919d);}catch(_0x123a9c){console[_0x40f1bf(0x40a)](_0x40f1bf(0x2aa),_0x123a9c),_0x4b5dae[_0x40f1bf(0x2a8)]='<p>Failed\x20to\x20load\x20members.\x20Try\x20again.</p>';return;}currentMembers=_0x9d9f28[_0x40f1bf(0x176)][_0x40f1bf(0x10a)](_0x511b69=>_0x511b69['id']),console['log'](_0x40f1bf(0x1ef),currentMembers[_0x40f1bf(0x1b1)]),await loadMembersBatch(_0x9d9f28,!![],_0x565fd2),_0x5c4394[_0x40f1bf(0x90)]=debounce(_0x594202=>searchMembers(_0xee135f,_0x594202[_0x40f1bf(0x275)][_0x40f1bf(0x3e2)]),0x12c);}async function loadMembersBatch(_0x1e3f70,_0x4baf3c=![],_0x9b3f0d){const _0x2378da=_0x13cbff,_0x93fb25=document[_0x2378da(0xe7)](_0x2378da(0x324));_0x4baf3c&&(_0x93fb25[_0x2378da(0x2a8)]='',lastMemberDoc=null);const _0x5406d8=lastMemberDoc?_0x93fb25[_0x2378da(0xf1)](_0x2378da(0x2f7))[_0x2378da(0x1b1)]:0x0;console[_0x2378da(0x1c9)](_0x2378da(0x380),{'startIndex':_0x5406d8,'batchSize':_0x1e3f70[_0x2378da(0x176)]['length']});if(_0x1e3f70['empty']&&_0x5406d8===0x0){_0x93fb25[_0x2378da(0x2a8)]='<p>No\x20members\x20yet!</p>',updateMembersButtons(_0x9b3f0d,0x0);return;}const _0x2c8ce2=_0x1e3f70[_0x2378da(0x176)][_0x2378da(0x10a)](_0x45b98a=>_0x45b98a['id']);let _0x20dc96;try{const _0x4adfc9=query(collection(db,_0x2378da(0x3c4)),where(_0x2378da(0x129),'in',_0x2c8ce2));_0x20dc96=await getDocs(_0x4adfc9);}catch(_0x28ec30){console[_0x2378da(0x40a)](_0x2378da(0x2b2),_0x28ec30),_0x93fb25[_0x2378da(0x2a8)]+=_0x2378da(0x2e8);return;}console['log']('Fetched\x20users:',_0x20dc96[_0x2378da(0x176)][_0x2378da(0x1b1)]),_0x20dc96[_0x2378da(0x176)][_0x2378da(0x235)](_0x89edf3=>{const _0x1bb4e0=_0x2378da,_0x1dd1ce=_0x89edf3[_0x1bb4e0(0x326)](),_0x5f4f69='member-'+_0x89edf3['id'];if(!document['getElementById'](_0x5f4f69)){const _0x3123f2=document[_0x1bb4e0(0x3da)](_0x1bb4e0(0x187));_0x3123f2[_0x1bb4e0(0x125)]='user-item',_0x3123f2['id']=_0x5f4f69,_0x3123f2['innerHTML']='\x0a\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x1dd1ce[_0x1bb4e0(0xb3)]||_0x1bb4e0(0x1cf))+_0x1bb4e0(0x3ff)+_0x89edf3['id']+'\x22>'+_0x1dd1ce[_0x1bb4e0(0x86)]+'</span>\x0a\x20\x20',_0x93fb25[_0x1bb4e0(0x425)](_0x3123f2),_0x3123f2[_0x1bb4e0(0x21f)](_0x1bb4e0(0x12c)+_0x89edf3['id']+'\x22]')[_0x1bb4e0(0xaf)](_0x1bb4e0(0xb8),()=>viewProfile(_0x89edf3['id']));}}),lastMemberDoc=_0x1e3f70['docs']['length']===ITEMS_PER_PAGE?_0x1e3f70[_0x2378da(0x176)][_0x1e3f70[_0x2378da(0x176)][_0x2378da(0x1b1)]-0x1]:null;const _0x4487c4=_0x93fb25['querySelectorAll'](_0x2378da(0x2f7))['length'];console[_0x2378da(0x1c9)]('Loaded\x20count:',_0x4487c4),updateMembersButtons(_0x9b3f0d,_0x4487c4);}function updateMembersButtons(_0x48b2b5,_0x17c7fa){const _0x9fa9fe=_0x13cbff,_0x5ca508=document[_0x9fa9fe(0xe7)](_0x9fa9fe(0x324)),_0x465c43=_0x5ca508[_0x9fa9fe(0x21f)]('#seeMoreMembersBtn'),_0x2f5561=_0x5ca508[_0x9fa9fe(0x21f)](_0x9fa9fe(0x26a));if(_0x465c43)_0x465c43['remove']();if(_0x2f5561)_0x2f5561[_0x9fa9fe(0x185)]();console['log'](_0x9fa9fe(0x140),{'totalMembers':_0x48b2b5,'loadedCount':_0x17c7fa});if(_0x48b2b5>0x0){const _0x58e80f=document['createElement']('button');_0x58e80f['id']=_0x9fa9fe(0x199),_0x58e80f[_0x9fa9fe(0x37d)]=_0x9fa9fe(0x2a9),_0x58e80f['className']=_0x9fa9fe(0xa1),_0x58e80f[_0x9fa9fe(0x31a)]['display']=_0x48b2b5>_0x17c7fa?_0x9fa9fe(0x137):_0x9fa9fe(0x2fe),_0x58e80f[_0x9fa9fe(0x2d2)]=async()=>{const _0x35974a=_0x9fa9fe,_0x1bcdf7=collection(db,_0x35974a(0x162),communityId,_0x35974a(0x20f));try{const _0x1b9f67=query(_0x1bcdf7,startAfter(lastMemberDoc),limit(ITEMS_PER_PAGE)),_0x44e528=await getDocs(_0x1b9f67);currentMembers=currentMembers[_0x35974a(0x23c)](_0x44e528[_0x35974a(0x176)][_0x35974a(0x10a)](_0xee8806=>_0xee8806['id'])),await loadMembersBatch(_0x44e528,![],_0x48b2b5);}catch(_0x347a24){console[_0x35974a(0x40a)](_0x35974a(0x242),_0x347a24),_0x5ca508[_0x35974a(0x2a8)]+=_0x35974a(0x32e);}};const _0x402195=document['createElement']('button');_0x402195['id']='seeLessMembersBtn',_0x402195[_0x9fa9fe(0x37d)]=_0x9fa9fe(0x15b),_0x402195[_0x9fa9fe(0x125)]=_0x9fa9fe(0x123),_0x402195[_0x9fa9fe(0x31a)][_0x9fa9fe(0x10f)]=_0x17c7fa>ITEMS_PER_PAGE?_0x9fa9fe(0x137):_0x9fa9fe(0x2fe),_0x402195[_0x9fa9fe(0x2d2)]=()=>loadMembersBatch([],!![],_0x48b2b5),_0x5ca508['appendChild'](_0x58e80f),_0x5ca508['appendChild'](_0x402195),console[_0x9fa9fe(0x1c9)](_0x9fa9fe(0x191),_0x58e80f[_0x9fa9fe(0x31a)][_0x9fa9fe(0x10f)]);}}async function searchMembers(_0x276216,_0x29c1fa){const _0x298fe9=_0x13cbff,_0x304578=document[_0x298fe9(0xe7)]('membersList');let _0x843925=0x0;_0x304578['innerHTML']=_0x298fe9(0x16b);if(!_0x29c1fa)return lastMemberDoc=null,viewMembers(_0x276216);const _0x9ff213=collection(db,_0x298fe9(0x162),_0x276216,_0x298fe9(0x20f));let _0x4abb50;try{_0x4abb50=await getDocs(_0x9ff213);}catch(_0x495c30){console[_0x298fe9(0x40a)](_0x298fe9(0x181),_0x495c30),_0x304578[_0x298fe9(0x2a8)]=_0x298fe9(0x224);return;}const _0x5f1740=_0x4abb50[_0x298fe9(0x176)][_0x298fe9(0x10a)](_0x5d77c7=>_0x5d77c7['id']),_0x1c56ea=[];for(const _0x5c5baa of _0x5f1740){const _0x52eb82=userDataCache[_0x5c5baa]||await fetchUserData(_0x5c5baa);_0x52eb82&&(_0x52eb82[_0x298fe9(0x86)][_0x298fe9(0x3ed)]()[_0x298fe9(0x3c6)](_0x29c1fa['toLowerCase']())||_0x52eb82[_0x298fe9(0x1f1)]['toLowerCase']()[_0x298fe9(0x3c6)](_0x29c1fa['toLowerCase']()))&&_0x1c56ea['push'](_0x5c5baa);}console[_0x298fe9(0x1c9)]('Search\x20filtered\x20members:\x20'+_0x1c56ea[_0x298fe9(0x1b1)]+_0x298fe9(0x197)+_0x29c1fa+'\x22');async function _0x4c8c7b(_0x36287f=![]){const _0x1c598f=_0x298fe9;_0x36287f&&(_0x843925=0x0,_0x304578['innerHTML']='');const _0x50bfe1=_0x1c56ea[_0x1c598f(0x3ea)](_0x843925,_0x843925+ITEMS_PER_PAGE);console[_0x1c598f(0x1c9)](_0x1c598f(0x287)+_0x843925+_0x1c598f(0x18f)+_0x50bfe1[_0x1c598f(0x1b1)]);if(_0x50bfe1[_0x1c598f(0x1b1)]===0x0){_0x843925===0x0&&(_0x304578[_0x1c598f(0x2a8)]=_0x1c598f(0x3c3));_0x2e2a6a(_0x1c56ea[_0x1c598f(0x1b1)],_0x843925);return;}let _0x238597;try{const _0x286a4e=query(collection(db,_0x1c598f(0x3c4)),where('__name__','in',_0x50bfe1));_0x238597=await getDocs(_0x286a4e);}catch(_0x5ed173){console[_0x1c598f(0x40a)](_0x1c598f(0x404),_0x5ed173),_0x304578['innerHTML']+=_0x1c598f(0x269);return;}if(_0x843925===0x0)_0x304578['innerHTML']='';_0x238597[_0x1c598f(0x176)]['forEach'](_0x319343=>{const _0x390433=_0x1c598f,_0x2bdbb0=_0x319343[_0x390433(0x326)](),_0x1caafe=_0x390433(0x1ea)+_0x319343['id'];if(!document[_0x390433(0xe7)](_0x1caafe)){const _0x652f8=document[_0x390433(0x3da)]('div');_0x652f8[_0x390433(0x125)]=_0x390433(0x202),_0x652f8['id']=_0x1caafe,_0x652f8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<img\x20loading=\x22lazy\x22\x20src=\x22'+(_0x2bdbb0[_0x390433(0xb3)]||_0x390433(0x1cf))+_0x390433(0x422)+_0x319343['id']+'\x22>'+_0x2bdbb0[_0x390433(0x86)]+_0x390433(0xf7),_0x304578[_0x390433(0x425)](_0x652f8),_0x652f8[_0x390433(0x21f)](_0x390433(0x12c)+_0x319343['id']+'\x22]')[_0x390433(0xaf)](_0x390433(0xb8),()=>viewProfile(_0x319343['id']));}});const _0x428679=_0x304578['querySelectorAll'](_0x1c598f(0x2f7))[_0x1c598f(0x1b1)];_0x2e2a6a(_0x1c56ea['length'],_0x428679);}function _0x2e2a6a(_0x1e83e4,_0x5b8620){const _0x493f9b=_0x298fe9,_0x40c0e8=_0x304578[_0x493f9b(0x21f)](_0x493f9b(0x312)),_0x14ad93=_0x304578['querySelector'](_0x493f9b(0x321));if(_0x40c0e8)_0x40c0e8['remove']();if(_0x14ad93)_0x14ad93[_0x493f9b(0x185)]();console[_0x493f9b(0x1c9)](_0x493f9b(0x3e7)+_0x1e83e4+_0x493f9b(0xe0)+_0x5b8620);if(_0x1e83e4>0x0){const _0x3b5602=document[_0x493f9b(0x3da)](_0x493f9b(0x1b6));_0x3b5602['id']='seeMoreSearchMembersBtn',_0x3b5602[_0x493f9b(0x37d)]=_0x493f9b(0x2a9),_0x3b5602[_0x493f9b(0x125)]=_0x493f9b(0xa1),_0x3b5602[_0x493f9b(0x31a)][_0x493f9b(0x10f)]=_0x1e83e4>_0x5b8620?_0x493f9b(0x137):_0x493f9b(0x2fe),_0x3b5602['onclick']=()=>{_0x843925+=ITEMS_PER_PAGE,_0x4c8c7b();};const _0x502910=document[_0x493f9b(0x3da)](_0x493f9b(0x1b6));_0x502910['id']=_0x493f9b(0x13a),_0x502910[_0x493f9b(0x37d)]=_0x493f9b(0x15b),_0x502910[_0x493f9b(0x125)]=_0x493f9b(0x123),_0x502910[_0x493f9b(0x31a)][_0x493f9b(0x10f)]=_0x5b8620>ITEMS_PER_PAGE?_0x493f9b(0x137):_0x493f9b(0x2fe),_0x502910[_0x493f9b(0x2d2)]=()=>_0x4c8c7b(!![]),_0x304578[_0x493f9b(0x425)](_0x3b5602),_0x304578['appendChild'](_0x502910);}}await _0x4c8c7b(!![]);}async function viewCommunities(_0x45ee81){const _0x37c1a8=_0x13cbff,_0x209f49=document[_0x37c1a8(0xe7)]('viewCommunitiesModal'),_0x738020=document[_0x37c1a8(0xe7)](_0x37c1a8(0x201)),_0x5cd74b=document[_0x37c1a8(0xe7)](_0x37c1a8(0x17d));_0x738020[_0x37c1a8(0x2a8)]='<div\x20class=\x22loading\x22>⏳\x20Loading...</div>',_0x209f49[_0x37c1a8(0x31a)][_0x37c1a8(0x10f)]=_0x37c1a8(0x345),_0x209f49['classList'][_0x37c1a8(0x185)](_0x37c1a8(0x1df));const _0x4b5d18=doc(db,_0x37c1a8(0x3c4),_0x45ee81),_0x558d95=await getDoc(_0x4b5d18),_0x1f38d5=_0x558d95[_0x37c1a8(0x326)]()[_0x37c1a8(0x1b9)]||[];if(_0x1f38d5[_0x37c1a8(0x1b1)]===0x0)_0x738020[_0x37c1a8(0x2a8)]=_0x37c1a8(0xf8);else{_0x738020[_0x37c1a8(0x2a8)]='';const _0x1f3b53=_0x1f38d5[_0x37c1a8(0x10a)](_0xde8528=>getDoc(doc(db,_0x37c1a8(0x162),_0xde8528))),_0x2f0d3d=await Promise[_0x37c1a8(0x1bb)](_0x1f3b53);_0x2f0d3d['forEach'](_0x115e14=>{const _0x534e62=_0x37c1a8;if(_0x115e14[_0x534e62(0x28f)]()){const _0x53d125=_0x115e14[_0x534e62(0x326)](),_0x4ac46=(_0x53d125[_0x534e62(0x2b6)]||[])[_0x534e62(0x3c6)](_0x45ee81);if(!_0x4ac46){const _0x2a8c19=document[_0x534e62(0x3da)](_0x534e62(0x187));_0x2a8c19['className']=_0x534e62(0x2f1),_0x2a8c19[_0x534e62(0x2a8)]=_0x534e62(0x1a5)+_0x115e14['id']+'\x22>'+(_0x53d125[_0x534e62(0x86)]||_0x534e62(0x415))+_0x534e62(0x141),_0x738020[_0x534e62(0x425)](_0x2a8c19);}}}),!_0x738020[_0x37c1a8(0x10e)][_0x37c1a8(0x1b1)]&&(_0x738020[_0x37c1a8(0x2a8)]=_0x37c1a8(0xad));}_0x5cd74b[_0x37c1a8(0x2d2)]=()=>{const _0x7a0547=_0x37c1a8;_0x209f49[_0x7a0547(0x31a)]['display']=_0x7a0547(0x2fe),_0x209f49[_0x7a0547(0x97)][_0x7a0547(0x2ce)]('hidden');};}async function getUnseenNotificationCount(_0x50ca23,_0x4bbffd=![]){const _0x723104=_0x13cbff,_0x453c9c=Date[_0x723104(0x334)](),_0x2ac90d='unseenNotifCount_'+_0x50ca23,_0x1757cd=0x3c*0x3c*0x3e8,_0x5733c4=JSON[_0x723104(0x40c)](localStorage['getItem'](_0x2ac90d))||{'count':0x0,'timestamp':0x0};if(!_0x4bbffd&&_0x5733c4['timestamp']&&_0x453c9c-_0x5733c4[_0x723104(0x108)]<_0x1757cd)return console[_0x723104(0x1c9)](_0x723104(0x336)+_0x5733c4[_0x723104(0x408)]+'\x20(age:\x20'+Math[_0x723104(0x169)]((_0x453c9c-_0x5733c4[_0x723104(0x108)])/0x3e8)+'s)'),_0x5733c4[_0x723104(0x408)];console[_0x723104(0x1c9)](_0x723104(0x20e));const _0x5c6133=doc(db,_0x723104(0x3c4),_0x50ca23);try{const _0x246b30=await getDoc(_0x5c6133);if(!_0x246b30[_0x723104(0x28f)]())throw new Error(_0x723104(0xd3));const _0x16a5c8=_0x246b30[_0x723104(0x326)]()[_0x723104(0x24d)]||0x0;return localStorage['setItem'](_0x2ac90d,JSON['stringify']({'count':_0x16a5c8,'timestamp':_0x453c9c})),console[_0x723104(0x1c9)](_0x723104(0x3f7)+_0x16a5c8),_0x16a5c8;}catch(_0x2c8955){return console[_0x723104(0x40a)]('Error\x20fetching\x20unseen\x20count:',_0x2c8955),_0x5733c4[_0x723104(0x408)];}}window['updateNotificationBadge']=updateNotificationBadge;async function updateNotificationBadge(_0x3e5dc7,_0x249a76=!![]){const _0x1e5fa4=_0x13cbff,_0x3d7c92=await getUnseenNotificationCount(_0x3e5dc7,_0x249a76),_0x3a64bc=document[_0x1e5fa4(0xe7)]('notificationCount');return _0x3a64bc&&(_0x3a64bc[_0x1e5fa4(0x37d)]=_0x3d7c92>0x0?'('+_0x3d7c92+')':'',_0x3a64bc[_0x1e5fa4(0x31a)][_0x1e5fa4(0x10f)]=_0x3d7c92>0x0?_0x1e5fa4(0x2b5):_0x1e5fa4(0x2fe),console[_0x1e5fa4(0x1c9)](_0x1e5fa4(0x2ca)+_0x3d7c92)),_0x3d7c92;}document[_0x13cbff(0xaf)](_0x13cbff(0x2a1),async()=>{const _0x28892f=_0x13cbff,_0x4d34d3=auth['currentUser'];_0x4d34d3&&await updateNotificationBadge(_0x4d34d3[_0x28892f(0x424)],!![]);});async function openNotificationsModal(_0x28fdd3){const _0x2115cc=_0x13cbff,_0x80eba=document[_0x2115cc(0xe7)](_0x2115cc(0x348)),_0x249e6c=document['getElementById'](_0x2115cc(0x270)),_0xe7ae09=document['getElementById'](_0x2115cc(0x305)),_0x5df17a=document['getElementById']('communityFilter');if(!_0x80eba||!_0x249e6c||!_0xe7ae09||!_0x5df17a){console[_0x2115cc(0x40a)](_0x2115cc(0x213)),alert(_0x2115cc(0x16f));return;}let _0x3ab3a4=_0x80eba['querySelector']('#refreshNotificationsBtn');!_0x3ab3a4&&(_0x3ab3a4=document[_0x2115cc(0x3da)]('button'),_0x3ab3a4['id']=_0x2115cc(0x306),_0x3ab3a4[_0x2115cc(0x37d)]=_0x2115cc(0x341),_0x3ab3a4['style'][_0x2115cc(0xc8)]='10px',_0x80eba[_0x2115cc(0x21f)](_0x2115cc(0xaa))[_0x2115cc(0x103)](_0x3ab3a4,document['getElementById']('clearNotificationsBtn')));_0x249e6c[_0x2115cc(0x2a8)]=_0x2115cc(0x214),_0x80eba[_0x2115cc(0x31a)]['display']='flex',_0x80eba['classList'][_0x2115cc(0x185)]('hidden');const _0x192cfa=doc(db,'users',_0x28fdd3);let _0xa2a5a6=[];try{const _0x3a73a1=await getDoc(_0x192cfa);if(!_0x3a73a1[_0x2115cc(0x28f)]())throw new Error(_0x2115cc(0xd3));const _0x43a63d=_0x3a73a1[_0x2115cc(0x326)]()[_0x2115cc(0x1b9)]||[],_0x178fb6=await Promise[_0x2115cc(0x1bb)](_0x43a63d[_0x2115cc(0x10a)](_0x3c47aa=>getDoc(doc(db,'communities',_0x3c47aa))));_0xa2a5a6=_0x178fb6['filter'](_0x39c338=>_0x39c338[_0x2115cc(0x28f)]())[_0x2115cc(0x10a)](_0xa12c95=>({'id':_0xa12c95['id'],'name':_0xa12c95[_0x2115cc(0x326)]()[_0x2115cc(0x86)]||_0x2115cc(0x246)}));}catch(_0x28d16c){console[_0x2115cc(0x40a)](_0x2115cc(0xd6),_0x28d16c),_0x249e6c[_0x2115cc(0x2a8)]=_0x2115cc(0x1b2);return;}_0x5df17a[_0x2115cc(0x2a8)]=_0x2115cc(0x248),_0xa2a5a6[_0x2115cc(0x235)](_0x3dddbd=>{const _0x20cd76=_0x2115cc,_0x523620=document[_0x20cd76(0x3da)](_0x20cd76(0xa0));_0x523620[_0x20cd76(0x3e2)]=_0x3dddbd['id'],_0x523620[_0x20cd76(0x37d)]=_0x3dddbd[_0x20cd76(0x86)],_0x5df17a[_0x20cd76(0x425)](_0x523620);});const _0x4f74b9=0xa,_0x1177fb=await updateNotificationBadge(_0x28fdd3,![]);_0xe7ae09[_0x2115cc(0x37d)]=_0x1177fb;async function _0x201f36(){const _0x1499f4=_0x2115cc;console[_0x1499f4(0x1c9)](_0x1499f4(0xf5),_0x28fdd3,_0x1499f4(0x2a0),communityId),await updateChatBadge(_0x28fdd3,!![]),await window[_0x1499f4(0x304)](communityId),await updateChatBadge(_0x28fdd3);}async function _0x7c95be(_0x765c01=![],_0x1ea98d=![]){const _0x15c781=_0x2115cc,_0x587c7b=_0x5df17a[_0x15c781(0x3e2)];_0x765c01&&(lastDoc=null,displayedCount=0x0,allNotifications=[],_0x249e6c['innerHTML']=_0x15c781(0x214));let _0x2c24d1=0x3;while(_0x2c24d1>0x0){try{const _0x351a1a=collection(db,_0x15c781(0x3c4),_0x28fdd3,_0x15c781(0x1f6));let _0xb00714;_0x587c7b===_0x15c781(0x1bb)?_0xb00714=query(_0x351a1a,orderBy('timestamp',_0x15c781(0x183)),...lastDoc&&!_0x765c01?[startAfter(lastDoc)]:[],limit(_0x4f74b9)):_0xb00714=query(_0x351a1a,where(_0x15c781(0x12f),'==',_0x587c7b),orderBy(_0x15c781(0x108),'desc'),...lastDoc&&!_0x765c01?[startAfter(lastDoc)]:[],limit(_0x4f74b9));const _0x5ccdf1=await getDocs(_0xb00714),_0x52e8f6=_0x5ccdf1[_0x15c781(0x176)][_0x15c781(0x10a)](_0x3561e2=>({'id':_0x3561e2['id'],'data':_0x3561e2['data']()}));_0x1ea98d?_0x52e8f6['forEach'](_0xe15978=>{const _0x1af9fa=_0x15c781;!allNotifications['some'](_0x4012aa=>_0x4012aa['id']===_0xe15978['id'])&&allNotifications[_0x1af9fa(0x161)](_0xe15978);}):(_0x52e8f6['forEach'](_0xce8410=>{const _0x51a164=_0x15c781;!allNotifications[_0x51a164(0x28c)](_0x404012=>_0x404012['id']===_0xce8410['id'])&&allNotifications[_0x51a164(0x13d)](_0xce8410);}),lastDoc=_0x5ccdf1[_0x15c781(0x176)][_0x15c781(0x1b1)]===_0x4f74b9?_0x5ccdf1[_0x15c781(0x176)][_0x5ccdf1[_0x15c781(0x176)]['length']-0x1]:null);allNotifications[_0x15c781(0x367)]((_0x3a11d7,_0x1a53c7)=>_0x1a53c7[_0x15c781(0x326)][_0x15c781(0x108)][_0x15c781(0x173)]()-_0x3a11d7['data'][_0x15c781(0x108)][_0x15c781(0x173)]());if(allNotifications[_0x15c781(0x1b1)]===0x0)_0x249e6c[_0x15c781(0x2a8)]=_0x15c781(0x2ae);else{const _0x405380=_0x765c01?0x0:displayedCount,_0x24024b=Math['min'](_0x405380+_0x4f74b9,allNotifications[_0x15c781(0x1b1)]),_0x29875=allNotifications[_0x15c781(0x3ea)](0x0,_0x24024b)[_0x15c781(0x10a)](_0x4e7e85=>_0x3eea7a({'id':_0x4e7e85['id'],'data':()=>_0x4e7e85[_0x15c781(0x326)]},_0xa2a5a6))[_0x15c781(0x21b)]('');_0x249e6c[_0x15c781(0x2a8)]=_0x29875,displayedCount=_0x24024b;}const _0x5f5742=await getUnseenNotificationCount(_0x28fdd3,_0x1ea98d);_0xe7ae09[_0x15c781(0x37d)]=_0x5f5742,_0x32c6e6(),_0x4b302f();break;}catch(_0x3296fb){console[_0x15c781(0x40a)](_0x15c781(0x1b4),_0x3296fb),_0x2c24d1--;if(_0x2c24d1===0x0){_0x249e6c['innerHTML']='<p>Failed\x20to\x20load\x20notifications\x20after\x20retries.\x20Check\x20your\x20connection!</p>',_0x32c6e6();break;}await new Promise(_0x2e7028=>setTimeout(_0x2e7028,0x3e8));}}}function _0x3eea7a(_0x2ec4df,_0x5078a2){const _0x50c310=_0x2115cc,_0x128cf7=_0x2ec4df[_0x50c310(0x326)](),_0x24ef16=new Date(_0x128cf7[_0x50c310(0x108)]['toDate']())['toLocaleString']();let _0x2d3968=_0x128cf7['message']||_0x50c310(0x32b);if(_0x128cf7['communityId']&&_0x128cf7[_0x50c310(0xdf)]!==_0x50c310(0x18b)){const _0x102fca=_0x5078a2[_0x50c310(0x8a)](_0x54465f=>_0x54465f['id']===_0x128cf7[_0x50c310(0x12f)])?.[_0x50c310(0x86)]||'Unknown\x20Community';_0x2d3968+='\x20('+_0x102fca+')';}let _0x321b4c=_0x50c310(0x29f)+(_0x128cf7[_0x50c310(0x2d6)]?_0x50c310(0x2d6):'')+_0x50c310(0xa7)+_0x2ec4df['id']+_0x50c310(0x196)+_0x128cf7[_0x50c310(0xdf)]+_0x50c310(0x418);return _0x128cf7[_0x50c310(0xdf)]==='follow'&&_0x128cf7[_0x50c310(0x309)]?_0x321b4c+=_0x50c310(0x35c)+_0x128cf7[_0x50c310(0x309)]+'\x22>'+_0x2d3968+_0x50c310(0x157):_0x321b4c+='<span>'+_0x2d3968+_0x50c310(0x220),_0x321b4c+=_0x50c310(0x118)+_0x24ef16+_0x50c310(0x338)+(_0x128cf7[_0x50c310(0x35f)]?_0x50c310(0x377)+_0x128cf7[_0x50c310(0x35f)]+_0x50c310(0x150):'')+'\x0a\x20\x20<button\x20class=\x22mark-seen-btn2\x22\x20data-id=\x22'+_0x2ec4df['id']+'\x22\x20'+(_0x128cf7['seen']?'disabled':'')+'>'+(_0x128cf7[_0x50c310(0x2d6)]?_0x50c310(0x2a3):_0x50c310(0x30e))+'</button>\x0a',_0x128cf7[_0x50c310(0xdf)]===_0x50c310(0x18b)&&!_0x128cf7[_0x50c310(0x3ad)]&&(_0x321b4c+=_0x50c310(0x256)+_0x2ec4df['id']+_0x50c310(0xd4)),_0x321b4c+=_0x50c310(0x3dd),_0x321b4c;}function _0x4b302f(){const _0x42d6e4=_0x2115cc;_0x249e6c[_0x42d6e4(0xf1)](_0x42d6e4(0xe2))[_0x42d6e4(0x235)](_0x219ac8=>{const _0x771a3=_0x42d6e4;_0x219ac8[_0x771a3(0xaf)]('click',_0x12b994=>{const _0x5125a5=_0x771a3;_0x12b994[_0x5125a5(0x379)](),copyPostId(_0x219ac8[_0x5125a5(0xa5)]['postId']);});}),_0x249e6c['querySelectorAll'](_0x42d6e4(0x26e))[_0x42d6e4(0x235)](_0x44a168=>{const _0x3ca000=_0x42d6e4;!_0x44a168[_0x3ca000(0x2d0)]&&_0x44a168[_0x3ca000(0xaf)]('click',_0x196acc=>{const _0x2f6ae3=_0x3ca000;_0x196acc['stopPropagation'](),markNotificationSeen(_0x44a168[_0x2f6ae3(0xa5)]['id']);});}),_0x249e6c[_0x42d6e4(0xf1)]('.ban-appeal-form')[_0x42d6e4(0x235)](_0x3ac9b2=>{_0x3ac9b2['addEventListener']('submit',async _0x2c0d84=>{const _0xa151e=_0x25ba;_0x2c0d84[_0xa151e(0x13f)]();const _0x1c1f5c=_0x3ac9b2[_0xa151e(0x21f)](_0xa151e(0x205))[_0xa151e(0x3e2)][_0xa151e(0x122)]();if(_0x1c1f5c){const _0x1e60a5=_0x3ac9b2['dataset']['id'],_0x3432cb=allNotifications['find'](_0x4e6254=>_0x4e6254['id']===_0x1e60a5)[_0xa151e(0x326)];try{const _0xd7fc2c=await getDoc(doc(db,_0xa151e(0x3c4),_0x28fdd3)),_0x2a3ff0=_0xd7fc2c[_0xa151e(0x28f)]()?_0xd7fc2c[_0xa151e(0x326)]():{'username':'user_'+_0x28fdd3[_0xa151e(0x3ea)](0x0,0x8)};await addDoc(collection(db,'communities',_0x3432cb[_0xa151e(0x12f)],_0xa151e(0x1c6)),{'userId':_0x28fdd3,'username':_0x2a3ff0[_0xa151e(0x1f1)],'message':_0x1c1f5c,'timestamp':new Date(),'notificationId':_0x1e60a5}),await updateDoc(doc(db,_0xa151e(0x3c4),_0x28fdd3,_0xa151e(0x1f6),_0x1e60a5),{'appealSubmitted':!![]}),alert(_0xa151e(0x3e8)),await _0x7c95be(!![]);}catch(_0x2c1521){console['error'](_0xa151e(0x327),_0x2c1521),alert(_0xa151e(0xdc));}}});}),_0x249e6c[_0x42d6e4(0xf1)](_0x42d6e4(0x2af))[_0x42d6e4(0x235)](_0x584575=>{const _0x433657=_0x42d6e4;_0x584575[_0x433657(0xaf)](_0x433657(0xb8),async _0x42226b=>{const _0x565b5d=_0x433657;if(_0x42226b[_0x565b5d(0x275)][_0x565b5d(0x35b)]===_0x565b5d(0x383)||_0x42226b['target']['tagName']===_0x565b5d(0x24f)||_0x42226b[_0x565b5d(0x275)][_0x565b5d(0x2a4)](_0x565b5d(0x179)))return;const _0x11c743=allNotifications['find'](_0x148d7d=>_0x148d7d['id']===_0x584575['dataset']['id'])[_0x565b5d(0x326)],_0xe34f14=_0x584575['dataset'][_0x565b5d(0xdf)];if(_0xe34f14===_0x565b5d(0x221)&&_0x11c743[_0x565b5d(0x309)])closeModal('notificationsModal'),await viewProfile(_0x11c743[_0x565b5d(0x309)]);else{if(_0xe34f14===_0x565b5d(0x29e)||_0xe34f14===_0x565b5d(0xa6)||_0xe34f14==='profile_request_declined')closeModal(_0x565b5d(0x348)),await viewProfileViewRequests(_0x28fdd3);else{if(_0xe34f14===_0x565b5d(0x1dc)||_0xe34f14===_0x565b5d(0xde))console[_0x565b5d(0x1c9)]('Chat\x20notification\x20clicked,\x20triggering\x20handleViewChatsClick'),closeModal('notificationsModal'),await _0x201f36();else{if(_0x11c743['postId']&&_0x11c743[_0x565b5d(0x12f)]){if(_0x11c743['communityId']!==communityId)window[_0x565b5d(0x209)][_0x565b5d(0x420)]=_0x565b5d(0x3ce)+_0x11c743[_0x565b5d(0x12f)]+_0x565b5d(0x134)+_0x11c743[_0x565b5d(0x35f)];else{closeModal(_0x565b5d(0x348)),await searchPostsById(_0x11c743[_0x565b5d(0x35f)]);const _0x55594c=document[_0x565b5d(0xe7)](_0x565b5d(0x399));_0x55594c?_0x55594c[_0x565b5d(0x159)]({'behavior':_0x565b5d(0x385)}):console[_0x565b5d(0x3b4)](_0x565b5d(0x280));}}}}}});}),_0x249e6c[_0x42d6e4(0xf1)]('.clickable-profile')[_0x42d6e4(0x235)](_0x11e574=>{const _0x500b83=_0x42d6e4;_0x11e574[_0x500b83(0xaf)](_0x500b83(0xb8),async _0x17800b=>{const _0x2fd625=_0x500b83;_0x17800b[_0x2fd625(0x379)]();const _0xc9c02c=_0x11e574[_0x2fd625(0xa5)][_0x2fd625(0x424)];closeModal(_0x2fd625(0x348)),await viewProfile(_0xc9c02c);});});}function _0x32c6e6(){const _0x4e66fd=_0x2115cc;let _0x1e388e=_0x249e6c[_0x4e66fd(0x21f)](_0x4e66fd(0x132)),_0x349d5f=_0x249e6c[_0x4e66fd(0x21f)]('#loadLessBtn');if(_0x1e388e)_0x1e388e[_0x4e66fd(0x185)]();if(_0x349d5f)_0x349d5f[_0x4e66fd(0x185)]();const _0x465807=allNotifications[_0x4e66fd(0x1b1)],_0x4ca5e4=lastDoc&&displayedCount<_0x465807;_0x4ca5e4&&(_0x1e388e=document[_0x4e66fd(0x3da)]('button'),_0x1e388e['id']=_0x4e66fd(0x8d),_0x1e388e[_0x4e66fd(0x37d)]=_0x4e66fd(0xfe),_0x1e388e[_0x4e66fd(0x125)]='load-more-btn',_0x1e388e['onclick']=()=>_0x7c95be(![],![]),_0x249e6c[_0x4e66fd(0x425)](_0x1e388e)),displayedCount>_0x4f74b9&&(_0x349d5f=document[_0x4e66fd(0x3da)](_0x4e66fd(0x1b6)),_0x349d5f['id']=_0x4e66fd(0x114),_0x349d5f[_0x4e66fd(0x37d)]=_0x4e66fd(0x356),_0x349d5f[_0x4e66fd(0x125)]=_0x4e66fd(0x1ff),_0x349d5f['onclick']=()=>{const _0x3c14a0=_0x4e66fd;displayedCount=_0x4f74b9,_0x249e6c[_0x3c14a0(0x2a8)]=allNotifications[_0x3c14a0(0x3ea)](0x0,_0x4f74b9)[_0x3c14a0(0x10a)](_0x525d6d=>_0x3eea7a({'id':_0x525d6d['id'],'data':()=>_0x525d6d[_0x3c14a0(0x326)]},_0xa2a5a6))[_0x3c14a0(0x21b)](''),_0x32c6e6(),_0x4b302f();},_0x249e6c['appendChild'](_0x349d5f));}try{await _0x7c95be(!![]);}catch(_0x8b2d8){console[_0x2115cc(0x40a)](_0x2115cc(0x27b),_0x8b2d8),_0x249e6c[_0x2115cc(0x2a8)]='<p>Failed\x20to\x20load\x20notifications.\x20Try\x20refreshing.</p>';}_0x3ab3a4[_0x2115cc(0x2d2)]=async()=>{const _0x2bdc22=_0x2115cc;_0x3ab3a4[_0x2bdc22(0x2d0)]=!![],_0x3ab3a4[_0x2bdc22(0x37d)]=_0x2bdc22(0x3f4);try{await _0x7c95be(![],!![]),await updateNotificationBadge(_0x28fdd3,!![]);}catch(_0x99e0c6){console[_0x2bdc22(0x40a)](_0x2bdc22(0x148),_0x99e0c6),_0x249e6c[_0x2bdc22(0x2a8)]='<p>Refresh\x20failed.\x20Try\x20again.</p>';}_0x3ab3a4[_0x2bdc22(0x2d0)]=![],_0x3ab3a4[_0x2bdc22(0x37d)]=_0x2bdc22(0x341);},_0x5df17a[_0x2115cc(0x139)]=()=>_0x7c95be(!![]);}async function markNotificationSeen(_0x2f3fd8){const _0x75c61f=_0x13cbff,_0x48d559=auth[_0x75c61f(0xb1)]?.[_0x75c61f(0x424)];if(!_0x48d559){console[_0x75c61f(0x40a)](_0x75c61f(0xd8));return;}const _0x4f8bb9=doc(db,_0x75c61f(0x3c4),_0x48d559,_0x75c61f(0x1f6),_0x2f3fd8),_0x4c705a=doc(db,_0x75c61f(0x3c4),_0x48d559);try{const _0x5c0ea1=await getDoc(_0x4f8bb9);if(!_0x5c0ea1[_0x75c61f(0x28f)]()){console[_0x75c61f(0x3b4)](_0x75c61f(0x19e)+_0x2f3fd8+_0x75c61f(0xe6));return;}const _0x515191=_0x5c0ea1[_0x75c61f(0x326)]();if(_0x515191['seen']){console['log']('Notification\x20'+_0x2f3fd8+_0x75c61f(0x300));return;}await runTransaction(db,async _0x848e7c=>{const _0xdc8394=_0x75c61f,_0x4af9c4=await _0x848e7c['get'](_0x4c705a);if(!_0x4af9c4[_0xdc8394(0x28f)]())throw new Error('User\x20not\x20found');const _0x4d5d36=_0x4af9c4['data']()['unseenCount']||0x0;_0x848e7c[_0xdc8394(0x204)](_0x4f8bb9,{'seen':!![]}),_0x4d5d36>0x0&&_0x848e7c[_0xdc8394(0x204)](_0x4c705a,{'unseenCount':_0x4d5d36-0x1,'lastUpdated':new Date()});}),console[_0x75c61f(0x1c9)]('Marked\x20notification\x20'+_0x2f3fd8+_0x75c61f(0x126));const _0x54e8f2=document[_0x75c61f(0x21f)](_0x75c61f(0x22d)+_0x2f3fd8+'\x22]');_0x54e8f2&&(_0x54e8f2[_0x75c61f(0x2d0)]=!![],_0x54e8f2[_0x75c61f(0x37d)]='Seen',_0x54e8f2['classList'][_0x75c61f(0x2ce)]('disabled')),await updateNotificationBadge(_0x48d559),!document['getElementById']('notificationsModal')[_0x75c61f(0x97)]['contains'](_0x75c61f(0x1df))&&await openNotificationsModal(_0x48d559);}catch(_0x22969e){console[_0x75c61f(0x40a)](_0x75c61f(0x95)+_0x2f3fd8+'\x20as\x20seen:',_0x22969e);}}async function clearNotifications(){const _0x2969ec=_0x13cbff,_0x3f7f24=auth[_0x2969ec(0xb1)]?.[_0x2969ec(0x424)];if(!_0x3f7f24){console[_0x2969ec(0x40a)]('No\x20authenticated\x20user\x20found.');return;}const _0xccdba3=document[_0x2969ec(0xe7)](_0x2969ec(0x3d0));if(!_0xccdba3){console[_0x2969ec(0x40a)](_0x2969ec(0xbc));return;}const _0x4635a4=_0xccdba3[_0x2969ec(0x3e2)],_0x549aa4=_0x4635a4===_0x2969ec(0x1bb)?_0x2969ec(0x33c):_0x2969ec(0x290)+(_0xccdba3[_0x2969ec(0x27e)][_0xccdba3[_0x2969ec(0xc3)]]?.[_0x2969ec(0x190)]||_0x2969ec(0x22b))+_0x2969ec(0x33b);if(!confirm(_0x549aa4)){console['log'](_0x2969ec(0x262));return;}try{const _0xa18e26=collection(db,_0x2969ec(0x3c4),_0x3f7f24,_0x2969ec(0x1f6));let _0x47d531;_0x4635a4==='all'?_0x47d531=query(_0xa18e26):_0x47d531=query(_0xa18e26,where(_0x2969ec(0x12f),'==',_0x4635a4));const _0x29e24e=await getDocs(_0x47d531);if(_0x29e24e[_0x2969ec(0x273)]){console[_0x2969ec(0x1c9)](_0x2969ec(0x41f)),await updateNotificationBadge(_0x3f7f24),await openNotificationsModal(_0x3f7f24);return;}const _0x12cf2d=doc(db,_0x2969ec(0x3c4),_0x3f7f24);await runTransaction(db,async _0x5db74a=>{const _0x5b4895=_0x2969ec,_0x4b67bb=await _0x5db74a[_0x5b4895(0x22f)](_0x12cf2d);if(!_0x4b67bb[_0x5b4895(0x28f)]())throw new Error('User\x20not\x20found');const _0x4e04d3=_0x4b67bb['data']()[_0x5b4895(0x24d)]||0x0,_0x50e1cf=_0x29e24e[_0x5b4895(0x176)][_0x5b4895(0x369)](_0x138235=>!_0x138235[_0x5b4895(0x326)]()['seen'])[_0x5b4895(0x1b1)],_0x197523=Math[_0x5b4895(0x1a1)](0x0,_0x4e04d3-_0x50e1cf);_0x5db74a[_0x5b4895(0x204)](_0x12cf2d,{'unseenCount':_0x197523,'lastUpdated':new Date()}),_0x29e24e['docs'][_0x5b4895(0x235)](_0x59c532=>_0x5db74a['delete'](_0x59c532[_0x5b4895(0x3ee)]));}),console['log'](_0x2969ec(0x142)+_0x29e24e[_0x2969ec(0x11d)]+'\x20notifications.'),await updateNotificationBadge(_0x3f7f24),await openNotificationsModal(_0x3f7f24);}catch(_0x306054){console['error']('Error\x20clearing\x20notifications:',_0x306054);}}let commDataCache=null,lastFetchTime=0x0;const CACHE_TTL=0x1e*0x3c*0x3e8,ITEMS_PER_PAGE=0x64;async function getCommData(_0x340be8=![]){const _0x2ea070=_0x13cbff,_0x4aada8=Date[_0x2ea070(0x334)]();if(commDataCache&&_0x4aada8-lastFetchTime<CACHE_TTL&&!_0x340be8)return commDataCache;const _0x2a7dca=doc(db,_0x2ea070(0x162),communityId);try{const _0x2f71cc=await getDoc(_0x2a7dca);if(!_0x2f71cc[_0x2ea070(0x28f)]())throw new Error(_0x2ea070(0x11f));const _0xa7a2d2=_0x2f71cc[_0x2ea070(0x326)](),_0x2f8e5a=await getDocs(collection(db,_0x2ea070(0x162),communityId,_0x2ea070(0x20f))),_0x395e75=_0x2f8e5a[_0x2ea070(0x176)][_0x2ea070(0x10a)](_0x4de6a6=>_0x4de6a6['id']),_0x27717b=new Proxy(_0x395e75,{'get'(_0x5ab41d,_0x44e817){const _0x26b1d7=_0x2ea070;if(typeof _0x44e817==='string'&&!isNaN(_0x44e817)){const _0x57c431=parseInt(_0x44e817),_0x3665fe=Math['floor'](_0x57c431/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x5ab41d[_0x26b1d7(0x3ea)](_0x3665fe,_0x3665fe+ITEMS_PER_PAGE)[_0x57c431%ITEMS_PER_PAGE];}if(_0x44e817===_0x26b1d7(0x1b1))return _0x5ab41d[_0x26b1d7(0x1b1)];if(_0x44e817===_0x26b1d7(0x3c6))return _0x5e7a66=>_0x5ab41d[_0x26b1d7(0x3c6)](_0x5e7a66);if(_0x44e817===Symbol[_0x26b1d7(0x3cc)])return _0x5ab41d[Symbol[_0x26b1d7(0x3cc)]][_0x26b1d7(0x3b7)](_0x5ab41d);if(_0x44e817===_0x26b1d7(0x3ea))return _0x5ab41d[_0x26b1d7(0x3ea)][_0x26b1d7(0x3b7)](_0x5ab41d);if(_0x44e817===_0x26b1d7(0x369))return _0x5ab41d[_0x26b1d7(0x369)][_0x26b1d7(0x3b7)](_0x5ab41d);if(_0x44e817===_0x26b1d7(0x23c))return _0x5ab41d[_0x26b1d7(0x23c)]['bind'](_0x5ab41d);return _0x5ab41d[_0x44e817];}}),_0x3b26ea=new Proxy(_0xa7a2d2[_0x2ea070(0x2b6)]||[],{'get'(_0x2742bd,_0x5ade23){const _0x75b0dc=_0x2ea070;if(typeof _0x5ade23==='string'&&!isNaN(_0x5ade23)){const _0xaec2eb=parseInt(_0x5ade23),_0x5af2f9=Math['floor'](_0xaec2eb/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x2742bd['slice'](_0x5af2f9,_0x5af2f9+ITEMS_PER_PAGE)[_0xaec2eb%ITEMS_PER_PAGE];}if(_0x5ade23===_0x75b0dc(0x1b1))return _0x2742bd['length'];if(_0x5ade23===_0x75b0dc(0x3c6))return _0x4a95c9=>_0x2742bd[_0x75b0dc(0x3c6)](_0x4a95c9);if(_0x5ade23===Symbol[_0x75b0dc(0x3cc)])return _0x2742bd[Symbol['iterator']][_0x75b0dc(0x3b7)](_0x2742bd);return _0x2742bd[_0x5ade23];}}),_0x249316=new Proxy(_0xa7a2d2[_0x2ea070(0x12b)]||[],{'get'(_0x259eec,_0x511e9f){const _0x30b08a=_0x2ea070;if(typeof _0x511e9f===_0x30b08a(0x25f)&&!isNaN(_0x511e9f)){const _0x6dd97e=parseInt(_0x511e9f),_0x3991ab=Math[_0x30b08a(0x3e0)](_0x6dd97e/ITEMS_PER_PAGE)*ITEMS_PER_PAGE;return _0x259eec[_0x30b08a(0x3ea)](_0x3991ab,_0x3991ab+ITEMS_PER_PAGE)[_0x6dd97e%ITEMS_PER_PAGE];}if(_0x511e9f===_0x30b08a(0x1b1))return _0x259eec[_0x30b08a(0x1b1)];if(_0x511e9f===_0x30b08a(0x3c6))return _0x1fe70c=>_0x259eec['includes'](_0x1fe70c);if(_0x511e9f===Symbol[_0x30b08a(0x3cc)])return _0x259eec[Symbol[_0x30b08a(0x3cc)]]['bind'](_0x259eec);return _0x259eec[_0x511e9f];}});return commDataCache={..._0xa7a2d2,'members':_0x27717b,'bannedUsers':_0x3b26ea,'admins':_0x249316},lastFetchTime=_0x4aada8,console[_0x2ea070(0x1c9)]('Fetched\x20fresh\x20community\x20data\x20for\x20'+communityId+'\x20with\x20'+_0x395e75['length']+_0x2ea070(0x2ec)),commDataCache;}catch(_0x291abd){console['error']('Error\x20fetching\x20community\x20data:',_0x291abd);if(commDataCache)return commDataCache;return{'members':[],'bannedUsers':[],'admins':[],'creatorId':'','name':'Unknown','banReasons':{}};}}function resetCommDataCache(){const _0x23bc96=_0x13cbff;commDataCache=null,lastFetchTime=0x0,console[_0x23bc96(0x1c9)](_0x23bc96(0xf2));}function debounce(_0x1ac4d0,_0x592e71){let _0x375354;return function(..._0x39aff6){clearTimeout(_0x375354),_0x375354=setTimeout(()=>_0x1ac4d0['apply'](this,_0x39aff6),_0x592e71);};}window[_0x13cbff(0x92)]=getCommData,window[_0x13cbff(0x11e)]=closeModal,window[_0x13cbff(0x9b)]=debounce,window['communitySearchPostsById']=searchPostsById,window['renderPosts']=renderPosts,window[_0x13cbff(0x35e)]=searchPostsById,window[_0x13cbff(0xc0)]=fetchUserData,window[_0x13cbff(0x1b3)]=getCachedUser,window[_0x13cbff(0x124)]=setCachedUser,window[_0x13cbff(0x250)]=fetchCurrentUserData,window[_0x13cbff(0x231)]=leaveCommunity,window[_0x13cbff(0xa2)]=debouncedLoadAdminReportSummary,window[_0x13cbff(0x1c4)]=delay,window['resetCommDataCache']=resetCommDataCache;
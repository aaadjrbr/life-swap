<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Life Swap Explore</title>
  <script type="module" src="./js/explore.js"></script>
  <link rel="stylesheet" href="./css/explore.css">
</head>
<body>
  <header>
    <h1><a href="./explore.html">Life Swap Explore</a></h1>
    <button onclick="openProfileEditor()">Edit Profile</button>
    <button onclick="logout()">Logout</button>
  </header>

  <main>
    <div id="notificationBell" onclick="viewNotifications()">
      <img class="notificationBell-img" src="https://cdn3d.iconscout.com/3d/premium/thumb/notification-bell-3d-icon-download-in-png-blend-fbx-gltf-file-formats--packard-reminder-user-interface-pack-icons-4884302.png?f=webp">
      <span id="notificationCount" class="hidden"></span>
    </div>
    
    <div id="notificationList" class="notification-list hidden">
      <!-- The button and notifications will be dynamically added here -->
    </div>
    


<!-- Your Posts Section -->
<section id="yourPostsContainer" class="hidden">
  <h3>Your Posts</h3>
  <div id="yourPosts"></div>
</section>
<button id="toggleYourPostsBtn" onclick="toggleYourPosts()">See Your Posts</button>


    <section id="offers">
      <h3>Your Offers</h3>
      <div id="yourOffers"></div>
      <h3>Offers You Received</h3>
      <div id="offersReceived"></div>
    </section>
    
    <!-- Post Creation Section -->
    <section id="createPost">
      <h3>Create a Post</h3>
      <form id="postForm">
        <input type="text" id="title" placeholder="Post title" required />
        <textarea id="description" placeholder="Post description" required></textarea>
        
        <!-- New Field: What You Need -->
        <textarea id="desiredTrade" placeholder="What are you looking for in return?" required></textarea>
        
        <!-- Post Type -->
        <select id="postType" required>
          <option value="" disabled selected>Select Type</option>
          <option value="item">Item</option>
          <option value="skill">Skill</option>
          <option value="time">Time</option>
        </select>
        
        <!-- Category -->
        <select id="category" required>
          <option value="" disabled selected>Select Category</option>
          <option value="clothing">Clothing</option>
          <option value="electronics">Electronics</option>
          <option value="furniture">Furniture</option>
          <option value="fitness">Fitness</option>
          <option value="food_and_groceries">Food and Groceries</option>
          <option value="home_and_garden">Home and Garden</option>
          <option value="personal_care">Personal Care</option>
          <option value="transportation">Transportation</option>
          <option value="entertainment">Entertainment</option>
          <option value="education">Education</option>
          <option value="finance">Finance</option>
          <option value="work_and_office">Work and Office</option>
          <option value="social_and_family">Social and Family</option>
          <option value="travel">Travel</option>
          <option value="health">Health</option>
          <option value="hobbies_and_interests">Hobbies and Interests</option>
          <option value="shopping">Shopping</option>
          <option value="cooking">Cooking</option>
          <option value="pets">Pets</option>
          <option value="beauty">Beauty</option>
          <option value="sports">Sports</option>
          <option value="technology">Technology</option>
          <option value="books">Books</option>
          <option value="music">Music</option>
          <option value="movies_and_tv">Movies and TV</option>
          <option value="photography">Photography</option>
          <option value="art_and_crafts">Art and Crafts</option>
          <option value="diy_projects">DIY Projects</option>
        </select>
        
        <!-- City and Distance -->
        <div class="city-autocomplete">
          <input type="text" id="city" placeholder="Type to search city" required />
          <div id="citySuggestions" class="suggestions-container"></div>
        </div>        
        <input type="number" id="distance" placeholder="Distance from city (miles)" />
        
        <!-- Hashtags -->
        <div>
          <input type="text" 
          id="hashtags" 
          placeholder="Type hashtags" 
          oninput="debouncedSuggestHashtags(this.value)" />
          <div id="hashtagSuggestions" class="suggestions-container"></div>
        </div>
    
        <!-- Images -->
        <input type="file" id="images" accept="image/*" multiple required />
        
        <button type="submit">Post</button>
      </form>
    </section>      

    <div id="filters">
      <select id="filterType">
        <option value="">All Types</option>
        <option value="item">Item</option>
        <option value="skill">Skill</option>
        <option value="time">Time</option>
      </select>

      <select id="filterCategory">
        <option value="" disabled selected>Select Category</option>
        <option value="clothing">Clothing</option>
        <option value="electronics">Electronics</option>
        <option value="furniture">Furniture</option>
        <option value="fitness">Fitness</option>
        <option value="food_and_groceries">Food and Groceries</option>
        <option value="home_and_garden">Home and Garden</option>
        <option value="personal_care">Personal Care</option>
        <option value="transportation">Transportation</option>
        <option value="entertainment">Entertainment</option>
        <option value="education">Education</option>
        <option value="finance">Finance</option>
        <option value="work_and_office">Work and Office</option>
        <option value="social_and_family">Social and Family</option>
        <option value="travel">Travel</option>
        <option value="health">Health</option>
        <option value="hobbies_and_interests">Hobbies and Interests</option>
        <option value="shopping">Shopping</option>
        <option value="cooking">Cooking</option>
        <option value="pets">Pets</option>
        <option value="beauty">Beauty</option>
        <option value="sports">Sports</option>
        <option value="technology">Technology</option>
        <option value="books">Books</option>
        <option value="music">Music</option>
        <option value="movies_and_tv">Movies and TV</option>
        <option value="photography">Photography</option>
        <option value="art_and_crafts">Art and Crafts</option>
        <option value="diy_projects">DIY Projects</option>
      </select>
      
      <div class="city-autocomplete">
        <input type="text" id="filterCity" placeholder="Type to search city" />
        <div id="filterCitySuggestions" class="suggestions-container"></div>
      </div>
      
      <input type="number" id="filterDistance" placeholder="Distance from city (miles)" />
      
      <input type="text" id="filterHashtag" placeholder="Filter by hashtag" />
      <button onclick="applyFilters()">Apply Filters</button> 
    </div>   

    <div id="appliedFilters" class="filter-bubbles">
      <!-- Applied filters will be dynamically added here -->
    </div>
    
    <form id="chat-form">
      <h2>Life Swap AI for recommendations</h2>
      <button id="clear-results" type="button" style="display: none;">Clear Results</button>
      <br/><br/>
      <input type="text" id="user-message" placeholder="Enter your message" required>
      <br/>
      <button type="submit">Search</button>
      <div id="response"></div>
    </form>
    
    
    

    <!-- Posts Section -->
    <section id="postsContainer">
      <h3>Explore Listings</h3>
      
      <!-- Pagination Controls -->
      <div id="paginationControls">
        <label for="postsPerPageSelector">Posts per page:</label>
        <select id="postsPerPageSelector">
          <option value="6" selected>6</option>
          <option value="12">12</option>
          <option value="20">20</option>
        </select>
      </div>
      
      <!-- Post Grid -->
      <div id="postGrid"></div>
      
      <!-- Pagination Navigation -->
      <div id="pagination" class="pagination-controls"></div>
    </section>
    
    <!-- Modal for Post Details -->
    <section id="modal" class="hidden">
      <div id="modalContent"></div>
    </section>

<!-- Profile Editing Modal -->
<section id="profileEditor" class="hidden">
  <h3>Edit Profile</h3>
  <form id="profileForm">
    <input type="text" id="userName" placeholder="Your Name" required />
    <textarea id="userBio" placeholder="Short Bio"></textarea>
    
    <!-- City Input with Suggestions -->
    <div class="city-autocomplete">
      <input type="text" id="profileCity" placeholder="Type to search city" />
      <div id="profileCitySuggestions" class="suggestions-container"></div>
    </div>
    
    <!-- New Field: Distance -->
    <input type="number" id="profileDistance" placeholder="Distance from city (miles)" />
    
    <input type="text" id="instagram" placeholder="Instagram (optional)" />
    <input type="text" id="phone" placeholder="Phone (optional)" />
    <input type="file" id="profilePhoto" accept="image/*" />
    <button type="submit">Save Profile</button>
    <button type="button" onclick="closeProfileEditor()">Cancel</button>
  </form>
</section>

    <!-- User Profile Modal -->
    <section id="userProfileModal" class="hidden">
      <div id="userProfileContent"></div>
    </section>

    <!-- Offer Swap Modal -->
<section id="offerSwapModal" class="hidden">
  <h3>Offer a Swap</h3>
  <p>Offering for: <span id="targetPostTitle"></span></p>
  <form id="offerSwapForm">
    <label for="offeredPost">Your Posts:</label>
    <select id="offeredPost" required></select>
    <textarea id="swapMessage" placeholder="Message (optional)"></textarea>
    <button type="submit">Send Offer</button>
    <button type="button" onclick="closeOfferSwap()">Cancel</button>
  </form>
</section>

<section id="chatModal" class="hidden">
  <div id="chatContainer"></div>
  <form id="chatForm">
    <input type="text" id="chatMessage" placeholder="Type a message..." required />
    <button type="submit">Send</button>
  </form>
  <button id="closeDealBtn" class="hidden" onclick="closeDeal()">Close Deal</button>
  <button onclick="closeChat()">Exit Chat</button>
</section>


<section id="ratingModal" class="hidden">
  <h3>Rate Your Experience</h3>
  <label for="rating">Rating (0-5):</label>
  <input type="number" id="rating" min="0" max="5" required />
  <textarea id="feedback" placeholder="Optional feedback"></textarea>
  <button onclick="submitRating()">Submit Rating</button>
  <button onclick="closeRatingModal()">Cancel</button>
</section>


  </main>


  <footer>
    <p>&copy; 2025 Life Swap</p>
  </footer>
</body>
</html>
